function JV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ZV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kw={exports:{}},Yh={};var yA;function e5(){if(yA)return Yh;yA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Yh.Fragment=e,Yh.jsx=n,Yh.jsxs=n,Yh}var vA;function t5(){return vA||(vA=1,Kw.exports=e5()),Kw.exports}var M=t5(),Gw={exports:{}},Mt={};var bA;function n5(){if(bA)return Mt;bA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function w(J){return J===null||typeof J!="object"?null:(J=v&&J[v]||J["@@iterator"],typeof J=="function"?J:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,_={};function O(J,Z,ye){this.props=J,this.context=Z,this.refs=_,this.updater=ye||S}O.prototype.isReactComponent={},O.prototype.setState=function(J,Z){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,Z,"setState")},O.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function B(){}B.prototype=O.prototype;function W(J,Z,ye){this.props=J,this.context=Z,this.refs=_,this.updater=ye||S}var L=W.prototype=new B;L.constructor=W,k(L,O.prototype),L.isPureReactComponent=!0;var q=Array.isArray;function U(){}var R={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function V(J,Z,ye){var Te=ye.ref;return{$$typeof:t,type:J,key:Z,ref:Te!==void 0?Te:null,props:ye}}function H(J,Z){return V(J.type,Z,J.props)}function G(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function Q(J){var Z={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(ye){return Z[ye]})}var K=/\/+/g;function je(J,Z){return typeof J=="object"&&J!==null&&J.key!=null?Q(""+J.key):Z.toString(36)}function Re(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(U,U):(J.status="pending",J.then(function(Z){J.status==="pending"&&(J.status="fulfilled",J.value=Z)},function(Z){J.status==="pending"&&(J.status="rejected",J.reason=Z)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function oe(J,Z,ye,Te,Oe){var Ue=typeof J;(Ue==="undefined"||Ue==="boolean")&&(J=null);var $e=!1;if(J===null)$e=!0;else switch(Ue){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(J.$$typeof){case t:case e:$e=!0;break;case h:return $e=J._init,oe($e(J._payload),Z,ye,Te,Oe)}}if($e)return Oe=Oe(J),$e=Te===""?"."+je(J,0):Te,q(Oe)?(ye="",$e!=null&&(ye=$e.replace(K,"$&/")+"/"),oe(Oe,Z,ye,"",function(tn){return tn})):Oe!=null&&(G(Oe)&&(Oe=H(Oe,ye+(Oe.key==null||J&&J.key===Oe.key?"":(""+Oe.key).replace(K,"$&/")+"/")+$e)),Z.push(Oe)),1;$e=0;var bt=Te===""?".":Te+":";if(q(J))for(var ze=0;ze<J.length;ze++)Te=J[ze],Ue=bt+je(Te,ze),$e+=oe(Te,Z,ye,Ue,Oe);else if(ze=w(J),typeof ze=="function")for(J=ze.call(J),ze=0;!(Te=J.next()).done;)Te=Te.value,Ue=bt+je(Te,ze++),$e+=oe(Te,Z,ye,Ue,Oe);else if(Ue==="object"){if(typeof J.then=="function")return oe(Re(J),Z,ye,Te,Oe);throw Z=String(J),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return $e}function Ee(J,Z,ye){if(J==null)return J;var Te=[],Oe=0;return oe(J,Te,"","",function(Ue){return Z.call(ye,Ue,Oe++)}),Te}function ve(J){if(J._status===-1){var Z=J._result;Z=Z(),Z.then(function(ye){(J._status===0||J._status===-1)&&(J._status=1,J._result=ye)},function(ye){(J._status===0||J._status===-1)&&(J._status=2,J._result=ye)}),J._status===-1&&(J._status=0,J._result=Z)}if(J._status===1)return J._result.default;throw J._result}var Qe=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},Ze={map:Ee,forEach:function(J,Z,ye){Ee(J,function(){Z.apply(this,arguments)},ye)},count:function(J){var Z=0;return Ee(J,function(){Z++}),Z},toArray:function(J){return Ee(J,function(Z){return Z})||[]},only:function(J){if(!G(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Mt.Activity=m,Mt.Children=Ze,Mt.Component=O,Mt.Fragment=n,Mt.Profiler=i,Mt.PureComponent=W,Mt.StrictMode=r,Mt.Suspense=u,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(J){return R.H.useMemoCache(J)}},Mt.cache=function(J){return function(){return J.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(J,Z,ye){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Te=k({},J.props),Oe=J.key;if(Z!=null)for(Ue in Z.key!==void 0&&(Oe=""+Z.key),Z)!P.call(Z,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&Z.ref===void 0||(Te[Ue]=Z[Ue]);var Ue=arguments.length-2;if(Ue===1)Te.children=ye;else if(1<Ue){for(var $e=Array(Ue),bt=0;bt<Ue;bt++)$e[bt]=arguments[bt+2];Te.children=$e}return V(J.type,Oe,Te)},Mt.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:s,_context:J},J},Mt.createElement=function(J,Z,ye){var Te,Oe={},Ue=null;if(Z!=null)for(Te in Z.key!==void 0&&(Ue=""+Z.key),Z)P.call(Z,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Oe[Te]=Z[Te]);var $e=arguments.length-2;if($e===1)Oe.children=ye;else if(1<$e){for(var bt=Array($e),ze=0;ze<$e;ze++)bt[ze]=arguments[ze+2];Oe.children=bt}if(J&&J.defaultProps)for(Te in $e=J.defaultProps,$e)Oe[Te]===void 0&&(Oe[Te]=$e[Te]);return V(J,Ue,Oe)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(J){return{$$typeof:c,render:J}},Mt.isValidElement=G,Mt.lazy=function(J){return{$$typeof:h,_payload:{_status:-1,_result:J},_init:ve}},Mt.memo=function(J,Z){return{$$typeof:d,type:J,compare:Z===void 0?null:Z}},Mt.startTransition=function(J){var Z=R.T,ye={};R.T=ye;try{var Te=J(),Oe=R.S;Oe!==null&&Oe(ye,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(U,Qe)}catch(Ue){Qe(Ue)}finally{Z!==null&&ye.types!==null&&(Z.types=ye.types),R.T=Z}},Mt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Mt.use=function(J){return R.H.use(J)},Mt.useActionState=function(J,Z,ye){return R.H.useActionState(J,Z,ye)},Mt.useCallback=function(J,Z){return R.H.useCallback(J,Z)},Mt.useContext=function(J){return R.H.useContext(J)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(J,Z){return R.H.useDeferredValue(J,Z)},Mt.useEffect=function(J,Z){return R.H.useEffect(J,Z)},Mt.useEffectEvent=function(J){return R.H.useEffectEvent(J)},Mt.useId=function(){return R.H.useId()},Mt.useImperativeHandle=function(J,Z,ye){return R.H.useImperativeHandle(J,Z,ye)},Mt.useInsertionEffect=function(J,Z){return R.H.useInsertionEffect(J,Z)},Mt.useLayoutEffect=function(J,Z){return R.H.useLayoutEffect(J,Z)},Mt.useMemo=function(J,Z){return R.H.useMemo(J,Z)},Mt.useOptimistic=function(J,Z){return R.H.useOptimistic(J,Z)},Mt.useReducer=function(J,Z,ye){return R.H.useReducer(J,Z,ye)},Mt.useRef=function(J){return R.H.useRef(J)},Mt.useState=function(J){return R.H.useState(J)},Mt.useSyncExternalStore=function(J,Z,ye){return R.H.useSyncExternalStore(J,Z,ye)},Mt.useTransition=function(){return R.H.useTransition()},Mt.version="19.2.3",Mt}var wA;function um(){return wA||(wA=1,Gw.exports=n5()),Gw.exports}var z=um();const Be=WE(z),KE=JV({__proto__:null,default:Be},[z]);var Yw={exports:{}},Qh={},Qw={exports:{}},Xw={};var xA;function r5(){return xA||(xA=1,(function(t){function e(oe,Ee){var ve=oe.length;oe.push(Ee);e:for(;0<ve;){var Qe=ve-1>>>1,Ze=oe[Qe];if(0<i(Ze,Ee))oe[Qe]=Ee,oe[ve]=Ze,ve=Qe;else break e}}function n(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var Ee=oe[0],ve=oe.pop();if(ve!==Ee){oe[0]=ve;e:for(var Qe=0,Ze=oe.length,J=Ze>>>1;Qe<J;){var Z=2*(Qe+1)-1,ye=oe[Z],Te=Z+1,Oe=oe[Te];if(0>i(ye,ve))Te<Ze&&0>i(Oe,ye)?(oe[Qe]=Oe,oe[Te]=ve,Qe=Te):(oe[Qe]=ye,oe[Z]=ve,Qe=Z);else if(Te<Ze&&0>i(Oe,ve))oe[Qe]=Oe,oe[Te]=ve,Qe=Te;else break e}}return Ee}function i(oe,Ee){var ve=oe.sortIndex-Ee.sortIndex;return ve!==0?ve:oe.id-Ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,m=null,v=3,w=!1,S=!1,k=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function L(oe){for(var Ee=n(d);Ee!==null;){if(Ee.callback===null)r(d);else if(Ee.startTime<=oe)r(d),Ee.sortIndex=Ee.expirationTime,e(u,Ee);else break;Ee=n(d)}}function q(oe){if(k=!1,L(oe),!S)if(n(u)!==null)S=!0,U||(U=!0,Q());else{var Ee=n(d);Ee!==null&&Re(q,Ee.startTime-oe)}}var U=!1,R=-1,P=5,V=-1;function H(){return _?!0:!(t.unstable_now()-V<P)}function G(){if(_=!1,U){var oe=t.unstable_now();V=oe;var Ee=!0;try{e:{S=!1,k&&(k=!1,B(R),R=-1),w=!0;var ve=v;try{t:{for(L(oe),m=n(u);m!==null&&!(m.expirationTime>oe&&H());){var Qe=m.callback;if(typeof Qe=="function"){m.callback=null,v=m.priorityLevel;var Ze=Qe(m.expirationTime<=oe);if(oe=t.unstable_now(),typeof Ze=="function"){m.callback=Ze,L(oe),Ee=!0;break t}m===n(u)&&r(u),L(oe)}else r(u);m=n(u)}if(m!==null)Ee=!0;else{var J=n(d);J!==null&&Re(q,J.startTime-oe),Ee=!1}}break e}finally{m=null,v=ve,w=!1}Ee=void 0}}finally{Ee?Q():U=!1}}}var Q;if(typeof W=="function")Q=function(){W(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,je=K.port2;K.port1.onmessage=G,Q=function(){je.postMessage(null)}}else Q=function(){O(G,0)};function Re(oe,Ee){R=O(function(){oe(t.unstable_now())},Ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(oe){switch(v){case 1:case 2:case 3:var Ee=3;break;default:Ee=v}var ve=v;v=Ee;try{return oe()}finally{v=ve}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(oe,Ee){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ve=v;v=oe;try{return Ee()}finally{v=ve}},t.unstable_scheduleCallback=function(oe,Ee,ve){var Qe=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Qe+ve:Qe):ve=Qe,oe){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=ve+Ze,oe={id:h++,callback:Ee,priorityLevel:oe,startTime:ve,expirationTime:Ze,sortIndex:-1},ve>Qe?(oe.sortIndex=ve,e(d,oe),n(u)===null&&oe===n(d)&&(k?(B(R),R=-1):k=!0,Re(q,ve-Qe))):(oe.sortIndex=Ze,e(u,oe),S||w||(S=!0,U||(U=!0,Q()))),oe},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(oe){var Ee=v;return function(){var ve=v;v=Ee;try{return oe.apply(this,arguments)}finally{v=ve}}}})(Xw)),Xw}var EA;function i5(){return EA||(EA=1,Qw.exports=r5()),Qw.exports}var Jw={exports:{}},gi={};var SA;function s5(){if(SA)return gi;SA=1;var t=um();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:d,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return gi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gi.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,h)},gi.flushSync=function(u){var d=a.T,h=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=d,r.p=h,r.d.f()}},gi.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},gi.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},gi.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):h==="script"&&r.d.X(u,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},gi.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},gi.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},gi.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},gi.requestFormReset=function(u){r.d.r(u)},gi.unstable_batchedUpdates=function(u,d){return u(d)},gi.useFormState=function(u,d,h){return a.H.useFormState(u,d,h)},gi.useFormStatus=function(){return a.H.useHostTransitionStatus()},gi.version="19.2.3",gi}var _A;function vD(){if(_A)return Jw.exports;_A=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jw.exports=s5(),Jw.exports}var TA;function o5(){if(TA)return Qh;TA=1;var t=i5(),e=um(),n=vD();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function d(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var f=o,p=l;;){var b=f.return;if(b===null)break;var E=b.alternate;if(E===null){if(p=b.return,p!==null){f=p;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===f)return u(b),o;if(E===p)return u(b),l;E=E.sibling}throw Error(r(188))}if(f.return!==p.return)f=b,p=E;else{for(var N=!1,F=b.child;F;){if(F===f){N=!0,f=b,p=E;break}if(F===p){N=!0,p=b,f=E;break}F=F.sibling}if(!N){for(F=E.child;F;){if(F===f){N=!0,f=E,p=b;break}if(F===p){N=!0,p=E,f=b;break}F=F.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),W=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var K=Symbol.for("react.client.reference");function je(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===K?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case q:return"Suspense";case U:return"SuspenseList";case V:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case W:return o.displayName||"Context";case B:return(o._context.displayName||"Context")+".Consumer";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case R:return l=o.displayName||null,l!==null?l:je(o.type)||"Memo";case P:l=o._payload,o=o._init;try{return je(o(l))}catch{}}return null}var Re=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Qe=[],Ze=-1;function J(o){return{current:o}}function Z(o){0>Ze||(o.current=Qe[Ze],Qe[Ze]=null,Ze--)}function ye(o,l){Ze++,Qe[Ze]=o.current,o.current=l}var Te=J(null),Oe=J(null),Ue=J(null),$e=J(null);function bt(o,l){switch(ye(Ue,l),ye(Oe,o),ye(Te,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?BC(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=BC(l),o=UC(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Z(Te),ye(Te,o)}function ze(){Z(Te),Z(Oe),Z(Ue)}function tn(o){o.memoizedState!==null&&ye($e,o);var l=Te.current,f=UC(l,o.type);l!==f&&(ye(Oe,o),ye(Te,f))}function Bn(o){Oe.current===o&&(Z(Te),Z(Oe)),$e.current===o&&(Z($e),$h._currentValue=ve)}var Tt,gr;function Ir(o){if(Tt===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Tt=l&&l[1]||"",gr=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+o+gr}var ar=!1;function Xr(o,l){if(!o||ar)return"";ar=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(_e){var we=_e}Reflect.construct(o,[],Ie)}else{try{Ie.call()}catch(_e){we=_e}o.call(Ie.prototype)}}else{try{throw Error()}catch(_e){we=_e}(Ie=o())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(_e){if(_e&&we&&typeof _e.stack=="string")return[_e.stack,we.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),N=E[0],F=E[1];if(N&&F){var ee=N.split(`
`),ge=F.split(`
`);for(b=p=0;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;for(;b<ge.length&&!ge[b].includes("DetermineComponentFrameRoot");)b++;if(p===ee.length||b===ge.length)for(p=ee.length-1,b=ge.length-1;1<=p&&0<=b&&ee[p]!==ge[b];)b--;for(;1<=p&&0<=b;p--,b--)if(ee[p]!==ge[b]){if(p!==1||b!==1)do if(p--,b--,0>b||ee[p]!==ge[b]){var Me=`
`+ee[p].replace(" at new "," at ");return o.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",o.displayName)),Me}while(1<=p&&0<=b);break}}}finally{ar=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Ir(f):""}function Ti(o,l){switch(o.tag){case 26:case 27:case 5:return Ir(o.type);case 16:return Ir("Lazy");case 13:return o.child!==l&&l!==null?Ir("Suspense Fallback"):Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 15:return Xr(o.type,!1);case 11:return Xr(o.type.render,!1);case 1:return Xr(o.type,!0);case 31:return Ir("Activity");default:return""}}function Li(o){try{var l="",f=null;do l+=Ti(o,f),f=o,o=o.return;while(o);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var hn=Object.prototype.hasOwnProperty,Xt=t.unstable_scheduleCallback,un=t.unstable_cancelCallback,zi=t.unstable_shouldYield,lr=t.unstable_requestPaint,xn=t.unstable_now,er=t.unstable_getCurrentPriorityLevel,yr=t.unstable_ImmediatePriority,vr=t.unstable_UserBlockingPriority,Pr=t.unstable_NormalPriority,cs=t.unstable_LowPriority,Is=t.unstable_IdlePriority,us=t.log,fi=t.unstable_setDisableYieldValue,br=null,Se=null;function Ye(o){if(typeof us=="function"&&fi(o),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(br,o)}catch{}}var Ce=Math.clz32?Math.clz32:rt,Nt=Math.log,wt=Math.LN2;function rt(o){return o>>>=0,o===0?32:31-(Nt(o)/wt|0)|0}var Ae=256,st=262144,ut=4194304;function $t(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function yt(o,l,f){var p=o.pendingLanes;if(p===0)return 0;var b=0,E=o.suspendedLanes,N=o.pingedLanes;o=o.warmLanes;var F=p&134217727;return F!==0?(p=F&~E,p!==0?b=$t(p):(N&=F,N!==0?b=$t(N):f||(f=F&~o,f!==0&&(b=$t(f))))):(F=p&~E,F!==0?b=$t(F):N!==0?b=$t(N):f||(f=p&~o,f!==0&&(b=$t(f)))),b===0?0:l!==0&&l!==b&&(l&E)===0&&(E=b&-b,f=l&-l,E>=f||E===32&&(f&4194048)!==0)?l:b}function tr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function ji(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bo(){var o=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),o}function Nn(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function qn(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function su(o,l,f,p,b,E){var N=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var F=o.entanglements,ee=o.expirationTimes,ge=o.hiddenUpdates;for(f=N&~f;0<f;){var Me=31-Ce(f),Ie=1<<Me;F[Me]=0,ee[Me]=-1;var we=ge[Me];if(we!==null)for(ge[Me]=null,Me=0;Me<we.length;Me++){var _e=we[Me];_e!==null&&(_e.lane&=-536870913)}f&=~Ie}p!==0&&Ps(o,p,0),E!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=E&~(N&~l))}function Ps(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var p=31-Ce(l);o.entangledLanes|=l,o.entanglements[p]=o.entanglements[p]|1073741824|f&261930}function fn(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var p=31-Ce(f),b=1<<p;b&l|o[p]&l&&(o[p]|=l),f&=~b}}function Un(o,l){var f=l&-l;return f=(f&42)!==0?1:ka(f),(f&(o.suspendedLanes|l))!==0?0:f}function ka(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Vi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ca(){var o=Ee.p;return o!==0?o:(o=window.event,o===void 0?32:uA(o.type))}function di(o,l){var f=Ee.p;try{return Ee.p=o,l()}finally{Ee.p=f}}var fs=Math.random().toString(36).slice(2),pn="__reactFiber$"+fs,Dn="__reactProps$"+fs,Lr="__reactContainer$"+fs,po="__reactEvents$"+fs,hh="__reactListeners$"+fs,ds="__reactHandles$"+fs,ou="__reactResources$"+fs,Ur="__reactMarker$"+fs;function Aa(o){delete o[pn],delete o[Dn],delete o[po],delete o[hh],delete o[ds]}function Bi(o){var l=o[pn];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Lr]||f[pn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=GC(o);o!==null;){if(f=o[pn])return f;o=GC(o)}return l}o=f,f=o.parentNode}return null}function nn(o){if(o=o[pn]||o[Lr]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function cr(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function wr(o){var l=o[ou];return l||(l=o[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function $n(o){o[Ur]=!0}var Ls=new Set,Uo={};function Ui(o,l){Fi(o,l),Fi(o+"Capture",l)}function Fi(o,l){for(Uo[o]=l,o=0;o<l.length;o++)Ls.add(l[o])}var hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cl={},Fo={};function au(o){return hn.call(Fo,o)?!0:hn.call(Cl,o)?!1:hs.test(o)?Fo[o]=!0:(Cl[o]=!0,!1)}function Dt(o,l,f){if(au(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function hi(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function Wn(o,l,f,p){if(p===null)o.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+p)}}function Kn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Hi(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Al(o,l,f){var p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,E=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return b.call(this)},set:function(N){f=""+N,E.call(this,N)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function on(o){if(!o._valueTracker){var l=Hi(o)?"checked":"value";o._valueTracker=Al(o,l,""+o[l])}}function Ho(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return o&&(p=Hi(o)?o.checked?"true":"false":o.value),o=p,o!==f?(l.setValue(o),!0):!1}function Ft(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ps=/[\n"\\]/g;function xr(o){return o.replace(ps,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ms(o,l,f,p,b,E,N,F){o.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.type=N:o.removeAttribute("type"),l!=null?N==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Kn(l)):o.value!==""+Kn(l)&&(o.value=""+Kn(l)):N!=="submit"&&N!=="reset"||o.removeAttribute("value"),l!=null?Oa(o,N,Kn(l)):f!=null?Oa(o,N,Kn(f)):p!=null&&o.removeAttribute("value"),b==null&&E!=null&&(o.defaultChecked=!!E),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?o.name=""+Kn(F):o.removeAttribute("name")}function Ol(o,l,f,p,b,E,N,F){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),l!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||l!=null)){on(o);return}f=f!=null?""+Kn(f):"",l=l!=null?""+Kn(l):f,F||l===o.value||(o.value=l),o.defaultValue=l}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=F?o.checked:!!p,o.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.name=N),on(o)}function Oa(o,l,f){l==="number"&&Ft(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function gs(o,l,f,p){if(o=o.options,l){l={};for(var b=0;b<f.length;b++)l["$"+f[b]]=!0;for(f=0;f<o.length;f++)b=l.hasOwnProperty("$"+o[f].value),o[f].selected!==b&&(o[f].selected=b),b&&p&&(o[f].defaultSelected=!0)}else{for(f=""+Kn(f),l=null,b=0;b<o.length;b++){if(o[b].value===f){o[b].selected=!0,p&&(o[b].defaultSelected=!0);return}l!==null||o[b].disabled||(l=o[b])}l!==null&&(l.selected=!0)}}function lu(o,l,f){if(l!=null&&(l=""+Kn(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+Kn(f):""}function ys(o,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(Re(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=Kn(l),o.defaultValue=f,p=o.textContent,p===f&&p!==""&&p!==null&&(o.value=p),on(o)}function Jr(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var vf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ut(o,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":p?o.setProperty(l,f):typeof f!="number"||f===0||vf.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function Ml(o,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var b in l)p=l[b],l.hasOwnProperty(b)&&f[b]!==p&&Ut(o,b,p)}else for(var E in l)l.hasOwnProperty(E)&&Ut(o,E,l[E])}function Rl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vs(o){return nr.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function pi(){}var qi=null;function ki(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var mo=null,mn=null;function Fr(o){var l=nn(o);if(l&&(o=l.stateNode)){var f=o[Dn]||null;e:switch(o=l.stateNode,l.type){case"input":if(ms(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+xr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==o&&p.form===o.form){var b=p[Dn]||null;if(!b)throw Error(r(90));ms(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===o.form&&Ho(p)}break e;case"textarea":lu(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&gs(o,!!f.multiple,l,!1)}}}var zs=!1;function $i(o,l,f){if(zs)return o(l,f);zs=!0;try{var p=o(l);return p}finally{if(zs=!1,(mo!==null||mn!==null)&&(wg(),mo&&(l=mo,o=mn,mn=mo=null,Fr(l),o)))for(l=0;l<o.length;l++)Fr(o[l])}}function Ci(o,l){var f=o.stateNode;if(f===null)return null;var p=f[Dn]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(ur)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Ma=!1}var Wi=null,Nl=null,go=null;function yo(){if(go)return go;var o,l=Nl,f=l.length,p,b="value"in Wi?Wi.value:Wi.textContent,E=b.length;for(o=0;o<f&&l[o]===b[o];o++);var N=f-o;for(p=1;p<=N&&l[f-p]===b[E-p];p++);return go=b.slice(o,1<p?1-p:void 0)}function vo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function js(){return!0}function bs(){return!1}function Gn(o){function l(f,p,b,E,N){this._reactName=f,this._targetInst=b,this.type=p,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(f=o[F],this[F]=f?f(E):E[F]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?js:bs,this.isPropagationStopped=bs,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),l}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=Gn(bo),ws=m({},bo,{view:0,detail:0}),qo=Gn(ws),Bs,Dl,Us,Il=m({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Us&&(Us&&o.type==="mousemove"?(Bs=o.screenX-Us.screenX,Dl=o.screenY-Us.screenY):Dl=Bs=0,Us=o),Bs)},movementY:function(o){return"movementY"in o?o.movementY:Dl}}),Ra=Gn(Il),wo=m({},Il,{dataTransfer:0}),cu=Gn(wo),Na=m({},ws,{relatedTarget:0}),Fs=Gn(Na),$o=m({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=Gn($o),Pl=m({},bo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xo=Gn(Pl),Ll=m({},bo,{data:0}),Ki=Gn(Ll),zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=fr[o])?!!l[o]:!1}function Gi(){return Wo}var Hr=m({},ws,{key:function(o){if(o.key){var l=zl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=vo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jl[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(o){return o.type==="keypress"?vo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?vo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Da=Gn(Hr),fu=m({},Il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hs=Gn(fu),g=m({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),C=Gn(g),D=m({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=Gn(D),he=m({},Il,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Gn(he),Ke=m({},bo,{newState:0,oldState:0}),At=Gn(Ke),Yn=[9,13,27,32],Jt=ur&&"CompositionEvent"in window,gn=null;ur&&"documentMode"in document&&(gn=document.documentMode);var Yi=ur&&"TextEvent"in window&&!gn,Qi=ur&&(!Jt||gn&&8<gn&&11>=gn),Ai=" ",xs=!1;function Ko(o,l){switch(o){case"keyup":return Yn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ia=!1;function Bm(o,l){switch(o){case"compositionend":return Vl(l);case"keypress":return l.which!==32?null:(xs=!0,Ai);case"textInput":return o=l.data,o===Ai&&xs?null:o;default:return null}}function ab(o,l){if(Ia)return o==="compositionend"||!Jt&&Ko(o,l)?(o=yo(),go=Nl=Wi=null,Ia=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Qi&&l.locale!=="ko"?null:l.data;default:return null}}var Um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Um[o.type]:l==="textarea"}function ph(o,l,f,p){mo?mn?mn.push(p):mn=[p]:mo=p,l=Cg(l,"onChange"),0<l.length&&(f=new Vs("onChange","change",null,f,p),o.push({event:f,listeners:l}))}var Bl=null,du=null;function lb(o){IC(o,0)}function xf(o){var l=cr(o);if(Ho(l))return o}function hu(o,l){if(o==="change")return l}var qs=!1;if(ur){var In;if(ur){var Ul="oninput"in document;if(!Ul){var Oi=document.createElement("div");Oi.setAttribute("oninput","return;"),Ul=typeof Oi.oninput=="function"}In=Ul}else In=!1;qs=In&&(!document.documentMode||9<document.documentMode)}function Fm(){Bl&&(Bl.detachEvent("onpropertychange",Ef),du=Bl=null)}function Ef(o){if(o.propertyName==="value"&&xf(du)){var l=[];ph(l,du,o,ki(o)),$i(lb,l)}}function Hm(o,l,f){o==="focusin"?(Fm(),Bl=l,du=f,Bl.attachEvent("onpropertychange",Ef)):o==="focusout"&&Fm()}function Pa(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return xf(du)}function mh(o,l){if(o==="click")return xf(l)}function Fl(o,l){if(o==="input"||o==="change")return xf(l)}function Go(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var mi=typeof Object.is=="function"?Object.is:Go;function y(o,l){if(mi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var b=f[p];if(!hn.call(l,b)||!mi(o[b],l[b]))return!1}return!0}function x(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function T(o,l){var f=x(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=l&&p>=l)return{node:f,offset:l-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=x(f)}}function A(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?A(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function I(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ft(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=Ft(o.document)}return l}function j(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var Y=ur&&"documentMode"in document&&11>=document.documentMode,X=null,ne=null,re=null,ce=!1;function te(o,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ce||X==null||X!==Ft(p)||(p=X,"selectionStart"in p&&j(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),re&&y(re,p)||(re=p,p=Cg(ne,"onSelect"),0<p.length&&(l=new Vs("onSelect","select",null,l,f),o.push({event:l,listeners:p}),l.target=X)))}function fe(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var ie={animationend:fe("Animation","AnimationEnd"),animationiteration:fe("Animation","AnimationIteration"),animationstart:fe("Animation","AnimationStart"),transitionrun:fe("Transition","TransitionRun"),transitionstart:fe("Transition","TransitionStart"),transitioncancel:fe("Transition","TransitionCancel"),transitionend:fe("Transition","TransitionEnd")},ae={},le={};ur&&(le=document.createElement("div").style,"AnimationEvent"in window||(delete ie.animationend.animation,delete ie.animationiteration.animation,delete ie.animationstart.animation),"TransitionEvent"in window||delete ie.transitionend.transition);function ue(o){if(ae[o])return ae[o];if(!ie[o])return o;var l=ie[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in le)return ae[o]=l[f];return o}var pe=ue("animationend"),be=ue("animationiteration"),ke=ue("animationstart"),De=ue("transitionrun"),We=ue("transitionstart"),Je=ue("transitioncancel"),Fe=ue("transitionend"),Ge=new Map,Xe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xe.push("scrollEnd");function He(o,l){Ge.set(o,l),Ui(l,[o])}var tt=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},dt=[],kt=0,It=0;function qr(){for(var o=kt,l=It=kt=0;l<o;){var f=dt[l];dt[l++]=null;var p=dt[l];dt[l++]=null;var b=dt[l];dt[l++]=null;var E=dt[l];if(dt[l++]=null,p!==null&&b!==null){var N=p.pending;N===null?b.next=b:(b.next=N.next,N.next=b),p.pending=b}E!==0&&pu(f,b,E)}}function St(o,l,f,p){dt[kt++]=o,dt[kt++]=l,dt[kt++]=f,dt[kt++]=p,It|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Er(o,l,f,p){return St(o,l,f,p),Sr(o)}function Fn(o,l){return St(o,null,null,l),Sr(o)}function pu(o,l,f){o.lanes|=f;var p=o.alternate;p!==null&&(p.lanes|=f);for(var b=!1,E=o.return;E!==null;)E.childLanes|=f,p=E.alternate,p!==null&&(p.childLanes|=f),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(b=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,b&&l!==null&&(b=31-Ce(f),o=E.hiddenUpdates,p=o[b],p===null?o[b]=[l]:p.push(l),l.lane=f|536870912),E):null}function Sr(o){if(50<jh)throw jh=0,yw=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Xi={};function gh(o,l,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(o,l,f,p){return new gh(o,l,f,p)}function cb(o){return o=o.prototype,!(!o||!o.isReactComponent)}function La(o,l){var f=o.alternate;return f===null?(f=Es(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function gT(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function qm(o,l,f,p,b,E){var N=0;if(p=o,typeof o=="function")cb(o)&&(N=1);else if(typeof o=="string")N=BV(o,f,Te.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case V:return o=Es(31,f,l,b),o.elementType=V,o.lanes=E,o;case k:return mu(f.children,b,E,l);case _:N=8,b|=24;break;case O:return o=Es(12,f,l,b|2),o.elementType=O,o.lanes=E,o;case q:return o=Es(13,f,l,b),o.elementType=q,o.lanes=E,o;case U:return o=Es(19,f,l,b),o.elementType=U,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case W:N=10;break e;case B:N=9;break e;case L:N=11;break e;case R:N=14;break e;case P:N=16,p=null;break e}N=29,f=Error(r(130,o===null?"null":typeof o,"")),p=null}return l=Es(N,f,l,b),l.elementType=o,l.type=p,l.lanes=E,l}function mu(o,l,f,p){return o=Es(7,o,p,l),o.lanes=f,o}function ub(o,l,f){return o=Es(6,o,null,l),o.lanes=f,o}function yT(o){var l=Es(18,null,null,0);return l.stateNode=o,l}function fb(o,l,f){return l=Es(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var vT=new WeakMap;function $s(o,l){if(typeof o=="object"&&o!==null){var f=vT.get(o);return f!==void 0?f:(l={value:o,source:l,stack:Li(l)},vT.set(o,l),l)}return{value:o,source:l,stack:Li(l)}}var Sf=[],_f=0,$m=null,yh=0,Ws=[],Ks=0,Hl=null,Yo=1,Qo="";function za(o,l){Sf[_f++]=yh,Sf[_f++]=$m,$m=o,yh=l}function bT(o,l,f){Ws[Ks++]=Yo,Ws[Ks++]=Qo,Ws[Ks++]=Hl,Hl=o;var p=Yo;o=Qo;var b=32-Ce(p)-1;p&=~(1<<b),f+=1;var E=32-Ce(l)+b;if(30<E){var N=b-b%5;E=(p&(1<<N)-1).toString(32),p>>=N,b-=N,Yo=1<<32-Ce(l)+b|f<<b|p,Qo=E+o}else Yo=1<<E|f<<b|p,Qo=o}function db(o){o.return!==null&&(za(o,1),bT(o,1,0))}function hb(o){for(;o===$m;)$m=Sf[--_f],Sf[_f]=null,yh=Sf[--_f],Sf[_f]=null;for(;o===Hl;)Hl=Ws[--Ks],Ws[Ks]=null,Qo=Ws[--Ks],Ws[Ks]=null,Yo=Ws[--Ks],Ws[Ks]=null}function wT(o,l){Ws[Ks++]=Yo,Ws[Ks++]=Qo,Ws[Ks++]=Hl,Yo=l.id,Qo=l.overflow,Hl=o}var Zr=null,Pn=null,Zt=!1,ql=null,Gs=!1,pb=Error(r(519));function $l(o){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vh($s(l,o)),pb}function xT(o){var l=o.stateNode,f=o.type,p=o.memoizedProps;switch(l[pn]=o,l[Dn]=p,f){case"dialog":qt("cancel",l),qt("close",l);break;case"iframe":case"object":case"embed":qt("load",l);break;case"video":case"audio":for(f=0;f<Bh.length;f++)qt(Bh[f],l);break;case"source":qt("error",l);break;case"img":case"image":case"link":qt("error",l),qt("load",l);break;case"details":qt("toggle",l);break;case"input":qt("invalid",l),Ol(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":qt("invalid",l);break;case"textarea":qt("invalid",l),ys(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||jC(l.textContent,f)?(p.popover!=null&&(qt("beforetoggle",l),qt("toggle",l)),p.onScroll!=null&&qt("scroll",l),p.onScrollEnd!=null&&qt("scrollend",l),p.onClick!=null&&(l.onclick=pi),l=!0):l=!1,l||$l(o,!0)}function ET(o){for(Zr=o.return;Zr;)switch(Zr.tag){case 5:case 31:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:Zr=Zr.return}}function Tf(o){if(o!==Zr)return!1;if(!Zt)return ET(o),Zt=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Nw(o.type,o.memoizedProps)),f=!f),f&&Pn&&$l(o),ET(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Pn=KC(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Pn=KC(o)}else l===27?(l=Pn,sc(o.type)?(o=zw,zw=null,Pn=o):Pn=l):Pn=Zr?Qs(o.stateNode.nextSibling):null;return!0}function gu(){Pn=Zr=null,Zt=!1}function mb(){var o=ql;return o!==null&&(ts===null?ts=o:ts.push.apply(ts,o),ql=null),o}function vh(o){ql===null?ql=[o]:ql.push(o)}var gb=J(null),yu=null,ja=null;function Wl(o,l,f){ye(gb,l._currentValue),l._currentValue=f}function Va(o){o._currentValue=gb.current,Z(gb)}function yb(o,l,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===f)break;o=o.return}}function vb(o,l,f,p){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var E=b.dependencies;if(E!==null){var N=b.child;E=E.firstContext;e:for(;E!==null;){var F=E;E=b;for(var ee=0;ee<l.length;ee++)if(F.context===l[ee]){E.lanes|=f,F=E.alternate,F!==null&&(F.lanes|=f),yb(E.return,f,o),p||(N=null);break e}E=F.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(r(341));N.lanes|=f,E=N.alternate,E!==null&&(E.lanes|=f),yb(N,f,o),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===o){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function kf(o,l,f,p){o=null;for(var b=l,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var F=b.type;mi(b.pendingProps.value,N.value)||(o!==null?o.push(F):o=[F])}}else if(b===$e.current){if(N=b.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push($h):o=[$h])}b=b.return}o!==null&&vb(l,o,f,p),l.flags|=262144}function Wm(o){for(o=o.firstContext;o!==null;){if(!mi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function vu(o){yu=o,ja=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ei(o){return ST(yu,o)}function Km(o,l){return yu===null&&vu(o),ST(o,l)}function ST(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ja===null){if(o===null)throw Error(r(308));ja=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ja=ja.next=l;return f}var Lj=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,p){o.push(p)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},zj=t.unstable_scheduleCallback,jj=t.unstable_NormalPriority,_r={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bb(){return{controller:new Lj,data:new Map,refCount:0}}function bh(o){o.refCount--,o.refCount===0&&zj(jj,function(){o.controller.abort()})}var wh=null,wb=0,Cf=0,Af=null;function Vj(o,l){if(wh===null){var f=wh=[];wb=0,Cf=Sw(),Af={status:"pending",value:void 0,then:function(p){f.push(p)}}}return wb++,l.then(_T,_T),l}function _T(){if(--wb===0&&wh!==null){Af!==null&&(Af.status="fulfilled");var o=wh;wh=null,Cf=0,Af=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function Bj(o,l){var f=[],p={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return o.then(function(){p.status="fulfilled",p.value=l;for(var b=0;b<f.length;b++)(0,f[b])(l)},function(b){for(p.status="rejected",p.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),p}var TT=oe.S;oe.S=function(o,l){lC=xn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Vj(o,l),TT!==null&&TT(o,l)};var bu=J(null);function xb(){var o=bu.current;return o!==null?o:kn.pooledCache}function Gm(o,l){l===null?ye(bu,bu.current):ye(bu,l.pool)}function kT(){var o=xb();return o===null?null:{parent:_r._currentValue,pool:o}}var Of=Error(r(460)),Eb=Error(r(474)),Ym=Error(r(542)),Qm={then:function(){}};function CT(o){return o=o.status,o==="fulfilled"||o==="rejected"}function AT(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(pi,pi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,MT(o),o;default:if(typeof l.status=="string")l.then(pi,pi);else{if(o=kn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(p){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=p}},function(p){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,MT(o),o}throw xu=l,Of}}function wu(o){try{var l=o._init;return l(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(xu=f,Of):f}}var xu=null;function OT(){if(xu===null)throw Error(r(459));var o=xu;return xu=null,o}function MT(o){if(o===Of||o===Ym)throw Error(r(483))}var Mf=null,xh=0;function Xm(o){var l=xh;return xh+=1,Mf===null&&(Mf=[]),AT(Mf,o,l)}function Eh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Jm(o,l){throw l.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function RT(o){function l(de,se){if(o){var me=de.deletions;me===null?(de.deletions=[se],de.flags|=16):me.push(se)}}function f(de,se){if(!o)return null;for(;se!==null;)l(de,se),se=se.sibling;return null}function p(de){for(var se=new Map;de!==null;)de.key!==null?se.set(de.key,de):se.set(de.index,de),de=de.sibling;return se}function b(de,se){return de=La(de,se),de.index=0,de.sibling=null,de}function E(de,se,me){return de.index=me,o?(me=de.alternate,me!==null?(me=me.index,me<se?(de.flags|=67108866,se):me):(de.flags|=67108866,se)):(de.flags|=1048576,se)}function N(de){return o&&de.alternate===null&&(de.flags|=67108866),de}function F(de,se,me,Ne){return se===null||se.tag!==6?(se=ub(me,de.mode,Ne),se.return=de,se):(se=b(se,me),se.return=de,se)}function ee(de,se,me,Ne){var ht=me.type;return ht===k?Me(de,se,me.props.children,Ne,me.key):se!==null&&(se.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===P&&wu(ht)===se.type)?(se=b(se,me.props),Eh(se,me),se.return=de,se):(se=qm(me.type,me.key,me.props,null,de.mode,Ne),Eh(se,me),se.return=de,se)}function ge(de,se,me,Ne){return se===null||se.tag!==4||se.stateNode.containerInfo!==me.containerInfo||se.stateNode.implementation!==me.implementation?(se=fb(me,de.mode,Ne),se.return=de,se):(se=b(se,me.children||[]),se.return=de,se)}function Me(de,se,me,Ne,ht){return se===null||se.tag!==7?(se=mu(me,de.mode,Ne,ht),se.return=de,se):(se=b(se,me),se.return=de,se)}function Ie(de,se,me){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=ub(""+se,de.mode,me),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return me=qm(se.type,se.key,se.props,null,de.mode,me),Eh(me,se),me.return=de,me;case S:return se=fb(se,de.mode,me),se.return=de,se;case P:return se=wu(se),Ie(de,se,me)}if(Re(se)||Q(se))return se=mu(se,de.mode,me,null),se.return=de,se;if(typeof se.then=="function")return Ie(de,Xm(se),me);if(se.$$typeof===W)return Ie(de,Km(de,se),me);Jm(de,se)}return null}function we(de,se,me,Ne){var ht=se!==null?se.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ht!==null?null:F(de,se,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return me.key===ht?ee(de,se,me,Ne):null;case S:return me.key===ht?ge(de,se,me,Ne):null;case P:return me=wu(me),we(de,se,me,Ne)}if(Re(me)||Q(me))return ht!==null?null:Me(de,se,me,Ne,null);if(typeof me.then=="function")return we(de,se,Xm(me),Ne);if(me.$$typeof===W)return we(de,se,Km(de,me),Ne);Jm(de,me)}return null}function _e(de,se,me,Ne,ht){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return de=de.get(me)||null,F(se,de,""+Ne,ht);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case w:return de=de.get(Ne.key===null?me:Ne.key)||null,ee(se,de,Ne,ht);case S:return de=de.get(Ne.key===null?me:Ne.key)||null,ge(se,de,Ne,ht);case P:return Ne=wu(Ne),_e(de,se,me,Ne,ht)}if(Re(Ne)||Q(Ne))return de=de.get(me)||null,Me(se,de,Ne,ht,null);if(typeof Ne.then=="function")return _e(de,se,me,Xm(Ne),ht);if(Ne.$$typeof===W)return _e(de,se,me,Km(se,Ne),ht);Jm(se,Ne)}return null}function ot(de,se,me,Ne){for(var ht=null,an=null,ct=se,Lt=se=0,Kt=null;ct!==null&&Lt<me.length;Lt++){ct.index>Lt?(Kt=ct,ct=null):Kt=ct.sibling;var ln=we(de,ct,me[Lt],Ne);if(ln===null){ct===null&&(ct=Kt);break}o&&ct&&ln.alternate===null&&l(de,ct),se=E(ln,se,Lt),an===null?ht=ln:an.sibling=ln,an=ln,ct=Kt}if(Lt===me.length)return f(de,ct),Zt&&za(de,Lt),ht;if(ct===null){for(;Lt<me.length;Lt++)ct=Ie(de,me[Lt],Ne),ct!==null&&(se=E(ct,se,Lt),an===null?ht=ct:an.sibling=ct,an=ct);return Zt&&za(de,Lt),ht}for(ct=p(ct);Lt<me.length;Lt++)Kt=_e(ct,de,Lt,me[Lt],Ne),Kt!==null&&(o&&Kt.alternate!==null&&ct.delete(Kt.key===null?Lt:Kt.key),se=E(Kt,se,Lt),an===null?ht=Kt:an.sibling=Kt,an=Kt);return o&&ct.forEach(function(uc){return l(de,uc)}),Zt&&za(de,Lt),ht}function vt(de,se,me,Ne){if(me==null)throw Error(r(151));for(var ht=null,an=null,ct=se,Lt=se=0,Kt=null,ln=me.next();ct!==null&&!ln.done;Lt++,ln=me.next()){ct.index>Lt?(Kt=ct,ct=null):Kt=ct.sibling;var uc=we(de,ct,ln.value,Ne);if(uc===null){ct===null&&(ct=Kt);break}o&&ct&&uc.alternate===null&&l(de,ct),se=E(uc,se,Lt),an===null?ht=uc:an.sibling=uc,an=uc,ct=Kt}if(ln.done)return f(de,ct),Zt&&za(de,Lt),ht;if(ct===null){for(;!ln.done;Lt++,ln=me.next())ln=Ie(de,ln.value,Ne),ln!==null&&(se=E(ln,se,Lt),an===null?ht=ln:an.sibling=ln,an=ln);return Zt&&za(de,Lt),ht}for(ct=p(ct);!ln.done;Lt++,ln=me.next())ln=_e(ct,de,Lt,ln.value,Ne),ln!==null&&(o&&ln.alternate!==null&&ct.delete(ln.key===null?Lt:ln.key),se=E(ln,se,Lt),an===null?ht=ln:an.sibling=ln,an=ln);return o&&ct.forEach(function(XV){return l(de,XV)}),Zt&&za(de,Lt),ht}function _n(de,se,me,Ne){if(typeof me=="object"&&me!==null&&me.type===k&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case w:e:{for(var ht=me.key;se!==null;){if(se.key===ht){if(ht=me.type,ht===k){if(se.tag===7){f(de,se.sibling),Ne=b(se,me.props.children),Ne.return=de,de=Ne;break e}}else if(se.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===P&&wu(ht)===se.type){f(de,se.sibling),Ne=b(se,me.props),Eh(Ne,me),Ne.return=de,de=Ne;break e}f(de,se);break}else l(de,se);se=se.sibling}me.type===k?(Ne=mu(me.props.children,de.mode,Ne,me.key),Ne.return=de,de=Ne):(Ne=qm(me.type,me.key,me.props,null,de.mode,Ne),Eh(Ne,me),Ne.return=de,de=Ne)}return N(de);case S:e:{for(ht=me.key;se!==null;){if(se.key===ht)if(se.tag===4&&se.stateNode.containerInfo===me.containerInfo&&se.stateNode.implementation===me.implementation){f(de,se.sibling),Ne=b(se,me.children||[]),Ne.return=de,de=Ne;break e}else{f(de,se);break}else l(de,se);se=se.sibling}Ne=fb(me,de.mode,Ne),Ne.return=de,de=Ne}return N(de);case P:return me=wu(me),_n(de,se,me,Ne)}if(Re(me))return ot(de,se,me,Ne);if(Q(me)){if(ht=Q(me),typeof ht!="function")throw Error(r(150));return me=ht.call(me),vt(de,se,me,Ne)}if(typeof me.then=="function")return _n(de,se,Xm(me),Ne);if(me.$$typeof===W)return _n(de,se,Km(de,me),Ne);Jm(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,se!==null&&se.tag===6?(f(de,se.sibling),Ne=b(se,me),Ne.return=de,de=Ne):(f(de,se),Ne=ub(me,de.mode,Ne),Ne.return=de,de=Ne),N(de)):f(de,se)}return function(de,se,me,Ne){try{xh=0;var ht=_n(de,se,me,Ne);return Mf=null,ht}catch(ct){if(ct===Of||ct===Ym)throw ct;var an=Es(29,ct,null,de.mode);return an.lanes=Ne,an.return=de,an}}}var Eu=RT(!0),NT=RT(!1),Kl=!1;function Sb(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _b(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Gl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Yl(o,l,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(cn&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,l=Sr(o),pu(o,null,f),l}return St(o,p,l,f),Sr(o)}function Sh(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=o.pendingLanes,f|=p,l.lanes=f,fn(o,f)}}function Tb(o,l){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var b=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?b=E=N:E=E.next=N,f=f.next}while(f!==null);E===null?b=E=l:E=E.next=l}else b=E=l;f={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var kb=!1;function _h(){if(kb){var o=Af;if(o!==null)throw o}}function Th(o,l,f,p){kb=!1;var b=o.updateQueue;Kl=!1;var E=b.firstBaseUpdate,N=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var ee=F,ge=ee.next;ee.next=null,N===null?E=ge:N.next=ge,N=ee;var Me=o.alternate;Me!==null&&(Me=Me.updateQueue,F=Me.lastBaseUpdate,F!==N&&(F===null?Me.firstBaseUpdate=ge:F.next=ge,Me.lastBaseUpdate=ee))}if(E!==null){var Ie=b.baseState;N=0,Me=ge=ee=null,F=E;do{var we=F.lane&-536870913,_e=we!==F.lane;if(_e?(Wt&we)===we:(p&we)===we){we!==0&&we===Cf&&(kb=!0),Me!==null&&(Me=Me.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var ot=o,vt=F;we=l;var _n=f;switch(vt.tag){case 1:if(ot=vt.payload,typeof ot=="function"){Ie=ot.call(_n,Ie,we);break e}Ie=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=vt.payload,we=typeof ot=="function"?ot.call(_n,Ie,we):ot,we==null)break e;Ie=m({},Ie,we);break e;case 2:Kl=!0}}we=F.callback,we!==null&&(o.flags|=64,_e&&(o.flags|=8192),_e=b.callbacks,_e===null?b.callbacks=[we]:_e.push(we))}else _e={lane:we,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Me===null?(ge=Me=_e,ee=Ie):Me=Me.next=_e,N|=we;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;_e=F,F=_e.next,_e.next=null,b.lastBaseUpdate=_e,b.shared.pending=null}}while(!0);Me===null&&(ee=Ie),b.baseState=ee,b.firstBaseUpdate=ge,b.lastBaseUpdate=Me,E===null&&(b.shared.lanes=0),ec|=N,o.lanes=N,o.memoizedState=Ie}}function DT(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function IT(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)DT(f[o],l)}var Rf=J(null),Zm=J(0);function PT(o,l){o=Ga,ye(Zm,o),ye(Rf,l),Ga=o|l.baseLanes}function Cb(){ye(Zm,Ga),ye(Rf,Rf.current)}function Ab(){Ga=Zm.current,Z(Rf),Z(Zm)}var Ss=J(null),Ys=null;function Ql(o){var l=o.alternate;ye(dr,dr.current&1),ye(Ss,o),Ys===null&&(l===null||Rf.current!==null||l.memoizedState!==null)&&(Ys=o)}function Ob(o){ye(dr,dr.current),ye(Ss,o),Ys===null&&(Ys=o)}function LT(o){o.tag===22?(ye(dr,dr.current),ye(Ss,o),Ys===null&&(Ys=o)):Xl()}function Xl(){ye(dr,dr.current),ye(Ss,Ss.current)}function _s(o){Z(Ss),Ys===o&&(Ys=null),Z(dr)}var dr=J(0);function eg(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Pw(f)||Lw(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ba=0,Pt=null,En=null,Tr=null,tg=!1,Nf=!1,Su=!1,ng=0,kh=0,Df=null,Uj=0;function rr(){throw Error(r(321))}function Mb(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!mi(o[f],l[f]))return!1;return!0}function Rb(o,l,f,p,b,E){return Ba=E,Pt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,oe.H=o===null||o.memoizedState===null?bk:Wb,Su=!1,E=f(p,b),Su=!1,Nf&&(E=jT(l,f,p,b)),zT(o),E}function zT(o){oe.H=Oh;var l=En!==null&&En.next!==null;if(Ba=0,Tr=En=Pt=null,tg=!1,kh=0,Df=null,l)throw Error(r(300));o===null||kr||(o=o.dependencies,o!==null&&Wm(o)&&(kr=!0))}function jT(o,l,f,p){Pt=o;var b=0;do{if(Nf&&(Df=null),kh=0,Nf=!1,25<=b)throw Error(r(301));if(b+=1,Tr=En=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}oe.H=wk,E=l(f,p)}while(Nf);return E}function Fj(){var o=oe.H,l=o.useState()[0];return l=typeof l.then=="function"?Ch(l):l,o=o.useState()[0],(En!==null?En.memoizedState:null)!==o&&(Pt.flags|=1024),l}function Nb(){var o=ng!==0;return ng=0,o}function Db(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function Ib(o){if(tg){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}tg=!1}Ba=0,Tr=En=Pt=null,Nf=!1,kh=ng=0,Df=null}function Mi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Pt.memoizedState=Tr=o:Tr=Tr.next=o,Tr}function hr(){if(En===null){var o=Pt.alternate;o=o!==null?o.memoizedState:null}else o=En.next;var l=Tr===null?Pt.memoizedState:Tr.next;if(l!==null)Tr=l,En=o;else{if(o===null)throw Pt.alternate===null?Error(r(467)):Error(r(310));En=o,o={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Tr===null?Pt.memoizedState=Tr=o:Tr=Tr.next=o}return Tr}function rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ch(o){var l=kh;return kh+=1,Df===null&&(Df=[]),o=AT(Df,o,l),l=Pt,(Tr===null?l.memoizedState:Tr.next)===null&&(l=l.alternate,oe.H=l===null||l.memoizedState===null?bk:Wb),o}function ig(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ch(o);if(o.$$typeof===W)return ei(o)}throw Error(r(438,String(o)))}function Pb(o){var l=null,f=Pt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=Pt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=rg(),Pt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),p=0;p<o;p++)f[p]=H;return l.index++,f}function Ua(o,l){return typeof l=="function"?l(o):l}function sg(o){var l=hr();return Lb(l,En,o)}function Lb(o,l,f){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var b=o.baseQueue,E=p.pending;if(E!==null){if(b!==null){var N=b.next;b.next=E.next,E.next=N}l.baseQueue=b=E,p.pending=null}if(E=o.baseState,b===null)o.memoizedState=E;else{l=b.next;var F=N=null,ee=null,ge=l,Me=!1;do{var Ie=ge.lane&-536870913;if(Ie!==ge.lane?(Wt&Ie)===Ie:(Ba&Ie)===Ie){var we=ge.revertLane;if(we===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ie===Cf&&(Me=!0);else if((Ba&we)===we){ge=ge.next,we===Cf&&(Me=!0);continue}else Ie={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(F=ee=Ie,N=E):ee=ee.next=Ie,Pt.lanes|=we,ec|=we;Ie=ge.action,Su&&f(E,Ie),E=ge.hasEagerState?ge.eagerState:f(E,Ie)}else we={lane:Ie,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(F=ee=we,N=E):ee=ee.next=we,Pt.lanes|=Ie,ec|=Ie;ge=ge.next}while(ge!==null&&ge!==l);if(ee===null?N=E:ee.next=F,!mi(E,o.memoizedState)&&(kr=!0,Me&&(f=Af,f!==null)))throw f;o.memoizedState=E,o.baseState=N,o.baseQueue=ee,p.lastRenderedState=E}return b===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function zb(o){var l=hr(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var p=f.dispatch,b=f.pending,E=l.memoizedState;if(b!==null){f.pending=null;var N=b=b.next;do E=o(E,N.action),N=N.next;while(N!==b);mi(E,l.memoizedState)||(kr=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),f.lastRenderedState=E}return[E,p]}function VT(o,l,f){var p=Pt,b=hr(),E=Zt;if(E){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!mi((En||b).memoizedState,f);if(N&&(b.memoizedState=f,kr=!0),b=b.queue,Bb(FT.bind(null,p,b,o),[o]),b.getSnapshot!==l||N||Tr!==null&&Tr.memoizedState.tag&1){if(p.flags|=2048,If(9,{destroy:void 0},UT.bind(null,p,b,f,l),null),kn===null)throw Error(r(349));E||(Ba&127)!==0||BT(p,l,f)}return f}function BT(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Pt.updateQueue,l===null?(l=rg(),Pt.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function UT(o,l,f,p){l.value=f,l.getSnapshot=p,HT(l)&&qT(o)}function FT(o,l,f){return f(function(){HT(l)&&qT(o)})}function HT(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!mi(o,f)}catch{return!0}}function qT(o){var l=Fn(o,2);l!==null&&ns(l,o,2)}function jb(o){var l=Mi();if(typeof o=="function"){var f=o;if(o=f(),Su){Ye(!0);try{f()}finally{Ye(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},l}function $T(o,l,f,p){return o.baseState=f,Lb(o,En,typeof p=="function"?p:Ua)}function Hj(o,l,f,p,b){if(lg(o))throw Error(r(485));if(o=l.action,o!==null){var E={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){E.listeners.push(N)}};oe.T!==null?f(!0):E.isTransition=!1,p(E),f=l.pending,f===null?(E.next=l.pending=E,WT(l,E)):(E.next=f.next,l.pending=f.next=E)}}function WT(o,l){var f=l.action,p=l.payload,b=o.state;if(l.isTransition){var E=oe.T,N={};oe.T=N;try{var F=f(b,p),ee=oe.S;ee!==null&&ee(N,F),KT(o,l,F)}catch(ge){Vb(o,l,ge)}finally{E!==null&&N.types!==null&&(E.types=N.types),oe.T=E}}else try{E=f(b,p),KT(o,l,E)}catch(ge){Vb(o,l,ge)}}function KT(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){GT(o,l,p)},function(p){return Vb(o,l,p)}):GT(o,l,f)}function GT(o,l,f){l.status="fulfilled",l.value=f,YT(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,WT(o,f)))}function Vb(o,l,f){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,YT(l),l=l.next;while(l!==p)}o.action=null}function YT(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function QT(o,l){return l}function XT(o,l){if(Zt){var f=kn.formState;if(f!==null){e:{var p=Pt;if(Zt){if(Pn){t:{for(var b=Pn,E=Gs;b.nodeType!==8;){if(!E){b=null;break t}if(b=Qs(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Pn=Qs(b.nextSibling),p=b.data==="F!";break e}}$l(p)}p=!1}p&&(l=f[0])}}return f=Mi(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QT,lastRenderedState:l},f.queue=p,f=gk.bind(null,Pt,p),p.dispatch=f,p=jb(!1),E=$b.bind(null,Pt,!1,p.queue),p=Mi(),b={state:l,dispatch:null,action:o,pending:null},p.queue=b,f=Hj.bind(null,Pt,b,E,f),b.dispatch=f,p.memoizedState=o,[l,f,!1]}function JT(o){var l=hr();return ZT(l,En,o)}function ZT(o,l,f){if(l=Lb(o,l,QT)[0],o=sg(Ua)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Ch(l)}catch(N){throw N===Of?Ym:N}else p=l;l=hr();var b=l.queue,E=b.dispatch;return f!==l.memoizedState&&(Pt.flags|=2048,If(9,{destroy:void 0},qj.bind(null,b,f),null)),[p,E,o]}function qj(o,l){o.action=l}function ek(o){var l=hr(),f=En;if(f!==null)return ZT(l,f,o);hr(),l=l.memoizedState,f=hr();var p=f.queue.dispatch;return f.memoizedState=o,[l,p,!1]}function If(o,l,f,p){return o={tag:o,create:f,deps:p,inst:l,next:null},l=Pt.updateQueue,l===null&&(l=rg(),Pt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,l.lastEffect=o),o}function tk(){return hr().memoizedState}function og(o,l,f,p){var b=Mi();Pt.flags|=o,b.memoizedState=If(1|l,{destroy:void 0},f,p===void 0?null:p)}function ag(o,l,f,p){var b=hr();p=p===void 0?null:p;var E=b.memoizedState.inst;En!==null&&p!==null&&Mb(p,En.memoizedState.deps)?b.memoizedState=If(l,E,f,p):(Pt.flags|=o,b.memoizedState=If(1|l,E,f,p))}function nk(o,l){og(8390656,8,o,l)}function Bb(o,l){ag(2048,8,o,l)}function $j(o){Pt.flags|=4;var l=Pt.updateQueue;if(l===null)l=rg(),Pt.updateQueue=l,l.events=[o];else{var f=l.events;f===null?l.events=[o]:f.push(o)}}function rk(o){var l=hr().memoizedState;return $j({ref:l,nextImpl:o}),function(){if((cn&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function ik(o,l){return ag(4,2,o,l)}function sk(o,l){return ag(4,4,o,l)}function ok(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function ak(o,l,f){f=f!=null?f.concat([o]):null,ag(4,4,ok.bind(null,l,o),f)}function Ub(){}function lk(o,l){var f=hr();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&Mb(l,p[1])?p[0]:(f.memoizedState=[o,l],o)}function ck(o,l){var f=hr();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&Mb(l,p[1]))return p[0];if(p=o(),Su){Ye(!0);try{o()}finally{Ye(!1)}}return f.memoizedState=[p,l],p}function Fb(o,l,f){return f===void 0||(Ba&1073741824)!==0&&(Wt&261930)===0?o.memoizedState=l:(o.memoizedState=f,o=uC(),Pt.lanes|=o,ec|=o,f)}function uk(o,l,f,p){return mi(f,l)?f:Rf.current!==null?(o=Fb(o,f,p),mi(o,l)||(kr=!0),o):(Ba&42)===0||(Ba&1073741824)!==0&&(Wt&261930)===0?(kr=!0,o.memoizedState=f):(o=uC(),Pt.lanes|=o,ec|=o,l)}function fk(o,l,f,p,b){var E=Ee.p;Ee.p=E!==0&&8>E?E:8;var N=oe.T,F={};oe.T=F,$b(o,!1,l,f);try{var ee=b(),ge=oe.S;if(ge!==null&&ge(F,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Me=Bj(ee,p);Ah(o,l,Me,Cs(o))}else Ah(o,l,p,Cs(o))}catch(Ie){Ah(o,l,{then:function(){},status:"rejected",reason:Ie},Cs())}finally{Ee.p=E,N!==null&&F.types!==null&&(N.types=F.types),oe.T=N}}function Wj(){}function Hb(o,l,f,p){if(o.tag!==5)throw Error(r(476));var b=dk(o).queue;fk(o,b,l,ve,f===null?Wj:function(){return hk(o),f(p)})}function dk(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:ve},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function hk(o){var l=dk(o);l.next===null&&(l=o.alternate.memoizedState),Ah(o,l.next.queue,{},Cs())}function qb(){return ei($h)}function pk(){return hr().memoizedState}function mk(){return hr().memoizedState}function Kj(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=Cs();o=Gl(f);var p=Yl(l,o,f);p!==null&&(ns(p,l,f),Sh(p,l,f)),l={cache:bb()},o.payload=l;return}l=l.return}}function Gj(o,l,f){var p=Cs();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},lg(o)?yk(l,f):(f=Er(o,l,f,p),f!==null&&(ns(f,o,p),vk(f,l,p)))}function gk(o,l,f){var p=Cs();Ah(o,l,f,p)}function Ah(o,l,f,p){var b={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(lg(o))yk(l,b);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var N=l.lastRenderedState,F=E(N,f);if(b.hasEagerState=!0,b.eagerState=F,mi(F,N))return St(o,l,b,0),kn===null&&qr(),!1}catch{}if(f=Er(o,l,b,p),f!==null)return ns(f,o,p),vk(f,l,p),!0}return!1}function $b(o,l,f,p){if(p={lane:2,revertLane:Sw(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},lg(o)){if(l)throw Error(r(479))}else l=Er(o,f,p,2),l!==null&&ns(l,o,2)}function lg(o){var l=o.alternate;return o===Pt||l!==null&&l===Pt}function yk(o,l){Nf=tg=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function vk(o,l,f){if((f&4194048)!==0){var p=l.lanes;p&=o.pendingLanes,f|=p,l.lanes=f,fn(o,f)}}var Oh={readContext:ei,use:ig,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useLayoutEffect:rr,useInsertionEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useSyncExternalStore:rr,useId:rr,useHostTransitionStatus:rr,useFormState:rr,useActionState:rr,useOptimistic:rr,useMemoCache:rr,useCacheRefresh:rr};Oh.useEffectEvent=rr;var bk={readContext:ei,use:ig,useCallback:function(o,l){return Mi().memoizedState=[o,l===void 0?null:l],o},useContext:ei,useEffect:nk,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,og(4194308,4,ok.bind(null,l,o),f)},useLayoutEffect:function(o,l){return og(4194308,4,o,l)},useInsertionEffect:function(o,l){og(4,2,o,l)},useMemo:function(o,l){var f=Mi();l=l===void 0?null:l;var p=o();if(Su){Ye(!0);try{o()}finally{Ye(!1)}}return f.memoizedState=[p,l],p},useReducer:function(o,l,f){var p=Mi();if(f!==void 0){var b=f(l);if(Su){Ye(!0);try{f(l)}finally{Ye(!1)}}}else b=l;return p.memoizedState=p.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},p.queue=o,o=o.dispatch=Gj.bind(null,Pt,o),[p.memoizedState,o]},useRef:function(o){var l=Mi();return o={current:o},l.memoizedState=o},useState:function(o){o=jb(o);var l=o.queue,f=gk.bind(null,Pt,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:Ub,useDeferredValue:function(o,l){var f=Mi();return Fb(f,o,l)},useTransition:function(){var o=jb(!1);return o=fk.bind(null,Pt,o.queue,!0,!1),Mi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var p=Pt,b=Mi();if(Zt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),kn===null)throw Error(r(349));(Wt&127)!==0||BT(p,l,f)}b.memoizedState=f;var E={value:f,getSnapshot:l};return b.queue=E,nk(FT.bind(null,p,E,o),[o]),p.flags|=2048,If(9,{destroy:void 0},UT.bind(null,p,E,f,l),null),f},useId:function(){var o=Mi(),l=kn.identifierPrefix;if(Zt){var f=Qo,p=Yo;f=(p&~(1<<32-Ce(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=ng++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=Uj++,l="_"+l+"r_"+f.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:qb,useFormState:XT,useActionState:XT,useOptimistic:function(o){var l=Mi();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=$b.bind(null,Pt,!0,f),f.dispatch=l,[o,l]},useMemoCache:Pb,useCacheRefresh:function(){return Mi().memoizedState=Kj.bind(null,Pt)},useEffectEvent:function(o){var l=Mi(),f={impl:o};return l.memoizedState=f,function(){if((cn&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Wb={readContext:ei,use:ig,useCallback:lk,useContext:ei,useEffect:Bb,useImperativeHandle:ak,useInsertionEffect:ik,useLayoutEffect:sk,useMemo:ck,useReducer:sg,useRef:tk,useState:function(){return sg(Ua)},useDebugValue:Ub,useDeferredValue:function(o,l){var f=hr();return uk(f,En.memoizedState,o,l)},useTransition:function(){var o=sg(Ua)[0],l=hr().memoizedState;return[typeof o=="boolean"?o:Ch(o),l]},useSyncExternalStore:VT,useId:pk,useHostTransitionStatus:qb,useFormState:JT,useActionState:JT,useOptimistic:function(o,l){var f=hr();return $T(f,En,o,l)},useMemoCache:Pb,useCacheRefresh:mk};Wb.useEffectEvent=rk;var wk={readContext:ei,use:ig,useCallback:lk,useContext:ei,useEffect:Bb,useImperativeHandle:ak,useInsertionEffect:ik,useLayoutEffect:sk,useMemo:ck,useReducer:zb,useRef:tk,useState:function(){return zb(Ua)},useDebugValue:Ub,useDeferredValue:function(o,l){var f=hr();return En===null?Fb(f,o,l):uk(f,En.memoizedState,o,l)},useTransition:function(){var o=zb(Ua)[0],l=hr().memoizedState;return[typeof o=="boolean"?o:Ch(o),l]},useSyncExternalStore:VT,useId:pk,useHostTransitionStatus:qb,useFormState:ek,useActionState:ek,useOptimistic:function(o,l){var f=hr();return En!==null?$T(f,En,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:Pb,useCacheRefresh:mk};wk.useEffectEvent=rk;function Kb(o,l,f,p){l=o.memoizedState,f=f(p,l),f=f==null?l:m({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Gb={enqueueSetState:function(o,l,f){o=o._reactInternals;var p=Cs(),b=Gl(p);b.payload=l,f!=null&&(b.callback=f),l=Yl(o,b,p),l!==null&&(ns(l,o,p),Sh(l,o,p))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var p=Cs(),b=Gl(p);b.tag=1,b.payload=l,f!=null&&(b.callback=f),l=Yl(o,b,p),l!==null&&(ns(l,o,p),Sh(l,o,p))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Cs(),p=Gl(f);p.tag=2,l!=null&&(p.callback=l),l=Yl(o,p,f),l!==null&&(ns(l,o,f),Sh(l,o,f))}};function xk(o,l,f,p,b,E,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,E,N):l.prototype&&l.prototype.isPureReactComponent?!y(f,p)||!y(b,E):!0}function Ek(o,l,f,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==o&&Gb.enqueueReplaceState(l,l.state,null)}function _u(o,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(o=o.defaultProps){f===l&&(f=m({},f));for(var b in o)f[b]===void 0&&(f[b]=o[b])}return f}function Sk(o){tt(o)}function _k(o){console.error(o)}function Tk(o){tt(o)}function cg(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function kk(o,l,f){try{var p=o.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Yb(o,l,f){return f=Gl(f),f.tag=3,f.payload={element:null},f.callback=function(){cg(o,l)},f}function Ck(o){return o=Gl(o),o.tag=3,o}function Ak(o,l,f,p){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var E=p.value;o.payload=function(){return b(E)},o.callback=function(){kk(l,f,p)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(o.callback=function(){kk(l,f,p),typeof b!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function Yj(o,l,f,p,b){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&kf(l,f,b,!0),f=Ss.current,f!==null){switch(f.tag){case 31:case 13:return Ys===null?xg():f.alternate===null&&ir===0&&(ir=3),f.flags&=-257,f.flags|=65536,f.lanes=b,p===Qm?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),ww(o,p,b)),!1;case 22:return f.flags|=65536,p===Qm?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),ww(o,p,b)),!1}throw Error(r(435,f.tag))}return ww(o,p,b),xg(),!1}if(Zt)return l=Ss.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,p!==pb&&(o=Error(r(422),{cause:p}),vh($s(o,f)))):(p!==pb&&(l=Error(r(423),{cause:p}),vh($s(l,f))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,p=$s(p,f),b=Yb(o.stateNode,p,b),Tb(o,b),ir!==4&&(ir=2)),!1;var E=Error(r(520),{cause:p});if(E=$s(E,f),zh===null?zh=[E]:zh.push(E),ir!==4&&(ir=2),l===null)return!0;p=$s(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=b&-b,f.lanes|=o,o=Yb(f.stateNode,p,o),Tb(f,o),!1;case 1:if(l=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(tc===null||!tc.has(E))))return f.flags|=65536,b&=-b,f.lanes|=b,b=Ck(b),Ak(b,o,f,p),Tb(f,b),!1}f=f.return}while(f!==null);return!1}var Qb=Error(r(461)),kr=!1;function ti(o,l,f,p){l.child=o===null?NT(l,null,f,p):Eu(l,o.child,f,p)}function Ok(o,l,f,p,b){f=f.render;var E=l.ref;if("ref"in p){var N={};for(var F in p)F!=="ref"&&(N[F]=p[F])}else N=p;return vu(l),p=Rb(o,l,f,N,E,b),F=Nb(),o!==null&&!kr?(Db(o,l,b),Fa(o,l,b)):(Zt&&F&&db(l),l.flags|=1,ti(o,l,p,b),l.child)}function Mk(o,l,f,p,b){if(o===null){var E=f.type;return typeof E=="function"&&!cb(E)&&E.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=E,Rk(o,l,E,p,b)):(o=qm(f.type,null,p,l,l.mode,b),o.ref=l.ref,o.return=l,l.child=o)}if(E=o.child,!iw(o,b)){var N=E.memoizedProps;if(f=f.compare,f=f!==null?f:y,f(N,p)&&o.ref===l.ref)return Fa(o,l,b)}return l.flags|=1,o=La(E,p),o.ref=l.ref,o.return=l,l.child=o}function Rk(o,l,f,p,b){if(o!==null){var E=o.memoizedProps;if(y(E,p)&&o.ref===l.ref)if(kr=!1,l.pendingProps=p=E,iw(o,b))(o.flags&131072)!==0&&(kr=!0);else return l.lanes=o.lanes,Fa(o,l,b)}return Xb(o,l,f,p,b)}function Nk(o,l,f,p){var b=p.children,E=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(E=E!==null?E.baseLanes|f:f,o!==null){for(p=l.child=o.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~E}else p=0,l.child=null;return Dk(o,l,E,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Gm(l,E!==null?E.cachePool:null),E!==null?PT(l,E):Cb(),LT(l);else return p=l.lanes=536870912,Dk(o,l,E!==null?E.baseLanes|f:f,f,p)}else E!==null?(Gm(l,E.cachePool),PT(l,E),Xl(),l.memoizedState=null):(o!==null&&Gm(l,null),Cb(),Xl());return ti(o,l,b,f),l.child}function Mh(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Dk(o,l,f,p,b){var E=xb();return E=E===null?null:{parent:_r._currentValue,pool:E},l.memoizedState={baseLanes:f,cachePool:E},o!==null&&Gm(l,null),Cb(),LT(l),o!==null&&kf(o,l,p,!0),l.childLanes=b,null}function ug(o,l){return l=dg({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function Ik(o,l,f){return Eu(l,o.child,null,f),o=ug(l,l.pendingProps),o.flags|=2,_s(l),l.memoizedState=null,o}function Qj(o,l,f){var p=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(Zt){if(p.mode==="hidden")return o=ug(l,p),l.lanes=536870912,Mh(null,o);if(Ob(l),(o=Pn)?(o=WC(o,Gs),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Hl!==null?{id:Yo,overflow:Qo}:null,retryLane:536870912,hydrationErrors:null},f=yT(o),f.return=l,l.child=f,Zr=l,Pn=null)):o=null,o===null)throw $l(l);return l.lanes=536870912,null}return ug(l,p)}var E=o.memoizedState;if(E!==null){var N=E.dehydrated;if(Ob(l),b)if(l.flags&256)l.flags&=-257,l=Ik(o,l,f);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(r(558));else if(kr||kf(o,l,f,!1),b=(f&o.childLanes)!==0,kr||b){if(p=kn,p!==null&&(N=Un(p,f),N!==0&&N!==E.retryLane))throw E.retryLane=N,Fn(o,N),ns(p,o,N),Qb;xg(),l=Ik(o,l,f)}else o=E.treeContext,Pn=Qs(N.nextSibling),Zr=l,Zt=!0,ql=null,Gs=!1,o!==null&&wT(l,o),l=ug(l,p),l.flags|=4096;return l}return o=La(o.child,{mode:p.mode,children:p.children}),o.ref=l.ref,l.child=o,o.return=l,o}function fg(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function Xb(o,l,f,p,b){return vu(l),f=Rb(o,l,f,p,void 0,b),p=Nb(),o!==null&&!kr?(Db(o,l,b),Fa(o,l,b)):(Zt&&p&&db(l),l.flags|=1,ti(o,l,f,b),l.child)}function Pk(o,l,f,p,b,E){return vu(l),l.updateQueue=null,f=jT(l,p,f,b),zT(o),p=Nb(),o!==null&&!kr?(Db(o,l,E),Fa(o,l,E)):(Zt&&p&&db(l),l.flags|=1,ti(o,l,f,E),l.child)}function Lk(o,l,f,p,b){if(vu(l),l.stateNode===null){var E=Xi,N=f.contextType;typeof N=="object"&&N!==null&&(E=ei(N)),E=new f(p,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Gb,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=p,E.state=l.memoizedState,E.refs={},Sb(l),N=f.contextType,E.context=typeof N=="object"&&N!==null?ei(N):Xi,E.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(Kb(l,f,N,p),E.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(N=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),N!==E.state&&Gb.enqueueReplaceState(E,E.state,null),Th(l,p,E,b),_h(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(o===null){E=l.stateNode;var F=l.memoizedProps,ee=_u(f,F);E.props=ee;var ge=E.context,Me=f.contextType;N=Xi,typeof Me=="object"&&Me!==null&&(N=ei(Me));var Ie=f.getDerivedStateFromProps;Me=typeof Ie=="function"||typeof E.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,Me||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F||ge!==N)&&Ek(l,E,p,N),Kl=!1;var we=l.memoizedState;E.state=we,Th(l,p,E,b),_h(),ge=l.memoizedState,F||we!==ge||Kl?(typeof Ie=="function"&&(Kb(l,f,Ie,p),ge=l.memoizedState),(ee=Kl||xk(l,f,ee,p,we,ge,N))?(Me||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=ge),E.props=p,E.state=ge,E.context=N,p=ee):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{E=l.stateNode,_b(o,l),N=l.memoizedProps,Me=_u(f,N),E.props=Me,Ie=l.pendingProps,we=E.context,ge=f.contextType,ee=Xi,typeof ge=="object"&&ge!==null&&(ee=ei(ge)),F=f.getDerivedStateFromProps,(ge=typeof F=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N!==Ie||we!==ee)&&Ek(l,E,p,ee),Kl=!1,we=l.memoizedState,E.state=we,Th(l,p,E,b),_h();var _e=l.memoizedState;N!==Ie||we!==_e||Kl||o!==null&&o.dependencies!==null&&Wm(o.dependencies)?(typeof F=="function"&&(Kb(l,f,F,p),_e=l.memoizedState),(Me=Kl||xk(l,f,Me,p,we,_e,ee)||o!==null&&o.dependencies!==null&&Wm(o.dependencies))?(ge||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,_e,ee),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,_e,ee)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||N===o.memoizedProps&&we===o.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&we===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=_e),E.props=p,E.state=_e,E.context=ee,p=Me):(typeof E.componentDidUpdate!="function"||N===o.memoizedProps&&we===o.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&we===o.memoizedState||(l.flags|=1024),p=!1)}return E=p,fg(o,l),p=(l.flags&128)!==0,E||p?(E=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,o!==null&&p?(l.child=Eu(l,o.child,null,b),l.child=Eu(l,null,f,b)):ti(o,l,f,b),l.memoizedState=E.state,o=l.child):o=Fa(o,l,b),o}function zk(o,l,f,p){return gu(),l.flags|=256,ti(o,l,f,p),l.child}var Jb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zb(o){return{baseLanes:o,cachePool:kT()}}function ew(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=ks),o}function jk(o,l,f){var p=l.pendingProps,b=!1,E=(l.flags&128)!==0,N;if((N=E)||(N=o!==null&&o.memoizedState===null?!1:(dr.current&2)!==0),N&&(b=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,o===null){if(Zt){if(b?Ql(l):Xl(),(o=Pn)?(o=WC(o,Gs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Hl!==null?{id:Yo,overflow:Qo}:null,retryLane:536870912,hydrationErrors:null},f=yT(o),f.return=l,l.child=f,Zr=l,Pn=null)):o=null,o===null)throw $l(l);return Lw(o)?l.lanes=32:l.lanes=536870912,null}var F=p.children;return p=p.fallback,b?(Xl(),b=l.mode,F=dg({mode:"hidden",children:F},b),p=mu(p,b,f,null),F.return=l,p.return=l,F.sibling=p,l.child=F,p=l.child,p.memoizedState=Zb(f),p.childLanes=ew(o,N,f),l.memoizedState=Jb,Mh(null,p)):(Ql(l),tw(l,F))}var ee=o.memoizedState;if(ee!==null&&(F=ee.dehydrated,F!==null)){if(E)l.flags&256?(Ql(l),l.flags&=-257,l=nw(o,l,f)):l.memoizedState!==null?(Xl(),l.child=o.child,l.flags|=128,l=null):(Xl(),F=p.fallback,b=l.mode,p=dg({mode:"visible",children:p.children},b),F=mu(F,b,f,null),F.flags|=2,p.return=l,F.return=l,p.sibling=F,l.child=p,Eu(l,o.child,null,f),p=l.child,p.memoizedState=Zb(f),p.childLanes=ew(o,N,f),l.memoizedState=Jb,l=Mh(null,p));else if(Ql(l),Lw(F)){if(N=F.nextSibling&&F.nextSibling.dataset,N)var ge=N.dgst;N=ge,p=Error(r(419)),p.stack="",p.digest=N,vh({value:p,source:null,stack:null}),l=nw(o,l,f)}else if(kr||kf(o,l,f,!1),N=(f&o.childLanes)!==0,kr||N){if(N=kn,N!==null&&(p=Un(N,f),p!==0&&p!==ee.retryLane))throw ee.retryLane=p,Fn(o,p),ns(N,o,p),Qb;Pw(F)||xg(),l=nw(o,l,f)}else Pw(F)?(l.flags|=192,l.child=o.child,l=null):(o=ee.treeContext,Pn=Qs(F.nextSibling),Zr=l,Zt=!0,ql=null,Gs=!1,o!==null&&wT(l,o),l=tw(l,p.children),l.flags|=4096);return l}return b?(Xl(),F=p.fallback,b=l.mode,ee=o.child,ge=ee.sibling,p=La(ee,{mode:"hidden",children:p.children}),p.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?F=La(ge,F):(F=mu(F,b,f,null),F.flags|=2),F.return=l,p.return=l,p.sibling=F,l.child=p,Mh(null,p),p=l.child,F=o.child.memoizedState,F===null?F=Zb(f):(b=F.cachePool,b!==null?(ee=_r._currentValue,b=b.parent!==ee?{parent:ee,pool:ee}:b):b=kT(),F={baseLanes:F.baseLanes|f,cachePool:b}),p.memoizedState=F,p.childLanes=ew(o,N,f),l.memoizedState=Jb,Mh(o.child,p)):(Ql(l),f=o.child,o=f.sibling,f=La(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,o!==null&&(N=l.deletions,N===null?(l.deletions=[o],l.flags|=16):N.push(o)),l.child=f,l.memoizedState=null,f)}function tw(o,l){return l=dg({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function dg(o,l){return o=Es(22,o,null,l),o.lanes=0,o}function nw(o,l,f){return Eu(l,o.child,null,f),o=tw(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Vk(o,l,f){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),yb(o.return,l,f)}function rw(o,l,f,p,b,E){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:b,treeForkCount:E}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=f,N.tailMode=b,N.treeForkCount=E)}function Bk(o,l,f){var p=l.pendingProps,b=p.revealOrder,E=p.tail;p=p.children;var N=dr.current,F=(N&2)!==0;if(F?(N=N&1|2,l.flags|=128):N&=1,ye(dr,N),ti(o,l,p,f),p=Zt?yh:0,!F&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Vk(o,f,l);else if(o.tag===19)Vk(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(f=l.child,b=null;f!==null;)o=f.alternate,o!==null&&eg(o)===null&&(b=f),f=f.sibling;f=b,f===null?(b=l.child,l.child=null):(b=f.sibling,f.sibling=null),rw(l,!1,b,f,E,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=l.child,l.child=null;b!==null;){if(o=b.alternate,o!==null&&eg(o)===null){l.child=b;break}o=b.sibling,b.sibling=f,f=b,b=o}rw(l,!0,f,null,E,p);break;case"together":rw(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Fa(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),ec|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(kf(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,f=La(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=La(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function iw(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Wm(o)))}function Xj(o,l,f){switch(l.tag){case 3:bt(l,l.stateNode.containerInfo),Wl(l,_r,o.memoizedState.cache),gu();break;case 27:case 5:tn(l);break;case 4:bt(l,l.stateNode.containerInfo);break;case 10:Wl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Ob(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ql(l),l.flags|=128,null):(f&l.child.childLanes)!==0?jk(o,l,f):(Ql(l),o=Fa(o,l,f),o!==null?o.sibling:null);Ql(l);break;case 19:var b=(o.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(kf(o,l,f,!1),p=(f&l.childLanes)!==0),b){if(p)return Bk(o,l,f);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ye(dr,dr.current),p)break;return null;case 22:return l.lanes=0,Nk(o,l,f,l.pendingProps);case 24:Wl(l,_r,o.memoizedState.cache)}return Fa(o,l,f)}function Uk(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)kr=!0;else{if(!iw(o,f)&&(l.flags&128)===0)return kr=!1,Xj(o,l,f);kr=(o.flags&131072)!==0}else kr=!1,Zt&&(l.flags&1048576)!==0&&bT(l,yh,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(o=wu(l.elementType),l.type=o,typeof o=="function")cb(o)?(p=_u(o,p),l.tag=1,l=Lk(null,l,o,p,f)):(l.tag=0,l=Xb(null,l,o,p,f));else{if(o!=null){var b=o.$$typeof;if(b===L){l.tag=11,l=Ok(null,l,o,p,f);break e}else if(b===R){l.tag=14,l=Mk(null,l,o,p,f);break e}}throw l=je(o)||o,Error(r(306,l,""))}}return l;case 0:return Xb(o,l,l.type,l.pendingProps,f);case 1:return p=l.type,b=_u(p,l.pendingProps),Lk(o,l,p,b,f);case 3:e:{if(bt(l,l.stateNode.containerInfo),o===null)throw Error(r(387));p=l.pendingProps;var E=l.memoizedState;b=E.element,_b(o,l),Th(l,p,null,f);var N=l.memoizedState;if(p=N.cache,Wl(l,_r,p),p!==E.cache&&vb(l,[_r],f,!0),_h(),p=N.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=zk(o,l,p,f);break e}else if(p!==b){b=$s(Error(r(424)),l),vh(b),l=zk(o,l,p,f);break e}else for(o=l.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,Pn=Qs(o.firstChild),Zr=l,Zt=!0,ql=null,Gs=!0,f=NT(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(gu(),p===b){l=Fa(o,l,f);break e}ti(o,l,p,f)}l=l.child}return l;case 26:return fg(o,l),o===null?(f=JC(l.type,null,l.pendingProps,null))?l.memoizedState=f:Zt||(f=l.type,o=l.pendingProps,p=Ag(Ue.current).createElement(f),p[pn]=l,p[Dn]=o,ni(p,f,o),$n(p),l.stateNode=p):l.memoizedState=JC(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return tn(l),o===null&&Zt&&(p=l.stateNode=YC(l.type,l.pendingProps,Ue.current),Zr=l,Gs=!0,b=Pn,sc(l.type)?(zw=b,Pn=Qs(p.firstChild)):Pn=b),ti(o,l,l.pendingProps.children,f),fg(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Zt&&((b=p=Pn)&&(p=CV(p,l.type,l.pendingProps,Gs),p!==null?(l.stateNode=p,Zr=l,Pn=Qs(p.firstChild),Gs=!1,b=!0):b=!1),b||$l(l)),tn(l),b=l.type,E=l.pendingProps,N=o!==null?o.memoizedProps:null,p=E.children,Nw(b,E)?p=null:N!==null&&Nw(b,N)&&(l.flags|=32),l.memoizedState!==null&&(b=Rb(o,l,Fj,null,null,f),$h._currentValue=b),fg(o,l),ti(o,l,p,f),l.child;case 6:return o===null&&Zt&&((o=f=Pn)&&(f=AV(f,l.pendingProps,Gs),f!==null?(l.stateNode=f,Zr=l,Pn=null,o=!0):o=!1),o||$l(l)),null;case 13:return jk(o,l,f);case 4:return bt(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=Eu(l,null,p,f):ti(o,l,p,f),l.child;case 11:return Ok(o,l,l.type,l.pendingProps,f);case 7:return ti(o,l,l.pendingProps,f),l.child;case 8:return ti(o,l,l.pendingProps.children,f),l.child;case 12:return ti(o,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,Wl(l,l.type,p.value),ti(o,l,p.children,f),l.child;case 9:return b=l.type._context,p=l.pendingProps.children,vu(l),b=ei(b),p=p(b),l.flags|=1,ti(o,l,p,f),l.child;case 14:return Mk(o,l,l.type,l.pendingProps,f);case 15:return Rk(o,l,l.type,l.pendingProps,f);case 19:return Bk(o,l,f);case 31:return Qj(o,l,f);case 22:return Nk(o,l,f,l.pendingProps);case 24:return vu(l),p=ei(_r),o===null?(b=xb(),b===null&&(b=kn,E=bb(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=f),b=E),l.memoizedState={parent:p,cache:b},Sb(l),Wl(l,_r,b)):((o.lanes&f)!==0&&(_b(o,l),Th(l,null,null,f),_h()),b=o.memoizedState,E=l.memoizedState,b.parent!==p?(b={parent:p,cache:p},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Wl(l,_r,p)):(p=E.cache,Wl(l,_r,p),p!==b.cache&&vb(l,[_r],f,!0))),ti(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ha(o){o.flags|=4}function sw(o,l,f,p,b){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(b&335544128)===b)if(o.stateNode.complete)o.flags|=8192;else if(pC())o.flags|=8192;else throw xu=Qm,Eb}else o.flags&=-16777217}function Fk(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!rA(l))if(pC())o.flags|=8192;else throw xu=Qm,Eb}function hg(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Bo():536870912,o.lanes|=l,jf|=l)}function Rh(o,l){if(!Zt)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Ln(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(l)for(var b=o.child;b!==null;)f|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)f|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=p,o.childLanes=f,l}function Jj(o,l,f){var p=l.pendingProps;switch(hb(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(l),null;case 1:return Ln(l),null;case 3:return f=l.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Va(_r),ze(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Tf(l)?Ha(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,mb())),Ln(l),null;case 26:var b=l.type,E=l.memoizedState;return o===null?(Ha(l),E!==null?(Ln(l),Fk(l,E)):(Ln(l),sw(l,b,null,p,f))):E?E!==o.memoizedState?(Ha(l),Ln(l),Fk(l,E)):(Ln(l),l.flags&=-16777217):(o=o.memoizedProps,o!==p&&Ha(l),Ln(l),sw(l,b,o,p,f)),null;case 27:if(Bn(l),f=Ue.current,b=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Ha(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Ln(l),null}o=Te.current,Tf(l)?xT(l):(o=YC(b,p,f),l.stateNode=o,Ha(l))}return Ln(l),null;case 5:if(Bn(l),b=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Ha(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Ln(l),null}if(E=Te.current,Tf(l))xT(l);else{var N=Ag(Ue.current);switch(E){case 1:E=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=N.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?E.multiple=!0:p.size&&(E.size=p.size);break;default:E=typeof p.is=="string"?N.createElement(b,{is:p.is}):N.createElement(b)}}E[pn]=l,E[Dn]=p;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)E.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=E;e:switch(ni(E,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ha(l)}}return Ln(l),sw(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,f),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==p&&Ha(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(o=Ue.current,Tf(l)){if(o=l.stateNode,f=l.memoizedProps,p=null,b=Zr,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}o[pn]=l,o=!!(o.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||jC(o.nodeValue,f)),o||$l(l,!0)}else o=Ag(o).createTextNode(p),o[pn]=l,l.stateNode=o}return Ln(l),null;case 31:if(f=l.memoizedState,o===null||o.memoizedState!==null){if(p=Tf(l),f!==null){if(o===null){if(!p)throw Error(r(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[pn]=l}else gu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ln(l),o=!1}else f=mb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return l.flags&256?(_s(l),l):(_s(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Ln(l),null;case 13:if(p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=Tf(l),p!==null&&p.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[pn]=l}else gu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ln(l),b=!1}else b=mb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(_s(l),l):(_s(l),null)}return _s(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,o=o!==null&&o.memoizedState!==null,f&&(p=l.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048)),f!==o&&f&&(l.child.flags|=8192),hg(l,l.updateQueue),Ln(l),null);case 4:return ze(),o===null&&Cw(l.stateNode.containerInfo),Ln(l),null;case 10:return Va(l.type),Ln(l),null;case 19:if(Z(dr),p=l.memoizedState,p===null)return Ln(l),null;if(b=(l.flags&128)!==0,E=p.rendering,E===null)if(b)Rh(p,!1);else{if(ir!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(E=eg(o),E!==null){for(l.flags|=128,Rh(p,!1),o=E.updateQueue,l.updateQueue=o,hg(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)gT(f,o),f=f.sibling;return ye(dr,dr.current&1|2),Zt&&za(l,p.treeForkCount),l.child}o=o.sibling}p.tail!==null&&xn()>vg&&(l.flags|=128,b=!0,Rh(p,!1),l.lanes=4194304)}else{if(!b)if(o=eg(E),o!==null){if(l.flags|=128,b=!0,o=o.updateQueue,l.updateQueue=o,hg(l,o),Rh(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!Zt)return Ln(l),null}else 2*xn()-p.renderingStartTime>vg&&f!==536870912&&(l.flags|=128,b=!0,Rh(p,!1),l.lanes=4194304);p.isBackwards?(E.sibling=l.child,l.child=E):(o=p.last,o!==null?o.sibling=E:l.child=E,p.last=E)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=xn(),o.sibling=null,f=dr.current,ye(dr,b?f&1|2:f&1),Zt&&za(l,p.treeForkCount),o):(Ln(l),null);case 22:case 23:return _s(l),Ab(),p=l.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Ln(l),l.subtreeFlags&6&&(l.flags|=8192)):Ln(l),f=l.updateQueue,f!==null&&hg(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),o!==null&&Z(bu),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Va(_r),Ln(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Zj(o,l){switch(hb(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Va(_r),ze(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Bn(l),null;case 31:if(l.memoizedState!==null){if(_s(l),l.alternate===null)throw Error(r(340));gu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(_s(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));gu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Z(dr),null;case 4:return ze(),null;case 10:return Va(l.type),null;case 22:case 23:return _s(l),Ab(),o!==null&&Z(bu),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Va(_r),null;case 25:return null;default:return null}}function Hk(o,l){switch(hb(l),l.tag){case 3:Va(_r),ze();break;case 26:case 27:case 5:Bn(l);break;case 4:ze();break;case 31:l.memoizedState!==null&&_s(l);break;case 13:_s(l);break;case 19:Z(dr);break;case 10:Va(l.type);break;case 22:case 23:_s(l),Ab(),o!==null&&Z(bu);break;case 24:Va(_r)}}function Nh(o,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var b=p.next;f=b;do{if((f.tag&o)===o){p=void 0;var E=f.create,N=f.inst;p=E(),N.destroy=p}f=f.next}while(f!==b)}}catch(F){vn(l,l.return,F)}}function Jl(o,l,f){try{var p=l.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var E=b.next;p=E;do{if((p.tag&o)===o){var N=p.inst,F=N.destroy;if(F!==void 0){N.destroy=void 0,b=l;var ee=f,ge=F;try{ge()}catch(Me){vn(b,ee,Me)}}}p=p.next}while(p!==E)}}catch(Me){vn(l,l.return,Me)}}function qk(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{IT(l,f)}catch(p){vn(o,o.return,p)}}}function $k(o,l,f){f.props=_u(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(p){vn(o,l,p)}}function Dh(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof f=="function"?o.refCleanup=f(p):f.current=p}}catch(b){vn(o,l,b)}}function Xo(o,l){var f=o.ref,p=o.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(b){vn(o,l,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){vn(o,l,b)}else f.current=null}function Wk(o){var l=o.type,f=o.memoizedProps,p=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(b){vn(o,o.return,b)}}function ow(o,l,f){try{var p=o.stateNode;xV(p,o.type,f,l),p[Dn]=l}catch(b){vn(o,o.return,b)}}function Kk(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&sc(o.type)||o.tag===4}function aw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Kk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&sc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function lw(o,l,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=pi));else if(p!==4&&(p===27&&sc(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(lw(o,l,f),o=o.sibling;o!==null;)lw(o,l,f),o=o.sibling}function pg(o,l,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(p!==4&&(p===27&&sc(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(pg(o,l,f),o=o.sibling;o!==null;)pg(o,l,f),o=o.sibling}function Gk(o){var l=o.stateNode,f=o.memoizedProps;try{for(var p=o.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);ni(l,p,f),l[pn]=o,l[Dn]=f}catch(E){vn(o,o.return,E)}}var qa=!1,Cr=!1,cw=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,$r=null;function eV(o,l){if(o=o.containerInfo,Mw=Pg,o=I(o),j(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var b=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var N=0,F=-1,ee=-1,ge=0,Me=0,Ie=o,we=null;t:for(;;){for(var _e;Ie!==f||b!==0&&Ie.nodeType!==3||(F=N+b),Ie!==E||p!==0&&Ie.nodeType!==3||(ee=N+p),Ie.nodeType===3&&(N+=Ie.nodeValue.length),(_e=Ie.firstChild)!==null;)we=Ie,Ie=_e;for(;;){if(Ie===o)break t;if(we===f&&++ge===b&&(F=N),we===E&&++Me===p&&(ee=N),(_e=Ie.nextSibling)!==null)break;Ie=we,we=Ie.parentNode}Ie=_e}f=F===-1||ee===-1?null:{start:F,end:ee}}else f=null}f=f||{start:0,end:0}}else f=null;for(Rw={focusedElem:o,selectionRange:f},Pg=!1,$r=l;$r!==null;)if(l=$r,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,$r=o;else for(;$r!==null;){switch(l=$r,E=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)b=o[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,f=l,b=E.memoizedProps,E=E.memoizedState,p=f.stateNode;try{var ot=_u(f.type,b);o=p.getSnapshotBeforeUpdate(ot,E),p.__reactInternalSnapshotBeforeUpdate=o}catch(vt){vn(f,f.return,vt)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)Iw(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Iw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,$r=o;break}$r=l.return}}function Qk(o,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:Wa(o,f),p&4&&Nh(5,f);break;case 1:if(Wa(o,f),p&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(N){vn(f,f.return,N)}else{var b=_u(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(b,l,o.__reactInternalSnapshotBeforeUpdate)}catch(N){vn(f,f.return,N)}}p&64&&qk(f),p&512&&Dh(f,f.return);break;case 3:if(Wa(o,f),p&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{IT(o,l)}catch(N){vn(f,f.return,N)}}break;case 27:l===null&&p&4&&Gk(f);case 26:case 5:Wa(o,f),l===null&&p&4&&Wk(f),p&512&&Dh(f,f.return);break;case 12:Wa(o,f);break;case 31:Wa(o,f),p&4&&Zk(o,f);break;case 13:Wa(o,f),p&4&&eC(o,f),p&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=cV.bind(null,f),OV(o,f))));break;case 22:if(p=f.memoizedState!==null||qa,!p){l=l!==null&&l.memoizedState!==null||Cr,b=qa;var E=Cr;qa=p,(Cr=l)&&!E?Ka(o,f,(f.subtreeFlags&8772)!==0):Wa(o,f),qa=b,Cr=E}break;case 30:break;default:Wa(o,f)}}function Xk(o){var l=o.alternate;l!==null&&(o.alternate=null,Xk(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Aa(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Hn=null,Ji=!1;function $a(o,l,f){for(f=f.child;f!==null;)Jk(o,l,f),f=f.sibling}function Jk(o,l,f){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(br,f)}catch{}switch(f.tag){case 26:Cr||Xo(f,l),$a(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Cr||Xo(f,l);var p=Hn,b=Ji;sc(f.type)&&(Hn=f.stateNode,Ji=!1),$a(o,l,f),Fh(f.stateNode),Hn=p,Ji=b;break;case 5:Cr||Xo(f,l);case 6:if(p=Hn,b=Ji,Hn=null,$a(o,l,f),Hn=p,Ji=b,Hn!==null)if(Ji)try{(Hn.nodeType===9?Hn.body:Hn.nodeName==="HTML"?Hn.ownerDocument.body:Hn).removeChild(f.stateNode)}catch(E){vn(f,l,E)}else try{Hn.removeChild(f.stateNode)}catch(E){vn(f,l,E)}break;case 18:Hn!==null&&(Ji?(o=Hn,qC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Wf(o)):qC(Hn,f.stateNode));break;case 4:p=Hn,b=Ji,Hn=f.stateNode.containerInfo,Ji=!0,$a(o,l,f),Hn=p,Ji=b;break;case 0:case 11:case 14:case 15:Jl(2,f,l),Cr||Jl(4,f,l),$a(o,l,f);break;case 1:Cr||(Xo(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&$k(f,l,p)),$a(o,l,f);break;case 21:$a(o,l,f);break;case 22:Cr=(p=Cr)||f.memoizedState!==null,$a(o,l,f),Cr=p;break;default:$a(o,l,f)}}function Zk(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Wf(o)}catch(f){vn(l,l.return,f)}}}function eC(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Wf(o)}catch(f){vn(l,l.return,f)}}function tV(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new Yk),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new Yk),l;default:throw Error(r(435,o.tag))}}function mg(o,l){var f=tV(o);l.forEach(function(p){if(!f.has(p)){f.add(p);var b=uV.bind(null,o,p);p.then(b,b)}})}function Zi(o,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var b=f[p],E=o,N=l,F=N;e:for(;F!==null;){switch(F.tag){case 27:if(sc(F.type)){Hn=F.stateNode,Ji=!1;break e}break;case 5:Hn=F.stateNode,Ji=!1;break e;case 3:case 4:Hn=F.stateNode.containerInfo,Ji=!0;break e}F=F.return}if(Hn===null)throw Error(r(160));Jk(E,N,b),Hn=null,Ji=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)tC(l,o),l=l.sibling}var Eo=null;function tC(o,l){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Zi(l,o),es(o),p&4&&(Jl(3,o,o.return),Nh(3,o),Jl(5,o,o.return));break;case 1:Zi(l,o),es(o),p&512&&(Cr||f===null||Xo(f,f.return)),p&64&&qa&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var b=Eo;if(Zi(l,o),es(o),p&512&&(Cr||f===null||Xo(f,f.return)),p&4){var E=f!==null?f.memoizedState:null;if(p=o.memoizedState,f===null)if(p===null)if(o.stateNode===null){e:{p=o.type,f=o.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":E=b.getElementsByTagName("title")[0],(!E||E[Ur]||E[pn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(p),b.head.insertBefore(E,b.querySelector("head > title"))),ni(E,p,f),E[pn]=o,$n(E),p=E;break e;case"link":var N=tA("link","href",b).get(p+(f.href||""));if(N){for(var F=0;F<N.length;F++)if(E=N[F],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(F,1);break t}}E=b.createElement(p),ni(E,p,f),b.head.appendChild(E);break;case"meta":if(N=tA("meta","content",b).get(p+(f.content||""))){for(F=0;F<N.length;F++)if(E=N[F],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(F,1);break t}}E=b.createElement(p),ni(E,p,f),b.head.appendChild(E);break;default:throw Error(r(468,p))}E[pn]=o,$n(E),p=E}o.stateNode=p}else nA(b,o.type,o.stateNode);else o.stateNode=eA(b,p,o.memoizedProps);else E!==p?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,p===null?nA(b,o.type,o.stateNode):eA(b,p,o.memoizedProps)):p===null&&o.stateNode!==null&&ow(o,o.memoizedProps,f.memoizedProps)}break;case 27:Zi(l,o),es(o),p&512&&(Cr||f===null||Xo(f,f.return)),f!==null&&p&4&&ow(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Zi(l,o),es(o),p&512&&(Cr||f===null||Xo(f,f.return)),o.flags&32){b=o.stateNode;try{Jr(b,"")}catch(ot){vn(o,o.return,ot)}}p&4&&o.stateNode!=null&&(b=o.memoizedProps,ow(o,b,f!==null?f.memoizedProps:b)),p&1024&&(cw=!0);break;case 6:if(Zi(l,o),es(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,f=o.stateNode;try{f.nodeValue=p}catch(ot){vn(o,o.return,ot)}}break;case 3:if(Rg=null,b=Eo,Eo=Og(l.containerInfo),Zi(l,o),Eo=b,es(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Wf(l.containerInfo)}catch(ot){vn(o,o.return,ot)}cw&&(cw=!1,nC(o));break;case 4:p=Eo,Eo=Og(o.stateNode.containerInfo),Zi(l,o),es(o),Eo=p;break;case 12:Zi(l,o),es(o);break;case 31:Zi(l,o),es(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,mg(o,p)));break;case 13:Zi(l,o),es(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(yg=xn()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,mg(o,p)));break;case 22:b=o.memoizedState!==null;var ee=f!==null&&f.memoizedState!==null,ge=qa,Me=Cr;if(qa=ge||b,Cr=Me||ee,Zi(l,o),Cr=Me,qa=ge,es(o),p&8192)e:for(l=o.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(f===null||ee||qa||Cr||Tu(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){ee=f=l;try{if(E=ee.stateNode,b)N=E.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{F=ee.stateNode;var Ie=ee.memoizedProps.style,we=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;F.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(ot){vn(ee,ee.return,ot)}}}else if(l.tag===6){if(f===null){ee=l;try{ee.stateNode.nodeValue=b?"":ee.memoizedProps}catch(ot){vn(ee,ee.return,ot)}}}else if(l.tag===18){if(f===null){ee=l;try{var _e=ee.stateNode;b?$C(_e,!0):$C(ee.stateNode,!1)}catch(ot){vn(ee,ee.return,ot)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=o.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,mg(o,f))));break;case 19:Zi(l,o),es(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,mg(o,p)));break;case 30:break;case 21:break;default:Zi(l,o),es(o)}}function es(o){var l=o.flags;if(l&2){try{for(var f,p=o.return;p!==null;){if(Kk(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,E=aw(o);pg(o,E,b);break;case 5:var N=f.stateNode;f.flags&32&&(Jr(N,""),f.flags&=-33);var F=aw(o);pg(o,F,N);break;case 3:case 4:var ee=f.stateNode.containerInfo,ge=aw(o);lw(o,ge,ee);break;default:throw Error(r(161))}}catch(Me){vn(o,o.return,Me)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function nC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;nC(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Wa(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Qk(o,l.alternate,l),l=l.sibling}function Tu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Jl(4,l,l.return),Tu(l);break;case 1:Xo(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&$k(l,l.return,f),Tu(l);break;case 27:Fh(l.stateNode);case 26:case 5:Xo(l,l.return),Tu(l);break;case 22:l.memoizedState===null&&Tu(l);break;case 30:Tu(l);break;default:Tu(l)}o=o.sibling}}function Ka(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,b=o,E=l,N=E.flags;switch(E.tag){case 0:case 11:case 15:Ka(b,E,f),Nh(4,E);break;case 1:if(Ka(b,E,f),p=E,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ge){vn(p,p.return,ge)}if(p=E,b=p.updateQueue,b!==null){var F=p.stateNode;try{var ee=b.shared.hiddenCallbacks;if(ee!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ee.length;b++)DT(ee[b],F)}catch(ge){vn(p,p.return,ge)}}f&&N&64&&qk(E),Dh(E,E.return);break;case 27:Gk(E);case 26:case 5:Ka(b,E,f),f&&p===null&&N&4&&Wk(E),Dh(E,E.return);break;case 12:Ka(b,E,f);break;case 31:Ka(b,E,f),f&&N&4&&Zk(b,E);break;case 13:Ka(b,E,f),f&&N&4&&eC(b,E);break;case 22:E.memoizedState===null&&Ka(b,E,f),Dh(E,E.return);break;case 30:break;default:Ka(b,E,f)}l=l.sibling}}function uw(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&bh(f))}function fw(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&bh(o))}function So(o,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)rC(o,l,f,p),l=l.sibling}function rC(o,l,f,p){var b=l.flags;switch(l.tag){case 0:case 11:case 15:So(o,l,f,p),b&2048&&Nh(9,l);break;case 1:So(o,l,f,p);break;case 3:So(o,l,f,p),b&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&bh(o)));break;case 12:if(b&2048){So(o,l,f,p),o=l.stateNode;try{var E=l.memoizedProps,N=E.id,F=E.onPostCommit;typeof F=="function"&&F(N,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ee){vn(l,l.return,ee)}}else So(o,l,f,p);break;case 31:So(o,l,f,p);break;case 13:So(o,l,f,p);break;case 23:break;case 22:E=l.stateNode,N=l.alternate,l.memoizedState!==null?E._visibility&2?So(o,l,f,p):Ih(o,l):E._visibility&2?So(o,l,f,p):(E._visibility|=2,Pf(o,l,f,p,(l.subtreeFlags&10256)!==0||!1)),b&2048&&uw(N,l);break;case 24:So(o,l,f,p),b&2048&&fw(l.alternate,l);break;default:So(o,l,f,p)}}function Pf(o,l,f,p,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var E=o,N=l,F=f,ee=p,ge=N.flags;switch(N.tag){case 0:case 11:case 15:Pf(E,N,F,ee,b),Nh(8,N);break;case 23:break;case 22:var Me=N.stateNode;N.memoizedState!==null?Me._visibility&2?Pf(E,N,F,ee,b):Ih(E,N):(Me._visibility|=2,Pf(E,N,F,ee,b)),b&&ge&2048&&uw(N.alternate,N);break;case 24:Pf(E,N,F,ee,b),b&&ge&2048&&fw(N.alternate,N);break;default:Pf(E,N,F,ee,b)}l=l.sibling}}function Ih(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,p=l,b=p.flags;switch(p.tag){case 22:Ih(f,p),b&2048&&uw(p.alternate,p);break;case 24:Ih(f,p),b&2048&&fw(p.alternate,p);break;default:Ih(f,p)}l=l.sibling}}var Ph=8192;function Lf(o,l,f){if(o.subtreeFlags&Ph)for(o=o.child;o!==null;)iC(o,l,f),o=o.sibling}function iC(o,l,f){switch(o.tag){case 26:Lf(o,l,f),o.flags&Ph&&o.memoizedState!==null&&UV(f,Eo,o.memoizedState,o.memoizedProps);break;case 5:Lf(o,l,f);break;case 3:case 4:var p=Eo;Eo=Og(o.stateNode.containerInfo),Lf(o,l,f),Eo=p;break;case 22:o.memoizedState===null&&(p=o.alternate,p!==null&&p.memoizedState!==null?(p=Ph,Ph=16777216,Lf(o,l,f),Ph=p):Lf(o,l,f));break;default:Lf(o,l,f)}}function sC(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Lh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];$r=p,aC(p,o)}sC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)oC(o),o=o.sibling}function oC(o){switch(o.tag){case 0:case 11:case 15:Lh(o),o.flags&2048&&Jl(9,o,o.return);break;case 3:Lh(o);break;case 12:Lh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,gg(o)):Lh(o);break;default:Lh(o)}}function gg(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];$r=p,aC(p,o)}sC(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Jl(8,l,l.return),gg(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,gg(l));break;default:gg(l)}o=o.sibling}}function aC(o,l){for(;$r!==null;){var f=$r;switch(f.tag){case 0:case 11:case 15:Jl(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:bh(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,$r=p;else e:for(f=o;$r!==null;){p=$r;var b=p.sibling,E=p.return;if(Xk(p),p===f){$r=null;break e}if(b!==null){b.return=E,$r=b;break e}$r=E}}}var nV={getCacheForType:function(o){var l=ei(_r),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f},cacheSignal:function(){return ei(_r).controller.signal}},rV=typeof WeakMap=="function"?WeakMap:Map,cn=0,kn=null,Ht=null,Wt=0,yn=0,Ts=null,Zl=!1,zf=!1,dw=!1,Ga=0,ir=0,ec=0,ku=0,hw=0,ks=0,jf=0,zh=null,ts=null,pw=!1,yg=0,lC=0,vg=1/0,bg=null,tc=null,zr=0,nc=null,Vf=null,Ya=0,mw=0,gw=null,cC=null,jh=0,yw=null;function Cs(){return(cn&2)!==0&&Wt!==0?Wt&-Wt:oe.T!==null?Sw():Ca()}function uC(){if(ks===0)if((Wt&536870912)===0||Zt){var o=st;st<<=1,(st&3932160)===0&&(st=262144),ks=o}else ks=536870912;return o=Ss.current,o!==null&&(o.flags|=32),ks}function ns(o,l,f){(o===kn&&(yn===2||yn===9)||o.cancelPendingCommit!==null)&&(Bf(o,0),rc(o,Wt,ks,!1)),qn(o,f),((cn&2)===0||o!==kn)&&(o===kn&&((cn&2)===0&&(ku|=f),ir===4&&rc(o,Wt,ks,!1)),Jo(o))}function fC(o,l,f){if((cn&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&o.expiredLanes)===0||tr(o,l),b=p?oV(o,l):bw(o,l,!0),E=p;do{if(b===0){zf&&!p&&rc(o,l,0,!1);break}else{if(f=o.current.alternate,E&&!iV(f)){b=bw(o,l,!1),E=!1;continue}if(b===2){if(E=l,o.errorRecoveryDisabledLanes&E)var N=0;else N=o.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var F=o;b=zh;var ee=F.current.memoizedState.isDehydrated;if(ee&&(Bf(F,N).flags|=256),N=bw(F,N,!1),N!==2){if(dw&&!ee){F.errorRecoveryDisabledLanes|=E,ku|=E,b=4;break e}E=ts,ts=b,E!==null&&(ts===null?ts=E:ts.push.apply(ts,E))}b=N}if(E=!1,b!==2)continue}}if(b===1){Bf(o,0),rc(o,l,0,!0);break}e:{switch(p=o,E=b,E){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:rc(p,l,ks,!Zl);break e;case 2:ts=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=yg+300-xn(),10<b)){if(rc(p,l,ks,!Zl),yt(p,0,!0)!==0)break e;Ya=l,p.timeoutHandle=FC(dC.bind(null,p,f,ts,bg,pw,l,ks,ku,jf,Zl,E,"Throttled",-0,0),b);break e}dC(p,f,ts,bg,pw,l,ks,ku,jf,Zl,E,null,-0,0)}}break}while(!0);Jo(o)}function dC(o,l,f,p,b,E,N,F,ee,ge,Me,Ie,we,_e){if(o.timeoutHandle=-1,Ie=l.subtreeFlags,Ie&8192||(Ie&16785408)===16785408){Ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pi},iC(l,E,Ie);var ot=(E&62914560)===E?yg-xn():(E&4194048)===E?lC-xn():0;if(ot=FV(Ie,ot),ot!==null){Ya=E,o.cancelPendingCommit=ot(wC.bind(null,o,l,E,f,p,b,N,F,ee,Me,Ie,null,we,_e)),rc(o,E,N,!ge);return}}wC(o,l,E,f,p,b,N,F,ee)}function iV(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var b=f[p],E=b.getSnapshot;b=b.value;try{if(!mi(E(),b))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function rc(o,l,f,p){l&=~hw,l&=~ku,o.suspendedLanes|=l,o.pingedLanes&=~l,p&&(o.warmLanes|=l),p=o.expirationTimes;for(var b=l;0<b;){var E=31-Ce(b),N=1<<E;p[E]=-1,b&=~N}f!==0&&Ps(o,f,l)}function wg(){return(cn&6)===0?(Vh(0),!1):!0}function vw(){if(Ht!==null){if(yn===0)var o=Ht.return;else o=Ht,ja=yu=null,Ib(o),Mf=null,xh=0,o=Ht;for(;o!==null;)Hk(o.alternate,o),o=o.return;Ht=null}}function Bf(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,_V(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),Ya=0,vw(),kn=o,Ht=f=La(o.current,null),Wt=l,yn=0,Ts=null,Zl=!1,zf=tr(o,l),dw=!1,jf=ks=hw=ku=ec=ir=0,ts=zh=null,pw=!1,(l&8)!==0&&(l|=l&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=l;0<p;){var b=31-Ce(p),E=1<<b;l|=o[b],p&=~E}return Ga=l,qr(),f}function hC(o,l){Pt=null,oe.H=Oh,l===Of||l===Ym?(l=OT(),yn=3):l===Eb?(l=OT(),yn=4):yn=l===Qb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ts=l,Ht===null&&(ir=1,cg(o,$s(l,o.current)))}function pC(){var o=Ss.current;return o===null?!0:(Wt&4194048)===Wt?Ys===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?o===Ys:!1}function mC(){var o=oe.H;return oe.H=Oh,o===null?Oh:o}function gC(){var o=oe.A;return oe.A=nV,o}function xg(){ir=4,Zl||(Wt&4194048)!==Wt&&Ss.current!==null||(zf=!0),(ec&134217727)===0&&(ku&134217727)===0||kn===null||rc(kn,Wt,ks,!1)}function bw(o,l,f){var p=cn;cn|=2;var b=mC(),E=gC();(kn!==o||Wt!==l)&&(bg=null,Bf(o,l)),l=!1;var N=ir;e:do try{if(yn!==0&&Ht!==null){var F=Ht,ee=Ts;switch(yn){case 8:vw(),N=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(l=!0);var ge=yn;if(yn=0,Ts=null,Uf(o,F,ee,ge),f&&zf){N=0;break e}break;default:ge=yn,yn=0,Ts=null,Uf(o,F,ee,ge)}}sV(),N=ir;break}catch(Me){hC(o,Me)}while(!0);return l&&o.shellSuspendCounter++,ja=yu=null,cn=p,oe.H=b,oe.A=E,Ht===null&&(kn=null,Wt=0,qr()),N}function sV(){for(;Ht!==null;)yC(Ht)}function oV(o,l){var f=cn;cn|=2;var p=mC(),b=gC();kn!==o||Wt!==l?(bg=null,vg=xn()+500,Bf(o,l)):zf=tr(o,l);e:do try{if(yn!==0&&Ht!==null){l=Ht;var E=Ts;t:switch(yn){case 1:yn=0,Ts=null,Uf(o,l,E,1);break;case 2:case 9:if(CT(E)){yn=0,Ts=null,vC(l);break}l=function(){yn!==2&&yn!==9||kn!==o||(yn=7),Jo(o)},E.then(l,l);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:CT(E)?(yn=0,Ts=null,vC(l)):(yn=0,Ts=null,Uf(o,l,E,7));break;case 5:var N=null;switch(Ht.tag){case 26:N=Ht.memoizedState;case 5:case 27:var F=Ht;if(N?rA(N):F.stateNode.complete){yn=0,Ts=null;var ee=F.sibling;if(ee!==null)Ht=ee;else{var ge=F.return;ge!==null?(Ht=ge,Eg(ge)):Ht=null}break t}}yn=0,Ts=null,Uf(o,l,E,5);break;case 6:yn=0,Ts=null,Uf(o,l,E,6);break;case 8:vw(),ir=6;break e;default:throw Error(r(462))}}aV();break}catch(Me){hC(o,Me)}while(!0);return ja=yu=null,oe.H=p,oe.A=b,cn=f,Ht!==null?0:(kn=null,Wt=0,qr(),ir)}function aV(){for(;Ht!==null&&!zi();)yC(Ht)}function yC(o){var l=Uk(o.alternate,o,Ga);o.memoizedProps=o.pendingProps,l===null?Eg(o):Ht=l}function vC(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=Pk(f,l,l.pendingProps,l.type,void 0,Wt);break;case 11:l=Pk(f,l,l.pendingProps,l.type.render,l.ref,Wt);break;case 5:Ib(l);default:Hk(f,l),l=Ht=gT(l,Ga),l=Uk(f,l,Ga)}o.memoizedProps=o.pendingProps,l===null?Eg(o):Ht=l}function Uf(o,l,f,p){ja=yu=null,Ib(l),Mf=null,xh=0;var b=l.return;try{if(Yj(o,b,l,f,Wt)){ir=1,cg(o,$s(f,o.current)),Ht=null;return}}catch(E){if(b!==null)throw Ht=b,E;ir=1,cg(o,$s(f,o.current)),Ht=null;return}l.flags&32768?(Zt||p===1?o=!0:zf||(Wt&536870912)!==0?o=!1:(Zl=o=!0,(p===2||p===9||p===3||p===6)&&(p=Ss.current,p!==null&&p.tag===13&&(p.flags|=16384))),bC(l,o)):Eg(l)}function Eg(o){var l=o;do{if((l.flags&32768)!==0){bC(l,Zl);return}o=l.return;var f=Jj(l.alternate,l,Ga);if(f!==null){Ht=f;return}if(l=l.sibling,l!==null){Ht=l;return}Ht=l=o}while(l!==null);ir===0&&(ir=5)}function bC(o,l){do{var f=Zj(o.alternate,o);if(f!==null){f.flags&=32767,Ht=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){Ht=o;return}Ht=o=f}while(o!==null);ir=6,Ht=null}function wC(o,l,f,p,b,E,N,F,ee){o.cancelPendingCommit=null;do Sg();while(zr!==0);if((cn&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(E=l.lanes|l.childLanes,E|=It,su(o,f,E,N,F,ee),o===kn&&(Ht=kn=null,Wt=0),Vf=l,nc=o,Ya=f,mw=E,gw=b,cC=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,fV(Pr,function(){return TC(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=oe.T,oe.T=null,b=Ee.p,Ee.p=2,N=cn,cn|=4;try{eV(o,l,f)}finally{cn=N,Ee.p=b,oe.T=p}}zr=1,xC(),EC(),SC()}}function xC(){if(zr===1){zr=0;var o=nc,l=Vf,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=oe.T,oe.T=null;var p=Ee.p;Ee.p=2;var b=cn;cn|=4;try{tC(l,o);var E=Rw,N=I(o.containerInfo),F=E.focusedElem,ee=E.selectionRange;if(N!==F&&F&&F.ownerDocument&&A(F.ownerDocument.documentElement,F)){if(ee!==null&&j(F)){var ge=ee.start,Me=ee.end;if(Me===void 0&&(Me=ge),"selectionStart"in F)F.selectionStart=ge,F.selectionEnd=Math.min(Me,F.value.length);else{var Ie=F.ownerDocument||document,we=Ie&&Ie.defaultView||window;if(we.getSelection){var _e=we.getSelection(),ot=F.textContent.length,vt=Math.min(ee.start,ot),_n=ee.end===void 0?vt:Math.min(ee.end,ot);!_e.extend&&vt>_n&&(N=_n,_n=vt,vt=N);var de=T(F,vt),se=T(F,_n);if(de&&se&&(_e.rangeCount!==1||_e.anchorNode!==de.node||_e.anchorOffset!==de.offset||_e.focusNode!==se.node||_e.focusOffset!==se.offset)){var me=Ie.createRange();me.setStart(de.node,de.offset),_e.removeAllRanges(),vt>_n?(_e.addRange(me),_e.extend(se.node,se.offset)):(me.setEnd(se.node,se.offset),_e.addRange(me))}}}}for(Ie=[],_e=F;_e=_e.parentNode;)_e.nodeType===1&&Ie.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Ie.length;F++){var Ne=Ie[F];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Pg=!!Mw,Rw=Mw=null}finally{cn=b,Ee.p=p,oe.T=f}}o.current=l,zr=2}}function EC(){if(zr===2){zr=0;var o=nc,l=Vf,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=oe.T,oe.T=null;var p=Ee.p;Ee.p=2;var b=cn;cn|=4;try{Qk(o,l.alternate,l)}finally{cn=b,Ee.p=p,oe.T=f}}zr=3}}function SC(){if(zr===4||zr===3){zr=0,lr();var o=nc,l=Vf,f=Ya,p=cC;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?zr=5:(zr=0,Vf=nc=null,_C(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(tc=null),Vi(f),l=l.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(br,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=oe.T,b=Ee.p,Ee.p=2,oe.T=null;try{for(var E=o.onRecoverableError,N=0;N<p.length;N++){var F=p[N];E(F.value,{componentStack:F.stack})}}finally{oe.T=l,Ee.p=b}}(Ya&3)!==0&&Sg(),Jo(o),b=o.pendingLanes,(f&261930)!==0&&(b&42)!==0?o===yw?jh++:(jh=0,yw=o):jh=0,Vh(0)}}function _C(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,bh(l)))}function Sg(){return xC(),EC(),SC(),TC()}function TC(){if(zr!==5)return!1;var o=nc,l=mw;mw=0;var f=Vi(Ya),p=oe.T,b=Ee.p;try{Ee.p=32>f?32:f,oe.T=null,f=gw,gw=null;var E=nc,N=Ya;if(zr=0,Vf=nc=null,Ya=0,(cn&6)!==0)throw Error(r(331));var F=cn;if(cn|=4,oC(E.current),rC(E,E.current,N,f),cn=F,Vh(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(br,E)}catch{}return!0}finally{Ee.p=b,oe.T=p,_C(o,l)}}function kC(o,l,f){l=$s(f,l),l=Yb(o.stateNode,l,2),o=Yl(o,l,2),o!==null&&(qn(o,2),Jo(o))}function vn(o,l,f){if(o.tag===3)kC(o,o,f);else for(;l!==null;){if(l.tag===3){kC(l,o,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(tc===null||!tc.has(p))){o=$s(f,o),f=Ck(2),p=Yl(l,f,2),p!==null&&(Ak(f,p,l,o),qn(p,2),Jo(p));break}}l=l.return}}function ww(o,l,f){var p=o.pingCache;if(p===null){p=o.pingCache=new rV;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(f)||(dw=!0,b.add(f),o=lV.bind(null,o,l,f),l.then(o,o))}function lV(o,l,f){var p=o.pingCache;p!==null&&p.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,kn===o&&(Wt&f)===f&&(ir===4||ir===3&&(Wt&62914560)===Wt&&300>xn()-yg?(cn&2)===0&&Bf(o,0):hw|=f,jf===Wt&&(jf=0)),Jo(o)}function CC(o,l){l===0&&(l=Bo()),o=Fn(o,l),o!==null&&(qn(o,l),Jo(o))}function cV(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),CC(o,f)}function uV(o,l){var f=0;switch(o.tag){case 31:case 13:var p=o.stateNode,b=o.memoizedState;b!==null&&(f=b.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),CC(o,f)}function fV(o,l){return Xt(o,l)}var _g=null,Ff=null,xw=!1,Tg=!1,Ew=!1,ic=0;function Jo(o){o!==Ff&&o.next===null&&(Ff===null?_g=Ff=o:Ff=Ff.next=o),Tg=!0,xw||(xw=!0,hV())}function Vh(o,l){if(!Ew&&Tg){Ew=!0;do for(var f=!1,p=_g;p!==null;){if(o!==0){var b=p.pendingLanes;if(b===0)var E=0;else{var N=p.suspendedLanes,F=p.pingedLanes;E=(1<<31-Ce(42|o)+1)-1,E&=b&~(N&~F),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,RC(p,E))}else E=Wt,E=yt(p,p===kn?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||tr(p,E)||(f=!0,RC(p,E));p=p.next}while(f);Ew=!1}}function dV(){AC()}function AC(){Tg=xw=!1;var o=0;ic!==0&&SV()&&(o=ic);for(var l=xn(),f=null,p=_g;p!==null;){var b=p.next,E=OC(p,l);E===0?(p.next=null,f===null?_g=b:f.next=b,b===null&&(Ff=f)):(f=p,(o!==0||(E&3)!==0)&&(Tg=!0)),p=b}zr!==0&&zr!==5||Vh(o),ic!==0&&(ic=0)}function OC(o,l){for(var f=o.suspendedLanes,p=o.pingedLanes,b=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var N=31-Ce(E),F=1<<N,ee=b[N];ee===-1?((F&f)===0||(F&p)!==0)&&(b[N]=ji(F,l)):ee<=l&&(o.expiredLanes|=F),E&=~F}if(l=kn,f=Wt,f=yt(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,f===0||o===l&&(yn===2||yn===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&un(p),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||tr(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(p!==null&&un(p),Vi(f)){case 2:case 8:f=vr;break;case 32:f=Pr;break;case 268435456:f=Is;break;default:f=Pr}return p=MC.bind(null,o),f=Xt(f,p),o.callbackPriority=l,o.callbackNode=f,l}return p!==null&&p!==null&&un(p),o.callbackPriority=2,o.callbackNode=null,2}function MC(o,l){if(zr!==0&&zr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Sg()&&o.callbackNode!==f)return null;var p=Wt;return p=yt(o,o===kn?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(fC(o,p,l),OC(o,xn()),o.callbackNode!=null&&o.callbackNode===f?MC.bind(null,o):null)}function RC(o,l){if(Sg())return null;fC(o,l,!0)}function hV(){TV(function(){(cn&6)!==0?Xt(yr,dV):AC()})}function Sw(){if(ic===0){var o=Cf;o===0&&(o=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),ic=o}return ic}function NC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:vs(""+o)}function DC(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function pV(o,l,f,p,b){if(l==="submit"&&f&&f.stateNode===b){var E=NC((b[Dn]||null).action),N=p.submitter;N&&(l=(l=N[Dn]||null)?NC(l.formAction):N.getAttribute("formAction"),l!==null&&(E=l,N=null));var F=new Vs("action","action",null,p,b);o.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ic!==0){var ee=N?DC(b,N):new FormData(b);Hb(f,{pending:!0,data:ee,method:b.method,action:E},null,ee)}}else typeof E=="function"&&(F.preventDefault(),ee=N?DC(b,N):new FormData(b),Hb(f,{pending:!0,data:ee,method:b.method,action:E},E,ee))},currentTarget:b}]})}}for(var _w=0;_w<Xe.length;_w++){var Tw=Xe[_w],mV=Tw.toLowerCase(),gV=Tw[0].toUpperCase()+Tw.slice(1);He(mV,"on"+gV)}He(pe,"onAnimationEnd"),He(be,"onAnimationIteration"),He(ke,"onAnimationStart"),He("dblclick","onDoubleClick"),He("focusin","onFocus"),He("focusout","onBlur"),He(De,"onTransitionRun"),He(We,"onTransitionStart"),He(Je,"onTransitionCancel"),He(Fe,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function IC(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],b=p.event;p=p.listeners;e:{var E=void 0;if(l)for(var N=p.length-1;0<=N;N--){var F=p[N],ee=F.instance,ge=F.currentTarget;if(F=F.listener,ee!==E&&b.isPropagationStopped())break e;E=F,b.currentTarget=ge;try{E(b)}catch(Me){tt(Me)}b.currentTarget=null,E=ee}else for(N=0;N<p.length;N++){if(F=p[N],ee=F.instance,ge=F.currentTarget,F=F.listener,ee!==E&&b.isPropagationStopped())break e;E=F,b.currentTarget=ge;try{E(b)}catch(Me){tt(Me)}b.currentTarget=null,E=ee}}}}function qt(o,l){var f=l[po];f===void 0&&(f=l[po]=new Set);var p=o+"__bubble";f.has(p)||(PC(l,o,2,!1),f.add(p))}function kw(o,l,f){var p=0;l&&(p|=4),PC(f,o,p,l)}var kg="_reactListening"+Math.random().toString(36).slice(2);function Cw(o){if(!o[kg]){o[kg]=!0,Ls.forEach(function(f){f!=="selectionchange"&&(yV.has(f)||kw(f,!1,o),kw(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[kg]||(l[kg]=!0,kw("selectionchange",!1,l))}}function PC(o,l,f,p){switch(uA(l)){case 2:var b=$V;break;case 8:b=WV;break;default:b=Fw}f=b.bind(null,l,f,o),b=void 0,!Ma||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?o.addEventListener(l,f,{capture:!0,passive:b}):o.addEventListener(l,f,!0):b!==void 0?o.addEventListener(l,f,{passive:b}):o.addEventListener(l,f,!1)}function Aw(o,l,f,p,b){var E=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var F=p.stateNode.containerInfo;if(F===b)break;if(N===4)for(N=p.return;N!==null;){var ee=N.tag;if((ee===3||ee===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;F!==null;){if(N=Bi(F),N===null)return;if(ee=N.tag,ee===5||ee===6||ee===26||ee===27){p=E=N;continue e}F=F.parentNode}}p=p.return}$i(function(){var ge=E,Me=ki(f),Ie=[];e:{var we=Ge.get(o);if(we!==void 0){var _e=Vs,ot=o;switch(o){case"keypress":if(vo(f)===0)break e;case"keydown":case"keyup":_e=Da;break;case"focusin":ot="focus",_e=Fs;break;case"focusout":ot="blur",_e=Fs;break;case"beforeblur":case"afterblur":_e=Fs;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=C;break;case pe:case be:case ke:_e=uu;break;case Fe:_e=$;break;case"scroll":case"scrollend":_e=qo;break;case"wheel":_e=xe;break;case"copy":case"cut":case"paste":_e=xo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Hs;break;case"toggle":case"beforetoggle":_e=At}var vt=(l&4)!==0,_n=!vt&&(o==="scroll"||o==="scrollend"),de=vt?we!==null?we+"Capture":null:we;vt=[];for(var se=ge,me;se!==null;){var Ne=se;if(me=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||me===null||de===null||(Ne=Ci(se,de),Ne!=null&&vt.push(Uh(se,Ne,me))),_n)break;se=se.return}0<vt.length&&(we=new _e(we,ot,null,f,Me),Ie.push({event:we,listeners:vt}))}}if((l&7)===0){e:{if(we=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",we&&f!==qi&&(ot=f.relatedTarget||f.fromElement)&&(Bi(ot)||ot[Lr]))break e;if((_e||we)&&(we=Me.window===Me?Me:(we=Me.ownerDocument)?we.defaultView||we.parentWindow:window,_e?(ot=f.relatedTarget||f.toElement,_e=ge,ot=ot?Bi(ot):null,ot!==null&&(_n=s(ot),vt=ot.tag,ot!==_n||vt!==5&&vt!==27&&vt!==6)&&(ot=null)):(_e=null,ot=ge),_e!==ot)){if(vt=Ra,Ne="onMouseLeave",de="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(vt=Hs,Ne="onPointerLeave",de="onPointerEnter",se="pointer"),_n=_e==null?we:cr(_e),me=ot==null?we:cr(ot),we=new vt(Ne,se+"leave",_e,f,Me),we.target=_n,we.relatedTarget=me,Ne=null,Bi(Me)===ge&&(vt=new vt(de,se+"enter",ot,f,Me),vt.target=me,vt.relatedTarget=_n,Ne=vt),_n=Ne,_e&&ot)t:{for(vt=vV,de=_e,se=ot,me=0,Ne=de;Ne;Ne=vt(Ne))me++;Ne=0;for(var ht=se;ht;ht=vt(ht))Ne++;for(;0<me-Ne;)de=vt(de),me--;for(;0<Ne-me;)se=vt(se),Ne--;for(;me--;){if(de===se||se!==null&&de===se.alternate){vt=de;break t}de=vt(de),se=vt(se)}vt=null}else vt=null;_e!==null&&LC(Ie,we,_e,vt,!1),ot!==null&&_n!==null&&LC(Ie,_n,ot,vt,!0)}}e:{if(we=ge?cr(ge):window,_e=we.nodeName&&we.nodeName.toLowerCase(),_e==="select"||_e==="input"&&we.type==="file")var an=hu;else if(wf(we))if(qs)an=Fl;else{an=Pa;var ct=Hm}else _e=we.nodeName,!_e||_e.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?ge&&Rl(ge.elementType)&&(an=hu):an=mh;if(an&&(an=an(o,ge))){ph(Ie,an,f,Me);break e}ct&&ct(o,we,ge),o==="focusout"&&ge&&we.type==="number"&&ge.memoizedProps.value!=null&&Oa(we,"number",we.value)}switch(ct=ge?cr(ge):window,o){case"focusin":(wf(ct)||ct.contentEditable==="true")&&(X=ct,ne=ge,re=null);break;case"focusout":re=ne=X=null;break;case"mousedown":ce=!0;break;case"contextmenu":case"mouseup":case"dragend":ce=!1,te(Ie,f,Me);break;case"selectionchange":if(Y)break;case"keydown":case"keyup":te(Ie,f,Me)}var Lt;if(Jt)e:{switch(o){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Ia?Ko(o,f)&&(Kt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Kt="onCompositionStart");Kt&&(Qi&&f.locale!=="ko"&&(Ia||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Ia&&(Lt=yo()):(Wi=Me,Nl="value"in Wi?Wi.value:Wi.textContent,Ia=!0)),ct=Cg(ge,Kt),0<ct.length&&(Kt=new Ki(Kt,o,null,f,Me),Ie.push({event:Kt,listeners:ct}),Lt?Kt.data=Lt:(Lt=Vl(f),Lt!==null&&(Kt.data=Lt)))),(Lt=Yi?Bm(o,f):ab(o,f))&&(Kt=Cg(ge,"onBeforeInput"),0<Kt.length&&(ct=new Ki("onBeforeInput","beforeinput",null,f,Me),Ie.push({event:ct,listeners:Kt}),ct.data=Lt)),pV(Ie,o,ge,f,Me)}IC(Ie,l)})}function Uh(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Cg(o,l){for(var f=l+"Capture",p=[];o!==null;){var b=o,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=Ci(o,f),b!=null&&p.unshift(Uh(o,b,E)),b=Ci(o,l),b!=null&&p.push(Uh(o,b,E))),o.tag===3)return p;o=o.return}return[]}function vV(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function LC(o,l,f,p,b){for(var E=l._reactName,N=[];f!==null&&f!==p;){var F=f,ee=F.alternate,ge=F.stateNode;if(F=F.tag,ee!==null&&ee===p)break;F!==5&&F!==26&&F!==27||ge===null||(ee=ge,b?(ge=Ci(f,E),ge!=null&&N.unshift(Uh(f,ge,ee))):b||(ge=Ci(f,E),ge!=null&&N.push(Uh(f,ge,ee)))),f=f.return}N.length!==0&&o.push({event:l,listeners:N})}var bV=/\r\n?/g,wV=/\u0000|\uFFFD/g;function zC(o){return(typeof o=="string"?o:""+o).replace(bV,`
`).replace(wV,"")}function jC(o,l){return l=zC(l),zC(o)===l}function Sn(o,l,f,p,b,E){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Jr(o,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Jr(o,""+p);break;case"className":hi(o,"class",p);break;case"tabIndex":hi(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(o,f,p);break;case"style":Ml(o,p,E);break;case"data":if(l!=="object"){hi(o,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=vs(""+p),o.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(l!=="input"&&Sn(o,l,"name",b.name,b,null),Sn(o,l,"formEncType",b.formEncType,b,null),Sn(o,l,"formMethod",b.formMethod,b,null),Sn(o,l,"formTarget",b.formTarget,b,null)):(Sn(o,l,"encType",b.encType,b,null),Sn(o,l,"method",b.method,b,null),Sn(o,l,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=vs(""+p),o.setAttribute(f,p);break;case"onClick":p!=null&&(o.onclick=pi);break;case"onScroll":p!=null&&qt("scroll",o);break;case"onScrollEnd":p!=null&&qt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}f=vs(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""+p):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":p===!0?o.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,p):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(f,p):o.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(f):o.setAttribute(f,p);break;case"popover":qt("beforetoggle",o),qt("toggle",o),Dt(o,"popover",p);break;case"xlinkActuate":Wn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Wn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Wn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Wn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Wn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Wn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Dt(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=bf.get(f)||f,Dt(o,f,p))}}function Ow(o,l,f,p,b,E){switch(f){case"style":Ml(o,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof p=="string"?Jr(o,p):(typeof p=="number"||typeof p=="bigint")&&Jr(o,""+p);break;case"onScroll":p!=null&&qt("scroll",o);break;case"onScrollEnd":p!=null&&qt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),l=f.slice(2,b?f.length-7:void 0),E=o[Dn]||null,E=E!=null?E[f]:null,typeof E=="function"&&o.removeEventListener(l,E,b),typeof p=="function")){typeof E!="function"&&E!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,p,b);break e}f in o?o[f]=p:p===!0?o.setAttribute(f,""):Dt(o,f,p)}}}function ni(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",o),qt("load",o);var p=!1,b=!1,E;for(E in f)if(f.hasOwnProperty(E)){var N=f[E];if(N!=null)switch(E){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Sn(o,l,E,N,f,null)}}b&&Sn(o,l,"srcSet",f.srcSet,f,null),p&&Sn(o,l,"src",f.src,f,null);return;case"input":qt("invalid",o);var F=E=N=b=null,ee=null,ge=null;for(p in f)if(f.hasOwnProperty(p)){var Me=f[p];if(Me!=null)switch(p){case"name":b=Me;break;case"type":N=Me;break;case"checked":ee=Me;break;case"defaultChecked":ge=Me;break;case"value":E=Me;break;case"defaultValue":F=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,l));break;default:Sn(o,l,p,Me,f,null)}}Ol(o,E,F,ee,ge,N,b,!1);return;case"select":qt("invalid",o),p=N=E=null;for(b in f)if(f.hasOwnProperty(b)&&(F=f[b],F!=null))switch(b){case"value":E=F;break;case"defaultValue":N=F;break;case"multiple":p=F;default:Sn(o,l,b,F,f,null)}l=E,f=N,o.multiple=!!p,l!=null?gs(o,!!p,l,!1):f!=null&&gs(o,!!p,f,!0);return;case"textarea":qt("invalid",o),E=b=p=null;for(N in f)if(f.hasOwnProperty(N)&&(F=f[N],F!=null))switch(N){case"value":p=F;break;case"defaultValue":b=F;break;case"children":E=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Sn(o,l,N,F,f,null)}ys(o,p,b,E);return;case"option":for(ee in f)f.hasOwnProperty(ee)&&(p=f[ee],p!=null)&&(ee==="selected"?o.selected=p&&typeof p!="function"&&typeof p!="symbol":Sn(o,l,ee,p,f,null));return;case"dialog":qt("beforetoggle",o),qt("toggle",o),qt("cancel",o),qt("close",o);break;case"iframe":case"object":qt("load",o);break;case"video":case"audio":for(p=0;p<Bh.length;p++)qt(Bh[p],o);break;case"image":qt("error",o),qt("load",o);break;case"details":qt("toggle",o);break;case"embed":case"source":case"link":qt("error",o),qt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in f)if(f.hasOwnProperty(ge)&&(p=f[ge],p!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Sn(o,l,ge,p,f,null)}return;default:if(Rl(l)){for(Me in f)f.hasOwnProperty(Me)&&(p=f[Me],p!==void 0&&Ow(o,l,Me,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&Sn(o,l,F,p,f,null))}function xV(o,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,N=null,F=null,ee=null,ge=null,Me=null;for(_e in f){var Ie=f[_e];if(f.hasOwnProperty(_e)&&Ie!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ee=Ie;default:p.hasOwnProperty(_e)||Sn(o,l,_e,null,p,Ie)}}for(var we in p){var _e=p[we];if(Ie=f[we],p.hasOwnProperty(we)&&(_e!=null||Ie!=null))switch(we){case"type":E=_e;break;case"name":b=_e;break;case"checked":ge=_e;break;case"defaultChecked":Me=_e;break;case"value":N=_e;break;case"defaultValue":F=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,l));break;default:_e!==Ie&&Sn(o,l,we,_e,p,Ie)}}ms(o,N,F,ee,ge,Me,E,b);return;case"select":_e=N=F=we=null;for(E in f)if(ee=f[E],f.hasOwnProperty(E)&&ee!=null)switch(E){case"value":break;case"multiple":_e=ee;default:p.hasOwnProperty(E)||Sn(o,l,E,null,p,ee)}for(b in p)if(E=p[b],ee=f[b],p.hasOwnProperty(b)&&(E!=null||ee!=null))switch(b){case"value":we=E;break;case"defaultValue":F=E;break;case"multiple":N=E;default:E!==ee&&Sn(o,l,b,E,p,ee)}l=F,f=N,p=_e,we!=null?gs(o,!!f,we,!1):!!p!=!!f&&(l!=null?gs(o,!!f,l,!0):gs(o,!!f,f?[]:"",!1));return;case"textarea":_e=we=null;for(F in f)if(b=f[F],f.hasOwnProperty(F)&&b!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Sn(o,l,F,null,p,b)}for(N in p)if(b=p[N],E=f[N],p.hasOwnProperty(N)&&(b!=null||E!=null))switch(N){case"value":we=b;break;case"defaultValue":_e=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&Sn(o,l,N,b,p,E)}lu(o,we,_e);return;case"option":for(var ot in f)we=f[ot],f.hasOwnProperty(ot)&&we!=null&&!p.hasOwnProperty(ot)&&(ot==="selected"?o.selected=!1:Sn(o,l,ot,null,p,we));for(ee in p)we=p[ee],_e=f[ee],p.hasOwnProperty(ee)&&we!==_e&&(we!=null||_e!=null)&&(ee==="selected"?o.selected=we&&typeof we!="function"&&typeof we!="symbol":Sn(o,l,ee,we,p,_e));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in f)we=f[vt],f.hasOwnProperty(vt)&&we!=null&&!p.hasOwnProperty(vt)&&Sn(o,l,vt,null,p,we);for(ge in p)if(we=p[ge],_e=f[ge],p.hasOwnProperty(ge)&&we!==_e&&(we!=null||_e!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,l));break;default:Sn(o,l,ge,we,p,_e)}return;default:if(Rl(l)){for(var _n in f)we=f[_n],f.hasOwnProperty(_n)&&we!==void 0&&!p.hasOwnProperty(_n)&&Ow(o,l,_n,void 0,p,we);for(Me in p)we=p[Me],_e=f[Me],!p.hasOwnProperty(Me)||we===_e||we===void 0&&_e===void 0||Ow(o,l,Me,we,p,_e);return}}for(var de in f)we=f[de],f.hasOwnProperty(de)&&we!=null&&!p.hasOwnProperty(de)&&Sn(o,l,de,null,p,we);for(Ie in p)we=p[Ie],_e=f[Ie],!p.hasOwnProperty(Ie)||we===_e||we==null&&_e==null||Sn(o,l,Ie,we,p,_e)}function VC(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EV(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var b=f[p],E=b.transferSize,N=b.initiatorType,F=b.duration;if(E&&F&&VC(N)){for(N=0,F=b.responseEnd,p+=1;p<f.length;p++){var ee=f[p],ge=ee.startTime;if(ge>F)break;var Me=ee.transferSize,Ie=ee.initiatorType;Me&&VC(Ie)&&(ee=ee.responseEnd,N+=Me*(ee<F?1:(F-ge)/(ee-ge)))}if(--p,l+=8*(E+N)/(b.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Mw=null,Rw=null;function Ag(o){return o.nodeType===9?o:o.ownerDocument}function BC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UC(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Nw(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Dw=null;function SV(){var o=window.event;return o&&o.type==="popstate"?o===Dw?!1:(Dw=o,!0):(Dw=null,!1)}var FC=typeof setTimeout=="function"?setTimeout:void 0,_V=typeof clearTimeout=="function"?clearTimeout:void 0,HC=typeof Promise=="function"?Promise:void 0,TV=typeof queueMicrotask=="function"?queueMicrotask:typeof HC<"u"?function(o){return HC.resolve(null).then(o).catch(kV)}:FC;function kV(o){setTimeout(function(){throw o})}function sc(o){return o==="head"}function qC(o,l){var f=l,p=0;do{var b=f.nextSibling;if(o.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(p===0){o.removeChild(b),Wf(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")Fh(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,Fh(f);for(var E=f.firstChild;E;){var N=E.nextSibling,F=E.nodeName;E[Ur]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=N}}else f==="body"&&Fh(o.ownerDocument.body);f=b}while(f);Wf(l)}function $C(o,l){var f=o;o=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=p}while(f)}function Iw(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Iw(f),Aa(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function CV(o,l,f,p){for(;o.nodeType===1;){var b=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Ur])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=Qs(o.nextSibling),o===null)break}return null}function AV(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Qs(o.nextSibling),o===null))return null;return o}function WC(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Qs(o.nextSibling),o===null))return null;return o}function Pw(o){return o.data==="$?"||o.data==="$~"}function Lw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function OV(o,l){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Qs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var zw=null;function KC(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(l===0)return Qs(o.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}o=o.nextSibling}return null}function GC(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return o;l--}else f!=="/$"&&f!=="/&"||l++}o=o.previousSibling}return null}function YC(o,l,f){switch(l=Ag(f),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Fh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Aa(o)}var Xs=new Map,QC=new Set;function Og(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Qa=Ee.d;Ee.d={f:MV,r:RV,D:NV,C:DV,L:IV,m:PV,X:zV,S:LV,M:jV};function MV(){var o=Qa.f(),l=wg();return o||l}function RV(o){var l=nn(o);l!==null&&l.tag===5&&l.type==="form"?hk(l):Qa.r(o)}var Hf=typeof document>"u"?null:document;function XC(o,l,f){var p=Hf;if(p&&typeof l=="string"&&l){var b=xr(l);b='link[rel="'+o+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),QC.has(b)||(QC.add(b),o={rel:o,crossOrigin:f,href:l},p.querySelector(b)===null&&(l=p.createElement("link"),ni(l,"link",o),$n(l),p.head.appendChild(l)))}}function NV(o){Qa.D(o),XC("dns-prefetch",o,null)}function DV(o,l){Qa.C(o,l),XC("preconnect",o,l)}function IV(o,l,f){Qa.L(o,l,f);var p=Hf;if(p&&o&&l){var b='link[rel="preload"][as="'+xr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+xr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+xr(f.imageSizes)+'"]')):b+='[href="'+xr(o)+'"]';var E=b;switch(l){case"style":E=qf(o);break;case"script":E=$f(o)}Xs.has(E)||(o=m({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Xs.set(E,o),p.querySelector(b)!==null||l==="style"&&p.querySelector(Hh(E))||l==="script"&&p.querySelector(qh(E))||(l=p.createElement("link"),ni(l,"link",o),$n(l),p.head.appendChild(l)))}}function PV(o,l){Qa.m(o,l);var f=Hf;if(f&&o){var p=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+xr(p)+'"][href="'+xr(o)+'"]',E=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=$f(o)}if(!Xs.has(E)&&(o=m({rel:"modulepreload",href:o},l),Xs.set(E,o),f.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(qh(E)))return}p=f.createElement("link"),ni(p,"link",o),$n(p),f.head.appendChild(p)}}}function LV(o,l,f){Qa.S(o,l,f);var p=Hf;if(p&&o){var b=wr(p).hoistableStyles,E=qf(o);l=l||"default";var N=b.get(E);if(!N){var F={loading:0,preload:null};if(N=p.querySelector(Hh(E)))F.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Xs.get(E))&&jw(o,f);var ee=N=p.createElement("link");$n(ee),ni(ee,"link",o),ee._p=new Promise(function(ge,Me){ee.onload=ge,ee.onerror=Me}),ee.addEventListener("load",function(){F.loading|=1}),ee.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Mg(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:F},b.set(E,N)}}}function zV(o,l){Qa.X(o,l);var f=Hf;if(f&&o){var p=wr(f).hoistableScripts,b=$f(o),E=p.get(b);E||(E=f.querySelector(qh(b)),E||(o=m({src:o,async:!0},l),(l=Xs.get(b))&&Vw(o,l),E=f.createElement("script"),$n(E),ni(E,"link",o),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function jV(o,l){Qa.M(o,l);var f=Hf;if(f&&o){var p=wr(f).hoistableScripts,b=$f(o),E=p.get(b);E||(E=f.querySelector(qh(b)),E||(o=m({src:o,async:!0,type:"module"},l),(l=Xs.get(b))&&Vw(o,l),E=f.createElement("script"),$n(E),ni(E,"link",o),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function JC(o,l,f,p){var b=(b=Ue.current)?Og(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=qf(f.href),f=wr(b).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=qf(f.href);var E=wr(b).hoistableStyles,N=E.get(o);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,N),(E=b.querySelector(Hh(o)))&&!E._p&&(N.instance=E,N.state.loading=5),Xs.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Xs.set(o,f),E||VV(b,o,f,N.state))),l&&p===null)throw Error(r(528,""));return N}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=$f(f),f=wr(b).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function qf(o){return'href="'+xr(o)+'"'}function Hh(o){return'link[rel="stylesheet"]['+o+"]"}function ZC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function VV(o,l,f,p){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=o.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),ni(l,"link",f),$n(l),o.head.appendChild(l))}function $f(o){return'[src="'+xr(o)+'"]'}function qh(o){return"script[async]"+o}function eA(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=o.querySelector('style[data-href~="'+xr(f.href)+'"]');if(p)return l.instance=p,$n(p),p;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),$n(p),ni(p,"style",b),Mg(p,f.precedence,o),l.instance=p;case"stylesheet":b=qf(f.href);var E=o.querySelector(Hh(b));if(E)return l.state.loading|=4,l.instance=E,$n(E),E;p=ZC(f),(b=Xs.get(b))&&jw(p,b),E=(o.ownerDocument||o).createElement("link"),$n(E);var N=E;return N._p=new Promise(function(F,ee){N.onload=F,N.onerror=ee}),ni(E,"link",p),l.state.loading|=4,Mg(E,f.precedence,o),l.instance=E;case"script":return E=$f(f.src),(b=o.querySelector(qh(E)))?(l.instance=b,$n(b),b):(p=f,(b=Xs.get(E))&&(p=m({},f),Vw(p,b)),o=o.ownerDocument||o,b=o.createElement("script"),$n(b),ni(b,"link",p),o.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Mg(p,f.precedence,o));return l.instance}function Mg(o,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,E=b,N=0;N<p.length;N++){var F=p[N];if(F.dataset.precedence===l)E=F;else if(E!==b)break}E?E.parentNode.insertBefore(o,E.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function jw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Vw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Rg=null;function tA(o,l,f){if(Rg===null){var p=new Map,b=Rg=new Map;b.set(f,p)}else b=Rg,p=b.get(f),p||(p=new Map,b.set(f,p));if(p.has(o))return p;for(p.set(o,null),f=f.getElementsByTagName(o),b=0;b<f.length;b++){var E=f[b];if(!(E[Ur]||E[pn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var N=E.getAttribute(l)||"";N=o+N;var F=p.get(N);F?F.push(E):p.set(N,[E])}}return p}function nA(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function BV(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(o=l.disabled,typeof l.precedence=="string"&&o==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function rA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function UV(o,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=qf(p.href),E=l.querySelector(Hh(b));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=Ng.bind(o),l.then(o,o)),f.state.loading|=4,f.instance=E,$n(E);return}E=l.ownerDocument||l,p=ZC(p),(b=Xs.get(b))&&jw(p,b),E=E.createElement("link"),$n(E);var N=E;N._p=new Promise(function(F,ee){N.onload=F,N.onerror=ee}),ni(E,"link",p),f.instance=E}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Ng.bind(o),l.addEventListener("load",f),l.addEventListener("error",f))}}var Bw=0;function FV(o,l){return o.stylesheets&&o.count===0&&Ig(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var p=setTimeout(function(){if(o.stylesheets&&Ig(o,o.stylesheets),o.unsuspend){var E=o.unsuspend;o.unsuspend=null,E()}},6e4+l);0<o.imgBytes&&Bw===0&&(Bw=62500*EV());var b=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Ig(o,o.stylesheets),o.unsuspend)){var E=o.unsuspend;o.unsuspend=null,E()}},(o.imgBytes>Bw?50:800)+l);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Ng(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ig(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Dg=null;function Ig(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Dg=new Map,l.forEach(HV,o),Dg=null,Ng.call(o))}function HV(o,l){if(!(l.state.loading&4)){var f=Dg.get(o);if(f)var p=f.get(null);else{f=new Map,Dg.set(o,f);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var N=b[E];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),p=N)}p&&f.set(null,p)}b=l.instance,N=b.getAttribute("data-precedence"),E=f.get(N)||p,E===p&&f.set(null,b),f.set(N,b),this.count++,p=Ng.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),E?E.parentNode.insertBefore(b,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),l.state.loading|=4}}var $h={$$typeof:W,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function qV(o,l,f,p,b,E,N,F,ee){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function iA(o,l,f,p,b,E,N,F,ee,ge,Me,Ie){return o=new qV(o,l,f,N,ee,ge,Me,Ie,F),l=1,E===!0&&(l|=24),E=Es(3,null,null,l),o.current=E,E.stateNode=o,l=bb(),l.refCount++,o.pooledCache=l,l.refCount++,E.memoizedState={element:p,isDehydrated:f,cache:l},Sb(E),o}function sA(o){return o?(o=Xi,o):Xi}function oA(o,l,f,p,b,E){b=sA(b),p.context===null?p.context=b:p.pendingContext=b,p=Gl(l),p.payload={element:f},E=E===void 0?null:E,E!==null&&(p.callback=E),f=Yl(o,p,l),f!==null&&(ns(f,o,l),Sh(f,o,l))}function aA(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Uw(o,l){aA(o,l),(o=o.alternate)&&aA(o,l)}function lA(o){if(o.tag===13||o.tag===31){var l=Fn(o,67108864);l!==null&&ns(l,o,67108864),Uw(o,67108864)}}function cA(o){if(o.tag===13||o.tag===31){var l=Cs();l=ka(l);var f=Fn(o,l);f!==null&&ns(f,o,l),Uw(o,l)}}var Pg=!0;function $V(o,l,f,p){var b=oe.T;oe.T=null;var E=Ee.p;try{Ee.p=2,Fw(o,l,f,p)}finally{Ee.p=E,oe.T=b}}function WV(o,l,f,p){var b=oe.T;oe.T=null;var E=Ee.p;try{Ee.p=8,Fw(o,l,f,p)}finally{Ee.p=E,oe.T=b}}function Fw(o,l,f,p){if(Pg){var b=Hw(p);if(b===null)Aw(o,l,p,Lg,f),fA(o,p);else if(GV(b,o,l,f,p))p.stopPropagation();else if(fA(o,p),l&4&&-1<KV.indexOf(o)){for(;b!==null;){var E=nn(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var N=$t(E.pendingLanes);if(N!==0){var F=E;for(F.pendingLanes|=2,F.entangledLanes|=2;N;){var ee=1<<31-Ce(N);F.entanglements[1]|=ee,N&=~ee}Jo(E),(cn&6)===0&&(vg=xn()+500,Vh(0))}}break;case 31:case 13:F=Fn(E,2),F!==null&&ns(F,E,2),wg(),Uw(E,2)}if(E=Hw(p),E===null&&Aw(o,l,p,Lg,f),E===b)break;b=E}b!==null&&p.stopPropagation()}else Aw(o,l,p,null,f)}}function Hw(o){return o=ki(o),qw(o)}var Lg=null;function qw(o){if(Lg=null,o=Bi(o),o!==null){var l=s(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===31){if(o=c(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Lg=o,null}function uA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case yr:return 2;case vr:return 8;case Pr:case cs:return 32;case Is:return 268435456;default:return 32}default:return 32}}var $w=!1,oc=null,ac=null,lc=null,Wh=new Map,Kh=new Map,cc=[],KV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fA(o,l){switch(o){case"focusin":case"focusout":oc=null;break;case"dragenter":case"dragleave":ac=null;break;case"mouseover":case"mouseout":lc=null;break;case"pointerover":case"pointerout":Wh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(l.pointerId)}}function Gh(o,l,f,p,b,E){return o===null||o.nativeEvent!==E?(o={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:E,targetContainers:[b]},l!==null&&(l=nn(l),l!==null&&lA(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),o)}function GV(o,l,f,p,b){switch(l){case"focusin":return oc=Gh(oc,o,l,f,p,b),!0;case"dragenter":return ac=Gh(ac,o,l,f,p,b),!0;case"mouseover":return lc=Gh(lc,o,l,f,p,b),!0;case"pointerover":var E=b.pointerId;return Wh.set(E,Gh(Wh.get(E)||null,o,l,f,p,b)),!0;case"gotpointercapture":return E=b.pointerId,Kh.set(E,Gh(Kh.get(E)||null,o,l,f,p,b)),!0}return!1}function dA(o){var l=Bi(o.target);if(l!==null){var f=s(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,di(o.priority,function(){cA(f)});return}}else if(l===31){if(l=c(f),l!==null){o.blockedOn=l,di(o.priority,function(){cA(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zg(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Hw(o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);qi=p,f.target.dispatchEvent(p),qi=null}else return l=nn(f),l!==null&&lA(l),o.blockedOn=f,!1;l.shift()}return!0}function hA(o,l,f){zg(o)&&f.delete(l)}function YV(){$w=!1,oc!==null&&zg(oc)&&(oc=null),ac!==null&&zg(ac)&&(ac=null),lc!==null&&zg(lc)&&(lc=null),Wh.forEach(hA),Kh.forEach(hA)}function jg(o,l){o.blockedOn===l&&(o.blockedOn=null,$w||($w=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YV)))}var Vg=null;function pA(o){Vg!==o&&(Vg=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vg===o&&(Vg=null);for(var l=0;l<o.length;l+=3){var f=o[l],p=o[l+1],b=o[l+2];if(typeof p!="function"){if(qw(p||f)===null)continue;break}var E=nn(f);E!==null&&(o.splice(l,3),l-=3,Hb(E,{pending:!0,data:b,method:f.method,action:p},p,b))}}))}function Wf(o){function l(ee){return jg(ee,o)}oc!==null&&jg(oc,o),ac!==null&&jg(ac,o),lc!==null&&jg(lc,o),Wh.forEach(l),Kh.forEach(l);for(var f=0;f<cc.length;f++){var p=cc[f];p.blockedOn===o&&(p.blockedOn=null)}for(;0<cc.length&&(f=cc[0],f.blockedOn===null);)dA(f),f.blockedOn===null&&cc.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var b=f[p],E=f[p+1],N=b[Dn]||null;if(typeof E=="function")N||pA(f);else if(N){var F=null;if(E&&E.hasAttribute("formAction")){if(b=E,N=E[Dn]||null)F=N.formAction;else if(qw(b)!==null)continue}else F=N.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),pA(f)}}}function mA(){function o(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function Ww(o){this._internalRoot=o}Bg.prototype.render=Ww.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=Cs();oA(f,p,o,l,null,null)},Bg.prototype.unmount=Ww.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;oA(o.current,2,null,o,null,null),wg(),l[Lr]=null}};function Bg(o){this._internalRoot=o}Bg.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ca();o={blockedOn:null,target:o,priority:l};for(var f=0;f<cc.length&&l!==0&&l<cc[f].priority;f++);cc.splice(f,0,o),f===0&&dA(o)}};var gA=e.version;if(gA!=="19.2.3")throw Error(r(527,gA,"19.2.3"));Ee.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var QV={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ug.isDisabled&&Ug.supportsFiber)try{br=Ug.inject(QV),Se=Ug}catch{}}return Qh.createRoot=function(o,l){if(!i(o))throw Error(r(299));var f=!1,p="",b=Sk,E=_k,N=Tk;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=iA(o,1,!1,null,null,f,p,null,b,E,N,mA),o[Lr]=l.current,Cw(o),new Ww(l)},Qh.hydrateRoot=function(o,l,f){if(!i(o))throw Error(r(299));var p=!1,b="",E=Sk,N=_k,F=Tk,ee=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(ee=f.formState)),l=iA(o,1,!0,l,f??null,p,b,ee,E,N,F,mA),l.context=sA(null),f=l.current,p=Cs(),p=ka(p),b=Gl(p),b.callback=null,Yl(f,b,p),f=p,l.current.lanes=f,qn(l,f),Jo(l),o[Lr]=l.current,Cw(o),new Bg(l)},Qh.version="19.2.3",Qh}var kA;function a5(){if(kA)return Yw.exports;kA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yw.exports=o5(),Yw.exports}var l5=a5();var CA="popstate";function c5(t={}){function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return gx("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:zp(i)}return f5(e,n,null,t)}function Xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Po(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u5(){return Math.random().toString(36).substring(2,10)}function AA(t,e){return{usr:t.state,key:t.key,idx:e}}function gx(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gd(e):e,state:n,key:e&&e.key||r||u5()}}function zp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function f5(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function m(){c="POP";let _=h(),O=_==null?null:_-d;d=_,u&&u({action:c,location:k.location,delta:O})}function v(_,O){c="PUSH";let B=gx(k.location,_,O);d=h()+1;let W=AA(B,d),L=k.createHref(B);try{a.pushState(W,"",L)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(L)}s&&u&&u({action:c,location:k.location,delta:1})}function w(_,O){c="REPLACE";let B=gx(k.location,_,O);d=h();let W=AA(B,d),L=k.createHref(B);a.replaceState(W,"",L),s&&u&&u({action:c,location:k.location,delta:0})}function S(_){return d5(_)}let k={get action(){return c},get location(){return t(i,a)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(CA,m),u=_,()=>{i.removeEventListener(CA,m),u=null}},createHref(_){return e(i,_)},createURL:S,encodeLocation(_){let O=S(_);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:w,go(_){return a.go(_)}};return k}function d5(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:zp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function bD(t,e,n="/"){return h5(t,e,n,!1)}function h5(t,e,n,r){let i=typeof e=="string"?Gd(e):e,s=yl(i.pathname||"/",n);if(s==null)return null;let a=wD(t);p5(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=T5(s);c=S5(a[u],d,r)}return c}function wD(t,e=[],n=[],r="",i=!1){let s=(a,c,u=i,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;Xn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=dl([r,h.relativePath]),v=n.concat(h);a.children&&a.children.length>0&&(Xn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),wD(a.children,e,v,m,u)),!(a.path==null&&!a.index)&&e.push({path:m,score:x5(m,a.index),routesMeta:v})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let u of xD(a.path))s(a,c,!0,u)}),e}function xD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=xD(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function p5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var m5=/^:[\w-]+$/,g5=3,y5=2,v5=1,b5=10,w5=-2,OA=t=>t==="*";function x5(t,e){let n=t.split("/"),r=n.length;return n.some(OA)&&(r+=w5),e&&(r+=y5),n.filter(i=>!OA(i)).reduce((i,s)=>i+(m5.test(s)?g5:s===""?v5:b5),r)}function E5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function S5(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=Fy({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),v=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Fy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:dl([s,m.pathname]),pathnameBase:O5(dl([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=dl([s,m.pathnameBase]))}return a}function Fy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},v)=>{if(h==="*"){let S=c[v]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const w=c[v];return m&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function _5(t,e=!1,n=!0){Po(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function T5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Po(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ED=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k5=t=>ED.test(t);function C5(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Gd(t):t,s;if(n)if(k5(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Po(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=MA(n.substring(1),"/"):s=MA(n,e)}else s=e;return{pathname:s,search:M5(r),hash:R5(i)}}function MA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SD(t){let e=A5(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function _D(t,e,n,r=!1){let i;typeof t=="string"?i=Gd(t):(i={...t},Xn(!i.pathname||!i.pathname.includes("?"),Zw("?","pathname","search",i)),Xn(!i.pathname||!i.pathname.includes("#"),Zw("#","pathname","hash",i)),Xn(!i.search||!i.search.includes("#"),Zw("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}c=m>=0?e[m]:"/"}let u=C5(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var dl=t=>t.join("/").replace(/\/\/+/g,"/"),O5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,R5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,N5=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function D5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function I5(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kD(t,e){let n=t;if(typeof n!="string"||!ED.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(TD)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),c=yl(a.pathname,e);a.origin===s.origin&&c!=null?n=c+a.search+a.hash:i=!0}catch{Po(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var CD=["POST","PUT","PATCH","DELETE"];new Set(CD);var P5=["GET",...CD];new Set(P5);var Yd=z.createContext(null);Yd.displayName="DataRouter";var c0=z.createContext(null);c0.displayName="DataRouterState";var L5=z.createContext(!1),AD=z.createContext({isTransitioning:!1});AD.displayName="ViewTransition";var z5=z.createContext(new Map);z5.displayName="Fetchers";var j5=z.createContext(null);j5.displayName="Await";var ho=z.createContext(null);ho.displayName="Navigation";var fm=z.createContext(null);fm.displayName="Location";var _a=z.createContext({outlet:null,matches:[],isDataRoute:!1});_a.displayName="Route";var GE=z.createContext(null);GE.displayName="RouteError";var OD="REACT_ROUTER_ERROR",V5="REDIRECT",B5="ROUTE_ERROR_RESPONSE";function U5(t){if(t.startsWith(`${OD}:${V5}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function F5(t){if(t.startsWith(`${OD}:${B5}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new N5(e.status,e.statusText,e.data)}catch{}}function H5(t,{relative:e}={}){Xn(dm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=z.useContext(ho),{hash:i,pathname:s,search:a}=hm(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:dl([n,s])),r.createHref({pathname:c,search:a,hash:i})}function dm(){return z.useContext(fm)!=null}function Zc(){return Xn(dm(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fm).location}var MD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RD(t){z.useContext(ho).static||z.useLayoutEffect(t)}function ND(){let{isDataRoute:t}=z.useContext(_a);return t?iB():q5()}function q5(){Xn(dm(),"useNavigate() may be used only in the context of a <Router> component.");let t=z.useContext(Yd),{basename:e,navigator:n}=z.useContext(ho),{matches:r}=z.useContext(_a),{pathname:i}=Zc(),s=JSON.stringify(SD(r)),a=z.useRef(!1);return RD(()=>{a.current=!0}),z.useCallback((u,d={})=>{if(Po(a.current,MD),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=_D(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:dl([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,s,i,t])}var $5=z.createContext(null);function W5(t){let e=z.useContext(_a).outlet;return z.useMemo(()=>e&&z.createElement($5.Provider,{value:t},e),[e,t])}function hm(t,{relative:e}={}){let{matches:n}=z.useContext(_a),{pathname:r}=Zc(),i=JSON.stringify(SD(n));return z.useMemo(()=>_D(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function K5(t,e){return DD(t,e)}function DD(t,e,n,r,i){Xn(dm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=z.useContext(ho),{matches:a}=z.useContext(_a),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let B=m&&m.path||"";PD(d,!m||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let v=Zc(),w;if(e){let B=typeof e=="string"?Gd(e):e;Xn(h==="/"||B.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=v;let S=w.pathname||"/",k=S;if(h!=="/"){let B=h.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(B.length).join("/")}let _=bD(t,{pathname:k});Po(m||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Po(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=J5(_&&_.map(B=>Object.assign({},B,{params:Object.assign({},u,B.params),pathname:dl([h,s.encodeLocation?s.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?h:dl([h,s.encodeLocation?s.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),a,n,r,i);return e&&O?z.createElement(fm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},O):O}function G5(){let t=rB(),e=D5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:s},"ErrorBoundary")," or"," ",z.createElement("code",{style:s},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:i},n):null,a)}var Y5=z.createElement(G5,null),ID=class extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=F5(t.digest);n&&(t=n)}let e=t!==void 0?z.createElement(_a.Provider,{value:this.props.routeContext},z.createElement(GE.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?z.createElement(Q5,{error:t},e):e}};ID.contextType=L5;var e1=new WeakMap;function Q5({children:t,error:e}){let{basename:n}=z.useContext(ho);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=U5(e.digest);if(r){let i=e1.get(e);if(i)throw i;let s=kD(r.location,n);if(TD&&!e1.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw e1.set(e,a),a}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function X5({routeContext:t,match:e,children:n}){let r=z.useContext(Yd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(_a.Provider,{value:t},n)}function J5(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let h=s.findIndex(m=>m.route.id&&a?.[m.route.id]!==void 0);Xn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:v,errors:w}=n,S=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||S){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let d=n&&r?(h,m)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:I5(n.matches),errorInfo:m})}:void 0;return s.reduceRight((h,m,v)=>{let w,S=!1,k=null,_=null;n&&(w=a&&m.route.id?a[m.route.id]:void 0,k=m.route.errorElement||Y5,c&&(u<0&&v===0?(PD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,_=null):u===v&&(S=!0,_=m.route.hydrateFallbackElement||null)));let O=e.concat(s.slice(0,v+1)),B=()=>{let W;return w?W=k:S?W=_:m.route.Component?W=z.createElement(m.route.Component,null):m.route.element?W=m.route.element:W=h,z.createElement(X5,{match:m,routeContext:{outlet:h,matches:O,isDataRoute:n!=null},children:W})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?z.createElement(ID,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:B(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:d}):B()},null)}function YE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z5(t){let e=z.useContext(Yd);return Xn(e,YE(t)),e}function eB(t){let e=z.useContext(c0);return Xn(e,YE(t)),e}function tB(t){let e=z.useContext(_a);return Xn(e,YE(t)),e}function QE(t){let e=tB(t),n=e.matches[e.matches.length-1];return Xn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function nB(){return QE("useRouteId")}function rB(){let t=z.useContext(GE),e=eB("useRouteError"),n=QE("useRouteError");return t!==void 0?t:e.errors?.[n]}function iB(){let{router:t}=Z5("useNavigate"),e=QE("useNavigate"),n=z.useRef(!1);return RD(()=>{n.current=!0}),z.useCallback(async(i,s={})=>{Po(n.current,MD),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var RA={};function PD(t,e,n){!e&&!RA[t]&&(RA[t]=!0,Po(!1,n))}z.memo(sB);function sB({routes:t,future:e,state:n,onError:r}){return DD(t,void 0,n,r,e)}function oB(t){return W5(t.context)}function mc(t){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aB({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){Xn(!dm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:c,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[c,i,s,a]);typeof n=="string"&&(n=Gd(n));let{pathname:d="/",search:h="",hash:m="",state:v=null,key:w="default"}=n,S=z.useMemo(()=>{let k=yl(d,c);return k==null?null:{location:{pathname:k,search:h,hash:m,state:v,key:w},navigationType:r}},[c,d,h,m,v,w,r]);return Po(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:z.createElement(ho.Provider,{value:u},z.createElement(fm.Provider,{children:e,value:S}))}function lB({children:t,location:e}){return K5(yx(t),e)}function yx(t,e=[]){let n=[];return z.Children.forEach(t,(r,i)=>{if(!z.isValidElement(r))return;let s=[...e,i];if(r.type===z.Fragment){n.push.apply(n,yx(r.props.children,s));return}Xn(r.type===mc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=yx(r.props.children,s)),n.push(a)}),n}var wy="get",xy="application/x-www-form-urlencoded";function u0(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function cB(t){return u0(t)&&t.tagName.toLowerCase()==="button"}function uB(t){return u0(t)&&t.tagName.toLowerCase()==="form"}function fB(t){return u0(t)&&t.tagName.toLowerCase()==="input"}function dB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hB(t,e){return t.button===0&&(!e||e==="_self")&&!dB(t)}var Fg=null;function pB(){if(Fg===null)try{new FormData(document.createElement("form"),0),Fg=!1}catch{Fg=!0}return Fg}var mB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t1(t){return t!=null&&!mB.has(t)?(Po(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xy}"`),null):t}function gB(t,e){let n,r,i,s,a;if(uB(t)){let c=t.getAttribute("action");r=c?yl(c,e):null,n=t.getAttribute("method")||wy,i=t1(t.getAttribute("enctype"))||xy,s=new FormData(t)}else if(cB(t)||fB(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?yl(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||wy,i=t1(t.getAttribute("formenctype"))||t1(c.getAttribute("enctype"))||xy,s=new FormData(c,t),!pB()){let{name:d,type:h,value:m}=t;if(h==="image"){let v=d?`${d}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else d&&s.append(d,m)}}else{if(u0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wy,r=null,i=xy,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function XE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yB(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&yl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function vB(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wB(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await vB(s,n);return a.links?a.links():[]}return[]}));return _B(r.flat(1).filter(bB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function NA(t,e,n,r,i,s){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function xB(t,e,{includeHydrateFallback:n}={}){return EB(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function EB(t){return[...new Set(t)]}function SB(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _B(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(SB(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function LD(){let t=z.useContext(Yd);return XE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function TB(){let t=z.useContext(c0);return XE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var JE=z.createContext(void 0);JE.displayName="FrameworkContext";function zD(){let t=z.useContext(JE);return XE(t,"You must render this element inside a <HydratedRouter> element"),t}function kB(t,e){let n=z.useContext(JE),[r,i]=z.useState(!1),[s,a]=z.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,v=z.useRef(null);z.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let k=O=>{O.forEach(B=>{a(B.isIntersecting)})},_=new IntersectionObserver(k,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[t]),z.useEffect(()=>{if(r){let k=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(k)}}},[r]);let w=()=>{i(!0)},S=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,v,{}]:[s,v,{onFocus:Xh(c,w),onBlur:Xh(u,S),onMouseEnter:Xh(d,w),onMouseLeave:Xh(h,S),onTouchStart:Xh(m,w)}]:[!1,v,{}]}function Xh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function CB({page:t,...e}){let{router:n}=LD(),r=z.useMemo(()=>bD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?z.createElement(OB,{page:t,matches:r,...e}):null}function AB(t){let{manifest:e,routeModules:n}=zD(),[r,i]=z.useState([]);return z.useEffect(()=>{let s=!1;return wB(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function OB({page:t,matches:e,...n}){let r=Zc(),{manifest:i,routeModules:s}=zD(),{basename:a}=LD(),{loaderData:c,matches:u}=TB(),d=z.useMemo(()=>NA(t,e,u,i,r,"data"),[t,e,u,i,r]),h=z.useMemo(()=>NA(t,e,u,i,r,"assets"),[t,e,u,i,r]),m=z.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,k=!1;if(e.forEach(O=>{let B=i.routes[O.route.id];!B||!B.hasLoader||(!d.some(W=>W.route.id===O.route.id)&&O.route.id in c&&s[O.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:S.add(O.route.id))}),S.size===0)return[];let _=yB(t,a,"data");return k&&S.size>0&&_.searchParams.set("_routes",e.filter(O=>S.has(O.route.id)).map(O=>O.route.id).join(",")),[_.pathname+_.search]},[a,c,r,i,d,e,t,s]),v=z.useMemo(()=>xB(h,i),[h,i]),w=AB(h);return z.createElement(z.Fragment,null,m.map(S=>z.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>z.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:k})=>z.createElement("link",{key:S,nonce:n.nonce,...k})))}function MB(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var RB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RB&&(window.__reactRouterVersion="7.11.0")}catch{}function NB({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=z.useRef();i.current==null&&(i.current=c5({window:r,v5Compat:!0}));let s=i.current,[a,c]=z.useState({action:s.action,location:s.location}),u=z.useCallback(d=>{n===!1?c(d):z.startTransition(()=>c(d))},[n]);return z.useLayoutEffect(()=>s.listen(u),[s,u]),z.createElement(aB,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var jD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mp=z.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:v,...w},S){let{basename:k,unstable_useTransitions:_}=z.useContext(ho),O=typeof d=="string"&&jD.test(d),B=kD(d,k);d=B.to;let W=H5(d,{relative:i}),[L,q,U]=kB(r,w),R=LB(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:_});function P(H){e&&e(H),H.defaultPrevented||R(H)}let V=z.createElement("a",{...w,...U,href:B.absoluteURL||W,onClick:B.isExternal||s?e:P,ref:MB(S,q),target:u,"data-discover":!O&&n==="render"?"true":void 0});return L&&!O?z.createElement(z.Fragment,null,V,z.createElement(CB,{page:W})):V});mp.displayName="Link";var DB=z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:c,children:u,...d},h){let m=hm(a,{relative:d.relative}),v=Zc(),w=z.useContext(c0),{navigator:S,basename:k}=z.useContext(ho),_=w!=null&&UB(m)&&c===!0,O=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,B=v.pathname,W=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(B=B.toLowerCase(),W=W?W.toLowerCase():null,O=O.toLowerCase()),W&&k&&(W=yl(W,k)||W);const L=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let q=B===O||!i&&B.startsWith(O)&&B.charAt(L)==="/",U=W!=null&&(W===O||!i&&W.startsWith(O)&&W.charAt(O.length)==="/"),R={isActive:q,isPending:U,isTransitioning:_},P=q?e:void 0,V;typeof r=="function"?V=r(R):V=[r,q?"active":null,U?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let H=typeof s=="function"?s(R):s;return z.createElement(mp,{...d,"aria-current":P,className:V,ref:h,style:H,to:a,viewTransition:c},typeof u=="function"?u(R):u)});DB.displayName="NavLink";var IB=z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=wy,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:v,...w},S)=>{let{unstable_useTransitions:k}=z.useContext(ho),_=VB(),O=BB(c,{relative:d}),B=a.toLowerCase()==="get"?"get":"post",W=typeof c=="string"&&jD.test(c),L=q=>{if(u&&u(q),q.defaultPrevented)return;q.preventDefault();let U=q.nativeEvent.submitter,R=U?.getAttribute("formmethod")||a,P=()=>_(U||q.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:v});k&&n!==!1?z.startTransition(()=>P()):P()};return z.createElement("form",{ref:S,method:B,action:O,onSubmit:r?u:L,...w,"data-discover":!W&&t==="render"?"true":void 0})});IB.displayName="Form";function PB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VD(t){let e=z.useContext(Yd);return Xn(e,PB(t)),e}function LB(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let d=ND(),h=Zc(),m=hm(t,{relative:s});return z.useCallback(v=>{if(hB(v,e)){v.preventDefault();let w=n!==void 0?n:zp(h)===zp(m),S=()=>d(t,{replace:w,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:c});u?z.startTransition(()=>S()):S()}},[h,d,m,n,r,e,t,i,s,a,c,u])}var zB=0,jB=()=>`__${String(++zB)}__`;function VB(){let{router:t}=VD("useSubmit"),{basename:e}=z.useContext(ho),n=nB(),r=t.fetch,i=t.navigate;return z.useCallback(async(s,a={})=>{let{action:c,method:u,encType:d,formData:h,body:m}=gB(s,e);if(a.navigate===!1){let v=a.fetcherKey||jB();await r(v,n,a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await i(a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function BB(t,{relative:e}={}){let{basename:n}=z.useContext(ho),r=z.useContext(_a);Xn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...hm(t||".",{relative:e})},a=Zc();if(t==null){s.search=a.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let h=c.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:dl([n,s.pathname])),zp(s)}function UB(t,{relative:e}={}){let n=z.useContext(AD);Xn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=VD("useViewTransitionState"),i=hm(t,{relative:e});if(!n.isTransitioning)return!1;let s=yl(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=yl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fy(i.pathname,a)!=null||Fy(i.pathname,s)!=null}var Qd=vD();const BD=WE(Qd);var pm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FB={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},HB=class{#e=FB;#n=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},vx=new HB;function qB(t){setTimeout(t,0)}var f0=typeof window>"u"||"Deno"in globalThis;function to(){}function $B(t,e){return typeof t=="function"?t(e):t}function WB(t){return typeof t=="number"&&t>=0&&t!==1/0}function KB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bx(t,e){return typeof t=="function"?t(e):t}function GB(t,e){return typeof t=="function"?t(e):t}function DA(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:c}=t;if(a){if(r){if(e.queryHash!==ZE(a,e.options))return!1}else if(!jp(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||s&&!s(e))}function IA(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Gu(e.options.mutationKey)!==Gu(s))return!1}else if(!jp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function ZE(t,e){return(e?.queryKeyHashFn||Gu)(t)}function Gu(t){return JSON.stringify(t,(e,n)=>wx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function jp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>jp(t[n],e[n])):!1}var YB=Object.prototype.hasOwnProperty;function UD(t,e){if(t===e)return t;const n=PA(t)&&PA(e);if(!n&&!(wx(t)&&wx(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),a=s.length,c=n?new Array(a):{};let u=0;for(let d=0;d<a;d++){const h=n?d:s[d],m=t[h],v=e[h];if(m===v){c[h]=m,(n?d<i:YB.call(t,h))&&u++;continue}if(m===null||v===null||typeof m!="object"||typeof v!="object"){c[h]=v;continue}const w=UD(m,v);c[h]=w,w===m&&u++}return i===a&&u===i?t:c}function QB(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function PA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function wx(t){if(!LA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!LA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function LA(t){return Object.prototype.toString.call(t)==="[object Object]"}function XB(t){return new Promise(e=>{vx.setTimeout(e,t)})}function JB(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?UD(t,e):e}function ZB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function e6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var eS=Symbol();function FD(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===eS?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function t6(t,e){return typeof t=="function"?t(...e):!!t}function n6(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??=e(),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var r6=class extends pm{#e;#n;#t;constructor(){super(),this.#t=t=>{if(!f0&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(t){this.#t=t,this.#n?.(),this.#n=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},HD=new r6;function i6(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var s6=qB;function o6(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=s6;const s=c=>{e?t.push(c):i(()=>{n(c)})},a=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||a()}return u},batchCalls:c=>(...u)=>{s(()=>{c(...u)})},schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var si=o6(),a6=class extends pm{#e=!0;#n;#t;constructor(){super(),this.#t=t=>{if(!f0&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(t){this.#t=t,this.#n?.(),this.#n=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Hy=new a6;function l6(t){return Math.min(1e3*2**t,3e4)}function qD(t){return(t??"online")==="online"?Hy.isOnline():!0}var xx=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function $D(t){let e=!1,n=0,r;const i=i6(),s=()=>i.status!=="pending",a=k=>{if(!s()){const _=new xx(k);v(_),t.onCancel?.(_)}},c=()=>{e=!0},u=()=>{e=!1},d=()=>HD.isFocused()&&(t.networkMode==="always"||Hy.isOnline())&&t.canRun(),h=()=>qD(t.networkMode)&&t.canRun(),m=k=>{s()||(r?.(),i.resolve(k))},v=k=>{s()||(r?.(),i.reject(k))},w=()=>new Promise(k=>{r=_=>{(s()||d())&&k(_)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),S=()=>{if(s())return;let k;const _=n===0?t.initialPromise:void 0;try{k=_??t.fn()}catch(O){k=Promise.reject(O)}Promise.resolve(k).then(m).catch(O=>{if(s())return;const B=t.retry??(f0?0:3),W=t.retryDelay??l6,L=typeof W=="function"?W(n,O):W,q=B===!0||typeof B=="number"&&n<B||typeof B=="function"&&B(n,O);if(e||!q){v(O);return}n++,t.onFail?.(n,O),XB(L).then(()=>d()?void 0:w()).then(()=>{e?v(O):S()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:u,canStart:h,start:()=>(h()?S():w().then(S),i)}}var WD=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),WB(this.gcTime)&&(this.#e=vx.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(f0?1/0:300*1e3))}clearGcTimeout(){this.#e&&(vx.clearTimeout(this.#e),this.#e=void 0)}},c6=class extends WD{#e;#n;#t;#i;#r;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#t=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=jA(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=jA(this.options);n.data!==void 0&&(this.setState(zA(n.data,n.dataUpdatedAt)),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,n){const r=JB(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#s({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#r?.promise;return this.#r?.cancel(e),n?n.then(to).catch(to):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>GB(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===eS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>bx(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!KB(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},s=()=>{const u=FD(this.options,n),h=(()=>{const m={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(m),m})();return this.#a=!1,this.options.persister?this.options.persister(u,h,this):u(h)},c=(()=>{const u={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:s};return i(u),u})();this.options.behavior?.onFetch(c,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#s({type:"fetch",meta:c.fetchOptions?.meta}),this.#r=$D({initialPromise:n?.initialPromise,fn:c.fetchFn,onCancel:u=>{u instanceof xx&&u.revert&&this.setState({...this.#n,fetchStatus:"idle"}),r.abort()},onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const u=await this.#r.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#t.config.onSuccess?.(u,this),this.#t.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof xx){if(u.silent)return this.#r.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#s({type:"error",error:u}),this.#t.config.onError?.(u,this),this.#t.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#s(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...u6(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...zA(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=e.manual?i:void 0,i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),si.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function u6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zA(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function jA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function VA(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const d=async()=>{let h=!1;const m=S=>{n6(S,()=>e.signal,()=>h=!0)},v=FD(e.options,e.fetchOptions),w=async(S,k,_)=>{if(h)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const B=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:k,direction:_?"backward":"forward",meta:e.options.meta};return m(U),U})(),W=await v(B),{maxPages:L}=e.options,q=_?e6:ZB;return{pages:q(S.pages,W,L),pageParams:q(S.pageParams,k,L)}};if(i&&s.length){const S=i==="backward",k=S?f6:BA,_={pages:s,pageParams:a},O=k(r,_);c=await w(_,O,S)}else{const S=t??s.length;do{const k=u===0?a[0]??r.initialPageParam:BA(r,c);if(u>0&&k==null)break;c=await w(c,k),u++}while(u<S)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function BA(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function f6(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var d6=class extends WD{#e;#n;#t;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#n=[],this.state=e.state||KD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#n.includes(e)||(this.#n.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#n=this.#n.filter(n=>n!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=$D({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,c)=>{this.#r({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#r({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const i=this.state.status==="pending",s=!this.#i.canStart();try{if(i)n();else{this.#r({type:"pending",variables:e,isPaused:s}),await this.#t.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#r({type:"pending",context:c,variables:e,isPaused:s})}const a=await this.#i.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#r({type:"success",data:a}),a}catch(a){try{await this.#t.config.onError?.(a,e,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onError?.(a,e,this.state.context,r)}catch(c){Promise.reject(c)}try{await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,a,e,this.state.context,r)}catch(c){Promise.reject(c)}throw this.#r({type:"error",error:a}),a}finally{this.#t.runNext(this)}}#r(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),si.batch(()=>{this.#n.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function KD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var h6=class extends pm{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(t,e,n){const r=new d6({client:t,mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Hg(t);if(typeof e=="string"){const n=this.#n.get(e);n?n.push(t):this.#n.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Hg(t);if(typeof e=="string"){const n=this.#n.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#n.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Hg(t);if(typeof e=="string"){const r=this.#n.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Hg(t);return typeof e=="string"?this.#n.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){si.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>IA(e,n))}findAll(t={}){return this.getAll().filter(e=>IA(t,e))}notify(t){si.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return si.batch(()=>Promise.all(t.map(e=>e.continue().catch(to))))}};function Hg(t){return t.options.scope?.id}var p6=class extends pm{#e;#n=void 0;#t;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),QB(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&Gu(n.mutationKey)!==Gu(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#o(e)}getCurrentResult(){return this.#n}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#r(),this.#o()}mutate(e,n){return this.#i=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(e)}#r(){const e=this.#t?.state??KD();this.#n={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){si.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#n.variables,r=this.#n.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#i.onSuccess?.(e.data,n,r,i)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(e.data,null,n,r,i)}catch(s){Promise.reject(s)}}else if(e?.type==="error"){try{this.#i.onError?.(e.error,n,r,i)}catch(s){Promise.reject(s)}try{this.#i.onSettled?.(void 0,e.error,n,r,i)}catch(s){Promise.reject(s)}}}this.listeners.forEach(n=>{n(this.#n)})})}},m6=class extends pm{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??ZE(r,e);let s=this.get(i);return s||(s=new c6({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){si.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>DA(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>DA(t,n)):e}notify(t){si.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){si.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){si.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},g6=class{#e;#n;#t;#i;#r;#o;#a;#s;constructor(t={}){this.#e=t.queryCache||new m6,this.#n=t.mutationCache||new h6,this.#t=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=HD.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Hy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#n.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(bx(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,a=$B(e,s);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return si.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;si.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return si.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=si.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(to).catch(to)}invalidateQueries(t,e={}){return si.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=si.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(to)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(to)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(bx(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(to).catch(to)}fetchInfiniteQuery(t){return t.behavior=VA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(to).catch(to)}ensureInfiniteQueryData(t){return t.behavior=VA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Hy.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(t){this.#t=t}setQueryDefaults(t,e){this.#i.set(Gu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{jp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(Gu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{jp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#t.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ZE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===eS&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#t.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},GD=z.createContext(void 0),mm=t=>{const e=z.useContext(GD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},y6=({client:t,children:e})=>(z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),M.jsx(GD.Provider,{value:t,children:e}));function pd(t,e){const n=mm(),[r]=z.useState(()=>new p6(n,t));z.useEffect(()=>{r.setOptions(t)},[r,t]);const i=z.useSyncExternalStore(z.useCallback(a=>r.subscribe(si.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=z.useCallback((a,c)=>{r.mutate(a,c).catch(to)},[r]);if(i.error&&t6(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const UA=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const v=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(w=>w(e,v))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},v6=(t=>t?UA(t):UA),b6=t=>t;function w6(t,e=b6){const n=Be.useSyncExternalStore(t.subscribe,Be.useCallback(()=>e(t.getState()),[t,e]),Be.useCallback(()=>e(t.getInitialState()),[t,e]));return Be.useDebugValue(n),n}const FA=t=>{const e=v6(t),n=r=>w6(e,r);return Object.assign(n,e),n},x6=(t=>t?FA(t):FA),Xd=x6(t=>({isSidebarOpen:!0,toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),isDarkMode:!0,toggleDarkMode:()=>t(e=>({isDarkMode:!e.isDarkMode})),syncStatus:"idle",setSyncStatus:e=>t({syncStatus:e}),isManagerMode:!1,toggleManagerMode:()=>t(e=>({isManagerMode:!e.isManagerMode})),user:null,setUser:e=>t({user:e})}));const E6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),HA=t=>{const e=S6(t);return e.charAt(0).toUpperCase()+e.slice(1)},YD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),_6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var T6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const k6=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},u)=>z.createElement("svg",{ref:u,...T6,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:YD("lucide",i),...!s&&!_6(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,h])=>z.createElement(d,h)),...Array.isArray(s)?s:[s]]));const en=(t,e)=>{const n=z.forwardRef(({className:r,...i},s)=>z.createElement(k6,{ref:s,iconNode:e,className:YD(`lucide-${E6(HA(t))}`,`lucide-${t}`,r),...i}));return n.displayName=HA(t),n};const C6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],A6=en("activity",C6);const O6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],M6=en("arrow-right",O6);const R6=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],N6=en("book",R6);const D6=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],I6=en("brain",D6);const P6=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],L6=en("bug",P6);const z6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],QD=en("calendar",z6);const j6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XD=en("check",j6);const V6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B6=en("chevron-down",V6);const U6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JD=en("circle-check-big",U6);const F6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],H6=en("circle",F6);const q6=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],$6=en("cloud-off",q6);const W6=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],K6=en("cloud",W6);const G6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ZD=en("copy",G6);const Y6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Q6=en("database",Y6);const X6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],J6=en("download",X6);const Z6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],eU=en("eye-off",Z6);const tU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nU=en("eye",tU);const rU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],eI=en("file-text",rU);const iU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sU=en("funnel",iU);const oU=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],aU=en("hammer",oU);const lU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],cU=en("history",lU);const uU=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],tI=en("layout-dashboard",uU);const fU=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],dU=en("layout-template",fU);const hU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],pU=en("list",hU);const mU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gU=en("log-out",mU);const yU=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],vU=en("moon",yU);const bU=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],qA=en("party-popper",bU);const wU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tS=en("plus",wU);const xU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EU=en("settings",xU);const SU=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Mc=en("sparkles",SU);const _U=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nI=en("star",_U);const TU=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],kU=en("sun",TU);const CU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],nS=en("target",CU);const AU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],d0=en("trash-2",AU);const OU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],h0=en("x",OU);function rI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=rI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function MU(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=rI(t))&&(r&&(r+=" "),r+=e);return r}const RU=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},NU=(t,e)=>({classGroupId:t,validator:e}),iI=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),qy="-",$A=[],DU="arbitrary..",IU=t=>{const e=LU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return PU(a);const c=a.split(qy),u=c[0]===""&&c.length>1?1:0;return sI(c,u,e)},getConflictingClassGroupIds:(a,c)=>{if(c){const u=r[a],d=n[a];return u?d?RU(d,u):u:d||$A}return n[a]||$A}}},sI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const d=sI(t,e+1,s);if(d)return d}const a=n.validators;if(a===null)return;const c=e===0?t.join(qy):t.slice(e).join(qy),u=a.length;for(let d=0;d<u;d++){const h=a[d];if(h.validator(c))return h.classGroupId}},PU=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?DU+r:void 0})(),LU=t=>{const{theme:e,classGroups:n}=t;return zU(n,e)},zU=(t,e)=>{const n=iI();for(const r in t){const i=t[r];rS(i,n,r,e)}return n},rS=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const a=t[s];jU(a,e,n,r)}},jU=(t,e,n,r)=>{if(typeof t=="string"){VU(t,e,n);return}if(typeof t=="function"){BU(t,e,n,r);return}UU(t,e,n,r)},VU=(t,e,n)=>{const r=t===""?e:oI(e,t);r.classGroupId=n},BU=(t,e,n,r)=>{if(FU(t)){rS(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(NU(n,t))},UU=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let a=0;a<s;a++){const[c,u]=i[a];rS(u,oI(e,c),n,r)}},oI=(t,e)=>{let n=t;const r=e.split(qy),i=r.length;for(let s=0;s<i;s++){const a=r[s];let c=n.nextPart.get(a);c||(c=iI(),n.nextPart.set(a,c)),n=c}return n},FU=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,HU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,a)=>{n[s]=a,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let a=n[s];if(a!==void 0)return a;if((a=r[s])!==void 0)return i(s,a),a},set(s,a){s in n?n[s]=a:i(s,a)}}},Ex="!",WA=":",qU=[],KA=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),$U=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,c=0,u=0,d;const h=i.length;for(let k=0;k<h;k++){const _=i[k];if(a===0&&c===0){if(_===WA){s.push(i.slice(u,k)),u=k+1;continue}if(_==="/"){d=k;continue}}_==="["?a++:_==="]"?a--:_==="("?c++:_===")"&&c--}const m=s.length===0?i:i.slice(u);let v=m,w=!1;m.endsWith(Ex)?(v=m.slice(0,-1),w=!0):m.startsWith(Ex)&&(v=m.slice(1),w=!0);const S=d&&d>u?d-u:void 0;return KA(s,w,v,S)};if(e){const i=e+WA,s=r;r=a=>a.startsWith(i)?s(a.slice(i.length)):KA(qU,!1,a,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},WU=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const a=n[s],c=a[0]==="[",u=e.has(a);c||u?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(a)):i.push(a)}return i.length>0&&(i.sort(),r.push(...i)),r}},KU=t=>({cache:HU(t.cacheSize),parseClassName:$U(t),sortModifiers:WU(t),...IU(t)}),GU=/\s+/,YU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],c=t.trim().split(GU);let u="";for(let d=c.length-1;d>=0;d-=1){const h=c[d],{isExternal:m,modifiers:v,hasImportantModifier:w,baseClassName:S,maybePostfixModifierPosition:k}=n(h);if(m){u=h+(u.length>0?" "+u:u);continue}let _=!!k,O=r(_?S.substring(0,k):S);if(!O){if(!_){u=h+(u.length>0?" "+u:u);continue}if(O=r(S),!O){u=h+(u.length>0?" "+u:u);continue}_=!1}const B=v.length===0?"":v.length===1?v[0]:s(v).join(":"),W=w?B+Ex:B,L=W+O;if(a.indexOf(L)>-1)continue;a.push(L);const q=i(O,_);for(let U=0;U<q.length;++U){const R=q[U];a.push(W+R)}u=h+(u.length>0?" "+u:u)}return u},QU=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=aI(n))&&(i&&(i+=" "),i+=r);return i},aI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aI(t[r]))&&(n&&(n+=" "),n+=e);return n},XU=(t,...e)=>{let n,r,i,s;const a=u=>{const d=e.reduce((h,m)=>m(h),t());return n=KU(d),r=n.cache.get,i=n.cache.set,s=c,c(u)},c=u=>{const d=r(u);if(d)return d;const h=YU(u,n);return i(u,h),h};return s=a,(...u)=>s(QU(...u))},JU=[],jr=t=>{const e=n=>n[t]||JU;return e.isThemeGetter=!0,e},lI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ZU=/^\d+\/\d+$/,e9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,r9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kf=t=>ZU.test(t),Bt=t=>!!t&&!Number.isNaN(Number(t)),fc=t=>!!t&&Number.isInteger(Number(t)),n1=t=>t.endsWith("%")&&Bt(t.slice(0,-1)),Xa=t=>e9.test(t),s9=()=>!0,o9=t=>t9.test(t)&&!n9.test(t),uI=()=>!1,a9=t=>r9.test(t),l9=t=>i9.test(t),c9=t=>!at(t)&&!lt(t),u9=t=>Jd(t,hI,uI),at=t=>lI.test(t),Cu=t=>Jd(t,pI,o9),r1=t=>Jd(t,m9,Bt),GA=t=>Jd(t,fI,uI),f9=t=>Jd(t,dI,l9),qg=t=>Jd(t,mI,a9),lt=t=>cI.test(t),Jh=t=>Zd(t,pI),d9=t=>Zd(t,g9),YA=t=>Zd(t,fI),h9=t=>Zd(t,hI),p9=t=>Zd(t,dI),$g=t=>Zd(t,mI,!0),Jd=(t,e,n)=>{const r=lI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Zd=(t,e,n=!1)=>{const r=cI.exec(t);return r?r[1]?e(r[1]):n:!1},fI=t=>t==="position"||t==="percentage",dI=t=>t==="image"||t==="url",hI=t=>t==="length"||t==="size"||t==="bg-size",pI=t=>t==="length",m9=t=>t==="number",g9=t=>t==="family-name",mI=t=>t==="shadow",y9=()=>{const t=jr("color"),e=jr("font"),n=jr("text"),r=jr("font-weight"),i=jr("tracking"),s=jr("leading"),a=jr("breakpoint"),c=jr("container"),u=jr("spacing"),d=jr("radius"),h=jr("shadow"),m=jr("inset-shadow"),v=jr("text-shadow"),w=jr("drop-shadow"),S=jr("blur"),k=jr("perspective"),_=jr("aspect"),O=jr("ease"),B=jr("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],q=()=>[...L(),lt,at],U=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],P=()=>[lt,at,u],V=()=>[Kf,"full","auto",...P()],H=()=>[fc,"none","subgrid",lt,at],G=()=>["auto",{span:["full",fc,lt,at]},fc,lt,at],Q=()=>[fc,"auto",lt,at],K=()=>["auto","min","max","fr",lt,at],je=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Re=()=>["start","end","center","stretch","center-safe","end-safe"],oe=()=>["auto",...P()],Ee=()=>[Kf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],ve=()=>[t,lt,at],Qe=()=>[...L(),YA,GA,{position:[lt,at]}],Ze=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",h9,u9,{size:[lt,at]}],Z=()=>[n1,Jh,Cu],ye=()=>["","none","full",d,lt,at],Te=()=>["",Bt,Jh,Cu],Oe=()=>["solid","dashed","dotted","double"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$e=()=>[Bt,n1,YA,GA],bt=()=>["","none",S,lt,at],ze=()=>["none",Bt,lt,at],tn=()=>["none",Bt,lt,at],Bn=()=>[Bt,lt,at],Tt=()=>[Kf,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xa],breakpoint:[Xa],color:[s9],container:[Xa],"drop-shadow":[Xa],ease:["in","out","in-out"],font:[c9],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xa],shadow:[Xa],spacing:["px",Bt],text:[Xa],"text-shadow":[Xa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kf,at,lt,_]}],container:["container"],columns:[{columns:[Bt,at,lt,c]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:q()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[fc,"auto",lt,at]}],basis:[{basis:[Kf,"full","auto",c,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Bt,Kf,"auto","initial","none",at]}],grow:[{grow:["",Bt,lt,at]}],shrink:[{shrink:["",Bt,lt,at]}],order:[{order:[fc,"first","last","none",lt,at]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...je(),"normal"]}],"justify-items":[{"justify-items":[...Re(),"normal"]}],"justify-self":[{"justify-self":["auto",...Re()]}],"align-content":[{content:["normal",...je()]}],"align-items":[{items:[...Re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Re(),{baseline:["","last"]}]}],"place-content":[{"place-content":je()}],"place-items":[{"place-items":[...Re(),"baseline"]}],"place-self":[{"place-self":["auto",...Re()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:oe()}],mx:[{mx:oe()}],my:[{my:oe()}],ms:[{ms:oe()}],me:[{me:oe()}],mt:[{mt:oe()}],mr:[{mr:oe()}],mb:[{mb:oe()}],ml:[{ml:oe()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[c,"screen",...Ee()]}],"min-w":[{"min-w":[c,"screen","none",...Ee()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...Ee()]}],h:[{h:["screen","lh",...Ee()]}],"min-h":[{"min-h":["screen","lh","none",...Ee()]}],"max-h":[{"max-h":["screen","lh",...Ee()]}],"font-size":[{text:["base",n,Jh,Cu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,lt,r1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",n1,at]}],"font-family":[{font:[d9,at,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,lt,at]}],"line-clamp":[{"line-clamp":[Bt,"none",lt,r1]}],leading:[{leading:[s,...P()]}],"list-image":[{"list-image":["none",lt,at]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",lt,at]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ve()}],"text-color":[{text:ve()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Bt,"from-font","auto",lt,Cu]}],"text-decoration-color":[{decoration:ve()}],"underline-offset":[{"underline-offset":[Bt,"auto",lt,at]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt,at]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt,at]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Qe()}],"bg-repeat":[{bg:Ze()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},fc,lt,at],radial:["",lt,at],conic:[fc,lt,at]},p9,f9]}],"bg-color":[{bg:ve()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:ve()}],"gradient-via":[{via:ve()}],"gradient-to":[{to:ve()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Oe(),"hidden","none"]}],"divide-style":[{divide:[...Oe(),"hidden","none"]}],"border-color":[{border:ve()}],"border-color-x":[{"border-x":ve()}],"border-color-y":[{"border-y":ve()}],"border-color-s":[{"border-s":ve()}],"border-color-e":[{"border-e":ve()}],"border-color-t":[{"border-t":ve()}],"border-color-r":[{"border-r":ve()}],"border-color-b":[{"border-b":ve()}],"border-color-l":[{"border-l":ve()}],"divide-color":[{divide:ve()}],"outline-style":[{outline:[...Oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Bt,lt,at]}],"outline-w":[{outline:["",Bt,Jh,Cu]}],"outline-color":[{outline:ve()}],shadow:[{shadow:["","none",h,$g,qg]}],"shadow-color":[{shadow:ve()}],"inset-shadow":[{"inset-shadow":["none",m,$g,qg]}],"inset-shadow-color":[{"inset-shadow":ve()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ve()}],"ring-offset-w":[{"ring-offset":[Bt,Cu]}],"ring-offset-color":[{"ring-offset":ve()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":ve()}],"text-shadow":[{"text-shadow":["none",v,$g,qg]}],"text-shadow-color":[{"text-shadow":ve()}],opacity:[{opacity:[Bt,lt,at]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Bt]}],"mask-image-linear-from-pos":[{"mask-linear-from":$e()}],"mask-image-linear-to-pos":[{"mask-linear-to":$e()}],"mask-image-linear-from-color":[{"mask-linear-from":ve()}],"mask-image-linear-to-color":[{"mask-linear-to":ve()}],"mask-image-t-from-pos":[{"mask-t-from":$e()}],"mask-image-t-to-pos":[{"mask-t-to":$e()}],"mask-image-t-from-color":[{"mask-t-from":ve()}],"mask-image-t-to-color":[{"mask-t-to":ve()}],"mask-image-r-from-pos":[{"mask-r-from":$e()}],"mask-image-r-to-pos":[{"mask-r-to":$e()}],"mask-image-r-from-color":[{"mask-r-from":ve()}],"mask-image-r-to-color":[{"mask-r-to":ve()}],"mask-image-b-from-pos":[{"mask-b-from":$e()}],"mask-image-b-to-pos":[{"mask-b-to":$e()}],"mask-image-b-from-color":[{"mask-b-from":ve()}],"mask-image-b-to-color":[{"mask-b-to":ve()}],"mask-image-l-from-pos":[{"mask-l-from":$e()}],"mask-image-l-to-pos":[{"mask-l-to":$e()}],"mask-image-l-from-color":[{"mask-l-from":ve()}],"mask-image-l-to-color":[{"mask-l-to":ve()}],"mask-image-x-from-pos":[{"mask-x-from":$e()}],"mask-image-x-to-pos":[{"mask-x-to":$e()}],"mask-image-x-from-color":[{"mask-x-from":ve()}],"mask-image-x-to-color":[{"mask-x-to":ve()}],"mask-image-y-from-pos":[{"mask-y-from":$e()}],"mask-image-y-to-pos":[{"mask-y-to":$e()}],"mask-image-y-from-color":[{"mask-y-from":ve()}],"mask-image-y-to-color":[{"mask-y-to":ve()}],"mask-image-radial":[{"mask-radial":[lt,at]}],"mask-image-radial-from-pos":[{"mask-radial-from":$e()}],"mask-image-radial-to-pos":[{"mask-radial-to":$e()}],"mask-image-radial-from-color":[{"mask-radial-from":ve()}],"mask-image-radial-to-color":[{"mask-radial-to":ve()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[Bt]}],"mask-image-conic-from-pos":[{"mask-conic-from":$e()}],"mask-image-conic-to-pos":[{"mask-conic-to":$e()}],"mask-image-conic-from-color":[{"mask-conic-from":ve()}],"mask-image-conic-to-color":[{"mask-conic-to":ve()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Qe()}],"mask-repeat":[{mask:Ze()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",lt,at]}],filter:[{filter:["","none",lt,at]}],blur:[{blur:bt()}],brightness:[{brightness:[Bt,lt,at]}],contrast:[{contrast:[Bt,lt,at]}],"drop-shadow":[{"drop-shadow":["","none",w,$g,qg]}],"drop-shadow-color":[{"drop-shadow":ve()}],grayscale:[{grayscale:["",Bt,lt,at]}],"hue-rotate":[{"hue-rotate":[Bt,lt,at]}],invert:[{invert:["",Bt,lt,at]}],saturate:[{saturate:[Bt,lt,at]}],sepia:[{sepia:["",Bt,lt,at]}],"backdrop-filter":[{"backdrop-filter":["","none",lt,at]}],"backdrop-blur":[{"backdrop-blur":bt()}],"backdrop-brightness":[{"backdrop-brightness":[Bt,lt,at]}],"backdrop-contrast":[{"backdrop-contrast":[Bt,lt,at]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Bt,lt,at]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Bt,lt,at]}],"backdrop-invert":[{"backdrop-invert":["",Bt,lt,at]}],"backdrop-opacity":[{"backdrop-opacity":[Bt,lt,at]}],"backdrop-saturate":[{"backdrop-saturate":[Bt,lt,at]}],"backdrop-sepia":[{"backdrop-sepia":["",Bt,lt,at]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",lt,at]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Bt,"initial",lt,at]}],ease:[{ease:["linear","initial",O,lt,at]}],delay:[{delay:[Bt,lt,at]}],animate:[{animate:["none",B,lt,at]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,lt,at]}],"perspective-origin":[{"perspective-origin":q()}],rotate:[{rotate:ze()}],"rotate-x":[{"rotate-x":ze()}],"rotate-y":[{"rotate-y":ze()}],"rotate-z":[{"rotate-z":ze()}],scale:[{scale:tn()}],"scale-x":[{"scale-x":tn()}],"scale-y":[{"scale-y":tn()}],"scale-z":[{"scale-z":tn()}],"scale-3d":["scale-3d"],skew:[{skew:Bn()}],"skew-x":[{"skew-x":Bn()}],"skew-y":[{"skew-y":Bn()}],transform:[{transform:[lt,at,"","none","gpu","cpu"]}],"transform-origin":[{origin:q()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Tt()}],"translate-x":[{"translate-x":Tt()}],"translate-y":[{"translate-y":Tt()}],"translate-z":[{"translate-z":Tt()}],"translate-none":["translate-none"],accent:[{accent:ve()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ve()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt,at]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt,at]}],fill:[{fill:["none",...ve()]}],"stroke-w":[{stroke:[Bt,Jh,Cu,r1]}],stroke:[{stroke:["none",...ve()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},v9=XU(y9);function jt(...t){return v9(MU(t))}const Sx=t=>{t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));var e=new Date(Date.UTC(t.getUTCFullYear(),0,1)),n=Math.ceil(((t-e)/864e5+1)/7);return n};var QA=1,b9=.9,w9=.8,x9=.17,i1=.1,s1=.999,E9=.9999,S9=.99,_9=/[\\\/_+.#"@\[\(\{&]/,T9=/[\\\/_+.#"@\[\(\{&]/g,k9=/[\s-]/,gI=/[\s-]/g;function _x(t,e,n,r,i,s,a){if(s===e.length)return i===t.length?QA:S9;var c=`${i},${s}`;if(a[c]!==void 0)return a[c];for(var u=r.charAt(s),d=n.indexOf(u,i),h=0,m,v,w,S;d>=0;)m=_x(t,e,n,r,d+1,s+1,a),m>h&&(d===i?m*=QA:_9.test(t.charAt(d-1))?(m*=w9,w=t.slice(i,d-1).match(T9),w&&i>0&&(m*=Math.pow(s1,w.length))):k9.test(t.charAt(d-1))?(m*=b9,S=t.slice(i,d-1).match(gI),S&&i>0&&(m*=Math.pow(s1,S.length))):(m*=x9,i>0&&(m*=Math.pow(s1,d-i))),t.charAt(d)!==e.charAt(s)&&(m*=E9)),(m<i1&&n.charAt(d-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(d-1)!==r.charAt(s))&&(v=_x(t,e,n,r,d+1,s+2,a),v*i1>m&&(m=v*i1)),m>h&&(h=m),d=n.indexOf(u,d+1);return a[c]=h,h}function XA(t){return t.toLowerCase().replace(gI," ")}function C9(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,_x(t,e,XA(t),XA(e),0,0,{})}function Rc(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function JA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uc(...t){return e=>{let n=!1;const r=t.map(i=>{const s=JA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():JA(t[i],null)}}}}function cf(...t){return z.useCallback(Uc(...t),t)}function A9(t,e){const n=z.createContext(e),r=s=>{const{children:a,...c}=s,u=z.useMemo(()=>c,Object.values(c));return M.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function i(s){const a=z.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function O9(t,e=[]){let n=[];function r(s,a){const c=z.createContext(a),u=n.length;n=[...n,a];const d=m=>{const{scope:v,children:w,...S}=m,k=v?.[t]?.[u]||c,_=z.useMemo(()=>S,Object.values(S));return M.jsx(k.Provider,{value:_,children:w})};d.displayName=s+"Provider";function h(m,v){const w=v?.[t]?.[u]||c,S=z.useContext(w);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[d,h]}const i=()=>{const s=n.map(a=>z.createContext(a));return function(c){const u=c?.[t]||s;return z.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,M9(i,...e)]}function M9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:d})=>{const m=u(s)[`__scope${d}`];return{...c,...m}},{});return z.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Vp=globalThis?.document?z.useLayoutEffect:()=>{},R9=KE[" useId ".trim().toString()]||(()=>{}),N9=0;function hl(t){const[e,n]=z.useState(R9());return Vp(()=>{n(r=>r??String(N9++))},[t]),e?`radix-${e}`:""}var D9=KE[" useInsertionEffect ".trim().toString()]||Vp;function I9({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=P9({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const h=z.useRef(t!==void 0);z.useEffect(()=>{const m=h.current;m!==c&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=c},[c,r])}const d=z.useCallback(h=>{if(c){const m=L9(h)?h(t):h;m!==t&&a.current?.(m)}else s(h)},[c,t,s,a]);return[u,d]}function P9({defaultProp:t,onChange:e}){const[n,r]=z.useState(t),i=z.useRef(n),s=z.useRef(e);return D9(()=>{s.current=e},[e]),z.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function L9(t){return typeof t=="function"}function gm(t){const e=z9(t),n=z.forwardRef((r,i)=>{const{children:s,...a}=r,c=z.Children.toArray(s),u=c.find(V9);if(u){const d=u.props.children,h=c.map(m=>m===u?z.Children.count(d)>1?z.Children.only(null):z.isValidElement(d)?d.props.children:null:m);return M.jsx(e,{...a,ref:i,children:z.isValidElement(d)?z.cloneElement(d,void 0,h):null})}return M.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function z9(t){const e=z.forwardRef((n,r)=>{const{children:i,...s}=n;if(z.isValidElement(i)){const a=U9(i),c=B9(s,i.props);return i.type!==z.Fragment&&(c.ref=r?Uc(r,a):a),z.cloneElement(i,c)}return z.Children.count(i)>1?z.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var j9=Symbol("radix.slottable");function V9(t){return z.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===j9}function B9(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function U9(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var F9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yI=F9.reduce((t,e)=>{const n=gm(`Primitive.${e}`),r=z.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function H9(t,e){t&&Qd.flushSync(()=>t.dispatchEvent(e))}function Bp(t){const e=z.useRef(t);return z.useEffect(()=>{e.current=t}),z.useMemo(()=>(...n)=>e.current?.(...n),[])}function q9(t,e=globalThis?.document){const n=Bp(t);z.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $9="DismissableLayer",Tx="dismissableLayer.update",W9="dismissableLayer.pointerDownOutside",K9="dismissableLayer.focusOutside",ZA,vI=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bI=z.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...u}=t,d=z.useContext(vI),[h,m]=z.useState(null),v=h?.ownerDocument??globalThis?.document,[,w]=z.useState({}),S=cf(e,R=>m(R)),k=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),O=k.indexOf(_),B=h?k.indexOf(h):-1,W=d.layersWithOutsidePointerEventsDisabled.size>0,L=B>=O,q=Q9(R=>{const P=R.target,V=[...d.branches].some(H=>H.contains(P));!L||V||(i?.(R),a?.(R),R.defaultPrevented||c?.())},v),U=X9(R=>{const P=R.target;[...d.branches].some(H=>H.contains(P))||(s?.(R),a?.(R),R.defaultPrevented||c?.())},v);return q9(R=>{B===d.layers.size-1&&(r?.(R),!R.defaultPrevented&&c&&(R.preventDefault(),c()))},v),z.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ZA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),eO(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=ZA)}},[h,v,n,d]),z.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),eO())},[h,d]),z.useEffect(()=>{const R=()=>w({});return document.addEventListener(Tx,R),()=>document.removeEventListener(Tx,R)},[]),M.jsx(yI.div,{...u,ref:S,style:{pointerEvents:W?L?"auto":"none":void 0,...t.style},onFocusCapture:Rc(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Rc(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Rc(t.onPointerDownCapture,q.onPointerDownCapture)})});bI.displayName=$9;var G9="DismissableLayerBranch",Y9=z.forwardRef((t,e)=>{const n=z.useContext(vI),r=z.useRef(null),i=cf(e,r);return z.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),M.jsx(yI.div,{...t,ref:i})});Y9.displayName=G9;function Q9(t,e=globalThis?.document){const n=Bp(t),r=z.useRef(!1),i=z.useRef(()=>{});return z.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let u=function(){wI(W9,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X9(t,e=globalThis?.document){const n=Bp(t),r=z.useRef(!1);return z.useEffect(()=>{const i=s=>{s.target&&!r.current&&wI(K9,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eO(){const t=new CustomEvent(Tx);document.dispatchEvent(t)}function wI(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?H9(i,s):i.dispatchEvent(s)}var J9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Z9=J9.reduce((t,e)=>{const n=gm(`Primitive.${e}`),r=z.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),o1="focusScope.autoFocusOnMount",a1="focusScope.autoFocusOnUnmount",tO={bubbles:!1,cancelable:!0},eF="FocusScope",xI=z.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[c,u]=z.useState(null),d=Bp(i),h=Bp(s),m=z.useRef(null),v=cf(e,k=>u(k)),w=z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;z.useEffect(()=>{if(r){let k=function(W){if(w.paused||!c)return;const L=W.target;c.contains(L)?m.current=L:gc(m.current,{select:!0})},_=function(W){if(w.paused||!c)return;const L=W.relatedTarget;L!==null&&(c.contains(L)||gc(m.current,{select:!0}))},O=function(W){if(document.activeElement===document.body)for(const q of W)q.removedNodes.length>0&&gc(c)};document.addEventListener("focusin",k),document.addEventListener("focusout",_);const B=new MutationObserver(O);return c&&B.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",_),B.disconnect()}}},[r,c,w.paused]),z.useEffect(()=>{if(c){rO.add(w);const k=document.activeElement;if(!c.contains(k)){const O=new CustomEvent(o1,tO);c.addEventListener(o1,d),c.dispatchEvent(O),O.defaultPrevented||(tF(oF(EI(c)),{select:!0}),document.activeElement===k&&gc(c))}return()=>{c.removeEventListener(o1,d),setTimeout(()=>{const O=new CustomEvent(a1,tO);c.addEventListener(a1,h),c.dispatchEvent(O),O.defaultPrevented||gc(k??document.body,{select:!0}),c.removeEventListener(a1,h),rO.remove(w)},0)}}},[c,d,h,w]);const S=z.useCallback(k=>{if(!n&&!r||w.paused)return;const _=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,O=document.activeElement;if(_&&O){const B=k.currentTarget,[W,L]=nF(B);W&&L?!k.shiftKey&&O===L?(k.preventDefault(),n&&gc(W,{select:!0})):k.shiftKey&&O===W&&(k.preventDefault(),n&&gc(L,{select:!0})):O===B&&k.preventDefault()}},[n,r,w.paused]);return M.jsx(Z9.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});xI.displayName=eF;function tF(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gc(r,{select:e}),document.activeElement!==n)return}function nF(t){const e=EI(t),n=nO(e,t),r=nO(e.reverse(),t);return[n,r]}function EI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function nO(t,e){for(const n of t)if(!rF(n,{upTo:e}))return n}function rF(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iF(t){return t instanceof HTMLInputElement&&"select"in t}function gc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iF(t)&&e&&t.select()}}var rO=sF();function sF(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=iO(t,e),t.unshift(e)},remove(e){t=iO(t,e),t[0]?.resume()}}}function iO(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function oF(t){return t.filter(e=>e.tagName!=="A")}var aF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lF=aF.reduce((t,e)=>{const n=gm(`Primitive.${e}`),r=z.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),cF="Portal",SI=z.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=z.useState(!1);Vp(()=>s(!0),[]);const a=n||i&&globalThis?.document?.body;return a?BD.createPortal(M.jsx(lF.div,{...r,ref:e}),a):null});SI.displayName=cF;function uF(t,e){return z.useReducer((n,r)=>e[n][r]??n,t)}var p0=t=>{const{present:e,children:n}=t,r=fF(e),i=typeof n=="function"?n({present:r.isPresent}):z.Children.only(n),s=cf(r.ref,dF(i));return typeof n=="function"||r.isPresent?z.cloneElement(i,{ref:s}):null};p0.displayName="Presence";function fF(t){const[e,n]=z.useState(),r=z.useRef(null),i=z.useRef(t),s=z.useRef("none"),a=t?"mounted":"unmounted",[c,u]=uF(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const d=Wg(r.current);s.current=c==="mounted"?d:"none"},[c]),Vp(()=>{const d=r.current,h=i.current;if(h!==t){const v=s.current,w=Wg(d);t?u("MOUNT"):w==="none"||d?.display==="none"?u("UNMOUNT"):u(h&&v!==w?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Vp(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,m=w=>{const k=Wg(r.current).includes(CSS.escape(w.animationName));if(w.target===e&&k&&(u("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=w=>{w.target===e&&(s.current=Wg(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:z.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Wg(t){return t?.animationName||"none"}function dF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ym=hF.reduce((t,e)=>{const n=gm(`Primitive.${e}`),r=z.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),l1=0;function pF(){z.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sO()),document.body.insertAdjacentElement("beforeend",t[1]??sO()),l1++,()=>{l1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),l1--}},[])}function sO(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var sa=function(){return sa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sa.apply(this,arguments)};function _I(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mF(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ey="right-scroll-bar-position",Sy="width-before-scroll-bar",gF="with-scroll-bars-hidden",yF="--removed-body-scroll-bar-size";function c1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vF(t,e){var n=z.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var bF=typeof window<"u"?z.useLayoutEffect:z.useEffect,oO=new WeakMap;function wF(t,e){var n=vF(null,function(r){return t.forEach(function(i){return c1(i,r)})});return bF(function(){var r=oO.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(c){s.has(c)||c1(c,null)}),s.forEach(function(c){i.has(c)||c1(c,a)})}oO.set(n,t)},[t]),n}function xF(t){return t}function EF(t,e){e===void 0&&(e=xF);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(c){return s(c)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(s),a=n}var u=function(){var h=a;a=[],h.forEach(s)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return i}function SF(t){t===void 0&&(t={});var e=EF(null);return e.options=sa({async:!0,ssr:!1},t),e}var TI=function(t){var e=t.sideCar,n=_I(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return z.createElement(r,sa({},n))};TI.isSideCarExport=!0;function _F(t,e){return t.useMedium(e),TI}var kI=SF(),u1=function(){},m0=z.forwardRef(function(t,e){var n=z.useRef(null),r=z.useState({onScrollCapture:u1,onWheelCapture:u1,onTouchMoveCapture:u1}),i=r[0],s=r[1],a=t.forwardProps,c=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,m=t.shards,v=t.sideCar,w=t.noRelative,S=t.noIsolation,k=t.inert,_=t.allowPinchZoom,O=t.as,B=O===void 0?"div":O,W=t.gapMode,L=_I(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),q=v,U=wF([n,e]),R=sa(sa({},L),i);return z.createElement(z.Fragment,null,h&&z.createElement(q,{sideCar:kI,removeScrollBar:d,shards:m,noRelative:w,noIsolation:S,inert:k,setCallbacks:s,allowPinchZoom:!!_,lockRef:n,gapMode:W}),a?z.cloneElement(z.Children.only(c),sa(sa({},R),{ref:U})):z.createElement(B,sa({},R,{className:u,ref:U}),c))});m0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m0.classNames={fullWidth:Sy,zeroRight:Ey};var TF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=TF();return e&&t.setAttribute("nonce",e),t}function CF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function AF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var OF=function(){var t=0,e=null;return{add:function(n){t==0&&(e=kF())&&(CF(e,n),AF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},MF=function(){var t=OF();return function(e,n){z.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},CI=function(){var t=MF(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},RF={left:0,top:0,right:0,gap:0},f1=function(t){return parseInt(t||"",10)||0},NF=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[f1(n),f1(r),f1(i)]},DF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RF;var e=NF(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},IF=CI(),md="data-scroll-locked",PF=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gF,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(md,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ey,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Sy,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ey," .").concat(Ey,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Sy," .").concat(Sy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(md,`] {
    `).concat(yF,": ").concat(c,`px;
  }
`)},aO=function(){var t=parseInt(document.body.getAttribute(md)||"0",10);return isFinite(t)?t:0},LF=function(){z.useEffect(function(){return document.body.setAttribute(md,(aO()+1).toString()),function(){var t=aO()-1;t<=0?document.body.removeAttribute(md):document.body.setAttribute(md,t.toString())}},[])},zF=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;LF();var s=z.useMemo(function(){return DF(i)},[i]);return z.createElement(IF,{styles:PF(s,!e,i,n?"":"!important")})},kx=!1;if(typeof window<"u")try{var Kg=Object.defineProperty({},"passive",{get:function(){return kx=!0,!0}});window.addEventListener("test",Kg,Kg),window.removeEventListener("test",Kg,Kg)}catch{kx=!1}var Gf=kx?{passive:!1}:!1,jF=function(t){return t.tagName==="TEXTAREA"},AI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jF(t)&&n[e]==="visible")},VF=function(t){return AI(t,"overflowY")},BF=function(t){return AI(t,"overflowX")},lO=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=OI(t,r);if(i){var s=MI(t,r),a=s[1],c=s[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UF=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FF=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},OI=function(t,e){return t==="v"?VF(e):BF(e)},MI=function(t,e){return t==="v"?UF(e):FF(e)},HF=function(t,e){return t==="h"&&e==="rtl"?-1:1},qF=function(t,e,n,r,i){var s=HF(t,window.getComputedStyle(e).direction),a=s*r,c=n.target,u=e.contains(c),d=!1,h=a>0,m=0,v=0;do{if(!c)break;var w=MI(t,c),S=w[0],k=w[1],_=w[2],O=k-_-s*S;(S||O)&&OI(t,c)&&(m+=O,v+=S);var B=c.parentNode;c=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(h&&Math.abs(m)<1||!h&&Math.abs(v)<1)&&(d=!0),d},Gg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cO=function(t){return[t.deltaX,t.deltaY]},uO=function(t){return t&&"current"in t?t.current:t},$F=function(t,e){return t[0]===e[0]&&t[1]===e[1]},WF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},KF=0,Yf=[];function GF(t){var e=z.useRef([]),n=z.useRef([0,0]),r=z.useRef(),i=z.useState(KF++)[0],s=z.useState(CI)[0],a=z.useRef(t);z.useEffect(function(){a.current=t},[t]),z.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var k=mF([t.lockRef.current],(t.shards||[]).map(uO),!0).filter(Boolean);return k.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),k.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=z.useCallback(function(k,_){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!a.current.allowPinchZoom;var O=Gg(k),B=n.current,W="deltaX"in k?k.deltaX:B[0]-O[0],L="deltaY"in k?k.deltaY:B[1]-O[1],q,U=k.target,R=Math.abs(W)>Math.abs(L)?"h":"v";if("touches"in k&&R==="h"&&U.type==="range")return!1;var P=window.getSelection(),V=P&&P.anchorNode,H=V?V===U||V.contains(U):!1;if(H)return!1;var G=lO(R,U);if(!G)return!0;if(G?q=R:(q=R==="v"?"h":"v",G=lO(R,U)),!G)return!1;if(!r.current&&"changedTouches"in k&&(W||L)&&(r.current=q),!q)return!0;var Q=r.current||q;return qF(Q,_,k,Q==="h"?W:L)},[]),u=z.useCallback(function(k){var _=k;if(!(!Yf.length||Yf[Yf.length-1]!==s)){var O="deltaY"in _?cO(_):Gg(_),B=e.current.filter(function(q){return q.name===_.type&&(q.target===_.target||_.target===q.shadowParent)&&$F(q.delta,O)})[0];if(B&&B.should){_.cancelable&&_.preventDefault();return}if(!B){var W=(a.current.shards||[]).map(uO).filter(Boolean).filter(function(q){return q.contains(_.target)}),L=W.length>0?c(_,W[0]):!a.current.noIsolation;L&&_.cancelable&&_.preventDefault()}}},[]),d=z.useCallback(function(k,_,O,B){var W={name:k,delta:_,target:O,should:B,shadowParent:YF(O)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(L){return L!==W})},1)},[]),h=z.useCallback(function(k){n.current=Gg(k),r.current=void 0},[]),m=z.useCallback(function(k){d(k.type,cO(k),k.target,c(k,t.lockRef.current))},[]),v=z.useCallback(function(k){d(k.type,Gg(k),k.target,c(k,t.lockRef.current))},[]);z.useEffect(function(){return Yf.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",u,Gf),document.addEventListener("touchmove",u,Gf),document.addEventListener("touchstart",h,Gf),function(){Yf=Yf.filter(function(k){return k!==s}),document.removeEventListener("wheel",u,Gf),document.removeEventListener("touchmove",u,Gf),document.removeEventListener("touchstart",h,Gf)}},[]);var w=t.removeScrollBar,S=t.inert;return z.createElement(z.Fragment,null,S?z.createElement(s,{styles:WF(i)}):null,w?z.createElement(zF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function YF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const QF=_F(kI,GF);var RI=z.forwardRef(function(t,e){return z.createElement(m0,sa({},t,{ref:e,sideCar:QF}))});RI.classNames=m0.classNames;var XF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qf=new WeakMap,Yg=new WeakMap,Qg={},d1=0,NI=function(t){return t&&(t.host||NI(t.parentNode))},JF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=NI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ZF=function(t,e,n,r){var i=JF(e,Array.isArray(t)?t:[t]);Qg[n]||(Qg[n]=new WeakMap);var s=Qg[n],a=[],c=new Set,u=new Set(i),d=function(m){!m||c.has(m)||(c.add(m),d(m.parentNode))};i.forEach(d);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(v){if(c.has(v))h(v);else try{var w=v.getAttribute(r),S=w!==null&&w!=="false",k=(Qf.get(v)||0)+1,_=(s.get(v)||0)+1;Qf.set(v,k),s.set(v,_),a.push(v),k===1&&S&&Yg.set(v,!0),_===1&&v.setAttribute(n,"true"),S||v.setAttribute(r,"true")}catch(O){console.error("aria-hidden: cannot operate on ",v,O)}})};return h(e),c.clear(),d1++,function(){a.forEach(function(m){var v=Qf.get(m)-1,w=s.get(m)-1;Qf.set(m,v),s.set(m,w),v||(Yg.has(m)||m.removeAttribute(r),Yg.delete(m)),w||m.removeAttribute(n)}),d1--,d1||(Qf=new WeakMap,Qf=new WeakMap,Yg=new WeakMap,Qg={})}},eH=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=XF(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ZF(r,i,n,"aria-hidden")):function(){return null}},g0="Dialog",[DI]=O9(g0),[tH,Vo]=DI(g0),II=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,c=z.useRef(null),u=z.useRef(null),[d,h]=I9({prop:r,defaultProp:i??!1,onChange:s,caller:g0});return M.jsx(tH,{scope:e,triggerRef:c,contentRef:u,contentId:hl(),titleId:hl(),descriptionId:hl(),open:d,onOpenChange:h,onOpenToggle:z.useCallback(()=>h(m=>!m),[h]),modal:a,children:n})};II.displayName=g0;var PI="DialogTrigger",nH=z.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Vo(PI,n),s=cf(e,i.triggerRef);return M.jsx(ym.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":oS(i.open),...r,ref:s,onClick:Rc(t.onClick,i.onOpenToggle)})});nH.displayName=PI;var iS="DialogPortal",[rH,LI]=DI(iS,{forceMount:void 0}),zI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Vo(iS,e);return M.jsx(rH,{scope:e,forceMount:n,children:z.Children.map(r,a=>M.jsx(p0,{present:n||s.open,children:M.jsx(SI,{asChild:!0,container:i,children:a})}))})};zI.displayName=iS;var $y="DialogOverlay",jI=z.forwardRef((t,e)=>{const n=LI($y,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Vo($y,t.__scopeDialog);return s.modal?M.jsx(p0,{present:r||s.open,children:M.jsx(sH,{...i,ref:e})}):null});jI.displayName=$y;var iH=gm("DialogOverlay.RemoveScroll"),sH=z.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Vo($y,n);return M.jsx(RI,{as:iH,allowPinchZoom:!0,shards:[i.contentRef],children:M.jsx(ym.div,{"data-state":oS(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Yu="DialogContent",VI=z.forwardRef((t,e)=>{const n=LI(Yu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Vo(Yu,t.__scopeDialog);return M.jsx(p0,{present:r||s.open,children:s.modal?M.jsx(oH,{...i,ref:e}):M.jsx(aH,{...i,ref:e})})});VI.displayName=Yu;var oH=z.forwardRef((t,e)=>{const n=Vo(Yu,t.__scopeDialog),r=z.useRef(null),i=cf(e,n.contentRef,r);return z.useEffect(()=>{const s=r.current;if(s)return eH(s)},[]),M.jsx(BI,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rc(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Rc(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:Rc(t.onFocusOutside,s=>s.preventDefault())})}),aH=z.forwardRef((t,e)=>{const n=Vo(Yu,t.__scopeDialog),r=z.useRef(!1),i=z.useRef(!1);return M.jsx(BI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),BI=z.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,c=Vo(Yu,n),u=z.useRef(null),d=cf(e,u);return pF(),M.jsxs(M.Fragment,{children:[M.jsx(xI,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:M.jsx(bI,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":oS(c.open),...a,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),M.jsxs(M.Fragment,{children:[M.jsx(fH,{titleId:c.titleId}),M.jsx(hH,{contentRef:u,descriptionId:c.descriptionId})]})]})}),sS="DialogTitle",lH=z.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Vo(sS,n);return M.jsx(ym.h2,{id:i.titleId,...r,ref:e})});lH.displayName=sS;var UI="DialogDescription",cH=z.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Vo(UI,n);return M.jsx(ym.p,{id:i.descriptionId,...r,ref:e})});cH.displayName=UI;var FI="DialogClose",uH=z.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Vo(FI,n);return M.jsx(ym.button,{type:"button",...r,ref:e,onClick:Rc(t.onClick,()=>i.onOpenChange(!1))})});uH.displayName=FI;function oS(t){return t?"open":"closed"}var HI="DialogTitleWarning",[ace,qI]=A9(HI,{contentName:Yu,titleName:sS,docsSlug:"dialog"}),fH=({titleId:t})=>{const e=qI(HI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return z.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},dH="DialogDescriptionWarning",hH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qI(dH).contentName}}.`;return z.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},pH=II,mH=zI,gH=jI,yH=VI,vH=Symbol.for("react.lazy"),Wy=KE[" use ".trim().toString()];function bH(t){return typeof t=="object"&&t!==null&&"then"in t}function $I(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===vH&&"_payload"in t&&bH(t._payload)}function wH(t){const e=xH(t),n=z.forwardRef((r,i)=>{let{children:s,...a}=r;$I(s)&&typeof Wy=="function"&&(s=Wy(s._payload));const c=z.Children.toArray(s),u=c.find(SH);if(u){const d=u.props.children,h=c.map(m=>m===u?z.Children.count(d)>1?z.Children.only(null):z.isValidElement(d)?d.props.children:null:m);return M.jsx(e,{...a,ref:i,children:z.isValidElement(d)?z.cloneElement(d,void 0,h):null})}return M.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function xH(t){const e=z.forwardRef((n,r)=>{let{children:i,...s}=n;if($I(i)&&typeof Wy=="function"&&(i=Wy(i._payload)),z.isValidElement(i)){const a=TH(i),c=_H(s,i.props);return i.type!==z.Fragment&&(c.ref=r?Uc(r,a):a),z.cloneElement(i,c)}return z.Children.count(i)>1?z.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var EH=Symbol("radix.slottable");function SH(t){return z.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===EH}function _H(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function TH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var kH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],eu=kH.reduce((t,e)=>{const n=wH(`Primitive.${e}`),r=z.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Zh='[cmdk-group=""]',h1='[cmdk-group-items=""]',CH='[cmdk-group-heading=""]',WI='[cmdk-item=""]',fO=`${WI}:not([aria-disabled="true"])`,Cx="cmdk-item-select",td="data-value",AH=(t,e,n)=>C9(t,e,n),KI=z.createContext(void 0),vm=()=>z.useContext(KI),GI=z.createContext(void 0),aS=()=>z.useContext(GI),YI=z.createContext(void 0),QI=z.forwardRef((t,e)=>{let n=nd(()=>{var Z,ye;return{search:"",value:(ye=(Z=t.value)!=null?Z:t.defaultValue)!=null?ye:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=nd(()=>new Set),i=nd(()=>new Map),s=nd(()=>new Map),a=nd(()=>new Set),c=XI(t),{label:u,children:d,value:h,onValueChange:m,filter:v,shouldFilter:w,loop:S,disablePointerSelection:k=!1,vimBindings:_=!0,...O}=t,B=hl(),W=hl(),L=hl(),q=z.useRef(null),U=VH();Qu(()=>{if(h!==void 0){let Z=h.trim();n.current.value=Z,R.emit()}},[h]),Qu(()=>{U(6,K)},[]);let R=z.useMemo(()=>({subscribe:Z=>(a.current.add(Z),()=>a.current.delete(Z)),snapshot:()=>n.current,setState:(Z,ye,Te)=>{var Oe,Ue,$e,bt;if(!Object.is(n.current[Z],ye)){if(n.current[Z]=ye,Z==="search")Q(),H(),U(1,G);else if(Z==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ze=document.getElementById(L);ze?ze.focus():(Oe=document.getElementById(B))==null||Oe.focus()}if(U(7,()=>{var ze;n.current.selectedItemId=(ze=je())==null?void 0:ze.id,R.emit()}),Te||U(5,K),((Ue=c.current)==null?void 0:Ue.value)!==void 0){let ze=ye??"";(bt=($e=c.current).onValueChange)==null||bt.call($e,ze);return}}R.emit()}},emit:()=>{a.current.forEach(Z=>Z())}}),[]),P=z.useMemo(()=>({value:(Z,ye,Te)=>{var Oe;ye!==((Oe=s.current.get(Z))==null?void 0:Oe.value)&&(s.current.set(Z,{value:ye,keywords:Te}),n.current.filtered.items.set(Z,V(ye,Te)),U(2,()=>{H(),R.emit()}))},item:(Z,ye)=>(r.current.add(Z),ye&&(i.current.has(ye)?i.current.get(ye).add(Z):i.current.set(ye,new Set([Z]))),U(3,()=>{Q(),H(),n.current.value||G(),R.emit()}),()=>{s.current.delete(Z),r.current.delete(Z),n.current.filtered.items.delete(Z);let Te=je();U(4,()=>{Q(),Te?.getAttribute("id")===Z&&G(),R.emit()})}),group:Z=>(i.current.has(Z)||i.current.set(Z,new Set),()=>{s.current.delete(Z),i.current.delete(Z)}),filter:()=>c.current.shouldFilter,label:u||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:B,inputId:L,labelId:W,listInnerRef:q}),[]);function V(Z,ye){var Te,Oe;let Ue=(Oe=(Te=c.current)==null?void 0:Te.filter)!=null?Oe:AH;return Z?Ue(Z,n.current.search,ye):0}function H(){if(!n.current.search||c.current.shouldFilter===!1)return;let Z=n.current.filtered.items,ye=[];n.current.filtered.groups.forEach(Oe=>{let Ue=i.current.get(Oe),$e=0;Ue.forEach(bt=>{let ze=Z.get(bt);$e=Math.max(ze,$e)}),ye.push([Oe,$e])});let Te=q.current;Re().sort((Oe,Ue)=>{var $e,bt;let ze=Oe.getAttribute("id"),tn=Ue.getAttribute("id");return(($e=Z.get(tn))!=null?$e:0)-((bt=Z.get(ze))!=null?bt:0)}).forEach(Oe=>{let Ue=Oe.closest(h1);Ue?Ue.appendChild(Oe.parentElement===Ue?Oe:Oe.closest(`${h1} > *`)):Te.appendChild(Oe.parentElement===Te?Oe:Oe.closest(`${h1} > *`))}),ye.sort((Oe,Ue)=>Ue[1]-Oe[1]).forEach(Oe=>{var Ue;let $e=(Ue=q.current)==null?void 0:Ue.querySelector(`${Zh}[${td}="${encodeURIComponent(Oe[0])}"]`);$e?.parentElement.appendChild($e)})}function G(){let Z=Re().find(Te=>Te.getAttribute("aria-disabled")!=="true"),ye=Z?.getAttribute(td);R.setState("value",ye||void 0)}function Q(){var Z,ye,Te,Oe;if(!n.current.search||c.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ue=0;for(let $e of r.current){let bt=(ye=(Z=s.current.get($e))==null?void 0:Z.value)!=null?ye:"",ze=(Oe=(Te=s.current.get($e))==null?void 0:Te.keywords)!=null?Oe:[],tn=V(bt,ze);n.current.filtered.items.set($e,tn),tn>0&&Ue++}for(let[$e,bt]of i.current)for(let ze of bt)if(n.current.filtered.items.get(ze)>0){n.current.filtered.groups.add($e);break}n.current.filtered.count=Ue}function K(){var Z,ye,Te;let Oe=je();Oe&&(((Z=Oe.parentElement)==null?void 0:Z.firstChild)===Oe&&((Te=(ye=Oe.closest(Zh))==null?void 0:ye.querySelector(CH))==null||Te.scrollIntoView({block:"nearest"})),Oe.scrollIntoView({block:"nearest"}))}function je(){var Z;return(Z=q.current)==null?void 0:Z.querySelector(`${WI}[aria-selected="true"]`)}function Re(){var Z;return Array.from(((Z=q.current)==null?void 0:Z.querySelectorAll(fO))||[])}function oe(Z){let ye=Re()[Z];ye&&R.setState("value",ye.getAttribute(td))}function Ee(Z){var ye;let Te=je(),Oe=Re(),Ue=Oe.findIndex(bt=>bt===Te),$e=Oe[Ue+Z];(ye=c.current)!=null&&ye.loop&&($e=Ue+Z<0?Oe[Oe.length-1]:Ue+Z===Oe.length?Oe[0]:Oe[Ue+Z]),$e&&R.setState("value",$e.getAttribute(td))}function ve(Z){let ye=je(),Te=ye?.closest(Zh),Oe;for(;Te&&!Oe;)Te=Z>0?zH(Te,Zh):jH(Te,Zh),Oe=Te?.querySelector(fO);Oe?R.setState("value",Oe.getAttribute(td)):Ee(Z)}let Qe=()=>oe(Re().length-1),Ze=Z=>{Z.preventDefault(),Z.metaKey?Qe():Z.altKey?ve(1):Ee(1)},J=Z=>{Z.preventDefault(),Z.metaKey?oe(0):Z.altKey?ve(-1):Ee(-1)};return z.createElement(eu.div,{ref:e,tabIndex:-1,...O,"cmdk-root":"",onKeyDown:Z=>{var ye;(ye=O.onKeyDown)==null||ye.call(O,Z);let Te=Z.nativeEvent.isComposing||Z.keyCode===229;if(!(Z.defaultPrevented||Te))switch(Z.key){case"n":case"j":{_&&Z.ctrlKey&&Ze(Z);break}case"ArrowDown":{Ze(Z);break}case"p":case"k":{_&&Z.ctrlKey&&J(Z);break}case"ArrowUp":{J(Z);break}case"Home":{Z.preventDefault(),oe(0);break}case"End":{Z.preventDefault(),Qe();break}case"Enter":{Z.preventDefault();let Oe=je();if(Oe){let Ue=new Event(Cx);Oe.dispatchEvent(Ue)}}}}},z.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:UH},u),y0(t,Z=>z.createElement(GI.Provider,{value:R},z.createElement(KI.Provider,{value:P},Z))))}),OH=z.forwardRef((t,e)=>{var n,r;let i=hl(),s=z.useRef(null),a=z.useContext(YI),c=vm(),u=XI(t),d=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:a?.forceMount;Qu(()=>{if(!d)return c.item(i,a?.id)},[d]);let h=JI(i,s,[t.value,t.children,s],t.keywords),m=aS(),v=Fc(U=>U.value&&U.value===h.current),w=Fc(U=>d||c.filter()===!1?!0:U.search?U.filtered.items.get(i)>0:!0);z.useEffect(()=>{let U=s.current;if(!(!U||t.disabled))return U.addEventListener(Cx,S),()=>U.removeEventListener(Cx,S)},[w,t.onSelect,t.disabled]);function S(){var U,R;k(),(R=(U=u.current).onSelect)==null||R.call(U,h.current)}function k(){m.setState("value",h.current,!0)}if(!w)return null;let{disabled:_,value:O,onSelect:B,forceMount:W,keywords:L,...q}=t;return z.createElement(eu.div,{ref:Uc(s,e),...q,id:i,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!v,"data-disabled":!!_,"data-selected":!!v,onPointerMove:_||c.getDisablePointerSelection()?void 0:k,onClick:_?void 0:S},t.children)}),MH=z.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,a=hl(),c=z.useRef(null),u=z.useRef(null),d=hl(),h=vm(),m=Fc(w=>i||h.filter()===!1?!0:w.search?w.filtered.groups.has(a):!0);Qu(()=>h.group(a),[]),JI(a,c,[t.value,t.heading,u]);let v=z.useMemo(()=>({id:a,forceMount:i}),[i]);return z.createElement(eu.div,{ref:Uc(c,e),...s,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&z.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),y0(t,w=>z.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},z.createElement(YI.Provider,{value:v},w))))}),RH=z.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=z.useRef(null),s=Fc(a=>!a.search);return!n&&!s?null:z.createElement(eu.div,{ref:Uc(i,e),...r,"cmdk-separator":"",role:"separator"})}),NH=z.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=aS(),a=Fc(d=>d.search),c=Fc(d=>d.selectedItemId),u=vm();return z.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),z.createElement(eu.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":c,id:u.inputId,type:"text",value:i?t.value:a,onChange:d=>{i||s.setState("search",d.target.value),n?.(d.target.value)}})}),DH=z.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=z.useRef(null),a=z.useRef(null),c=Fc(d=>d.selectedItemId),u=vm();return z.useEffect(()=>{if(a.current&&s.current){let d=a.current,h=s.current,m,v=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let w=d.offsetHeight;h.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return v.observe(d),()=>{cancelAnimationFrame(m),v.unobserve(d)}}},[]),z.createElement(eu.div,{ref:Uc(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":r,id:u.listId},y0(t,d=>z.createElement("div",{ref:Uc(a,u.listInnerRef),"cmdk-list-sizer":""},d)))}),IH=z.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:a,...c}=t;return z.createElement(pH,{open:n,onOpenChange:r},z.createElement(mH,{container:a},z.createElement(gH,{"cmdk-overlay":"",className:i}),z.createElement(yH,{"aria-label":t.label,"cmdk-dialog":"",className:s},z.createElement(QI,{ref:e,...c}))))}),PH=z.forwardRef((t,e)=>Fc(n=>n.filtered.count===0)?z.createElement(eu.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),LH=z.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return z.createElement(eu.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},y0(t,a=>z.createElement("div",{"aria-hidden":!0},a)))}),Vr=Object.assign(QI,{List:DH,Item:OH,Input:NH,Group:MH,Separator:RH,Dialog:IH,Empty:PH,Loading:LH});function zH(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function jH(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function XI(t){let e=z.useRef(t);return Qu(()=>{e.current=t}),e}var Qu=typeof window>"u"?z.useEffect:z.useLayoutEffect;function nd(t){let e=z.useRef();return e.current===void 0&&(e.current=t()),e}function Fc(t){let e=aS(),n=()=>t(e.snapshot());return z.useSyncExternalStore(e.subscribe,n,n)}function JI(t,e,n,r=[]){let i=z.useRef(),s=vm();return Qu(()=>{var a;let c=(()=>{var d;for(let h of n){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():i.current}})(),u=r.map(d=>d.trim());s.value(t,c,u),(a=e.current)==null||a.setAttribute(td,c),i.current=c}),i}var VH=()=>{let[t,e]=z.useState(),n=nd(()=>new Map);return Qu(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function BH(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function y0({asChild:t,children:e},n){return t&&z.isValidElement(e)?z.cloneElement(BH(e),{ref:e.ref},n(e.props.children)):n(e)}var UH={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function FH(){const[t,e]=z.useState(!1),n=ND();z.useEffect(()=>{const i=s=>{s.key==="k"&&(s.metaKey||s.ctrlKey)&&(s.preventDefault(),e(a=>!a))};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[]);const r=i=>{e(!1),i()};return M.jsxs("div",{className:jt("fixed inset-0 z-50 flex items-start justify-center pt-[20vh] transition-all duration-200",t?"opacity-100 visible":"opacity-0 invisible pointer-events-none"),children:[M.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>e(!1)}),M.jsxs(Vr,{className:"relative w-full max-w-lg rounded-card border border-zinc-800 bg-zinc-950 shadow-2xl overflow-hidden font-sans",children:[M.jsx("div",{className:"flex items-center border-b border-zinc-800 px-3",children:M.jsx(Vr.Input,{placeholder:"Type a command or search...",className:"flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-none text-zinc-100 placeholder:text-zinc-500"})}),M.jsxs(Vr.List,{className:"max-h-[300px] overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:[M.jsx(Vr.Empty,{className:"py-6 text-center text-sm text-zinc-500",children:"No results found."}),M.jsxs(Vr.Group,{heading:"Navigation",className:"mb-2 px-2 text-xs font-semibold text-zinc-500",children:[M.jsxs(Vr.Item,{onSelect:()=>r(()=>n("/")),className:"flex items-center gap-2 rounded-md px-2 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white cursor-pointer aria-selected:bg-zinc-800 aria-selected:text-white",children:[M.jsx(tI,{size:14}),M.jsx("span",{children:"Dashboard"})]}),M.jsxs(Vr.Item,{onSelect:()=>r(()=>n("/timeline")),className:"flex items-center gap-2 rounded-md px-2 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white cursor-pointer aria-selected:bg-zinc-800 aria-selected:text-white",children:[M.jsx(pU,{size:14}),M.jsx("span",{children:"Timeline"})]}),M.jsxs(Vr.Item,{onSelect:()=>r(()=>n("/goals")),className:"flex items-center gap-2 rounded-md px-2 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white cursor-pointer aria-selected:bg-zinc-800 aria-selected:text-white",children:[M.jsx(nS,{size:14}),M.jsx("span",{children:"Goals"})]})]}),M.jsxs(Vr.Group,{heading:"Actions",className:"px-2 text-xs font-semibold text-zinc-500",children:[M.jsxs(Vr.Item,{onSelect:()=>r(()=>n("/timeline")),className:"flex items-center gap-2 rounded-md px-2 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white cursor-pointer aria-selected:bg-zinc-800 aria-selected:text-white",children:[M.jsx(tS,{size:14}),M.jsx("span",{children:"New Log Entry"})]}),M.jsxs(Vr.Item,{onSelect:()=>r(()=>{n("/"),setTimeout(()=>window.scrollTo(0,document.body.scrollHeight),100)}),className:"flex items-center gap-2 rounded-md px-2 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white cursor-pointer aria-selected:bg-zinc-800 aria-selected:text-white",children:[M.jsx(eI,{size:14}),M.jsx("span",{children:"Export Review"})]})]})]}),M.jsxs("div",{className:"border-t border-zinc-800 p-2 px-4 flex justify-between items-center bg-zinc-900/50",children:[M.jsxs("span",{className:"text-[10px] text-zinc-500",children:["Use ",M.jsx("kbd",{className:"font-mono bg-zinc-800 px-1 rounded text-zinc-400",children:""})," ",M.jsx("kbd",{className:"font-mono bg-zinc-800 px-1 rounded text-zinc-400",children:""})," to navigate"]}),M.jsxs("span",{className:"text-[10px] text-zinc-500",children:[M.jsx("kbd",{className:"font-mono bg-zinc-800 px-1 rounded text-zinc-400",children:"Enter"})," to select"]})]})]})]})}const HH="modulepreload",qH=function(t){return"/CareerFly/"+t},dO={},Ax=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var a=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(h=>{if(h=qH(h),h in dO)return;dO[h]=!0;const m=h.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":HH,m||(w.as="script"),w.crossOrigin="",w.href=h,u&&w.setAttribute("nonce",u),document.head.appendChild(w),m)return new Promise((S,k)=>{w.addEventListener("load",S),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var _y={exports:{}},$H=_y.exports,hO;function WH(){return hO||(hO=1,(function(t,e){(function(n,r){t.exports=r()})($H,function(){var n=function(y,x){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(T[I]=A[I])})(y,x)},r=function(){return(r=Object.assign||function(y){for(var x,T=1,A=arguments.length;T<A;T++)for(var I in x=arguments[T])Object.prototype.hasOwnProperty.call(x,I)&&(y[I]=x[I]);return y}).apply(this,arguments)};function i(y,x,T){for(var A,I=0,j=x.length;I<j;I++)!A&&I in x||((A=A||Array.prototype.slice.call(x,0,I))[I]=x[I]);return y.concat(A||Array.prototype.slice.call(x))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ZV,a=Object.keys,c=Array.isArray;function u(y,x){return typeof x!="object"||a(x).forEach(function(T){y[T]=x[T]}),y}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function m(y,x){return h.call(y,x)}function v(y,x){typeof x=="function"&&(x=x(d(y))),(typeof Reflect>"u"?a:Reflect.ownKeys)(x).forEach(function(T){S(y,T,x[T])})}var w=Object.defineProperty;function S(y,x,T,A){w(y,x,u(T&&m(T,"get")&&typeof T.get=="function"?{get:T.get,set:T.set,configurable:!0}:{value:T,configurable:!0,writable:!0},A))}function k(y){return{from:function(x){return y.prototype=Object.create(x.prototype),S(y.prototype,"constructor",y),{extend:v.bind(null,y.prototype)}}}}var _=Object.getOwnPropertyDescriptor,O=[].slice;function B(y,x,T){return O.call(y,x,T)}function W(y,x){return x(y)}function L(y){if(!y)throw new Error("Assertion Failed")}function q(y){s.setImmediate?setImmediate(y):setTimeout(y,0)}function U(y,x){if(typeof x=="string"&&m(y,x))return y[x];if(!x)return y;if(typeof x!="string"){for(var T=[],A=0,I=x.length;A<I;++A){var j=U(y,x[A]);T.push(j)}return T}var Y=x.indexOf(".");if(Y!==-1){var X=y[x.substr(0,Y)];return X==null?void 0:U(X,x.substr(Y+1))}}function R(y,x,T){if(y&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(y)))if(typeof x!="string"&&"length"in x){L(typeof T!="string"&&"length"in T);for(var A=0,I=x.length;A<I;++A)R(y,x[A],T[A])}else{var j,Y,X=x.indexOf(".");X!==-1?(j=x.substr(0,X),(Y=x.substr(X+1))===""?T===void 0?c(y)&&!isNaN(parseInt(j))?y.splice(j,1):delete y[j]:y[j]=T:R(X=!(X=y[j])||!m(y,j)?y[j]={}:X,Y,T)):T===void 0?c(y)&&!isNaN(parseInt(x))?y.splice(x,1):delete y[x]:y[x]=T}}function P(y){var x,T={};for(x in y)m(y,x)&&(T[x]=y[x]);return T}var V=[].concat;function H(y){return V.apply([],y)}var yr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(H([8,16,32,64].map(function(y){return["Int","Uint","Float"].map(function(x){return x+y+"Array"})}))).filter(function(y){return s[y]}),G=new Set(yr.map(function(y){return s[y]})),Q=null;function K(y){return Q=new WeakMap,y=(function x(T){if(!T||typeof T!="object")return T;var A=Q.get(T);if(A)return A;if(c(T)){A=[],Q.set(T,A);for(var I=0,j=T.length;I<j;++I)A.push(x(T[I]))}else if(G.has(T.constructor))A=T;else{var Y,X=d(T);for(Y in A=X===Object.prototype?{}:Object.create(X),Q.set(T,A),T)m(T,Y)&&(A[Y]=x(T[Y]))}return A})(y),Q=null,y}var je={}.toString;function Re(y){return je.call(y).slice(8,-1)}var oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ee=typeof oe=="symbol"?function(y){var x;return y!=null&&(x=y[oe])&&x.apply(y)}:function(){return null};function ve(y,x){return x=y.indexOf(x),0<=x&&y.splice(x,1),0<=x}var Qe={};function Ze(y){var x,T,A,I;if(arguments.length===1){if(c(y))return y.slice();if(this===Qe&&typeof y=="string")return[y];if(I=Ee(y)){for(T=[];!(A=I.next()).done;)T.push(A.value);return T}if(y==null)return[y];if(typeof(x=y.length)!="number")return[y];for(T=new Array(x);x--;)T[x]=y[x];return T}for(x=arguments.length,T=new Array(x);x--;)T[x]=arguments[x];return T}var J=typeof Symbol<"u"?function(y){return y[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},er=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Oi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(er),Z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(y,x){this.name=y,this.message=x}function Te(y,x){return y+". Errors: "+Object.keys(x).map(function(T){return x[T].toString()}).filter(function(T,A,I){return I.indexOf(T)===A}).join(`
`)}function Oe(y,x,T,A){this.failures=x,this.failedKeys=A,this.successCount=T,this.message=Te(y,x)}function Ue(y,x){this.name="BulkError",this.failures=Object.keys(x).map(function(T){return x[T]}),this.failuresByPos=x,this.message=Te(y,this.failures)}k(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(Oe).from(ye),k(Ue).from(ye);var $e=Oi.reduce(function(y,x){return y[x]=x+"Error",y},{}),bt=ye,ze=Oi.reduce(function(y,x){var T=x+"Error";function A(I,j){this.name=T,I?typeof I=="string"?(this.message="".concat(I).concat(j?`
 `+j:""),this.inner=j||null):typeof I=="object"&&(this.message="".concat(I.name," ").concat(I.message),this.inner=I):(this.message=Z[x]||T,this.inner=null)}return k(A).from(bt),y[x]=A,y},{});ze.Syntax=SyntaxError,ze.Type=TypeError,ze.Range=RangeError;var tn=er.reduce(function(y,x){return y[x+"Error"]=ze[x],y},{}),Bn=Oi.reduce(function(y,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(y[x+"Error"]=ze[x]),y},{});function Tt(){}function gr(y){return y}function Ir(y,x){return y==null||y===gr?x:function(T){return x(y(T))}}function ar(y,x){return function(){y.apply(this,arguments),x.apply(this,arguments)}}function Xr(y,x){return y===Tt?x:function(){var T=y.apply(this,arguments);T!==void 0&&(arguments[0]=T);var A=this.onsuccess,I=this.onerror;this.onsuccess=null,this.onerror=null;var j=x.apply(this,arguments);return A&&(this.onsuccess=this.onsuccess?ar(A,this.onsuccess):A),I&&(this.onerror=this.onerror?ar(I,this.onerror):I),j!==void 0?j:T}}function Ti(y,x){return y===Tt?x:function(){y.apply(this,arguments);var T=this.onsuccess,A=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?ar(T,this.onsuccess):T),A&&(this.onerror=this.onerror?ar(A,this.onerror):A)}}function Li(y,x){return y===Tt?x:function(T){var A=y.apply(this,arguments);u(T,A);var I=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,T=x.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?ar(I,this.onsuccess):I),j&&(this.onerror=this.onerror?ar(j,this.onerror):j),A===void 0?T===void 0?void 0:T:u(A,T)}}function hn(y,x){return y===Tt?x:function(){return x.apply(this,arguments)!==!1&&y.apply(this,arguments)}}function Xt(y,x){return y===Tt?x:function(){var T=y.apply(this,arguments);if(T&&typeof T.then=="function"){for(var A=this,I=arguments.length,j=new Array(I);I--;)j[I]=arguments[I];return T.then(function(){return x.apply(A,j)})}return x.apply(this,arguments)}}Bn.ModifyError=Oe,Bn.DexieError=ye,Bn.BulkError=Ue;var un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zi(y){un=y}var lr={},xn=100,yr=typeof Promise>"u"?[]:(function(){var y=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[y,d(y),y];var x=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[x,d(x),y]})(),er=yr[0],Oi=yr[1],yr=yr[2],Oi=Oi&&Oi.then,vr=er&&er.constructor,Pr=!!yr,cs=function(y,x){Nt.push([y,x]),us&&(queueMicrotask(Bo),us=!1)},Is=!0,us=!0,fi=[],br=[],Se=gr,Ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tt,pgp:!1,env:{},finalize:Tt},Ce=Ye,Nt=[],wt=0,rt=[];function Ae(y){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=Ce;if(typeof y!="function"){if(y!==lr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$t(this,this._value))}this._state=null,this._value=null,++x.ref,(function T(A,I){try{I(function(j){if(A._state===null){if(j===A)throw new TypeError("A promise cannot be resolved with itself.");var Y=A._lib&&Nn();j&&typeof j.then=="function"?T(A,function(X,ne){j instanceof Ae?j._then(X,ne):j.then(X,ne)}):(A._state=!0,A._value=j,yt(A)),Y&&qn()}},$t.bind(null,A))}catch(j){$t(A,j)}})(this,y)}var st={get:function(){var y=Ce,x=di;function T(A,I){var j=this,Y=!y.global&&(y!==Ce||x!==di),X=Y&&!Lr(),ne=new Ae(function(re,ce){tr(j,new ut(Aa(A,y,Y,X),Aa(I,y,Y,X),re,ce,y))});return this._consoleTask&&(ne._consoleTask=this._consoleTask),ne}return T.prototype=lr,T},set:function(y){S(this,"then",y&&y.prototype===lr?st:{get:function(){return y},set:st.set})}};function ut(y,x,T,A,I){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof x=="function"?x:null,this.resolve=T,this.reject=A,this.psd=I}function $t(y,x){var T,A;br.push(x),y._state===null&&(T=y._lib&&Nn(),x=Se(x),y._state=!1,y._value=x,A=y,fi.some(function(I){return I._value===A._value})||fi.push(A),yt(y),T&&qn())}function yt(y){var x=y._listeners;y._listeners=[];for(var T=0,A=x.length;T<A;++T)tr(y,x[T]);var I=y._PSD;--I.ref||I.finalize(),wt===0&&(++wt,cs(function(){--wt==0&&su()},[]))}function tr(y,x){if(y._state!==null){var T=y._state?x.onFulfilled:x.onRejected;if(T===null)return(y._state?x.resolve:x.reject)(y._value);++x.psd.ref,++wt,cs(ji,[T,y,x])}else y._listeners.push(x)}function ji(y,x,T){try{var A,I=x._value;!x._state&&br.length&&(br=[]),A=un&&x._consoleTask?x._consoleTask.run(function(){return y(I)}):y(I),x._state||br.indexOf(I)!==-1||(function(j){for(var Y=fi.length;Y;)if(fi[--Y]._value===j._value)return fi.splice(Y,1)})(x),T.resolve(A)}catch(j){T.reject(j)}finally{--wt==0&&su(),--T.psd.ref||T.psd.finalize()}}function Bo(){Ur(Ye,function(){Nn()&&qn()})}function Nn(){var y=Is;return us=Is=!1,y}function qn(){var y,x,T;do for(;0<Nt.length;)for(y=Nt,Nt=[],T=y.length,x=0;x<T;++x){var A=y[x];A[0].apply(null,A[1])}while(0<Nt.length);us=Is=!0}function su(){var y=fi;fi=[],y.forEach(function(A){A._PSD.onunhandled.call(null,A._value,A)});for(var x=rt.slice(0),T=x.length;T;)x[--T]()}function Ps(y){return new Ae(lr,!1,y)}function fn(y,x){var T=Ce;return function(){var A=Nn(),I=Ce;try{return ds(T,!0),y.apply(this,arguments)}catch(j){x&&x(j)}finally{ds(I,!1),A&&qn()}}}v(Ae.prototype,{then:st,_then:function(y,x){tr(this,new ut(null,null,y,x,Ce))},catch:function(y){if(arguments.length===1)return this.then(null,y);var x=y,T=arguments[1];return typeof x=="function"?this.then(null,function(A){return(A instanceof x?T:Ps)(A)}):this.then(null,function(A){return(A&&A.name===x?T:Ps)(A)})},finally:function(y){return this.then(function(x){return Ae.resolve(y()).then(function(){return x})},function(x){return Ae.resolve(y()).then(function(){return Ps(x)})})},timeout:function(y,x){var T=this;return y<1/0?new Ae(function(A,I){var j=setTimeout(function(){return I(new ze.Timeout(x))},y);T.then(A,I).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(Ae.prototype,Symbol.toStringTag,"Dexie.Promise"),Ye.env=ou(),v(Ae,{all:function(){var y=Ze.apply(null,arguments).map(po);return new Ae(function(x,T){y.length===0&&x([]);var A=y.length;y.forEach(function(I,j){return Ae.resolve(I).then(function(Y){y[j]=Y,--A||x(y)},T)})})},resolve:function(y){return y instanceof Ae?y:y&&typeof y.then=="function"?new Ae(function(x,T){y.then(x,T)}):new Ae(lr,!0,y)},reject:Ps,race:function(){var y=Ze.apply(null,arguments).map(po);return new Ae(function(x,T){y.map(function(A){return Ae.resolve(A).then(x,T)})})},PSD:{get:function(){return Ce},set:function(y){return Ce=y}},totalEchoes:{get:function(){return di}},newPSD:pn,usePSD:Ur,scheduler:{get:function(){return cs},set:function(y){cs=y}},rejectionMapper:{get:function(){return Se},set:function(y){Se=y}},follow:function(y,x){return new Ae(function(T,A){return pn(function(I,j){var Y=Ce;Y.unhandleds=[],Y.onunhandled=j,Y.finalize=ar(function(){var X,ne=this;X=function(){ne.unhandleds.length===0?I():j(ne.unhandleds[0])},rt.push(function re(){X(),rt.splice(rt.indexOf(re),1)}),++wt,cs(function(){--wt==0&&su()},[])},Y.finalize),y()},x,T,A)})}}),vr&&(vr.allSettled&&S(Ae,"allSettled",function(){var y=Ze.apply(null,arguments).map(po);return new Ae(function(x){y.length===0&&x([]);var T=y.length,A=new Array(T);y.forEach(function(I,j){return Ae.resolve(I).then(function(Y){return A[j]={status:"fulfilled",value:Y}},function(Y){return A[j]={status:"rejected",reason:Y}}).then(function(){return--T||x(A)})})})}),vr.any&&typeof AggregateError<"u"&&S(Ae,"any",function(){var y=Ze.apply(null,arguments).map(po);return new Ae(function(x,T){y.length===0&&T(new AggregateError([]));var A=y.length,I=new Array(A);y.forEach(function(j,Y){return Ae.resolve(j).then(function(X){return x(X)},function(X){I[Y]=X,--A||T(new AggregateError(I))})})})}),vr.withResolvers&&(Ae.withResolvers=vr.withResolvers));var Un={awaits:0,echoes:0,id:0},ka=0,Vi=[],Ca=0,di=0,fs=0;function pn(y,x,T,A){var I=Ce,j=Object.create(I);return j.parent=I,j.ref=0,j.global=!1,j.id=++fs,Ye.env,j.env=Pr?{Promise:Ae,PromiseProp:{value:Ae,configurable:!0,writable:!0},all:Ae.all,race:Ae.race,allSettled:Ae.allSettled,any:Ae.any,resolve:Ae.resolve,reject:Ae.reject}:{},x&&u(j,x),++I.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},A=Ur(j,y,T,A),j.ref===0&&j.finalize(),A}function Dn(){return Un.id||(Un.id=++ka),++Un.awaits,Un.echoes+=xn,Un.id}function Lr(){return!!Un.awaits&&(--Un.awaits==0&&(Un.id=0),Un.echoes=Un.awaits*xn,!0)}function po(y){return Un.echoes&&y&&y.constructor===vr?(Dn(),y.then(function(x){return Lr(),x},function(x){return Lr(),nn(x)})):y}function hh(){var y=Vi[Vi.length-1];Vi.pop(),ds(y,!1)}function ds(y,x){var T,A=Ce;(x?!Un.echoes||Ca++&&y===Ce:!Ca||--Ca&&y===Ce)||queueMicrotask(x?(function(I){++di,Un.echoes&&--Un.echoes!=0||(Un.echoes=Un.awaits=Un.id=0),Vi.push(Ce),ds(I,!0)}).bind(null,y):hh),y!==Ce&&(Ce=y,A===Ye&&(Ye.env=ou()),Pr&&(T=Ye.env.Promise,x=y.env,(A.global||y.global)&&(Object.defineProperty(s,"Promise",x.PromiseProp),T.all=x.all,T.race=x.race,T.resolve=x.resolve,T.reject=x.reject,x.allSettled&&(T.allSettled=x.allSettled),x.any&&(T.any=x.any))))}function ou(){var y=s.Promise;return Pr?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject}:{}}function Ur(y,x,T,A,I){var j=Ce;try{return ds(y,!0),x(T,A,I)}finally{ds(j,!1)}}function Aa(y,x,T,A){return typeof y!="function"?y:function(){var I=Ce;T&&Dn(),ds(x,!0);try{return y.apply(this,arguments)}finally{ds(I,!1),A&&queueMicrotask(Lr)}}}function Bi(y){Promise===vr&&Un.echoes===0?Ca===0?y():enqueueNativeMicroTask(y):setTimeout(y,0)}(""+Oi).indexOf("[native code]")===-1&&(Dn=Lr=Tt);var nn=Ae.reject,cr="",wr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$n="String expected.",Ls=[],Uo="__dbnames",Ui="readonly",Fi="readwrite";function hs(y,x){return y?x?function(){return y.apply(this,arguments)&&x.apply(this,arguments)}:y:x}var Cl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Fo(y){return typeof y!="string"||/\./.test(y)?function(x){return x}:function(x){return x[y]===void 0&&y in x&&delete(x=K(x))[y],x}}function au(){throw ze.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Dt(y,x){try{var T=hi(y),A=hi(x);if(T!==A)return T==="Array"?1:A==="Array"?-1:T==="binary"?1:A==="binary"?-1:T==="string"?1:A==="string"?-1:T==="Date"?1:A!=="Date"?NaN:-1;switch(T){case"number":case"Date":case"string":return x<y?1:y<x?-1:0;case"binary":return(function(I,j){for(var Y=I.length,X=j.length,ne=Y<X?Y:X,re=0;re<ne;++re)if(I[re]!==j[re])return I[re]<j[re]?-1:1;return Y===X?0:Y<X?-1:1})(Wn(y),Wn(x));case"Array":return(function(I,j){for(var Y=I.length,X=j.length,ne=Y<X?Y:X,re=0;re<ne;++re){var ce=Dt(I[re],j[re]);if(ce!==0)return ce}return Y===X?0:Y<X?-1:1})(y,x)}}catch{}return NaN}function hi(y){var x=typeof y;return x!="object"?x:ArrayBuffer.isView(y)?"binary":(y=Re(y),y==="ArrayBuffer"?"binary":y)}function Wn(y){return y instanceof Uint8Array?y:ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y)}function Kn(y,x,T){var A=y.schema.yProps;return A?(x&&0<T.numFailures&&(x=x.filter(function(I,j){return!T.failures[j]})),Promise.all(A.map(function(I){return I=I.updatesTable,x?y.db.table(I).where("k").anyOf(x).delete():y.db.table(I).clear()})).then(function(){return T})):T}var Hi=(Al.prototype.execute=function(y){var x=this["@@propmod"];if(x.add!==void 0){var T=x.add;if(c(T))return i(i([],c(y)?y:[],!0),T).sort();if(typeof T=="number")return(Number(y)||0)+T;if(typeof T=="bigint")try{return BigInt(y)+T}catch{return BigInt(0)+T}throw new TypeError("Invalid term ".concat(T))}if(x.remove!==void 0){var A=x.remove;if(c(A))return c(y)?y.filter(function(I){return!A.includes(I)}).sort():[];if(typeof A=="number")return Number(y)-A;if(typeof A=="bigint")try{return BigInt(y)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return T=(T=x.replacePrefix)===null||T===void 0?void 0:T[0],T&&typeof y=="string"&&y.startsWith(T)?x.replacePrefix[1]+y.substring(T.length):y},Al);function Al(y){this["@@propmod"]=y}function on(y,x){for(var T=a(x),A=T.length,I=!1,j=0;j<A;++j){var Y=T[j],X=x[Y],ne=U(y,Y);X instanceof Hi?(R(y,Y,X.execute(ne)),I=!0):ne!==X&&(R(y,Y,X),I=!0)}return I}var Ho=(Ft.prototype._trans=function(y,x,T){var A=this._tx||Ce.trans,I=this.name,j=un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(y==="readonly"?"read":"write"," ").concat(this.name));function Y(re,ce,te){if(!te.schema[I])throw new ze.NotFound("Table "+I+" not part of transaction");return x(te.idbtrans,te)}var X=Nn();try{var ne=A&&A.db._novip===this.db._novip?A===Ce.trans?A._promise(y,Y,T):pn(function(){return A._promise(y,Y,T)},{trans:A,transless:Ce.transless||Ce}):(function re(ce,te,fe,ie){if(ce.idbdb&&(ce._state.openComplete||Ce.letThrough||ce._vip)){var ae=ce._createTransaction(te,fe,ce._dbSchema);try{ae.create(),ce._state.PR1398_maxLoop=3}catch(le){return le.name===$e.InvalidState&&ce.isOpen()&&0<--ce._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ce.close({disableAutoOpen:!1}),ce.open().then(function(){return re(ce,te,fe,ie)})):nn(le)}return ae._promise(te,function(le,ue){return pn(function(){return Ce.trans=ae,ie(le,ue,ae)})}).then(function(le){if(te==="readwrite")try{ae.idbtrans.commit()}catch{}return te==="readonly"?le:ae._completion.then(function(){return le})})}if(ce._state.openComplete)return nn(new ze.DatabaseClosed(ce._state.dbOpenError));if(!ce._state.isBeingOpened){if(!ce._state.autoOpen)return nn(new ze.DatabaseClosed);ce.open().catch(Tt)}return ce._state.dbReadyPromise.then(function(){return re(ce,te,fe,ie)})})(this.db,y,[this.name],Y);return j&&(ne._consoleTask=j,ne=ne.catch(function(re){return console.trace(re),nn(re)})),ne}finally{X&&qn()}},Ft.prototype.get=function(y,x){var T=this;return y&&y.constructor===Object?this.where(y).first(x):y==null?nn(new ze.Type("Invalid argument to Table.get()")):this._trans("readonly",function(A){return T.core.get({trans:A,key:y}).then(function(I){return T.hook.reading.fire(I)})}).then(x)},Ft.prototype.where=function(y){if(typeof y=="string")return new this.db.WhereClause(this,y);if(c(y))return new this.db.WhereClause(this,"[".concat(y.join("+"),"]"));var x=a(y);if(x.length===1)return this.where(x[0]).equals(y[x[0]]);var T=this.schema.indexes.concat(this.schema.primKey).filter(function(X){if(X.compound&&x.every(function(re){return 0<=X.keyPath.indexOf(re)})){for(var ne=0;ne<x.length;++ne)if(x.indexOf(X.keyPath[ne])===-1)return!1;return!0}return!1}).sort(function(X,ne){return X.keyPath.length-ne.keyPath.length})[0];if(T&&this.db._maxKey!==cr){var j=T.keyPath.slice(0,x.length);return this.where(j).equals(j.map(function(ne){return y[ne]}))}!T&&un&&console.warn("The query ".concat(JSON.stringify(y)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var A=this.schema.idxByName;function I(X,ne){return Dt(X,ne)===0}var Y=x.reduce(function(te,ne){var re=te[0],ce=te[1],te=A[ne],fe=y[ne];return[re||te,re||!te?hs(ce,te&&te.multi?function(ie){return ie=U(ie,ne),c(ie)&&ie.some(function(ae){return I(fe,ae)})}:function(ie){return I(fe,U(ie,ne))}):ce]},[null,null]),j=Y[0],Y=Y[1];return j?this.where(j.name).equals(y[j.keyPath]).filter(Y):T?this.filter(Y):this.where(x).equals("")},Ft.prototype.filter=function(y){return this.toCollection().and(y)},Ft.prototype.count=function(y){return this.toCollection().count(y)},Ft.prototype.offset=function(y){return this.toCollection().offset(y)},Ft.prototype.limit=function(y){return this.toCollection().limit(y)},Ft.prototype.each=function(y){return this.toCollection().each(y)},Ft.prototype.toArray=function(y){return this.toCollection().toArray(y)},Ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ft.prototype.orderBy=function(y){return new this.db.Collection(new this.db.WhereClause(this,c(y)?"[".concat(y.join("+"),"]"):y))},Ft.prototype.reverse=function(){return this.toCollection().reverse()},Ft.prototype.mapToClass=function(y){var x,T=this.db,A=this.name;function I(){return x!==null&&x.apply(this,arguments)||this}(this.schema.mappedClass=y).prototype instanceof au&&((function(ne,re){if(typeof re!="function"&&re!==null)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function ce(){this.constructor=ne}n(ne,re),ne.prototype=re===null?Object.create(re):(ce.prototype=re.prototype,new ce)})(I,x=y),Object.defineProperty(I.prototype,"db",{get:function(){return T},enumerable:!1,configurable:!0}),I.prototype.table=function(){return A},y=I);for(var j=new Set,Y=y.prototype;Y;Y=d(Y))Object.getOwnPropertyNames(Y).forEach(function(ne){return j.add(ne)});function X(ne){if(!ne)return ne;var re,ce=Object.create(y.prototype);for(re in ne)if(!j.has(re))try{ce[re]=ne[re]}catch{}return ce}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=X,this.hook("reading",X),y},Ft.prototype.defineClass=function(){return this.mapToClass(function(y){u(this,y)})},Ft.prototype.add=function(y,x){var T=this,A=this.schema.primKey,I=A.auto,j=A.keyPath,Y=y;return j&&I&&(Y=Fo(j)(y)),this._trans("readwrite",function(X){return T.core.mutate({trans:X,type:"add",keys:x!=null?[x]:null,values:[Y]})}).then(function(X){return X.numFailures?Ae.reject(X.failures[0]):X.lastResult}).then(function(X){if(j)try{R(y,j,X)}catch{}return X})},Ft.prototype.upsert=function(y,x){var T=this,A=this.schema.primKey.keyPath;return this._trans("readwrite",function(I){return T.core.get({trans:I,key:y}).then(function(j){var Y=j??{};return on(Y,x),A&&R(Y,A,y),T.core.mutate({trans:I,type:"put",values:[Y],keys:[y],upsert:!0,updates:{keys:[y],changeSpecs:[x]}}).then(function(X){return X.numFailures?Ae.reject(X.failures[0]):!!j})})})},Ft.prototype.update=function(y,x){return typeof y!="object"||c(y)?this.where(":id").equals(y).modify(x):(y=U(y,this.schema.primKey.keyPath),y===void 0?nn(new ze.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(y).modify(x))},Ft.prototype.put=function(y,x){var T=this,A=this.schema.primKey,I=A.auto,j=A.keyPath,Y=y;return j&&I&&(Y=Fo(j)(y)),this._trans("readwrite",function(X){return T.core.mutate({trans:X,type:"put",values:[Y],keys:x!=null?[x]:null})}).then(function(X){return X.numFailures?Ae.reject(X.failures[0]):X.lastResult}).then(function(X){if(j)try{R(y,j,X)}catch{}return X})},Ft.prototype.delete=function(y){var x=this;return this._trans("readwrite",function(T){return x.core.mutate({trans:T,type:"delete",keys:[y]}).then(function(A){return Kn(x,[y],A)}).then(function(A){return A.numFailures?Ae.reject(A.failures[0]):void 0})})},Ft.prototype.clear=function(){var y=this;return this._trans("readwrite",function(x){return y.core.mutate({trans:x,type:"deleteRange",range:Cl}).then(function(T){return Kn(y,null,T)})}).then(function(x){return x.numFailures?Ae.reject(x.failures[0]):void 0})},Ft.prototype.bulkGet=function(y){var x=this;return this._trans("readonly",function(T){return x.core.getMany({keys:y,trans:T}).then(function(A){return A.map(function(I){return x.hook.reading.fire(I)})})})},Ft.prototype.bulkAdd=function(y,x,T){var A=this,I=Array.isArray(x)?x:void 0,j=(T=T||(I?void 0:x))?T.allKeys:void 0;return this._trans("readwrite",function(Y){var re=A.schema.primKey,X=re.auto,re=re.keyPath;if(re&&I)throw new ze.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(I&&I.length!==y.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var ne=y.length,re=re&&X?y.map(Fo(re)):y;return A.core.mutate({trans:Y,type:"add",keys:I,values:re,wantResults:j}).then(function(ae){var te=ae.numFailures,fe=ae.results,ie=ae.lastResult,ae=ae.failures;if(te===0)return j?fe:ie;throw new Ue("".concat(A.name,".bulkAdd(): ").concat(te," of ").concat(ne," operations failed"),ae)})})},Ft.prototype.bulkPut=function(y,x,T){var A=this,I=Array.isArray(x)?x:void 0,j=(T=T||(I?void 0:x))?T.allKeys:void 0;return this._trans("readwrite",function(Y){var re=A.schema.primKey,X=re.auto,re=re.keyPath;if(re&&I)throw new ze.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(I&&I.length!==y.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var ne=y.length,re=re&&X?y.map(Fo(re)):y;return A.core.mutate({trans:Y,type:"put",keys:I,values:re,wantResults:j}).then(function(ae){var te=ae.numFailures,fe=ae.results,ie=ae.lastResult,ae=ae.failures;if(te===0)return j?fe:ie;throw new Ue("".concat(A.name,".bulkPut(): ").concat(te," of ").concat(ne," operations failed"),ae)})})},Ft.prototype.bulkUpdate=function(y){var x=this,T=this.core,A=y.map(function(Y){return Y.key}),I=y.map(function(Y){return Y.changes}),j=[];return this._trans("readwrite",function(Y){return T.getMany({trans:Y,keys:A,cache:"clone"}).then(function(X){var ne=[],re=[];y.forEach(function(te,fe){var ie=te.key,ae=te.changes,le=X[fe];if(le){for(var ue=0,pe=Object.keys(ae);ue<pe.length;ue++){var be=pe[ue],ke=ae[be];if(be===x.schema.primKey.keyPath){if(Dt(ke,ie)!==0)throw new ze.Constraint("Cannot update primary key in bulkUpdate()")}else R(le,be,ke)}j.push(fe),ne.push(ie),re.push(le)}});var ce=ne.length;return T.mutate({trans:Y,type:"put",keys:ne,values:re,updates:{keys:A,changeSpecs:I}}).then(function(te){var fe=te.numFailures,ie=te.failures;if(fe===0)return ce;for(var ae=0,le=Object.keys(ie);ae<le.length;ae++){var ue,pe=le[ae],be=j[Number(pe)];be!=null&&(ue=ie[pe],delete ie[pe],ie[be]=ue)}throw new Ue("".concat(x.name,".bulkUpdate(): ").concat(fe," of ").concat(ce," operations failed"),ie)})})})},Ft.prototype.bulkDelete=function(y){var x=this,T=y.length;return this._trans("readwrite",function(A){return x.core.mutate({trans:A,type:"delete",keys:y}).then(function(I){return Kn(x,y,I)})}).then(function(Y){var I=Y.numFailures,j=Y.lastResult,Y=Y.failures;if(I===0)return j;throw new Ue("".concat(x.name,".bulkDelete(): ").concat(I," of ").concat(T," operations failed"),Y)})},Ft);function Ft(){}function ps(y){function x(Y,X){if(X){for(var ne=arguments.length,re=new Array(ne-1);--ne;)re[ne-1]=arguments[ne];return T[Y].subscribe.apply(null,re),y}if(typeof Y=="string")return T[Y]}var T={};x.addEventType=j;for(var A=1,I=arguments.length;A<I;++A)j(arguments[A]);return x;function j(Y,X,ne){if(typeof Y!="object"){var re;X=X||hn;var ce={subscribers:[],fire:ne=ne||Tt,subscribe:function(te){ce.subscribers.indexOf(te)===-1&&(ce.subscribers.push(te),ce.fire=X(ce.fire,te))},unsubscribe:function(te){ce.subscribers=ce.subscribers.filter(function(fe){return fe!==te}),ce.fire=ce.subscribers.reduce(X,ne)}};return T[Y]=x[Y]=ce}a(re=Y).forEach(function(te){var fe=re[te];if(c(fe))j(te,re[te][0],re[te][1]);else{if(fe!=="asap")throw new ze.InvalidArgument("Invalid event config");var ie=j(te,gr,function(){for(var ae=arguments.length,le=new Array(ae);ae--;)le[ae]=arguments[ae];ie.subscribers.forEach(function(ue){q(function(){ue.apply(null,le)})})})}})}}function xr(y,x){return k(x).from({prototype:y}),x}function ms(y,x){return!(y.filter||y.algorithm||y.or)&&(x?y.justLimit:!y.replayFilter)}function Ol(y,x){y.filter=hs(y.filter,x)}function Oa(y,x,T){var A=y.replayFilter;y.replayFilter=A?function(){return hs(A(),x())}:x,y.justLimit=T&&!A}function gs(y,x){if(y.isPrimKey)return x.primaryKey;var T=x.getIndexByKeyPath(y.index);if(!T)throw new ze.Schema("KeyPath "+y.index+" on object store "+x.name+" is not indexed");return T}function lu(y,x,T){var A=gs(y,x.schema);return x.openCursor({trans:T,values:!y.keysOnly,reverse:y.dir==="prev",unique:!!y.unique,query:{index:A,range:y.range}})}function ys(y,x,T,A){var I=y.replayFilter?hs(y.filter,y.replayFilter()):y.filter;if(y.or){var j={},Y=function(X,ne,re){var ce,te;I&&!I(ne,re,function(fe){return ne.stop(fe)},function(fe){return ne.fail(fe)})||((te=""+(ce=ne.primaryKey))=="[object ArrayBuffer]"&&(te=""+new Uint8Array(ce)),m(j,te)||(j[te]=!0,x(X,ne,re)))};return Promise.all([y.or._iterate(Y,T),Jr(lu(y,A,T),y.algorithm,Y,!y.keysOnly&&y.valueMapper)])}return Jr(lu(y,A,T),hs(y.algorithm,I),x,!y.keysOnly&&y.valueMapper)}function Jr(y,x,T,A){var I=fn(A?function(j,Y,X){return T(A(j),Y,X)}:T);return y.then(function(j){if(j)return j.start(function(){var Y=function(){return j.continue()};x&&!x(j,function(X){return Y=X},function(X){j.stop(X),Y=Tt},function(X){j.fail(X),Y=Tt})||I(j.value,j,function(X){return Y=X}),Y()})})}var vf=(Ut.prototype._read=function(y,x){var T=this._ctx;return T.error?T.table._trans(null,nn.bind(null,T.error)):T.table._trans("readonly",y).then(x)},Ut.prototype._write=function(y){var x=this._ctx;return x.error?x.table._trans(null,nn.bind(null,x.error)):x.table._trans("readwrite",y,"locked")},Ut.prototype._addAlgorithm=function(y){var x=this._ctx;x.algorithm=hs(x.algorithm,y)},Ut.prototype._iterate=function(y,x){return ys(this._ctx,y,x,this._ctx.table.core)},Ut.prototype.clone=function(y){var x=Object.create(this.constructor.prototype),T=Object.create(this._ctx);return y&&u(T,y),x._ctx=T,x},Ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ut.prototype.each=function(y){var x=this._ctx;return this._read(function(T){return ys(x,y,T,x.table.core)})},Ut.prototype.count=function(y){var x=this;return this._read(function(T){var A=x._ctx,I=A.table.core;if(ms(A,!0))return I.count({trans:T,query:{index:gs(A,I.schema),range:A.range}}).then(function(Y){return Math.min(Y,A.limit)});var j=0;return ys(A,function(){return++j,!1},T,I).then(function(){return j})}).then(y)},Ut.prototype.sortBy=function(y,x){var T=y.split(".").reverse(),A=T[0],I=T.length-1;function j(ne,re){return re?j(ne[T[re]],re-1):ne[A]}var Y=this._ctx.dir==="next"?1:-1;function X(ne,re){return Dt(j(ne,I),j(re,I))*Y}return this.toArray(function(ne){return ne.sort(X)}).then(x)},Ut.prototype.toArray=function(y){var x=this;return this._read(function(T){var A=x._ctx;if(A.dir==="next"&&ms(A,!0)&&0<A.limit){var I=A.valueMapper,j=gs(A,A.table.core.schema);return A.table.core.query({trans:T,limit:A.limit,values:!0,query:{index:j,range:A.range}}).then(function(X){return X=X.result,I?X.map(I):X})}var Y=[];return ys(A,function(X){return Y.push(X)},T,A.table.core).then(function(){return Y})},y)},Ut.prototype.offset=function(y){var x=this._ctx;return y<=0||(x.offset+=y,ms(x)?Oa(x,function(){var T=y;return function(A,I){return T===0||(T===1?--T:I(function(){A.advance(T),T=0}),!1)}}):Oa(x,function(){var T=y;return function(){return--T<0}})),this},Ut.prototype.limit=function(y){return this._ctx.limit=Math.min(this._ctx.limit,y),Oa(this._ctx,function(){var x=y;return function(T,A,I){return--x<=0&&A(I),0<=x}},!0),this},Ut.prototype.until=function(y,x){return Ol(this._ctx,function(T,A,I){return!y(T.value)||(A(I),x)}),this},Ut.prototype.first=function(y){return this.limit(1).toArray(function(x){return x[0]}).then(y)},Ut.prototype.last=function(y){return this.reverse().first(y)},Ut.prototype.filter=function(y){var x;return Ol(this._ctx,function(T){return y(T.value)}),(x=this._ctx).isMatch=hs(x.isMatch,y),this},Ut.prototype.and=function(y){return this.filter(y)},Ut.prototype.or=function(y){return new this.db.WhereClause(this._ctx.table,y,this)},Ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ut.prototype.desc=function(){return this.reverse()},Ut.prototype.eachKey=function(y){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(T,A){y(A.key,A)})},Ut.prototype.eachUniqueKey=function(y){return this._ctx.unique="unique",this.eachKey(y)},Ut.prototype.eachPrimaryKey=function(y){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(T,A){y(A.primaryKey,A)})},Ut.prototype.keys=function(y){var x=this._ctx;x.keysOnly=!x.isMatch;var T=[];return this.each(function(A,I){T.push(I.key)}).then(function(){return T}).then(y)},Ut.prototype.primaryKeys=function(y){var x=this._ctx;if(x.dir==="next"&&ms(x,!0)&&0<x.limit)return this._read(function(A){var I=gs(x,x.table.core.schema);return x.table.core.query({trans:A,values:!1,limit:x.limit,query:{index:I,range:x.range}})}).then(function(A){return A.result}).then(y);x.keysOnly=!x.isMatch;var T=[];return this.each(function(A,I){T.push(I.primaryKey)}).then(function(){return T}).then(y)},Ut.prototype.uniqueKeys=function(y){return this._ctx.unique="unique",this.keys(y)},Ut.prototype.firstKey=function(y){return this.limit(1).keys(function(x){return x[0]}).then(y)},Ut.prototype.lastKey=function(y){return this.reverse().firstKey(y)},Ut.prototype.distinct=function(){var y=this._ctx,y=y.index&&y.table.schema.idxByName[y.index];if(!y||!y.multi)return this;var x={};return Ol(this._ctx,function(I){var A=I.primaryKey.toString(),I=m(x,A);return x[A]=!0,!I}),this},Ut.prototype.modify=function(y){var x=this,T=this._ctx;return this._write(function(A){var I=typeof y=="function"?y:function(le){return on(le,y)},j=T.table.core,re=j.schema.primaryKey,Y=re.outbound,X=re.extractKey,ne=200,re=x.db._options.modifyChunkSize;re&&(ne=typeof re=="object"?re[j.name]||re["*"]||200:re);function ce(le,be){var pe=be.failures,be=be.numFailures;fe+=le-be;for(var ke=0,De=a(pe);ke<De.length;ke++){var We=De[ke];te.push(pe[We])}}var te=[],fe=0,ie=[],ae=y===Ml;return x.clone().primaryKeys().then(function(le){function ue(be){var ke=Math.min(ne,le.length-be),De=le.slice(be,be+ke);return(ae?Promise.resolve([]):j.getMany({trans:A,keys:De,cache:"immutable"})).then(function(We){var Je=[],Fe=[],Ge=Y?[]:null,Xe=ae?De:[];if(!ae)for(var He=0;He<ke;++He){var tt=We[He],dt={value:K(tt),primKey:le[be+He]};I.call(dt,dt.value,dt)!==!1&&(dt.value==null?Xe.push(le[be+He]):Y||Dt(X(tt),X(dt.value))===0?(Fe.push(dt.value),Y&&Ge.push(le[be+He])):(Xe.push(le[be+He]),Je.push(dt.value)))}return Promise.resolve(0<Je.length&&j.mutate({trans:A,type:"add",values:Je}).then(function(kt){for(var It in kt.failures)Xe.splice(parseInt(It),1);ce(Je.length,kt)})).then(function(){return(0<Fe.length||pe&&typeof y=="object")&&j.mutate({trans:A,type:"put",keys:Ge,values:Fe,criteria:pe,changeSpec:typeof y!="function"&&y,isAdditionalChunk:0<be}).then(function(kt){return ce(Fe.length,kt)})}).then(function(){return(0<Xe.length||pe&&ae)&&j.mutate({trans:A,type:"delete",keys:Xe,criteria:pe,isAdditionalChunk:0<be}).then(function(kt){return Kn(T.table,Xe,kt)}).then(function(kt){return ce(Xe.length,kt)})}).then(function(){return le.length>be+ke&&ue(be+ne)})})}var pe=ms(T)&&T.limit===1/0&&(typeof y!="function"||ae)&&{index:T.index,range:T.range};return ue(0).then(function(){if(0<te.length)throw new Oe("Error modifying one or more objects",te,fe,ie);return le.length})})})},Ut.prototype.delete=function(){var y=this._ctx,x=y.range;return!ms(y)||y.table.schema.yProps||!y.isPrimKey&&x.type!==3?this.modify(Ml):this._write(function(T){var A=y.table.core.schema.primaryKey,I=x;return y.table.core.count({trans:T,query:{index:A,range:I}}).then(function(j){return y.table.core.mutate({trans:T,type:"deleteRange",range:I}).then(function(ne){var X=ne.failures,ne=ne.numFailures;if(ne)throw new Oe("Could not delete some values",Object.keys(X).map(function(re){return X[re]}),j-ne);return j-ne})})})},Ut);function Ut(){}var Ml=function(y,x){return x.value=null};function Rl(y,x){return y<x?-1:y===x?0:1}function bf(y,x){return x<y?-1:y===x?0:1}function nr(y,x,T){return y=y instanceof mo?new y.Collection(y):y,y._ctx.error=new(T||TypeError)(x),y}function vs(y){return new y.Collection(y,function(){return ki("")}).limit(0)}function pi(y,x,T,A){var I,j,Y,X,ne,re,ce,te=T.length;if(!T.every(function(ae){return typeof ae=="string"}))return nr(y,$n);function fe(ae){I=ae==="next"?function(ue){return ue.toUpperCase()}:function(ue){return ue.toLowerCase()},j=ae==="next"?function(ue){return ue.toLowerCase()}:function(ue){return ue.toUpperCase()},Y=ae==="next"?Rl:bf;var le=T.map(function(ue){return{lower:j(ue),upper:I(ue)}}).sort(function(ue,pe){return Y(ue.lower,pe.lower)});X=le.map(function(ue){return ue.upper}),ne=le.map(function(ue){return ue.lower}),ce=(re=ae)==="next"?"":A}fe("next"),y=new y.Collection(y,function(){return qi(X[0],ne[te-1]+A)}),y._ondirectionchange=function(ae){fe(ae)};var ie=0;return y._addAlgorithm(function(ae,le,ue){var pe=ae.key;if(typeof pe!="string")return!1;var be=j(pe);if(x(be,ne,ie))return!0;for(var ke=null,De=ie;De<te;++De){var We=(function(Je,Fe,Ge,Xe,He,tt){for(var dt=Math.min(Je.length,Xe.length),kt=-1,It=0;It<dt;++It){var qr=Fe[It];if(qr!==Xe[It])return He(Je[It],Ge[It])<0?Je.substr(0,It)+Ge[It]+Ge.substr(It+1):He(Je[It],Xe[It])<0?Je.substr(0,It)+Xe[It]+Ge.substr(It+1):0<=kt?Je.substr(0,kt)+Fe[kt]+Ge.substr(kt+1):null;He(Je[It],qr)<0&&(kt=It)}return dt<Xe.length&&tt==="next"?Je+Ge.substr(Je.length):dt<Je.length&&tt==="prev"?Je.substr(0,Ge.length):kt<0?null:Je.substr(0,kt)+Xe[kt]+Ge.substr(kt+1)})(pe,be,X[De],ne[De],Y,re);We===null&&ke===null?ie=De+1:(ke===null||0<Y(ke,We))&&(ke=We)}return le(ke!==null?function(){ae.continue(ke+ce)}:ue),!1}),y}function qi(y,x,T,A){return{type:2,lower:y,upper:x,lowerOpen:T,upperOpen:A}}function ki(y){return{type:1,lower:y,upper:y}}var mo=(Object.defineProperty(mn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),mn.prototype.between=function(y,x,T,A){T=T!==!1,A=A===!0;try{return 0<this._cmp(y,x)||this._cmp(y,x)===0&&(T||A)&&(!T||!A)?vs(this):new this.Collection(this,function(){return qi(y,x,!T,!A)})}catch{return nr(this,wr)}},mn.prototype.equals=function(y){return y==null?nr(this,wr):new this.Collection(this,function(){return ki(y)})},mn.prototype.above=function(y){return y==null?nr(this,wr):new this.Collection(this,function(){return qi(y,void 0,!0)})},mn.prototype.aboveOrEqual=function(y){return y==null?nr(this,wr):new this.Collection(this,function(){return qi(y,void 0,!1)})},mn.prototype.below=function(y){return y==null?nr(this,wr):new this.Collection(this,function(){return qi(void 0,y,!1,!0)})},mn.prototype.belowOrEqual=function(y){return y==null?nr(this,wr):new this.Collection(this,function(){return qi(void 0,y)})},mn.prototype.startsWith=function(y){return typeof y!="string"?nr(this,$n):this.between(y,y+cr,!0,!0)},mn.prototype.startsWithIgnoreCase=function(y){return y===""?this.startsWith(y):pi(this,function(x,T){return x.indexOf(T[0])===0},[y],cr)},mn.prototype.equalsIgnoreCase=function(y){return pi(this,function(x,T){return x===T[0]},[y],"")},mn.prototype.anyOfIgnoreCase=function(){var y=Ze.apply(Qe,arguments);return y.length===0?vs(this):pi(this,function(x,T){return T.indexOf(x)!==-1},y,"")},mn.prototype.startsWithAnyOfIgnoreCase=function(){var y=Ze.apply(Qe,arguments);return y.length===0?vs(this):pi(this,function(x,T){return T.some(function(A){return x.indexOf(A)===0})},y,cr)},mn.prototype.anyOf=function(){var y=this,x=Ze.apply(Qe,arguments),T=this._cmp;try{x.sort(T)}catch{return nr(this,wr)}if(x.length===0)return vs(this);var A=new this.Collection(this,function(){return qi(x[0],x[x.length-1])});A._ondirectionchange=function(j){T=j==="next"?y._ascending:y._descending,x.sort(T)};var I=0;return A._addAlgorithm(function(j,Y,X){for(var ne=j.key;0<T(ne,x[I]);)if(++I===x.length)return Y(X),!1;return T(ne,x[I])===0||(Y(function(){j.continue(x[I])}),!1)}),A},mn.prototype.notEqual=function(y){return this.inAnyRange([[-1/0,y],[y,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},mn.prototype.noneOf=function(){var y=Ze.apply(Qe,arguments);if(y.length===0)return new this.Collection(this);try{y.sort(this._ascending)}catch{return nr(this,wr)}var x=y.reduce(function(T,A){return T?T.concat([[T[T.length-1][1],A]]):[[-1/0,A]]},null);return x.push([y[y.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},mn.prototype.inAnyRange=function(pe,x){var T=this,A=this._cmp,I=this._ascending,j=this._descending,Y=this._min,X=this._max;if(pe.length===0)return vs(this);if(!pe.every(function(be){return be[0]!==void 0&&be[1]!==void 0&&I(be[0],be[1])<=0}))return nr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ze.InvalidArgument);var ne=!x||x.includeLowers!==!1,re=x&&x.includeUppers===!0,ce,te=I;function fe(be,ke){return te(be[0],ke[0])}try{(ce=pe.reduce(function(be,ke){for(var De=0,We=be.length;De<We;++De){var Je=be[De];if(A(ke[0],Je[1])<0&&0<A(ke[1],Je[0])){Je[0]=Y(Je[0],ke[0]),Je[1]=X(Je[1],ke[1]);break}}return De===We&&be.push(ke),be},[])).sort(fe)}catch{return nr(this,wr)}var ie=0,ae=re?function(be){return 0<I(be,ce[ie][1])}:function(be){return 0<=I(be,ce[ie][1])},le=ne?function(be){return 0<j(be,ce[ie][0])}:function(be){return 0<=j(be,ce[ie][0])},ue=ae,pe=new this.Collection(this,function(){return qi(ce[0][0],ce[ce.length-1][1],!ne,!re)});return pe._ondirectionchange=function(be){te=be==="next"?(ue=ae,I):(ue=le,j),ce.sort(fe)},pe._addAlgorithm(function(be,ke,De){for(var We,Je=be.key;ue(Je);)if(++ie===ce.length)return ke(De),!1;return!ae(We=Je)&&!le(We)||(T._cmp(Je,ce[ie][1])===0||T._cmp(Je,ce[ie][0])===0||ke(function(){te===I?be.continue(ce[ie][0]):be.continue(ce[ie][1])}),!1)}),pe},mn.prototype.startsWithAnyOf=function(){var y=Ze.apply(Qe,arguments);return y.every(function(x){return typeof x=="string"})?y.length===0?vs(this):this.inAnyRange(y.map(function(x){return[x,x+cr]})):nr(this,"startsWithAnyOf() only works with strings")},mn);function mn(){}function Fr(y){return fn(function(x){return zs(x),y(x.target.error),!1})}function zs(y){y.stopPropagation&&y.stopPropagation(),y.preventDefault&&y.preventDefault()}var $i="storagemutated",Ci="x-storagemutated-1",ur=ps(null,$i),Ma=(Vt.prototype._lock=function(){return L(!Ce.global),++this._reculock,this._reculock!==1||Ce.global||(Ce.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(L(!Ce.global),--this._reculock==0)for(Ce.global||(Ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var y=this._blockedFuncs.shift();try{Ur(y[1],y[0])}catch{}}return this},Vt.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},Vt.prototype.create=function(y){var x=this;if(!this.mode)return this;var T=this.db.idbdb,A=this.db._state.dbOpenError;if(L(!this.idbtrans),!y&&!T)switch(A&&A.name){case"DatabaseClosedError":throw new ze.DatabaseClosed(A);case"MissingAPIError":throw new ze.MissingAPI(A.message,A);default:throw new ze.OpenFailed(A)}if(!this.active)throw new ze.TransactionInactive;return L(this._completion._state===null),(y=this.idbtrans=y||(this.db.core||T).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=fn(function(I){zs(I),x._reject(y.error)}),y.onabort=fn(function(I){zs(I),x.active&&x._reject(new ze.Abort(y.error)),x.active=!1,x.on("abort").fire(I)}),y.oncomplete=fn(function(){x.active=!1,x._resolve(),"mutatedParts"in y&&ur.storagemutated.fire(y.mutatedParts)}),this},Vt.prototype._promise=function(y,x,T){var A=this;if(y==="readwrite"&&this.mode!=="readwrite")return nn(new ze.ReadOnly("Transaction is readonly"));if(!this.active)return nn(new ze.TransactionInactive);if(this._locked())return new Ae(function(j,Y){A._blockedFuncs.push([function(){A._promise(y,x,T).then(j,Y)},Ce])});if(T)return pn(function(){var j=new Ae(function(Y,X){A._lock();var ne=x(Y,X,A);ne&&ne.then&&ne.then(Y,X)});return j.finally(function(){return A._unlock()}),j._lib=!0,j});var I=new Ae(function(j,Y){var X=x(j,Y,A);X&&X.then&&X.then(j,Y)});return I._lib=!0,I},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(y){var x,T=this._root(),A=Ae.resolve(y);T._waitingFor?T._waitingFor=T._waitingFor.then(function(){return A}):(T._waitingFor=A,T._waitingQueue=[],x=T.idbtrans.objectStore(T.storeNames[0]),(function j(){for(++T._spinCount;T._waitingQueue.length;)T._waitingQueue.shift()();T._waitingFor&&(x.get(-1/0).onsuccess=j)})());var I=T._waitingFor;return new Ae(function(j,Y){A.then(function(X){return T._waitingQueue.push(fn(j.bind(null,X)))},function(X){return T._waitingQueue.push(fn(Y.bind(null,X)))}).finally(function(){T._waitingFor===I&&(T._waitingFor=null)})})},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ze.Abort))},Vt.prototype.table=function(y){var x=this._memoizedTables||(this._memoizedTables={});if(m(x,y))return x[y];var T=this.schema[y];if(!T)throw new ze.NotFound("Table "+y+" not part of transaction");return T=new this.db.Table(y,T,this),T.core=this.db.core.table(y),x[y]=T},Vt);function Vt(){}function Wi(y,x,T,A,I,j,Y,X){return{name:y,keyPath:x,unique:T,multi:A,auto:I,compound:j,src:(T&&!Y?"&":"")+(A?"*":"")+(I?"++":"")+Nl(x),type:X}}function Nl(y){return typeof y=="string"?y:y?"["+[].join.call(y,"+")+"]":""}function go(y,x,T){return{name:y,primKey:x,indexes:T,mappedClass:null,idxByName:(A=function(I){return[I.name,I]},T.reduce(function(I,j,Y){return Y=A(j,Y),Y&&(I[Y[0]]=Y[1]),I},{}))};var A}var yo=function(y){try{return y.only([[]]),yo=function(){return[[]]},[[]]}catch{return yo=function(){return cr},cr}};function vo(y){return y==null?function(){}:typeof y=="string"?(x=y).split(".").length===1?function(T){return T[x]}:function(T){return U(T,x)}:function(T){return U(T,y)};var x}function js(y){return[].slice.call(y)}var bs=0;function Gn(y){return y==null?":id":typeof y=="string"?y:"[".concat(y.join("+"),"]")}function bo(y,x,ne){function A(ue){if(ue.type===3)return null;if(ue.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ie=ue.lower,ae=ue.upper,le=ue.lowerOpen,ue=ue.upperOpen;return ie===void 0?ae===void 0?null:x.upperBound(ae,!!ue):ae===void 0?x.lowerBound(ie,!!le):x.bound(ie,ae,!!le,!!ue)}function I(fe){var ie,ae=fe.name;return{name:ae,schema:fe,mutate:function(le){var ue=le.trans,pe=le.type,be=le.keys,ke=le.values,De=le.range;return new Promise(function(We,Je){We=fn(We);var Fe=ue.objectStore(ae),Ge=Fe.keyPath==null,Xe=pe==="put"||pe==="add";if(!Xe&&pe!=="delete"&&pe!=="deleteRange")throw new Error("Invalid operation type: "+pe);var He,tt=(be||ke||{length:1}).length;if(be&&ke&&be.length!==ke.length)throw new Error("Given keys array must have same length as given values array.");if(tt===0)return We({numFailures:0,failures:{},results:[],lastResult:void 0});function dt(Sr){++qr,zs(Sr)}var kt=[],It=[],qr=0;if(pe==="deleteRange"){if(De.type===4)return We({numFailures:qr,failures:It,results:[],lastResult:void 0});De.type===3?kt.push(He=Fe.clear()):kt.push(He=Fe.delete(A(De)))}else{var Ge=Xe?Ge?[ke,be]:[ke,null]:[be,null],St=Ge[0],Er=Ge[1];if(Xe)for(var Fn=0;Fn<tt;++Fn)kt.push(He=Er&&Er[Fn]!==void 0?Fe[pe](St[Fn],Er[Fn]):Fe[pe](St[Fn])),He.onerror=dt;else for(Fn=0;Fn<tt;++Fn)kt.push(He=Fe[pe](St[Fn])),He.onerror=dt}function pu(Sr){Sr=Sr.target.result,kt.forEach(function(Xi,gh){return Xi.error!=null&&(It[gh]=Xi.error)}),We({numFailures:qr,failures:It,results:pe==="delete"?be:kt.map(function(Xi){return Xi.result}),lastResult:Sr})}He.onerror=function(Sr){dt(Sr),pu(Sr)},He.onsuccess=pu})},getMany:function(le){var ue=le.trans,pe=le.keys;return new Promise(function(be,ke){be=fn(be);for(var De,We=ue.objectStore(ae),Je=pe.length,Fe=new Array(Je),Ge=0,Xe=0,He=function(kt){kt=kt.target,Fe[kt._pos]=kt.result,++Xe===Ge&&be(Fe)},tt=Fr(ke),dt=0;dt<Je;++dt)pe[dt]!=null&&((De=We.get(pe[dt]))._pos=dt,De.onsuccess=He,De.onerror=tt,++Ge);Ge===0&&be(Fe)})},get:function(le){var ue=le.trans,pe=le.key;return new Promise(function(be,ke){be=fn(be);var De=ue.objectStore(ae).get(pe);De.onsuccess=function(We){return be(We.target.result)},De.onerror=Fr(ke)})},query:(ie=re,function(le){return new Promise(function(ue,pe){ue=fn(ue);var be,ke,De,Ge=le.trans,We=le.values,Je=le.limit,He=le.query,Fe=Je===1/0?void 0:Je,Xe=He.index,He=He.range,Ge=Ge.objectStore(ae),Xe=Xe.isPrimaryKey?Ge:Ge.index(Xe.name),He=A(He);if(Je===0)return ue({result:[]});ie?((Fe=We?Xe.getAll(He,Fe):Xe.getAllKeys(He,Fe)).onsuccess=function(tt){return ue({result:tt.target.result})},Fe.onerror=Fr(pe)):(be=0,ke=!We&&"openKeyCursor"in Xe?Xe.openKeyCursor(He):Xe.openCursor(He),De=[],ke.onsuccess=function(tt){var dt=ke.result;return dt?(De.push(We?dt.value:dt.primaryKey),++be===Je?ue({result:De}):void dt.continue()):ue({result:De})},ke.onerror=Fr(pe))})}),openCursor:function(le){var ue=le.trans,pe=le.values,be=le.query,ke=le.reverse,De=le.unique;return new Promise(function(We,Je){We=fn(We);var Xe=be.index,Fe=be.range,Ge=ue.objectStore(ae),Ge=Xe.isPrimaryKey?Ge:Ge.index(Xe.name),Xe=ke?De?"prevunique":"prev":De?"nextunique":"next",He=!pe&&"openKeyCursor"in Ge?Ge.openKeyCursor(A(Fe),Xe):Ge.openCursor(A(Fe),Xe);He.onerror=Fr(Je),He.onsuccess=fn(function(tt){var dt,kt,It,qr,St=He.result;St?(St.___id=++bs,St.done=!1,dt=St.continue.bind(St),kt=(kt=St.continuePrimaryKey)&&kt.bind(St),It=St.advance.bind(St),qr=function(){throw new Error("Cursor not stopped")},St.trans=ue,St.stop=St.continue=St.continuePrimaryKey=St.advance=function(){throw new Error("Cursor not started")},St.fail=fn(Je),St.next=function(){var Er=this,Fn=1;return this.start(function(){return Fn--?Er.continue():Er.stop()}).then(function(){return Er})},St.start=function(Er){function Fn(){if(He.result)try{Er()}catch(Sr){St.fail(Sr)}else St.done=!0,St.start=function(){throw new Error("Cursor behind last entry")},St.stop()}var pu=new Promise(function(Sr,Xi){Sr=fn(Sr),He.onerror=Fr(Xi),St.fail=Xi,St.stop=function(gh){St.stop=St.continue=St.continuePrimaryKey=St.advance=qr,Sr(gh)}});return He.onsuccess=fn(function(Sr){He.onsuccess=Fn,Fn()}),St.continue=dt,St.continuePrimaryKey=kt,St.advance=It,Fn(),pu},We(St)):We(null)},Je)})},count:function(le){var ue=le.query,pe=le.trans,be=ue.index,ke=ue.range;return new Promise(function(De,We){var Je=pe.objectStore(ae),Fe=be.isPrimaryKey?Je:Je.index(be.name),Je=A(ke),Fe=Je?Fe.count(Je):Fe.count();Fe.onsuccess=fn(function(Ge){return De(Ge.target.result)}),Fe.onerror=Fr(We)})}}}var j,Y,X,ce=(Y=ne,X=js((j=y).objectStoreNames),{schema:{name:j.name,tables:X.map(function(fe){return Y.objectStore(fe)}).map(function(fe){var ie=fe.keyPath,ue=fe.autoIncrement,ae=c(ie),le={},ue={name:fe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ie==null,compound:ae,keyPath:ie,autoIncrement:ue,unique:!0,extractKey:vo(ie)},indexes:js(fe.indexNames).map(function(pe){return fe.index(pe)}).map(function(De){var be=De.name,ke=De.unique,We=De.multiEntry,De=De.keyPath,We={name:be,compound:c(De),keyPath:De,unique:ke,multiEntry:We,extractKey:vo(De)};return le[Gn(De)]=We}),getIndexByKeyPath:function(pe){return le[Gn(pe)]}};return le[":id"]=ue.primaryKey,ie!=null&&(le[Gn(ie)]=ue.primaryKey),ue})},hasGetAll:0<X.length&&"getAll"in Y.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ne=ce.schema,re=ce.hasGetAll,ce=ne.tables.map(I),te={};return ce.forEach(function(fe){return te[fe.name]=fe}),{stack:"dbcore",transaction:y.transaction.bind(y),table:function(fe){if(!te[fe])throw new Error("Table '".concat(fe,"' not found"));return te[fe]},MIN_KEY:-1/0,MAX_KEY:yo(x),schema:ne}}function Vs(y,x,T,A){var I=T.IDBKeyRange;return T.indexedDB,{dbcore:(A=bo(x,I,A),y.dbcore.reduce(function(j,Y){return Y=Y.create,r(r({},j),Y(j))},A))}}function ws(y,A){var T=A.db,A=Vs(y._middlewares,T,y._deps,A);y.core=A.dbcore,y.tables.forEach(function(I){var j=I.name;y.core.schema.tables.some(function(Y){return Y.name===j})&&(I.core=y.core.table(j),y[j]instanceof y.Table&&(y[j].core=I.core))})}function qo(y,x,T,A){T.forEach(function(I){var j=A[I];x.forEach(function(Y){var X=(function ne(re,ce){return _(re,ce)||(re=d(re))&&ne(re,ce)})(Y,I);(!X||"value"in X&&X.value===void 0)&&(Y===y.Transaction.prototype||Y instanceof y.Transaction?S(Y,I,{get:function(){return this.table(I)},set:function(ne){w(this,I,{value:ne,writable:!0,configurable:!0,enumerable:!0})}}):Y[I]=new y.Table(I,j))})})}function Bs(y,x){x.forEach(function(T){for(var A in T)T[A]instanceof y.Table&&delete T[A]})}function Dl(y,x){return y._cfg.version-x._cfg.version}function Us(y,x,T,A){var I=y._dbSchema;T.objectStoreNames.contains("$meta")&&!I.$meta&&(I.$meta=go("$meta",uu("")[0],[]),y._storeNames.push("$meta"));var j=y._createTransaction("readwrite",y._storeNames,I);j.create(T),j._completion.catch(A);var Y=j._reject.bind(j),X=Ce.transless||Ce;pn(function(){return Ce.trans=j,Ce.transless=X,x!==0?(ws(y,T),re=x,((ne=j).storeNames.includes("$meta")?ne.table("$meta").get("version").then(function(ce){return ce??re}):Ae.resolve(re)).then(function(ce){return fe=ce,ie=j,ae=T,le=[],ce=(te=y)._versions,ue=te._dbSchema=Fs(0,te.idbdb,ae),(ce=ce.filter(function(pe){return pe._cfg.version>=fe})).length!==0?(ce.forEach(function(pe){le.push(function(){var be=ue,ke=pe._cfg.dbschema;$o(te,be,ae),$o(te,ke,ae),ue=te._dbSchema=ke;var De=Ra(be,ke);De.add.forEach(function(Xe){wo(ae,Xe[0],Xe[1].primKey,Xe[1].indexes)}),De.change.forEach(function(Xe){if(Xe.recreate)throw new ze.Upgrade("Not yet support for changing primary key");var He=ae.objectStore(Xe.name);Xe.add.forEach(function(tt){return Na(He,tt)}),Xe.change.forEach(function(tt){He.deleteIndex(tt.name),Na(He,tt)}),Xe.del.forEach(function(tt){return He.deleteIndex(tt)})});var We=pe._cfg.contentUpgrade;if(We&&pe._cfg.version>fe){ws(te,ae),ie._memoizedTables={};var Je=P(ke);De.del.forEach(function(Xe){Je[Xe]=be[Xe]}),Bs(te,[te.Transaction.prototype]),qo(te,[te.Transaction.prototype],a(Je),Je),ie.schema=Je;var Fe,Ge=J(We);return Ge&&Dn(),De=Ae.follow(function(){var Xe;(Fe=We(ie))&&Ge&&(Xe=Lr.bind(null,null),Fe.then(Xe,Xe))}),Fe&&typeof Fe.then=="function"?Ae.resolve(Fe):De.then(function(){return Fe})}}),le.push(function(be){var ke,De,We=pe._cfg.dbschema;ke=We,De=be,[].slice.call(De.db.objectStoreNames).forEach(function(Je){return ke[Je]==null&&De.db.deleteObjectStore(Je)}),Bs(te,[te.Transaction.prototype]),qo(te,[te.Transaction.prototype],te._storeNames,te._dbSchema),ie.schema=te._dbSchema}),le.push(function(be){te.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(te.idbdb.version/10)===pe._cfg.version?(te.idbdb.deleteObjectStore("$meta"),delete te._dbSchema.$meta,te._storeNames=te._storeNames.filter(function(ke){return ke!=="$meta"})):be.objectStore("$meta").put(pe._cfg.version,"version"))})}),(function pe(){return le.length?Ae.resolve(le.shift()(ie.idbtrans)).then(pe):Ae.resolve()})().then(function(){cu(ue,ae)})):Ae.resolve();var te,fe,ie,ae,le,ue}).catch(Y)):(a(I).forEach(function(ce){wo(T,ce,I[ce].primKey,I[ce].indexes)}),ws(y,T),void Ae.follow(function(){return y.on.populate.fire(j)}).catch(Y));var ne,re})}function Il(y,x){cu(y._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var T=Fs(0,y.idbdb,x);$o(y,y._dbSchema,x);for(var A=0,I=Ra(T,y._dbSchema).change;A<I.length;A++){var j=(function(Y){if(Y.change.length||Y.recreate)return console.warn("Unable to patch indexes of table ".concat(Y.name," because it has changes on the type of index or primary key.")),{value:void 0};var X=x.objectStore(Y.name);Y.add.forEach(function(ne){un&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Y.name,".").concat(ne.src)),Na(X,ne)})})(I[A]);if(typeof j=="object")return j.value}}function Ra(y,x){var T,A={del:[],add:[],change:[]};for(T in y)x[T]||A.del.push(T);for(T in x){var I=y[T],j=x[T];if(I){var Y={name:T,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(I.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||I.primKey.auto!==j.primKey.auto)Y.recreate=!0,A.change.push(Y);else{var X=I.idxByName,ne=j.idxByName,re=void 0;for(re in X)ne[re]||Y.del.push(re);for(re in ne){var ce=X[re],te=ne[re];ce?ce.src!==te.src&&Y.change.push(te):Y.add.push(te)}(0<Y.del.length||0<Y.add.length||0<Y.change.length)&&A.change.push(Y)}}else A.add.push([T,j])}return A}function wo(y,x,T,A){var I=y.db.createObjectStore(x,T.keyPath?{keyPath:T.keyPath,autoIncrement:T.auto}:{autoIncrement:T.auto});return A.forEach(function(j){return Na(I,j)}),I}function cu(y,x){a(y).forEach(function(T){x.db.objectStoreNames.contains(T)||(un&&console.debug("Dexie: Creating missing table",T),wo(x,T,y[T].primKey,y[T].indexes))})}function Na(y,x){y.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function Fs(y,x,T){var A={};return B(x.objectStoreNames,0).forEach(function(I){for(var j=T.objectStore(I),Y=Wi(Nl(re=j.keyPath),re||"",!0,!1,!!j.autoIncrement,re&&typeof re!="string",!0),X=[],ne=0;ne<j.indexNames.length;++ne){var ce=j.index(j.indexNames[ne]),re=ce.keyPath,ce=Wi(ce.name,re,!!ce.unique,!!ce.multiEntry,!1,re&&typeof re!="string",!1);X.push(ce)}A[I]=go(I,Y,X)}),A}function $o(y,x,T){for(var A=T.db.objectStoreNames,I=0;I<A.length;++I){var j=A[I],Y=T.objectStore(j);y._hasGetAll="getAll"in Y;for(var X=0;X<Y.indexNames.length;++X){var ne=Y.indexNames[X],re=Y.index(ne).keyPath,ce=typeof re=="string"?re:"["+B(re).join("+")+"]";!x[j]||(re=x[j].idxByName[ce])&&(re.name=ne,delete x[j].idxByName[ce],x[j].idxByName[ne]=re)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(y._hasGetAll=!1)}function uu(y){return y.split(",").map(function(x,T){var j=x.split(":"),A=(I=j[1])===null||I===void 0?void 0:I.trim(),I=(x=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(I)?I.match(/^\[(.*)\]$/)[1].split("+"):I;return Wi(I,j||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),c(j),T===0,A)})}var Pl=(xo.prototype._createTableSchema=go,xo.prototype._parseIndexSyntax=uu,xo.prototype._parseStoresSpec=function(y,x){var T=this;a(y).forEach(function(A){if(y[A]!==null){var I=T._parseIndexSyntax(y[A]),j=I.shift();if(!j)throw new ze.Schema("Invalid schema for table "+A+": "+y[A]);if(j.unique=!0,j.multi)throw new ze.Schema("Primary key cannot be multiEntry*");I.forEach(function(Y){if(Y.auto)throw new ze.Schema("Only primary key can be marked as autoIncrement (++)");if(!Y.keyPath)throw new ze.Schema("Index must have a name and cannot be an empty string")}),I=T._createTableSchema(A,j,I),x[A]=I}})},xo.prototype.stores=function(T){var x=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,T):T;var T=x._versions,A={},I={};return T.forEach(function(j){u(A,j._cfg.storesSource),I=j._cfg.dbschema={},j._parseStoresSpec(A,I)}),x._dbSchema=I,Bs(x,[x._allTables,x,x.Transaction.prototype]),qo(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],a(I),I),x._storeNames=a(I),this},xo.prototype.upgrade=function(y){return this._cfg.contentUpgrade=Xt(this._cfg.contentUpgrade||Tt,y),this},xo);function xo(){}function Ll(y,x){var T=y._dbNamesDB;return T||(T=y._dbNamesDB=new qs(Uo,{addons:[],indexedDB:y,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),T.table("dbnames")}function Ki(y){return y&&typeof y.databases=="function"}function zl(y){return pn(function(){return Ce.letThrough=!0,y()})}function jl(y){return!("from"in y)}var fr=function(y,x){if(!this){var T=new fr;return y&&"d"in y&&u(T,y),T}u(this,arguments.length?{d:1,from:y,to:1<arguments.length?x:y}:{d:0})};function Wo(y,x,T){var A=Dt(x,T);if(!isNaN(A)){if(0<A)throw RangeError();if(jl(y))return u(y,{from:x,to:T,d:1});var I=y.l,A=y.r;if(Dt(T,y.from)<0)return I?Wo(I,x,T):y.l={from:x,to:T,d:1,l:null,r:null},fu(y);if(0<Dt(x,y.to))return A?Wo(A,x,T):y.r={from:x,to:T,d:1,l:null,r:null},fu(y);Dt(x,y.from)<0&&(y.from=x,y.l=null,y.d=A?A.d+1:1),0<Dt(T,y.to)&&(y.to=T,y.r=null,y.d=y.l?y.l.d+1:1),T=!y.r,I&&!y.l&&Gi(y,I),A&&T&&Gi(y,A)}}function Gi(y,x){jl(x)||(function T(A,ne){var j=ne.from,Y=ne.to,X=ne.l,ne=ne.r;Wo(A,j,Y),X&&T(A,X),ne&&T(A,ne)})(y,x)}function Hr(y,x){var T=Da(x),A=T.next();if(A.done)return!1;for(var I=A.value,j=Da(y),Y=j.next(I.from),X=Y.value;!A.done&&!Y.done;){if(Dt(X.from,I.to)<=0&&0<=Dt(X.to,I.from))return!0;Dt(I.from,X.from)<0?I=(A=T.next(X.from)).value:X=(Y=j.next(I.from)).value}return!1}function Da(y){var x=jl(y)?null:{s:0,n:y};return{next:function(T){for(var A=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,A)for(;x.n.l&&Dt(T,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!A||Dt(T,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function fu(y){var x,T,A=(((x=y.r)===null||x===void 0?void 0:x.d)||0)-(((T=y.l)===null||T===void 0?void 0:T.d)||0),I=1<A?"r":A<-1?"l":"";I&&(x=I=="r"?"l":"r",T=r({},y),A=y[I],y.from=A.from,y.to=A.to,y[I]=A[I],T[I]=A[x],(y[x]=T).d=Hs(T)),y.d=Hs(y)}function Hs(T){var x=T.r,T=T.l;return(x?T?Math.max(x.d,T.d):x.d:T?T.d:0)+1}function g(y,x){return a(x).forEach(function(T){y[T]?Gi(y[T],x[T]):y[T]=(function A(I){var j,Y,X={};for(j in I)m(I,j)&&(Y=I[j],X[j]=!Y||typeof Y!="object"||G.has(Y.constructor)?Y:A(Y));return X})(x[T])}),y}function C(y,x){return y.all||x.all||Object.keys(y).some(function(T){return x[T]&&Hr(x[T],y[T])})}v(fr.prototype,((Oi={add:function(y){return Gi(this,y),this},addKey:function(y){return Wo(this,y,y),this},addKeys:function(y){var x=this;return y.forEach(function(T){return Wo(x,T,T)}),this},hasKey:function(y){var x=Da(this).next(y).value;return x&&Dt(x.from,y)<=0&&0<=Dt(x.to,y)}})[oe]=function(){return Da(this)},Oi));var D={},$={},he=!1;function xe(y){g($,y),he||(he=!0,setTimeout(function(){he=!1,Ke($,!($={}))},0))}function Ke(y,x){x===void 0&&(x=!1);var T=new Set;if(y.all)for(var A=0,I=Object.values(D);A<I.length;A++)At(Y=I[A],y,T,x);else for(var j in y){var Y,X=/^idb\:\/\/(.*)\/(.*)\//.exec(j);X&&(j=X[1],X=X[2],(Y=D["idb://".concat(j,"/").concat(X)])&&At(Y,y,T,x))}T.forEach(function(ne){return ne()})}function At(y,x,T,A){for(var I=[],j=0,Y=Object.entries(y.queries.query);j<Y.length;j++){for(var X=Y[j],ne=X[0],re=[],ce=0,te=X[1];ce<te.length;ce++){var fe=te[ce];C(x,fe.obsSet)?fe.subscribers.forEach(function(ue){return T.add(ue)}):A&&re.push(fe)}A&&I.push([ne,re])}if(A)for(var ie=0,ae=I;ie<ae.length;ie++){var le=ae[ie],ne=le[0],re=le[1];y.queries.query[ne]=re}}function Yn(y){var x=y._state,T=y._deps.indexedDB;if(x.isBeingOpened||y.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?nn(x.dbOpenError):y});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var A=x.openCanceller,I=Math.round(10*y.verno),j=!1;function Y(){if(x.openCanceller!==A)throw new ze.DatabaseClosed("db.open() was cancelled")}function X(){return new Ae(function(fe,ie){if(Y(),!T)throw new ze.MissingAPI;var ae=y.name,le=x.autoSchema||!I?T.open(ae):T.open(ae,I);if(!le)throw new ze.MissingAPI;le.onerror=Fr(ie),le.onblocked=fn(y._fireOnBlocked),le.onupgradeneeded=fn(function(ue){var pe;ce=le.transaction,x.autoSchema&&!y._options.allowEmptyDB?(le.onerror=zs,ce.abort(),le.result.close(),(pe=T.deleteDatabase(ae)).onsuccess=pe.onerror=fn(function(){ie(new ze.NoSuchDatabase("Database ".concat(ae," doesnt exist")))})):(ce.onerror=Fr(ie),ue=ue.oldVersion>Math.pow(2,62)?0:ue.oldVersion,te=ue<1,y.idbdb=le.result,j&&Il(y,ce),Us(y,ue/10,ce,ie))},ie),le.onsuccess=fn(function(){ce=null;var ue,pe,be,ke,De,We=y.idbdb=le.result,Je=B(We.objectStoreNames);if(0<Je.length)try{var Fe=We.transaction((ke=Je).length===1?ke[0]:ke,"readonly");if(x.autoSchema)pe=We,be=Fe,(ue=y).verno=pe.version/10,be=ue._dbSchema=Fs(0,pe,be),ue._storeNames=B(pe.objectStoreNames,0),qo(ue,[ue._allTables],a(be),be);else if($o(y,y._dbSchema,Fe),((De=Ra(Fs(0,(De=y).idbdb,Fe),De._dbSchema)).add.length||De.change.some(function(Ge){return Ge.add.length||Ge.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),We.close(),I=We.version+1,j=!0,fe(X());ws(y,Fe)}catch{}Ls.push(y),We.onversionchange=fn(function(Ge){x.vcFired=!0,y.on("versionchange").fire(Ge)}),We.onclose=fn(function(){y.close({disableAutoOpen:!1})}),te&&(De=y._deps,Fe=ae,We=De.indexedDB,De=De.IDBKeyRange,Ki(We)||Fe===Uo||Ll(We,De).put({name:Fe}).catch(Tt)),fe()},ie)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),X();break;case"VersionError":if(0<I)return I=0,X()}return Ae.reject(fe)})}var ne,re=x.dbReadyResolve,ce=null,te=!1;return Ae.race([A,(typeof navigator>"u"?Ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function ie(){return indexedDB.databases().finally(fe)}ne=setInterval(ie,100),ie()}).finally(function(){return clearInterval(ne)}):Promise.resolve()).then(X)]).then(function(){return Y(),x.onReadyBeingFired=[],Ae.resolve(zl(function(){return y.on.ready.fire(y.vip)})).then(function fe(){if(0<x.onReadyBeingFired.length){var ie=x.onReadyBeingFired.reduce(Xt,Tt);return x.onReadyBeingFired=[],Ae.resolve(zl(function(){return ie(y.vip)})).then(fe)}})}).finally(function(){x.openCanceller===A&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(fe){x.dbOpenError=fe;try{ce&&ce.abort()}catch{}return A===x.openCanceller&&y._close(),nn(fe)}).finally(function(){x.openComplete=!0,re()}).then(function(){var fe;return te&&(fe={},y.tables.forEach(function(ie){ie.schema.indexes.forEach(function(ae){ae.name&&(fe["idb://".concat(y.name,"/").concat(ie.name,"/").concat(ae.name)]=new fr(-1/0,[[[]]]))}),fe["idb://".concat(y.name,"/").concat(ie.name,"/")]=fe["idb://".concat(y.name,"/").concat(ie.name,"/:dels")]=new fr(-1/0,[[[]]])}),ur($i).fire(fe),Ke(fe,!0)),y})}function Jt(y){function x(j){return y.next(j)}var T=I(x),A=I(function(j){return y.throw(j)});function I(j){return function(ne){var X=j(ne),ne=X.value;return X.done?ne:ne&&typeof ne.then=="function"?ne.then(T,A):c(ne)?Promise.all(ne).then(T,A):T(ne)}}return I(x)()}function gn(y,x,T){for(var A=c(y)?y.slice():[y],I=0;I<T;++I)A.push(x);return A}var Yi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(y){return r(r({},y),{table:function(x){var T=y.table(x),A=T.schema,I={},j=[];function Y(te,fe,ie){var ae=Gn(te),le=I[ae]=I[ae]||[],ue=te==null?0:typeof te=="string"?1:te.length,pe=0<fe,pe=r(r({},ie),{name:pe?"".concat(ae,"(virtual-from:").concat(ie.name,")"):ie.name,lowLevelIndex:ie,isVirtual:pe,keyTail:fe,keyLength:ue,extractKey:vo(te),unique:!pe&&ie.unique});return le.push(pe),pe.isPrimaryKey||j.push(pe),1<ue&&Y(ue===2?te[0]:te.slice(0,ue-1),fe+1,ie),le.sort(function(be,ke){return be.keyTail-ke.keyTail}),pe}x=Y(A.primaryKey.keyPath,0,A.primaryKey),I[":id"]=[x];for(var X=0,ne=A.indexes;X<ne.length;X++){var re=ne[X];Y(re.keyPath,0,re)}function ce(te){var fe,ie=te.query.index;return ie.isVirtual?r(r({},te),{query:{index:ie.lowLevelIndex,range:(fe=te.query.range,ie=ie.keyTail,{type:fe.type===1?2:fe.type,lower:gn(fe.lower,fe.lowerOpen?y.MAX_KEY:y.MIN_KEY,ie),lowerOpen:!0,upper:gn(fe.upper,fe.upperOpen?y.MIN_KEY:y.MAX_KEY,ie),upperOpen:!0})}}):te}return r(r({},T),{schema:r(r({},A),{primaryKey:x,indexes:j,getIndexByKeyPath:function(te){return(te=I[Gn(te)])&&te[0]}}),count:function(te){return T.count(ce(te))},query:function(te){return T.query(ce(te))},openCursor:function(te){var fe=te.query.index,ie=fe.keyTail,ae=fe.isVirtual,le=fe.keyLength;return ae?T.openCursor(ce(te)).then(function(pe){return pe&&ue(pe)}):T.openCursor(te);function ue(pe){return Object.create(pe,{continue:{value:function(be){be!=null?pe.continue(gn(be,te.reverse?y.MAX_KEY:y.MIN_KEY,ie)):te.unique?pe.continue(pe.key.slice(0,le).concat(te.reverse?y.MIN_KEY:y.MAX_KEY,ie)):pe.continue()}},continuePrimaryKey:{value:function(be,ke){pe.continuePrimaryKey(gn(be,y.MAX_KEY,ie),ke)}},primaryKey:{get:function(){return pe.primaryKey}},key:{get:function(){var be=pe.key;return le===1?be[0]:be.slice(0,le)}},value:{get:function(){return pe.value}}})}}})}})}};function Qi(y,x,T,A){return T=T||{},A=A||"",a(y).forEach(function(I){var j,Y,X;m(x,I)?(j=y[I],Y=x[I],typeof j=="object"&&typeof Y=="object"&&j&&Y?(X=Re(j))!==Re(Y)?T[A+I]=x[I]:X==="Object"?Qi(j,Y,T,A+I+"."):j!==Y&&(T[A+I]=x[I]):j!==Y&&(T[A+I]=x[I])):T[A+I]=void 0}),a(x).forEach(function(I){m(y,I)||(T[A+I]=x[I])}),T}function Ai(y,x){return x.type==="delete"?x.keys:x.keys||x.values.map(y.extractKey)}var xs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(y){return r(r({},y),{table:function(x){var T=y.table(x),A=T.schema.primaryKey;return r(r({},T),{mutate:function(I){var j=Ce.trans,Y=j.table(x).hook,X=Y.deleting,ne=Y.creating,re=Y.updating;switch(I.type){case"add":if(ne.fire===Tt)break;return j._promise("readwrite",function(){return ce(I)},!0);case"put":if(ne.fire===Tt&&re.fire===Tt)break;return j._promise("readwrite",function(){return ce(I)},!0);case"delete":if(X.fire===Tt)break;return j._promise("readwrite",function(){return ce(I)},!0);case"deleteRange":if(X.fire===Tt)break;return j._promise("readwrite",function(){return(function te(fe,ie,ae){return T.query({trans:fe,values:!1,query:{index:A,range:ie},limit:ae}).then(function(le){var ue=le.result;return ce({type:"delete",keys:ue,trans:fe}).then(function(pe){return 0<pe.numFailures?Promise.reject(pe.failures[0]):ue.length<ae?{failures:[],numFailures:0,lastResult:void 0}:te(fe,r(r({},ie),{lower:ue[ue.length-1],lowerOpen:!0}),ae)})})})(I.trans,I.range,1e4)},!0)}return T.mutate(I);function ce(te){var fe,ie,ae,le=Ce.trans,ue=te.keys||Ai(A,te);if(!ue)throw new Error("Keys missing");return(te=te.type==="add"||te.type==="put"?r(r({},te),{keys:ue}):r({},te)).type!=="delete"&&(te.values=i([],te.values)),te.keys&&(te.keys=i([],te.keys)),fe=T,ae=ue,((ie=te).type==="add"?Promise.resolve([]):fe.getMany({trans:ie.trans,keys:ae,cache:"immutable"})).then(function(pe){var be=ue.map(function(ke,De){var We,Je,Fe,Ge=pe[De],Xe={onerror:null,onsuccess:null};return te.type==="delete"?X.fire.call(Xe,ke,Ge,le):te.type==="add"||Ge===void 0?(We=ne.fire.call(Xe,ke,te.values[De],le),ke==null&&We!=null&&(te.keys[De]=ke=We,A.outbound||R(te.values[De],A.keyPath,ke))):(We=Qi(Ge,te.values[De]),(Je=re.fire.call(Xe,We,ke,Ge,le))&&(Fe=te.values[De],Object.keys(Je).forEach(function(He){m(Fe,He)?Fe[He]=Je[He]:R(Fe,He,Je[He])}))),Xe});return T.mutate(te).then(function(ke){for(var De=ke.failures,We=ke.results,Je=ke.numFailures,ke=ke.lastResult,Fe=0;Fe<ue.length;++Fe){var Ge=(We||ue)[Fe],Xe=be[Fe];Ge==null?Xe.onerror&&Xe.onerror(De[Fe]):Xe.onsuccess&&Xe.onsuccess(te.type==="put"&&pe[Fe]?te.values[Fe]:Ge)}return{failures:De,results:We,numFailures:Je,lastResult:ke}}).catch(function(ke){return be.forEach(function(De){return De.onerror&&De.onerror(ke)}),Promise.reject(ke)})})}}})}})}};function Ko(y,x,T){try{if(!x||x.keys.length<y.length)return null;for(var A=[],I=0,j=0;I<x.keys.length&&j<y.length;++I)Dt(x.keys[I],y[j])===0&&(A.push(T?K(x.values[I]):x.values[I]),++j);return A.length===y.length?A:null}catch{return null}}var Vl={stack:"dbcore",level:-1,create:function(y){return{table:function(x){var T=y.table(x);return r(r({},T),{getMany:function(A){if(!A.cache)return T.getMany(A);var I=Ko(A.keys,A.trans._cache,A.cache==="clone");return I?Ae.resolve(I):T.getMany(A).then(function(j){return A.trans._cache={keys:A.keys,values:A.cache==="clone"?K(j):j},j})},mutate:function(A){return A.type!=="add"&&(A.trans._cache=null),T.mutate(A)}})}}}};function Ia(y,x){return y.trans.mode==="readonly"&&!!y.subscr&&!y.trans.explicit&&y.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function Bm(y,x){switch(y){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ab={stack:"dbcore",level:0,name:"Observability",create:function(y){var x=y.schema.name,T=new fr(y.MIN_KEY,y.MAX_KEY);return r(r({},y),{transaction:function(A,I,j){if(Ce.subscr&&I!=="readonly")throw new ze.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return y.transaction(A,I,j)},table:function(A){var I=y.table(A),j=I.schema,Y=j.primaryKey,te=j.indexes,X=Y.extractKey,ne=Y.outbound,re=Y.autoIncrement&&te.filter(function(ie){return ie.compound&&ie.keyPath.includes(Y.keyPath)}),ce=r(r({},I),{mutate:function(ie){function ae(He){return He="idb://".concat(x,"/").concat(A,"/").concat(He),ke[He]||(ke[He]=new fr)}var le,ue,pe,be=ie.trans,ke=ie.mutatedParts||(ie.mutatedParts={}),De=ae(""),We=ae(":dels"),Je=ie.type,Xe=ie.type==="deleteRange"?[ie.range]:ie.type==="delete"?[ie.keys]:ie.values.length<50?[Ai(Y,ie).filter(function(He){return He}),ie.values]:[],Fe=Xe[0],Ge=Xe[1],Xe=ie.trans._cache;return c(Fe)?(De.addKeys(Fe),(Xe=Je==="delete"||Fe.length===Ge.length?Ko(Fe,Xe):null)||We.addKeys(Fe),(Xe||Ge)&&(le=ae,ue=Xe,pe=Ge,j.indexes.forEach(function(He){var tt=le(He.name||"");function dt(It){return It!=null?He.extractKey(It):null}function kt(It){return He.multiEntry&&c(It)?It.forEach(function(qr){return tt.addKey(qr)}):tt.addKey(It)}(ue||pe).forEach(function(It,Er){var St=ue&&dt(ue[Er]),Er=pe&&dt(pe[Er]);Dt(St,Er)!==0&&(St!=null&&kt(St),Er!=null&&kt(Er))})}))):Fe?(Ge={from:(Ge=Fe.lower)!==null&&Ge!==void 0?Ge:y.MIN_KEY,to:(Ge=Fe.upper)!==null&&Ge!==void 0?Ge:y.MAX_KEY},We.add(Ge),De.add(Ge)):(De.add(T),We.add(T),j.indexes.forEach(function(He){return ae(He.name).add(T)})),I.mutate(ie).then(function(He){return!Fe||ie.type!=="add"&&ie.type!=="put"||(De.addKeys(He.results),re&&re.forEach(function(tt){for(var dt=ie.values.map(function(St){return tt.extractKey(St)}),kt=tt.keyPath.findIndex(function(St){return St===Y.keyPath}),It=0,qr=He.results.length;It<qr;++It)dt[It][kt]=He.results[It];ae(tt.name).addKeys(dt)})),be.mutatedParts=g(be.mutatedParts||{},ke),He})}}),te=function(ae){var le=ae.query,ae=le.index,le=le.range;return[ae,new fr((ae=le.lower)!==null&&ae!==void 0?ae:y.MIN_KEY,(le=le.upper)!==null&&le!==void 0?le:y.MAX_KEY)]},fe={get:function(ie){return[Y,new fr(ie.key)]},getMany:function(ie){return[Y,new fr().addKeys(ie.keys)]},count:te,query:te,openCursor:te};return a(fe).forEach(function(ie){ce[ie]=function(ae){var le=Ce.subscr,ue=!!le,pe=Ia(Ce,I)&&Bm(ie,ae)?ae.obsSet={}:le;if(ue){var be=function(Ge){return Ge="idb://".concat(x,"/").concat(A,"/").concat(Ge),pe[Ge]||(pe[Ge]=new fr)},ke=be(""),De=be(":dels"),le=fe[ie](ae),ue=le[0],le=le[1];if((ie==="query"&&ue.isPrimaryKey&&!ae.values?De:be(ue.name||"")).add(le),!ue.isPrimaryKey){if(ie!=="count"){var We=ie==="query"&&ne&&ae.values&&I.query(r(r({},ae),{values:!1}));return I[ie].apply(this,arguments).then(function(Ge){if(ie==="query"){if(ne&&ae.values)return We.then(function(dt){return dt=dt.result,ke.addKeys(dt),Ge});var Xe=ae.values?Ge.result.map(X):Ge.result;(ae.values?ke:De).addKeys(Xe)}else if(ie==="openCursor"){var He=Ge,tt=ae.values;return He&&Object.create(He,{key:{get:function(){return De.addKey(He.primaryKey),He.key}},primaryKey:{get:function(){var dt=He.primaryKey;return De.addKey(dt),dt}},value:{get:function(){return tt&&ke.addKey(He.primaryKey),He.value}}})}return Ge})}De.add(T)}}return I[ie].apply(this,arguments)}}),ce}})}};function Um(y,x,T){if(T.numFailures===0)return x;if(x.type==="deleteRange")return null;var A=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1;return T.numFailures===A?null:(x=r({},x),c(x.keys)&&(x.keys=x.keys.filter(function(I,j){return!(j in T.failures)})),"values"in x&&c(x.values)&&(x.values=x.values.filter(function(I,j){return!(j in T.failures)})),x)}function wf(y,x){return T=y,((A=x).lower===void 0||(A.lowerOpen?0<Dt(T,A.lower):0<=Dt(T,A.lower)))&&(y=y,(x=x).upper===void 0||(x.upperOpen?Dt(y,x.upper)<0:Dt(y,x.upper)<=0));var T,A}function ph(y,x,fe,A,I,j){if(!fe||fe.length===0)return y;var Y=x.query.index,X=Y.multiEntry,ne=x.query.range,re=A.schema.primaryKey.extractKey,ce=Y.extractKey,te=(Y.lowLevelIndex||Y).extractKey,fe=fe.reduce(function(ie,ae){var le=ie,ue=[];if(ae.type==="add"||ae.type==="put")for(var pe=new fr,be=ae.values.length-1;0<=be;--be){var ke,De=ae.values[be],We=re(De);pe.hasKey(We)||(ke=ce(De),(X&&c(ke)?ke.some(function(He){return wf(He,ne)}):wf(ke,ne))&&(pe.addKey(We),ue.push(De)))}switch(ae.type){case"add":var Je=new fr().addKeys(x.values?ie.map(function(tt){return re(tt)}):ie),le=ie.concat(x.values?ue.filter(function(tt){return tt=re(tt),!Je.hasKey(tt)&&(Je.addKey(tt),!0)}):ue.map(function(tt){return re(tt)}).filter(function(tt){return!Je.hasKey(tt)&&(Je.addKey(tt),!0)}));break;case"put":var Fe=new fr().addKeys(ae.values.map(function(tt){return re(tt)}));le=ie.filter(function(tt){return!Fe.hasKey(x.values?re(tt):tt)}).concat(x.values?ue:ue.map(function(tt){return re(tt)}));break;case"delete":var Ge=new fr().addKeys(ae.keys);le=ie.filter(function(tt){return!Ge.hasKey(x.values?re(tt):tt)});break;case"deleteRange":var Xe=ae.range;le=ie.filter(function(tt){return!wf(re(tt),Xe)})}return le},y);return fe===y?y:(fe.sort(function(ie,ae){return Dt(te(ie),te(ae))||Dt(re(ie),re(ae))}),x.limit&&x.limit<1/0&&(fe.length>x.limit?fe.length=x.limit:y.length===x.limit&&fe.length<x.limit&&(I.dirty=!0)),j?Object.freeze(fe):fe)}function Bl(y,x){return Dt(y.lower,x.lower)===0&&Dt(y.upper,x.upper)===0&&!!y.lowerOpen==!!x.lowerOpen&&!!y.upperOpen==!!x.upperOpen}function du(y,x){return(function(T,A,I,j){if(T===void 0)return A!==void 0?-1:0;if(A===void 0)return 1;if((A=Dt(T,A))===0){if(I&&j)return 0;if(I)return 1;if(j)return-1}return A})(y.lower,x.lower,y.lowerOpen,x.lowerOpen)<=0&&0<=(function(T,A,I,j){if(T===void 0)return A!==void 0?1:0;if(A===void 0)return-1;if((A=Dt(T,A))===0){if(I&&j)return 0;if(I)return-1;if(j)return 1}return A})(y.upper,x.upper,y.upperOpen,x.upperOpen)}function lb(y,x,T,A){y.subscribers.add(T),A.addEventListener("abort",function(){var I,j;y.subscribers.delete(T),y.subscribers.size===0&&(I=y,j=x,setTimeout(function(){I.subscribers.size===0&&ve(j,I)},3e3))})}var xf={stack:"dbcore",level:0,name:"Cache",create:function(y){var x=y.schema.name;return r(r({},y),{transaction:function(T,A,I){var j,Y,X=y.transaction(T,A,I);return A==="readwrite"&&(Y=(j=new AbortController).signal,I=function(ne){return function(){if(j.abort(),A==="readwrite"){for(var re=new Set,ce=0,te=T;ce<te.length;ce++){var fe=te[ce],ie=D["idb://".concat(x,"/").concat(fe)];if(ie){var ae=y.table(fe),le=ie.optimisticOps.filter(function(tt){return tt.trans===X});if(X._explicit&&ne&&X.mutatedParts)for(var ue=0,pe=Object.values(ie.queries.query);ue<pe.length;ue++)for(var be=0,ke=(Je=pe[ue]).slice();be<ke.length;be++)C((Fe=ke[be]).obsSet,X.mutatedParts)&&(ve(Je,Fe),Fe.subscribers.forEach(function(tt){return re.add(tt)}));else if(0<le.length){ie.optimisticOps=ie.optimisticOps.filter(function(tt){return tt.trans!==X});for(var De=0,We=Object.values(ie.queries.query);De<We.length;De++)for(var Je,Fe,Ge,Xe=0,He=(Je=We[De]).slice();Xe<He.length;Xe++)(Fe=He[Xe]).res!=null&&X.mutatedParts&&(ne&&!Fe.dirty?(Ge=Object.isFrozen(Fe.res),Ge=ph(Fe.res,Fe.req,le,ae,Fe,Ge),Fe.dirty?(ve(Je,Fe),Fe.subscribers.forEach(function(tt){return re.add(tt)})):Ge!==Fe.res&&(Fe.res=Ge,Fe.promise=Ae.resolve({result:Ge}))):(Fe.dirty&&ve(Je,Fe),Fe.subscribers.forEach(function(tt){return re.add(tt)})))}}}re.forEach(function(tt){return tt()})}}},X.addEventListener("abort",I(!1),{signal:Y}),X.addEventListener("error",I(!1),{signal:Y}),X.addEventListener("complete",I(!0),{signal:Y})),X},table:function(T){var A=y.table(T),I=A.schema.primaryKey;return r(r({},A),{mutate:function(j){var Y=Ce.trans;if(I.outbound||Y.db._options.cache==="disabled"||Y.explicit||Y.idbtrans.mode!=="readwrite")return A.mutate(j);var X=D["idb://".concat(x,"/").concat(T)];return X?(Y=A.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||Ai(I,j).some(function(ne){return ne==null}))?(X.optimisticOps.push(j),j.mutatedParts&&xe(j.mutatedParts),Y.then(function(ne){0<ne.numFailures&&(ve(X.optimisticOps,j),(ne=Um(0,j,ne))&&X.optimisticOps.push(ne),j.mutatedParts&&xe(j.mutatedParts))}),Y.catch(function(){ve(X.optimisticOps,j),j.mutatedParts&&xe(j.mutatedParts)})):Y.then(function(ne){var re=Um(0,r(r({},j),{values:j.values.map(function(ce,te){var fe;return ne.failures[te]?ce:(ce=(fe=I.keyPath)!==null&&fe!==void 0&&fe.includes(".")?K(ce):r({},ce),R(ce,I.keyPath,ne.results[te]),ce)})}),ne);X.optimisticOps.push(re),queueMicrotask(function(){return j.mutatedParts&&xe(j.mutatedParts)})}),Y):A.mutate(j)},query:function(j){if(!Ia(Ce,A)||!Bm("query",j))return A.query(j);var Y=((re=Ce.trans)===null||re===void 0?void 0:re.db._options.cache)==="immutable",te=Ce,X=te.requery,ne=te.signal,re=(function(ae,le,ue,pe){var be=D["idb://".concat(ae,"/").concat(le)];if(!be)return[];if(!(le=be.queries[ue]))return[null,!1,be,null];var ke=le[(pe.query?pe.query.index.name:null)||""];if(!ke)return[null,!1,be,null];switch(ue){case"query":var De=ke.find(function(We){return We.req.limit===pe.limit&&We.req.values===pe.values&&Bl(We.req.query.range,pe.query.range)});return De?[De,!0,be,ke]:[ke.find(function(We){return("limit"in We.req?We.req.limit:1/0)>=pe.limit&&(!pe.values||We.req.values)&&du(We.req.query.range,pe.query.range)}),!1,be,ke];case"count":return De=ke.find(function(We){return Bl(We.req.query.range,pe.query.range)}),[De,!!De,be,ke]}})(x,T,"query",j),ce=re[0],te=re[1],fe=re[2],ie=re[3];return ce&&te?ce.obsSet=j.obsSet:(te=A.query(j).then(function(ae){var le=ae.result;if(ce&&(ce.res=le),Y){for(var ue=0,pe=le.length;ue<pe;++ue)Object.freeze(le[ue]);Object.freeze(le)}else ae.result=K(le);return ae}).catch(function(ae){return ie&&ce&&ve(ie,ce),Promise.reject(ae)}),ce={obsSet:j.obsSet,promise:te,subscribers:new Set,type:"query",req:j,dirty:!1},ie?ie.push(ce):(ie=[ce],(fe=fe||(D["idb://".concat(x,"/").concat(T)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=ie)),lb(ce,ie,X,ne),ce.promise.then(function(ae){return{result:ph(ae.result,j,fe?.optimisticOps,A,ce,Y)}})}})}})}};function hu(y,x){return new Proxy(y,{get:function(T,A,I){return A==="db"?x:Reflect.get(T,A,I)}})}var qs=(In.prototype.version=function(y){if(isNaN(y)||y<.1)throw new ze.Type("Given version is not a positive number");if(y=Math.round(10*y)/10,this.idbdb||this._state.isBeingOpened)throw new ze.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,y);var x=this._versions,T=x.filter(function(A){return A._cfg.version===y})[0];return T||(T=new this.Version(y),x.push(T),x.sort(Dl),T.stores({}),this._state.autoSchema=!1,T)},In.prototype._whenReady=function(y){var x=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?y():new Ae(function(T,A){if(x._state.openComplete)return A(new ze.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void A(new ze.DatabaseClosed);x.open().catch(Tt)}x._state.dbReadyPromise.then(T,A)}).then(y)},In.prototype.use=function(y){var x=y.stack,T=y.create,A=y.level,I=y.name;return I&&this.unuse({stack:x,name:I}),y=this._middlewares[x]||(this._middlewares[x]=[]),y.push({stack:x,create:T,level:A??10,name:I}),y.sort(function(j,Y){return j.level-Y.level}),this},In.prototype.unuse=function(y){var x=y.stack,T=y.name,A=y.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(I){return A?I.create!==A:!!T&&I.name!==T})),this},In.prototype.open=function(){var y=this;return Ur(Ye,function(){return Yn(y)})},In.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var y=this._state,x=Ls.indexOf(this);if(0<=x&&Ls.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}y.isBeingOpened||(y.dbReadyPromise=new Ae(function(T){y.dbReadyResolve=T}),y.openCanceller=new Ae(function(T,A){y.cancelOpen=A}))},In.prototype.close=function(T){var x=(T===void 0?{disableAutoOpen:!0}:T).disableAutoOpen,T=this._state;x?(T.isBeingOpened&&T.cancelOpen(new ze.DatabaseClosed),this._close(),T.autoOpen=!1,T.dbOpenError=new ze.DatabaseClosed):(this._close(),T.autoOpen=this._options.autoOpen||T.isBeingOpened,T.openComplete=!1,T.dbOpenError=null)},In.prototype.delete=function(y){var x=this;y===void 0&&(y={disableAutoOpen:!0});var T=0<arguments.length&&typeof arguments[0]!="object",A=this._state;return new Ae(function(I,j){function Y(){x.close(y);var X=x._deps.indexedDB.deleteDatabase(x.name);X.onsuccess=fn(function(){var ne,re,ce;ne=x._deps,re=x.name,ce=ne.indexedDB,ne=ne.IDBKeyRange,Ki(ce)||re===Uo||Ll(ce,ne).delete(re).catch(Tt),I()}),X.onerror=Fr(j),X.onblocked=x._fireOnBlocked}if(T)throw new ze.InvalidArgument("Invalid closeOptions argument to db.delete()");A.isBeingOpened?A.dbReadyPromise.then(Y):Y()})},In.prototype.backendDB=function(){return this.idbdb},In.prototype.isOpen=function(){return this.idbdb!==null},In.prototype.hasBeenClosed=function(){var y=this._state.dbOpenError;return y&&y.name==="DatabaseClosed"},In.prototype.hasFailed=function(){return this._state.dbOpenError!==null},In.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(In.prototype,"tables",{get:function(){var y=this;return a(this._allTables).map(function(x){return y._allTables[x]})},enumerable:!1,configurable:!0}),In.prototype.transaction=function(){var y=(function(x,T,A){var I=arguments.length;if(I<2)throw new ze.InvalidArgument("Too few arguments");for(var j=new Array(I-1);--I;)j[I-1]=arguments[I];return A=j.pop(),[x,H(j),A]}).apply(this,arguments);return this._transaction.apply(this,y)},In.prototype._transaction=function(y,x,T){var A=this,I=Ce.trans;I&&I.db===this&&y.indexOf("!")===-1||(I=null);var j,Y,X=y.indexOf("?")!==-1;y=y.replace("!","").replace("?","");try{if(Y=x.map(function(re){if(re=re instanceof A.Table?re.name:re,typeof re!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return re}),y=="r"||y===Ui)j=Ui;else{if(y!="rw"&&y!=Fi)throw new ze.InvalidArgument("Invalid transaction mode: "+y);j=Fi}if(I){if(I.mode===Ui&&j===Fi){if(!X)throw new ze.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&Y.forEach(function(re){if(I&&I.storeNames.indexOf(re)===-1){if(!X)throw new ze.SubTransaction("Table "+re+" not included in parent transaction.");I=null}}),X&&I&&!I.active&&(I=null)}}catch(re){return I?I._promise(null,function(ce,te){te(re)}):nn(re)}var ne=(function re(ce,te,fe,ie,ae){return Ae.resolve().then(function(){var le=Ce.transless||Ce,ue=ce._createTransaction(te,fe,ce._dbSchema,ie);if(ue.explicit=!0,le={trans:ue,transless:le},ie)ue.idbtrans=ie.idbtrans;else try{ue.create(),ue.idbtrans._explicit=!0,ce._state.PR1398_maxLoop=3}catch(ke){return ke.name===$e.InvalidState&&ce.isOpen()&&0<--ce._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ce.close({disableAutoOpen:!1}),ce.open().then(function(){return re(ce,te,fe,null,ae)})):nn(ke)}var pe,be=J(ae);return be&&Dn(),le=Ae.follow(function(){var ke;(pe=ae.call(ue,ue))&&(be?(ke=Lr.bind(null,null),pe.then(ke,ke)):typeof pe.next=="function"&&typeof pe.throw=="function"&&(pe=Jt(pe)))},le),(pe&&typeof pe.then=="function"?Ae.resolve(pe).then(function(ke){return ue.active?ke:nn(new ze.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):le.then(function(){return pe})).then(function(ke){return ie&&ue._resolve(),ue._completion.then(function(){return ke})}).catch(function(ke){return ue._reject(ke),nn(ke)})})}).bind(null,this,j,Y,I,T);return I?I._promise(j,ne,"lock"):Ce.trans?Ur(Ce.transless,function(){return A._whenReady(ne)}):this._whenReady(ne)},In.prototype.table=function(y){if(!m(this._allTables,y))throw new ze.InvalidTable("Table ".concat(y," does not exist"));return this._allTables[y]},In);function In(y,x){var T=this;this._middlewares={},this.verno=0;var A=In.dependencies;this._options=x=r({addons:In.addons,autoOpen:!0,indexedDB:A.indexedDB,IDBKeyRange:A.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},A=x.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var I,j,Y,X,ne,re={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tt,dbReadyPromise:null,cancelOpen:Tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen};re.dbReadyPromise=new Ae(function(te){re.dbReadyResolve=te}),re.openCanceller=new Ae(function(te,fe){re.cancelOpen=fe}),this._state=re,this.name=y,this.on=ps(this,"populate","blocked","versionchange","close",{ready:[Xt,Tt]}),this.once=function(te,fe){var ie=function(){for(var ae=[],le=0;le<arguments.length;le++)ae[le]=arguments[le];T.on(te).unsubscribe(ie),fe.apply(T,ae)};return T.on(te,ie)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(te){return function(fe,ie){In.vip(function(){var ae,le=T._state;le.openComplete?(le.dbOpenError||Ae.resolve().then(fe),ie&&te(fe)):le.onReadyBeingFired?(le.onReadyBeingFired.push(fe),ie&&te(fe)):(te(fe),ae=T,ie||te(function ue(){ae.on.ready.unsubscribe(fe),ae.on.ready.unsubscribe(ue)}))})}}),this.Collection=(I=this,xr(vf.prototype,function(pe,ue){this.db=I;var ie=Cl,ae=null;if(ue)try{ie=ue()}catch(be){ae=be}var le=pe._ctx,ue=le.table,pe=ue.hook.reading.fire;this._ctx={table:ue,index:le.index,isPrimKey:!le.index||ue.schema.primKey.keyPath&&le.index===ue.schema.primKey.name,range:ie,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ae,or:le.or,valueMapper:pe!==gr?pe:null}})),this.Table=(j=this,xr(Ho.prototype,function(te,fe,ie){this.db=j,this._tx=ie,this.name=te,this.schema=fe,this.hook=j._allTables[te]?j._allTables[te].hook:ps(null,{creating:[Xr,Tt],reading:[Ir,gr],updating:[Li,Tt],deleting:[Ti,Tt]})})),this.Transaction=(Y=this,xr(Ma.prototype,function(te,fe,ie,ae,le){var ue=this;te!=="readonly"&&fe.forEach(function(pe){pe=(pe=ie[pe])===null||pe===void 0?void 0:pe.yProps,pe&&(fe=fe.concat(pe.map(function(be){return be.updatesTable})))}),this.db=Y,this.mode=te,this.storeNames=fe,this.schema=ie,this.chromeTransactionDurability=ae,this.idbtrans=null,this.on=ps(this,"complete","error","abort"),this.parent=le||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ae(function(pe,be){ue._resolve=pe,ue._reject=be}),this._completion.then(function(){ue.active=!1,ue.on.complete.fire()},function(pe){var be=ue.active;return ue.active=!1,ue.on.error.fire(pe),ue.parent?ue.parent._reject(pe):be&&ue.idbtrans&&ue.idbtrans.abort(),nn(pe)})})),this.Version=(X=this,xr(Pl.prototype,function(te){this.db=X,this._cfg={version:te,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ne=this,xr(mo.prototype,function(te,fe,ie){if(this.db=ne,this._ctx={table:te,index:fe===":id"?null:fe,or:ie},this._cmp=this._ascending=Dt,this._descending=function(ae,le){return Dt(le,ae)},this._max=function(ae,le){return 0<Dt(ae,le)?ae:le},this._min=function(ae,le){return Dt(ae,le)<0?ae:le},this._IDBKeyRange=ne._deps.IDBKeyRange,!this._IDBKeyRange)throw new ze.MissingAPI})),this.on("versionchange",function(te){0<te.newVersion?console.warn("Another connection wants to upgrade database '".concat(T.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(T.name,"'. Closing db now to resume the delete request.")),T.close({disableAutoOpen:!1})}),this.on("blocked",function(te){!te.newVersion||te.newVersion<te.oldVersion?console.warn("Dexie.delete('".concat(T.name,"') was blocked")):console.warn("Upgrade '".concat(T.name,"' blocked by other connection holding version ").concat(te.oldVersion/10))}),this._maxKey=yo(x.IDBKeyRange),this._createTransaction=function(te,fe,ie,ae){return new T.Transaction(te,fe,ie,T._options.chromeTransactionDurability,ae)},this._fireOnBlocked=function(te){T.on("blocked").fire(te),Ls.filter(function(fe){return fe.name===T.name&&fe!==T&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(te)})},this.use(Vl),this.use(xf),this.use(ab),this.use(Yi),this.use(xs);var ce=new Proxy(this,{get:function(te,fe,ie){if(fe==="_vip")return!0;if(fe==="table")return function(le){return hu(T.table(le),ce)};var ae=Reflect.get(te,fe,ie);return ae instanceof Ho?hu(ae,ce):fe==="tables"?ae.map(function(le){return hu(le,ce)}):fe==="_createTransaction"?function(){return hu(ae.apply(this,arguments),ce)}:ae}});this.vip=ce,A.forEach(function(te){return te(T)})}var Ul,Oi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fm=(Ef.prototype.subscribe=function(y,x,T){return this._subscribe(y&&typeof y!="function"?y:{next:y,error:x,complete:T})},Ef.prototype[Oi]=function(){return this},Ef);function Ef(y){this._subscribe=y}try{Ul={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Ul={indexedDB:null,IDBKeyRange:null}}function Hm(y){var x,T=!1,A=new Fm(function(I){var j=J(y),Y,X=!1,ne={},re={},ce={get closed(){return X},unsubscribe:function(){X||(X=!0,Y&&Y.abort(),te&&ur.storagemutated.unsubscribe(ie))}};I.start&&I.start(ce);var te=!1,fe=function(){return Bi(ae)},ie=function(le){g(ne,le),C(re,ne)&&fe()},ae=function(){var le,ue,pe;!X&&Ul.indexedDB&&(ne={},le={},Y&&Y.abort(),Y=new AbortController,pe=(function(be){var ke=Nn();try{j&&Dn();var De=pn(y,be);return De=j?De.finally(Lr):De}finally{ke&&qn()}})(ue={subscr:le,signal:Y.signal,requery:fe,querier:y,trans:null}),Promise.resolve(pe).then(function(be){T=!0,x=be,X||ue.signal.aborted||(ne={},(function(ke){for(var De in ke)if(m(ke,De))return;return 1})(re=le)||te||(ur($i,ie),te=!0),Bi(function(){return!X&&I.next&&I.next(be)}))},function(be){T=!1,["DatabaseClosedError","AbortError"].includes(be?.name)||X||Bi(function(){X||I.error&&I.error(be)})}))};return setTimeout(fe,0),ce});return A.hasValue=function(){return T},A.getValue=function(){return x},A}var Pa=qs;function mh(y){var x=Go;try{Go=!0,ur.storagemutated.fire(y),Ke(y,!0)}finally{Go=x}}v(Pa,r(r({},Bn),{delete:function(y){return new Pa(y,{addons:[]}).delete()},exists:function(y){return new Pa(y,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(y){try{return x=Pa.dependencies,T=x.indexedDB,x=x.IDBKeyRange,(Ki(T)?Promise.resolve(T.databases()).then(function(A){return A.map(function(I){return I.name}).filter(function(I){return I!==Uo})}):Ll(T,x).toCollection().primaryKeys()).then(y)}catch{return nn(new ze.MissingAPI)}var x,T},defineClass:function(){return function(y){u(this,y)}},ignoreTransaction:function(y){return Ce.trans?Ur(Ce.transless,y):y()},vip:zl,async:function(y){return function(){try{var x=Jt(y.apply(this,arguments));return x&&typeof x.then=="function"?x:Ae.resolve(x)}catch(T){return nn(T)}}},spawn:function(y,x,T){try{var A=Jt(y.apply(T,x||[]));return A&&typeof A.then=="function"?A:Ae.resolve(A)}catch(I){return nn(I)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(y,x){return x=Ae.resolve(typeof y=="function"?Pa.ignoreTransaction(y):y).timeout(x||6e4),Ce.trans?Ce.trans.waitFor(x):x},Promise:Ae,debug:{get:function(){return un},set:function(y){zi(y)}},derive:k,extend:u,props:v,override:W,Events:ps,on:ur,liveQuery:Hm,extendObservabilitySet:g,getByKeyPath:U,setByKeyPath:R,delByKeyPath:function(y,x){typeof x=="string"?R(y,x,void 0):"length"in x&&[].map.call(x,function(T){R(y,T,void 0)})},shallowClone:P,deepClone:K,getObjectDiff:Qi,cmp:Dt,asap:q,minKey:-1/0,addons:[],connections:Ls,errnames:$e,dependencies:Ul,cache:D,semVer:"4.2.1",version:"4.2.1".split(".").map(function(y){return parseInt(y)}).reduce(function(y,x,T){return y+x/Math.pow(10,2*T)})})),Pa.maxKey=yo(Pa.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ur($i,function(y){Go||(y=new CustomEvent(Ci,{detail:y}),Go=!0,dispatchEvent(y),Go=!1)}),addEventListener(Ci,function(y){y=y.detail,Go||mh(y)}));var Fl,Go=!1,mi=function(){};return typeof BroadcastChannel<"u"&&((mi=function(){(Fl=new BroadcastChannel(Ci)).onmessage=function(y){return y.data&&mh(y.data)}})(),typeof Fl.unref=="function"&&Fl.unref(),ur($i,function(y){Go||Fl.postMessage(y)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(y){if(!qs.disableBfCache&&y.persisted){un&&console.debug("Dexie: handling persisted pagehide"),Fl?.close();for(var x=0,T=Ls;x<T.length;x++)T[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(y){!qs.disableBfCache&&y.persisted&&(un&&console.debug("Dexie: handling persisted pageshow"),mi(),mh({all:new fr(-1/0,[[]])}))})),Ae.rejectionMapper=function(y,x){return!y||y instanceof ye||y instanceof TypeError||y instanceof SyntaxError||!y.name||!tn[y.name]?y:(x=new tn[y.name](x||y.message,y),"stack"in y&&S(x,"stack",{get:function(){return this.inner.stack}}),x)},zi(un),r(qs,Object.freeze({__proto__:null,Dexie:qs,liveQuery:Hm,Entity:au,cmp:Dt,PropModification:Hi,replacePrefix:function(y,x){return new Hi({replacePrefix:[y,x]})},add:function(y){return new Hi({add:y})},remove:function(y){return new Hi({remove:y})},default:qs,RangeSet:fr,mergeRanges:Gi,rangesOverlap:Hr}),{default:qs}),qs})})(_y)),_y.exports}var KH=WH();const Ox=WE(KH),pO=Symbol.for("Dexie"),Hc=globalThis[pO]||(globalThis[pO]=Ox);if(Ox.semVer!==Hc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ox.semVer} and ${Hc.semVer}`);const{liveQuery:lce,mergeRanges:cce,rangesOverlap:uce,RangeSet:fce,cmp:dce,Entity:hce,PropModification:pce,replacePrefix:mce,add:gce,remove:yce,DexieYProvider:vce}=Hc,sn=new Hc("CareerFlyDB");sn.version(1).stores({logs:"id, userId, dateIso, [userId+dateIso], *tags, *externalTickets, syncState.isSynced",tags:"id, userId, category, usageCount, label",careerGoals:"id, userId, status, *linkedLogIds",externalTickets:"id, userId, ticketKey, status",stats:"id"});sn.version(2).stores({templates:"id, userId, name, createdAt"});const gp=()=>crypto.randomUUID();sn.on("populate",()=>{sn.logs.add({id:gp(),userId:"guest",dateIso:new Date().toISOString(),tags:["CareerGrowth"],externalTickets:[],metadata:{impact:"high",isMajorWin:!0},content:{format:"tiptap-json",plainTextSnippet:"Welcome to CareerFly!  Try editing this log. Today I learned about #CareerGrowth and configured the [PROJECT-101] dashboard.",body:{type:"doc",content:[{type:"heading",attrs:{level:3},content:[{type:"text",text:"Welcome to CareerFly! "}]},{type:"paragraph",content:[{type:"text",text:"Try editing this log. Today I learned about "},{type:"mention",attrs:{id:"CareerGrowth",label:"#CareerGrowth"}},{type:"text",text:" and configured the app."}]}]}},syncState:{isSynced:!1,lastModified:new Date().toISOString()}})});function GH(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=Be.useRef({hasResult:!1,result:i,error:null}),a=Be.useReducer(function(d){return d+1},0);a[0];var c=a[1],u=Be.useMemo(function(){var d=typeof t=="function"?t():t;if(!d||typeof d.subscribe!="function")throw t===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")s.current.result=d.getValue(),s.current.hasResult=!0;else{var h=d.subscribe(function(m){s.current.result=m,s.current.hasResult=!0});typeof h=="function"?h():h.unsubscribe()}return d},r);if(Be.useDebugValue(s.current.result),Be.useEffect(function(){var d=u.subscribe(function(h){var m=s.current;(m.error!==null||m.result!==h)&&(m.error=null,m.result=h,m.hasResult=!0,c())},function(h){var m=s.current;m.error!==h&&(m.error=h,c())});return typeof d=="function"?d:d.unsubscribe.bind(d)},r),s.current.error)throw s.current.error;return s.current.result}function v0(t,e,n){return GH(function(){return Hc.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Hc.DexieYProvider;e&&e.release(t)});const YH=()=>{};var mO={};const ZI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},e2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|c>>4;let v=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(v=64)),r.push(n[h],n[m],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new XH;const v=s<<2|c>>4;if(r.push(v),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const S=d<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JH=function(t){const e=ZI(t);return e2.encodeByteArray(e,!0)},Ky=function(t){return JH(t).replace(/\./g,"")},t2=function(t){try{return e2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const e8=()=>ZH().__FIREBASE_DEFAULTS__,t8=()=>{if(typeof process>"u"||typeof mO>"u")return;const t=mO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},n8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t2(t[1]);return e&&JSON.parse(e)},b0=()=>{try{return YH()||e8()||t8()||n8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},n2=t=>b0()?.emulatorHosts?.[t],r8=t=>{const e=n2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},r2=()=>b0()?.config,i2=t=>b0()?.[`_${t}`];class i8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function eh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s2(t){return(await fetch(t,{credentials:"include"})).ok}function s8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ky(JSON.stringify(n)),Ky(JSON.stringify(a)),""].join(".")}const yp={};function o8(){const t={prod:[],emulator:[]};for(const e of Object.keys(yp))yp[e]?t.emulator.push(e):t.prod.push(e);return t}function a8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gO=!1;function o2(t,e){if(typeof window>"u"||typeof document>"u"||!eh(window.location.host)||yp[t]===e||yp[t]||gO)return;yp[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=o8().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gO=!0,a()},v}function h(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=a8(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),k=n("learnmore"),_=document.getElementById(k)||document.createElement("a"),O=n("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const W=v.element;c(W),h(_,k);const L=d();u(B,O),W.append(B,S,_,L),document.body.appendChild(W)}s?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ei())}function c8(){const t=b0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function f8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h8(){const t=Ei();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p8(){return!c8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m8(){try{return typeof indexedDB=="object"}catch{return!1}}function g8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const y8="FirebaseError";class Sl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y8,Object.setPrototypeOf(this,Sl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bm.prototype.create)}}class bm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?v8(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Sl(i,c,r)}}function v8(t,e){return t.replace(b8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const b8=/\{\$([^}]+)}/g;function w8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(yO(s)&&yO(a)){if(!Xu(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yO(t){return t!==null&&typeof t=="object"}function wm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function x8(t,e){const n=new E8(t,e);return n.subscribe.bind(n)}class E8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S8(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=p1),i.error===void 0&&(i.error=p1),i.complete===void 0&&(i.complete=p1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function p1(){}function Ni(t){return t&&t._delegate?t._delegate:t}class Ju{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ou="[DEFAULT]";class _8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new i8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k8(e))try{this.getOrInitializeService({instanceIdentifier:Ou})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ou){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ou){return this.instances.has(e)}getOptions(e=Ou){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ou){return this.component?this.component.multipleInstances?e:Ou:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T8(t){return t===Ou?void 0:t}function k8(t){return t.instantiationMode==="EAGER"}class C8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const A8={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},O8=Gt.INFO,M8={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},R8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=M8[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lS{constructor(e){this.name=e,this._logLevel=O8,this._logHandler=R8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const N8=(t,e)=>e.some(n=>t instanceof n);let vO,bO;function D8(){return vO||(vO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I8(){return bO||(bO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a2=new WeakMap,Mx=new WeakMap,l2=new WeakMap,m1=new WeakMap,cS=new WeakMap;function P8(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Nc(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&a2.set(n,t)}).catch(()=>{}),cS.set(e,t),e}function L8(t){if(Mx.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Mx.set(t,e)}let Rx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z8(t){Rx=t(Rx)}function j8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(g1(this),e,...n);return l2.set(r,e.sort?e.sort():[e]),Nc(r)}:I8().includes(t)?function(...e){return t.apply(g1(this),e),Nc(a2.get(this))}:function(...e){return Nc(t.apply(g1(this),e))}}function V8(t){return typeof t=="function"?j8(t):(t instanceof IDBTransaction&&L8(t),N8(t,D8())?new Proxy(t,Rx):t)}function Nc(t){if(t instanceof IDBRequest)return P8(t);if(m1.has(t))return m1.get(t);const e=V8(t);return e!==t&&(m1.set(t,e),cS.set(e,t)),e}const g1=t=>cS.get(t);function B8(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=Nc(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Nc(a.result),u.oldVersion,u.newVersion,Nc(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const U8=["get","getKey","getAll","getAllKeys","count"],F8=["put","add","delete","clear"],y1=new Map;function wO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(y1.get(e))return y1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=F8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U8.includes(n)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return y1.set(e,s),s}z8(t=>({...t,get:(e,n,r)=>wO(e,n)||t.get(e,n,r),has:(e,n)=>!!wO(e,n)||t.has(e,n)}));class H8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q8(t){return t.getComponent()?.type==="VERSION"}const Nx="@firebase/app",xO="0.14.6";const vl=new lS("@firebase/app"),$8="@firebase/app-compat",W8="@firebase/analytics-compat",K8="@firebase/analytics",G8="@firebase/app-check-compat",Y8="@firebase/app-check",Q8="@firebase/auth",X8="@firebase/auth-compat",J8="@firebase/database",Z8="@firebase/data-connect",eq="@firebase/database-compat",tq="@firebase/functions",nq="@firebase/functions-compat",rq="@firebase/installations",iq="@firebase/installations-compat",sq="@firebase/messaging",oq="@firebase/messaging-compat",aq="@firebase/performance",lq="@firebase/performance-compat",cq="@firebase/remote-config",uq="@firebase/remote-config-compat",fq="@firebase/storage",dq="@firebase/storage-compat",hq="@firebase/firestore",pq="@firebase/ai",mq="@firebase/firestore-compat",gq="firebase",yq="12.6.0";const Dx="[DEFAULT]",vq={[Nx]:"fire-core",[$8]:"fire-core-compat",[K8]:"fire-analytics",[W8]:"fire-analytics-compat",[Y8]:"fire-app-check",[G8]:"fire-app-check-compat",[Q8]:"fire-auth",[X8]:"fire-auth-compat",[J8]:"fire-rtdb",[Z8]:"fire-data-connect",[eq]:"fire-rtdb-compat",[tq]:"fire-fn",[nq]:"fire-fn-compat",[rq]:"fire-iid",[iq]:"fire-iid-compat",[sq]:"fire-fcm",[oq]:"fire-fcm-compat",[aq]:"fire-perf",[lq]:"fire-perf-compat",[cq]:"fire-rc",[uq]:"fire-rc-compat",[fq]:"fire-gcs",[dq]:"fire-gcs-compat",[hq]:"fire-fst",[mq]:"fire-fst-compat",[pq]:"fire-vertex","fire-js":"fire-js",[gq]:"fire-js-all"};const Gy=new Map,bq=new Map,Ix=new Map;function EO(t,e){try{t.container.addComponent(e)}catch(n){vl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Td(t){const e=t.name;if(Ix.has(e))return vl.debug(`There were multiple attempts to register component ${e}.`),!1;Ix.set(e,t);for(const n of Gy.values())EO(n,t);for(const n of bq.values())EO(n,t);return!0}function uS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function To(t){return t==null?!1:t.settings!==void 0}const wq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dc=new bm("app","Firebase",wq);class xq{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ju("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dc.create("app-deleted",{appName:this._name})}}const th=yq;function c2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Dx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Dc.create("bad-app-name",{appName:String(i)});if(n||(n=r2()),!n)throw Dc.create("no-options");const s=Gy.get(i);if(s){if(Xu(n,s.options)&&Xu(r,s.config))return s;throw Dc.create("duplicate-app",{appName:i})}const a=new C8(i);for(const u of Ix.values())a.addComponent(u);const c=new xq(n,r,a);return Gy.set(i,c),c}function u2(t=Dx){const e=Gy.get(t);if(!e&&t===Dx&&r2())return c2();if(!e)throw Dc.create("no-app",{appName:t});return e}function Ic(t,e,n){let r=vq[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vl.warn(a.join(" "));return}Td(new Ju(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Eq="firebase-heartbeat-database",Sq=1,Up="firebase-heartbeat-store";let v1=null;function f2(){return v1||(v1=B8(Eq,Sq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Up)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dc.create("idb-open",{originalErrorMessage:t.message})})),v1}async function _q(t){try{const n=(await f2()).transaction(Up),r=await n.objectStore(Up).get(d2(t));return await n.done,r}catch(e){if(e instanceof Sl)vl.warn(e.message);else{const n=Dc.create("idb-get",{originalErrorMessage:e?.message});vl.warn(n.message)}}}async function SO(t,e){try{const r=(await f2()).transaction(Up,"readwrite");await r.objectStore(Up).put(e,d2(t)),await r.done}catch(n){if(n instanceof Sl)vl.warn(n.message);else{const r=Dc.create("idb-set",{originalErrorMessage:n?.message});vl.warn(r.message)}}}function d2(t){return`${t.name}!${t.options.appId}`}const Tq=1024,kq=30;class Cq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Oq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_O();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>kq){const i=Mq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_O(),{heartbeatsToSend:n,unsentEntries:r}=Aq(this._heartbeatsCache.heartbeats),i=Ky(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vl.warn(e),""}}}function _O(){return new Date().toISOString().substring(0,10)}function Aq(t,e=Tq){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),TO(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),TO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Oq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m8()?g8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _q(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function TO(t){return Ky(JSON.stringify({version:2,heartbeats:t})).length}function Mq(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Rq(t){Td(new Ju("platform-logger",e=>new H8(e),"PRIVATE")),Td(new Ju("heartbeat",e=>new Cq(e),"PRIVATE")),Ic(Nx,xO,t),Ic(Nx,xO,"esm2020"),Ic("fire-js","")}Rq("");var Nq="firebase",Dq="12.7.0";Ic(Nq,Dq,"app");function h2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Iq=h2,p2=new bm("auth","Firebase",h2());const Yy=new lS("@firebase/auth");function Pq(t,...e){Yy.logLevel<=Gt.WARN&&Yy.warn(`Auth (${th}): ${t}`,...e)}function Ty(t,...e){Yy.logLevel<=Gt.ERROR&&Yy.error(`Auth (${th}): ${t}`,...e)}function ya(t,...e){throw dS(t,...e)}function Do(t,...e){return dS(t,...e)}function fS(t,e,n){const r={...Iq(),[e]:n};return new bm("auth","Firebase",r).create(e,{appName:t.name})}function Vu(t){return fS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lq(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ya(t,"argument-error"),fS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return p2.create(t,...e)}function Ct(t,e,...n){if(!t)throw dS(e,...n)}function ol(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ty(e),new Error(e)}function bl(t,e){t||ol(e)}function Px(){return typeof self<"u"&&self.location?.href||""}function zq(){return kO()==="http:"||kO()==="https:"}function kO(){return typeof self<"u"&&self.location?.protocol||null}function jq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zq()||f8()||"connection"in navigator)?navigator.onLine:!0}function Vq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class xm{constructor(e,n){this.shortDelay=e,this.longDelay=n,bl(n>e,"Short delay should be less than long delay!"),this.isMobile=l8()||d8()}get(){return jq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hS(t,e){bl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class m2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ol("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ol("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ol("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Uq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fq=new xm(3e4,6e4);function pS(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nh(t,e,n,r,i={}){return g2(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=wm({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return u8()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&eh(t.emulatorConfig.host)&&(d.credentials="include"),m2.fetch()(await y2(t,t.config.apiHost,n,c),d)})}async function g2(t,e,n){t._canInitEmulator=!1;const r={...Bq,...e};try{const i=new qq(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xg(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xg(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Xg(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Xg(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw fS(t,h,d);ya(t,h)}}catch(i){if(i instanceof Sl)throw i;ya(t,"network-request-failed",{message:String(i)})}}async function Hq(t,e,n,r,i={}){const s=await nh(t,e,n,r,i);return"mfaPendingCredential"in s&&ya(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function y2(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?hS(t.config,i):`${t.config.apiScheme}://${i}`;return Uq.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class qq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Do(this.auth,"network-request-failed")),Fq.get())})}}function Xg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Do(t,e,r);return i.customData._tokenResponse=n,i}async function $q(t,e){return nh(t,"POST","/v1/accounts:delete",e)}async function Qy(t,e){return nh(t,"POST","/v1/accounts:lookup",e)}function vp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wq(t,e=!1){const n=Ni(t),r=await n.getIdToken(e),i=mS(r);Ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:vp(b1(i.auth_time)),issuedAtTime:vp(b1(i.iat)),expirationTime:vp(b1(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function b1(t){return Number(t)*1e3}function mS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ty("JWT malformed, contained fewer than 3 sections"),null;try{const i=t2(n);return i?JSON.parse(i):(Ty("Failed to decode base64 JWT payload"),null)}catch(i){return Ty("Caught error parsing JWT payload as JSON",i?.toString()),null}}function CO(t){const e=mS(t);return Ct(e,"internal-error"),Ct(typeof e.exp<"u","internal-error"),Ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sl&&Kq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Kq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Gq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Lx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vp(this.lastLoginAt),this.creationTime=vp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xy(t){const e=t.auth,n=await t.getIdToken(),r=await Fp(t,Qy(e,{idToken:n}));Ct(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?v2(i.providerUserInfo):[],a=Qq(t.providerData,s),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!a?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lx(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Yq(t){const e=Ni(t);await Xy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function v2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Xq(t,e){const n=await g2(t,{},async()=>{const r=wm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await y2(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&eh(t.emulatorConfig.host)&&(u.credentials="include"),m2.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jq(t,e){return nh(t,"POST","/v2/accounts:revokeToken",pS(t,e))}class gd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct(typeof e.idToken<"u","internal-error"),Ct(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ct(e.length!==0,"internal-error");const n=CO(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Xq(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new gd;return r&&(Ct(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ct(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ct(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gd,this.toJSON())}_performRefresh(){return ol("not implemented")}}function dc(t,e){Ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Co{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Gq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Fp(this,this.stsTokenManager.getToken(this.auth,e));return Ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Wq(this,e)}reload(){return Yq(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Co({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(To(this.auth.app))return Promise.reject(Vu(this.auth));const e=await this.getIdToken();return await Fp(this,$q(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:w,providerData:S,stsTokenManager:k}=n;Ct(m&&k,e,"internal-error");const _=gd.fromJSON(this.name,k);Ct(typeof m=="string",e,"internal-error"),dc(r,e.name),dc(i,e.name),Ct(typeof v=="boolean",e,"internal-error"),Ct(typeof w=="boolean",e,"internal-error"),dc(s,e.name),dc(a,e.name),dc(c,e.name),dc(u,e.name),dc(d,e.name),dc(h,e.name);const O=new Co({uid:m,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:s,tenantId:c,stsTokenManager:_,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(O.providerData=S.map(B=>({...B}))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new gd;i.updateFromServerResponse(n);const s=new Co({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xy(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ct(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?v2(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new gd;c.updateFromIdToken(r);const u=new Co({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u}}const AO=new Map;function al(t){bl(t instanceof Function,"Expected a class definition");let e=AO.get(t);return e?(bl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AO.set(t,e),e)}class b2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b2.type="NONE";const OO=b2;function ky(t,e,n){return`firebase:${t}:${e}:${n}`}class yd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ky(this.userKey,i.apiKey,s),this.fullPersistenceKey=ky("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qy(this.auth,{idToken:e}).catch(()=>{});return n?Co._fromGetAccountInfoResponse(this.auth,n,e):null}return Co._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yd(al(OO),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||al(OO);const a=ky(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(a);if(h){let m;if(typeof h=="string"){const v=await Qy(e,{idToken:h}).catch(()=>{});if(!v)break;m=await Co._fromGetAccountInfoResponse(e,v,h)}else m=Co._fromJSON(e,h);d!==s&&(c=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new yd(s,e,r):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new yd(s,e,r))}}function MO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T2(e))return"Blackberry";if(k2(e))return"Webos";if(x2(e))return"Safari";if((e.includes("chrome/")||E2(e))&&!e.includes("edge/"))return"Chrome";if(_2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function w2(t=Ei()){return/firefox\//i.test(t)}function x2(t=Ei()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E2(t=Ei()){return/crios\//i.test(t)}function S2(t=Ei()){return/iemobile/i.test(t)}function _2(t=Ei()){return/android/i.test(t)}function T2(t=Ei()){return/blackberry/i.test(t)}function k2(t=Ei()){return/webos/i.test(t)}function gS(t=Ei()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zq(t=Ei()){return gS(t)&&!!window.navigator?.standalone}function e$(){return h8()&&document.documentMode===10}function C2(t=Ei()){return gS(t)||_2(t)||k2(t)||T2(t)||/windows phone/i.test(t)||S2(t)}function A2(t,e=[]){let n;switch(t){case"Browser":n=MO(Ei());break;case"Worker":n=`${MO(Ei())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${th}/${r}`}class t${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function n$(t,e={}){return nh(t,"GET","/v2/passwordPolicy",pS(t,e))}const r$=6;class i${constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??r$,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class s${constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RO(this),this.idTokenSubscription=new RO(this),this.beforeStateQueue=new t$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=al(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qy(this,{idToken:e}),r=await Co._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(To(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xy(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(To(this.app))return Promise.reject(Vu(this));const n=e?Ni(e):null;return n&&Ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return To(this.app)?Promise.reject(Vu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return To(this.app)?Promise.reject(Vu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(al(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n$(this),n=new i$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jq(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&al(e)||this._popupRedirectResolver;Ct(n,this,"argument-error"),this.redirectPersistenceManager=await yd.create(this,[al(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(To(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Pq(`Error while retrieving App Check token: ${e.error}`),e?.token}}function w0(t){return Ni(t)}class RO{constructor(e){this.auth=e,this.observer=null,this.addObserver=x8(n=>this.observer=n)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o$(t){yS=t}function a$(t){return yS.loadJS(t)}function l$(){return yS.gapiScript}function c$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function u$(t,e){const n=uS(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Xu(s,e??{}))return i;ya(i,"already-initialized")}return n.initialize({options:e})}function f$(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(al);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function d$(t,e,n){const r=w0(t);Ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=O2(e),{host:a,port:c}=h$(e),u=c===null?"":`:${c}`,d={url:`${s}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ct(Xu(d,r.config.emulator)&&Xu(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,eh(a)?(s2(`${s}//${a}${u}`),o2("Auth",!0)):p$()}function O2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h$(t){const e=O2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:NO(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:NO(a)}}}function NO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class M2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ol("not implemented")}_getIdTokenResponse(e){return ol("not implemented")}_linkToIdToken(e,n){return ol("not implemented")}_getReauthenticationResolver(e){return ol("not implemented")}}async function vd(t,e){return Hq(t,"POST","/v1/accounts:signInWithIdp",pS(t,e))}const m$="http://localhost";class Zu extends M2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ya("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const a=new Zu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return vd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vd(e,n)}buildRequest(){const e={requestUri:m$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wm(n)}return e}}class vS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Em extends vS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xc extends Em{constructor(){super("facebook.com")}static credential(e){return Zu._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xc.credentialFromTaggedObject(e)}static credentialFromError(e){return xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xc.credential(e.oauthAccessToken)}catch{return null}}}xc.FACEBOOK_SIGN_IN_METHOD="facebook.com";xc.PROVIDER_ID="facebook.com";class sl extends Em{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zu._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sl.credential(n,r)}catch{return null}}}sl.GOOGLE_SIGN_IN_METHOD="google.com";sl.PROVIDER_ID="google.com";class Ec extends Em{constructor(){super("github.com")}static credential(e){return Zu._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ec.credential(e.oauthAccessToken)}catch{return null}}}Ec.GITHUB_SIGN_IN_METHOD="github.com";Ec.PROVIDER_ID="github.com";class Sc extends Em{constructor(){super("twitter.com")}static credential(e,n){return Zu._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sc.credential(n,r)}catch{return null}}}Sc.TWITTER_SIGN_IN_METHOD="twitter.com";Sc.PROVIDER_ID="twitter.com";class kd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Co._fromIdTokenResponse(e,r,i),a=DO(r);return new kd({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=DO(r);return new kd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function DO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Jy extends Sl{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jy(e,n,r,i)}}function R2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jy._fromErrorAndOperation(t,s,e,r):s})}async function g$(t,e,n=!1){const r=await Fp(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kd._forOperation(t,"link",r)}async function y$(t,e,n=!1){const{auth:r}=t;if(To(r.app))return Promise.reject(Vu(r));const i="reauthenticate";try{const s=await Fp(t,R2(r,i,e,t),n);Ct(s.idToken,r,"internal-error");const a=mS(s.idToken);Ct(a,r,"internal-error");const{sub:c}=a;return Ct(t.uid===c,r,"user-mismatch"),kd._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ya(r,"user-mismatch"),s}}async function v$(t,e,n=!1){if(To(t.app))return Promise.reject(Vu(t));const r="signIn",i=await R2(t,r,e),s=await kd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function b$(t,e,n,r){return Ni(t).onIdTokenChanged(e,n,r)}function w$(t,e,n){return Ni(t).beforeAuthStateChanged(e,n)}function x$(t,e,n,r){return Ni(t).onAuthStateChanged(e,n,r)}function E$(t){return Ni(t).signOut()}const Zy="__sak";class N2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zy,"1"),this.storage.removeItem(Zy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const S$=1e3,_$=10;class D2 extends N2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);e$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},S$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D2.type="LOCAL";const T$=D2;class I2 extends N2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I2.type="SESSION";const P2=I2;function k$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class x0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new x0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(n.origin,s)),u=await k$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}x0.receivers=[];function bS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class C${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const d=bS("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function la(){return window}function A$(t){la().location.href=t}function L2(){return typeof la().WorkerGlobalScope<"u"&&typeof la().importScripts=="function"}async function O$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M$(){return navigator?.serviceWorker?.controller||null}function R$(){return L2()?self:null}const z2="firebaseLocalStorageDb",N$=1,ev="firebaseLocalStorage",j2="fbase_key";class Sm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function E0(t,e){return t.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function D$(){const t=indexedDB.deleteDatabase(z2);return new Sm(t).toPromise()}function zx(){const t=indexedDB.open(z2,N$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ev,{keyPath:j2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ev)?e(r):(r.close(),await D$(),e(await zx()))})})}async function IO(t,e,n){const r=E0(t,!0).put({[j2]:e,value:n});return new Sm(r).toPromise()}async function I$(t,e){const n=E0(t,!1).get(e),r=await new Sm(n).toPromise();return r===void 0?null:r.value}function PO(t,e){const n=E0(t,!0).delete(e);return new Sm(n).toPromise()}const P$=800,L$=3;class V2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=x0._getInstance(R$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O$(),!this.activeServiceWorker)return;this.sender=new C$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zx();return await IO(e,Zy,"1"),await PO(e,Zy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IO(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>I$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PO(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=E0(i,!1).getAll();return new Sm(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V2.type="LOCAL";const z$=V2;new xm(3e4,6e4);function B2(t,e){return e?al(e):(Ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class wS extends M2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j$(t){return v$(t.auth,new wS(t),t.bypassAuthState)}function V$(t){const{auth:e,user:n}=t;return Ct(n,e,"internal-error"),y$(n,new wS(t),t.bypassAuthState)}async function B$(t){const{auth:e,user:n}=t;return Ct(n,e,"internal-error"),g$(n,new wS(t),t.bypassAuthState)}class U2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j$;case"linkViaPopup":case"linkViaRedirect":return B$;case"reauthViaPopup":case"reauthViaRedirect":return V$;default:ya(this.auth,"internal-error")}}resolve(e){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const U$=new xm(2e3,1e4);async function F$(t,e,n){if(To(t.app))return Promise.reject(Do(t,"operation-not-supported-in-this-environment"));const r=w0(t);Lq(t,e,vS);const i=B2(r,n);return new Du(r,"signInViaPopup",e,i).executeNotNull()}class Du extends U2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Du.currentPopupAction&&Du.currentPopupAction.cancel(),Du.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){bl(this.filter.length===1,"Popup operations only handle one event");const e=bS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Do(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Do(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Du.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Do(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U$.get())};e()}}Du.currentPopupAction=null;const H$="pendingRedirect",Cy=new Map;class q$ extends U2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cy.get(this.auth._key());if(!e){try{const r=await $$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cy.set(this.auth._key(),e)}return this.bypassAuthState||Cy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $$(t,e){const n=G$(e),r=K$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function W$(t,e){Cy.set(t._key(),e)}function K$(t){return al(t._redirectPersistence)}function G$(t){return ky(H$,t.config.apiKey,t.name)}async function Y$(t,e,n=!1){if(To(t.app))return Promise.reject(Vu(t));const r=w0(t),i=B2(r,e),a=await new q$(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const Q$=600*1e3;class X${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!F2(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Do(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q$&&this.cachedEventUids.clear(),this.cachedEventUids.has(LO(e))}saveEventToCache(e){this.cachedEventUids.add(LO(e)),this.lastProcessedEventTime=Date.now()}}function LO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function J$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F2(t);default:return!1}}async function Z$(t,e={}){return nh(t,"GET","/v1/projects",e)}const e7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t7=/^https?/;async function n7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z$(t);for(const n of e)try{if(r7(n))return}catch{}ya(t,"unauthorized-domain")}function r7(t){const e=Px(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!t7.test(n))return!1;if(e7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const i7=new xm(3e4,6e4);function zO(){const t=la().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s7(t){return new Promise((e,n)=>{function r(){zO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zO(),n(Do(t,"network-request-failed"))},timeout:i7.get()})}if(la().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(la().gapi?.load)r();else{const i=c$("iframefcb");return la()[i]=()=>{gapi.load?r():n(Do(t,"network-request-failed"))},a$(`${l$()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw Ay=null,e})}let Ay=null;function o7(t){return Ay=Ay||s7(t),Ay}const a7=new xm(5e3,15e3),l7="__/auth/iframe",c7="emulator/auth/iframe",u7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d7(t){const e=t.config;Ct(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hS(e,c7):`https://${t.config.authDomain}/${l7}`,r={apiKey:e.apiKey,appName:t.name,v:th},i=f7.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wm(r).slice(1)}`}async function h7(t){const e=await o7(t),n=la().gapi;return Ct(n,t,"internal-error"),e.open({where:document.body,url:d7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Do(t,"network-request-failed"),c=la().setTimeout(()=>{s(a)},a7.get());function u(){la().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})}))}const p7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m7=500,g7=600,y7="_blank",v7="http://localhost";class jO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b7(t,e,n,r=m7,i=g7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...p7,width:r.toString(),height:i.toString(),top:s,left:a},d=Ei().toLowerCase();n&&(c=E2(d)?y7:n),w2(d)&&(e=e||v7,u.scrollbars="yes");const h=Object.entries(u).reduce((v,[w,S])=>`${v}${w}=${S},`,"");if(Zq(d)&&c!=="_self")return w7(e||"",c),new jO(null);const m=window.open(e||"",c,h);Ct(m,t,"popup-blocked");try{m.focus()}catch{}return new jO(m)}function w7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const x7="__/auth/handler",E7="emulator/auth/handler",S7=encodeURIComponent("fac");async function VO(t,e,n,r,i,s){Ct(t.config.authDomain,t,"auth-domain-config-required"),Ct(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:th,eventId:i};if(e instanceof vS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",w8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Em){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${S7}=${encodeURIComponent(u)}`:"";return`${_7(t)}?${wm(c).slice(1)}${d}`}function _7({config:t}){return t.emulator?hS(t,E7):`https://${t.authDomain}/${x7}`}const w1="webStorageSupport";class T7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P2,this._completeRedirectFn=Y$,this._overrideRedirectResult=W$}async _openPopup(e,n,r,i){bl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await VO(e,n,r,Px(),i);return b7(e,s,bS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await VO(e,n,r,Px(),i);return A$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(bl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h7(e),r=new X$(e);return n.register("authEvent",i=>(Ct(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(w1,{type:w1},i=>{const s=i?.[0]?.[w1];s!==void 0&&n(!!s),ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C2()||x2()||gS()}}const k7=T7;var BO="@firebase/auth",UO="1.12.0";class C7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O7(t){Td(new Ju("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Ct(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A2(t)},d=new s$(r,i,s,u);return f$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Td(new Ju("auth-internal",e=>{const n=w0(e.getProvider("auth").getImmediate());return(r=>new C7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ic(BO,UO,A7(t)),Ic(BO,UO,"esm2020")}const M7=300,R7=i2("authIdTokenMaxAge")||M7;let FO=null;const N7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R7)return;const i=n?.token;FO!==i&&(FO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function D7(t=u2()){const e=uS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=u$(t,{popupRedirectResolver:k7,persistence:[z$,T$,P2]}),r=i2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=N7(s.toString());w$(n,a,()=>a(n.currentUser)),b$(n,c=>a(c))}}const i=n2("auth");return i&&d$(n,`http://${i}`),n}function I7(){return document.getElementsByTagName("head")?.[0]??document}o$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Do("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",I7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O7("Browser");var HO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Pc,H2;(function(){var t;function e(R,P){function V(){}V.prototype=P.prototype,R.F=P.prototype,R.prototype=new V,R.prototype.constructor=R,R.D=function(H,G,Q){for(var K=Array(arguments.length-2),je=2;je<arguments.length;je++)K[je-2]=arguments[je];return P.prototype[G].apply(H,K)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,P,V){V||(V=0);const H=Array(16);if(typeof P=="string")for(var G=0;G<16;++G)H[G]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(G=0;G<16;++G)H[G]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=R.g[0],V=R.g[1],G=R.g[2];let Q=R.g[3],K;K=P+(Q^V&(G^Q))+H[0]+3614090360&4294967295,P=V+(K<<7&4294967295|K>>>25),K=Q+(G^P&(V^G))+H[1]+3905402710&4294967295,Q=P+(K<<12&4294967295|K>>>20),K=G+(V^Q&(P^V))+H[2]+606105819&4294967295,G=Q+(K<<17&4294967295|K>>>15),K=V+(P^G&(Q^P))+H[3]+3250441966&4294967295,V=G+(K<<22&4294967295|K>>>10),K=P+(Q^V&(G^Q))+H[4]+4118548399&4294967295,P=V+(K<<7&4294967295|K>>>25),K=Q+(G^P&(V^G))+H[5]+1200080426&4294967295,Q=P+(K<<12&4294967295|K>>>20),K=G+(V^Q&(P^V))+H[6]+2821735955&4294967295,G=Q+(K<<17&4294967295|K>>>15),K=V+(P^G&(Q^P))+H[7]+4249261313&4294967295,V=G+(K<<22&4294967295|K>>>10),K=P+(Q^V&(G^Q))+H[8]+1770035416&4294967295,P=V+(K<<7&4294967295|K>>>25),K=Q+(G^P&(V^G))+H[9]+2336552879&4294967295,Q=P+(K<<12&4294967295|K>>>20),K=G+(V^Q&(P^V))+H[10]+4294925233&4294967295,G=Q+(K<<17&4294967295|K>>>15),K=V+(P^G&(Q^P))+H[11]+2304563134&4294967295,V=G+(K<<22&4294967295|K>>>10),K=P+(Q^V&(G^Q))+H[12]+1804603682&4294967295,P=V+(K<<7&4294967295|K>>>25),K=Q+(G^P&(V^G))+H[13]+4254626195&4294967295,Q=P+(K<<12&4294967295|K>>>20),K=G+(V^Q&(P^V))+H[14]+2792965006&4294967295,G=Q+(K<<17&4294967295|K>>>15),K=V+(P^G&(Q^P))+H[15]+1236535329&4294967295,V=G+(K<<22&4294967295|K>>>10),K=P+(G^Q&(V^G))+H[1]+4129170786&4294967295,P=V+(K<<5&4294967295|K>>>27),K=Q+(V^G&(P^V))+H[6]+3225465664&4294967295,Q=P+(K<<9&4294967295|K>>>23),K=G+(P^V&(Q^P))+H[11]+643717713&4294967295,G=Q+(K<<14&4294967295|K>>>18),K=V+(Q^P&(G^Q))+H[0]+3921069994&4294967295,V=G+(K<<20&4294967295|K>>>12),K=P+(G^Q&(V^G))+H[5]+3593408605&4294967295,P=V+(K<<5&4294967295|K>>>27),K=Q+(V^G&(P^V))+H[10]+38016083&4294967295,Q=P+(K<<9&4294967295|K>>>23),K=G+(P^V&(Q^P))+H[15]+3634488961&4294967295,G=Q+(K<<14&4294967295|K>>>18),K=V+(Q^P&(G^Q))+H[4]+3889429448&4294967295,V=G+(K<<20&4294967295|K>>>12),K=P+(G^Q&(V^G))+H[9]+568446438&4294967295,P=V+(K<<5&4294967295|K>>>27),K=Q+(V^G&(P^V))+H[14]+3275163606&4294967295,Q=P+(K<<9&4294967295|K>>>23),K=G+(P^V&(Q^P))+H[3]+4107603335&4294967295,G=Q+(K<<14&4294967295|K>>>18),K=V+(Q^P&(G^Q))+H[8]+1163531501&4294967295,V=G+(K<<20&4294967295|K>>>12),K=P+(G^Q&(V^G))+H[13]+2850285829&4294967295,P=V+(K<<5&4294967295|K>>>27),K=Q+(V^G&(P^V))+H[2]+4243563512&4294967295,Q=P+(K<<9&4294967295|K>>>23),K=G+(P^V&(Q^P))+H[7]+1735328473&4294967295,G=Q+(K<<14&4294967295|K>>>18),K=V+(Q^P&(G^Q))+H[12]+2368359562&4294967295,V=G+(K<<20&4294967295|K>>>12),K=P+(V^G^Q)+H[5]+4294588738&4294967295,P=V+(K<<4&4294967295|K>>>28),K=Q+(P^V^G)+H[8]+2272392833&4294967295,Q=P+(K<<11&4294967295|K>>>21),K=G+(Q^P^V)+H[11]+1839030562&4294967295,G=Q+(K<<16&4294967295|K>>>16),K=V+(G^Q^P)+H[14]+4259657740&4294967295,V=G+(K<<23&4294967295|K>>>9),K=P+(V^G^Q)+H[1]+2763975236&4294967295,P=V+(K<<4&4294967295|K>>>28),K=Q+(P^V^G)+H[4]+1272893353&4294967295,Q=P+(K<<11&4294967295|K>>>21),K=G+(Q^P^V)+H[7]+4139469664&4294967295,G=Q+(K<<16&4294967295|K>>>16),K=V+(G^Q^P)+H[10]+3200236656&4294967295,V=G+(K<<23&4294967295|K>>>9),K=P+(V^G^Q)+H[13]+681279174&4294967295,P=V+(K<<4&4294967295|K>>>28),K=Q+(P^V^G)+H[0]+3936430074&4294967295,Q=P+(K<<11&4294967295|K>>>21),K=G+(Q^P^V)+H[3]+3572445317&4294967295,G=Q+(K<<16&4294967295|K>>>16),K=V+(G^Q^P)+H[6]+76029189&4294967295,V=G+(K<<23&4294967295|K>>>9),K=P+(V^G^Q)+H[9]+3654602809&4294967295,P=V+(K<<4&4294967295|K>>>28),K=Q+(P^V^G)+H[12]+3873151461&4294967295,Q=P+(K<<11&4294967295|K>>>21),K=G+(Q^P^V)+H[15]+530742520&4294967295,G=Q+(K<<16&4294967295|K>>>16),K=V+(G^Q^P)+H[2]+3299628645&4294967295,V=G+(K<<23&4294967295|K>>>9),K=P+(G^(V|~Q))+H[0]+4096336452&4294967295,P=V+(K<<6&4294967295|K>>>26),K=Q+(V^(P|~G))+H[7]+1126891415&4294967295,Q=P+(K<<10&4294967295|K>>>22),K=G+(P^(Q|~V))+H[14]+2878612391&4294967295,G=Q+(K<<15&4294967295|K>>>17),K=V+(Q^(G|~P))+H[5]+4237533241&4294967295,V=G+(K<<21&4294967295|K>>>11),K=P+(G^(V|~Q))+H[12]+1700485571&4294967295,P=V+(K<<6&4294967295|K>>>26),K=Q+(V^(P|~G))+H[3]+2399980690&4294967295,Q=P+(K<<10&4294967295|K>>>22),K=G+(P^(Q|~V))+H[10]+4293915773&4294967295,G=Q+(K<<15&4294967295|K>>>17),K=V+(Q^(G|~P))+H[1]+2240044497&4294967295,V=G+(K<<21&4294967295|K>>>11),K=P+(G^(V|~Q))+H[8]+1873313359&4294967295,P=V+(K<<6&4294967295|K>>>26),K=Q+(V^(P|~G))+H[15]+4264355552&4294967295,Q=P+(K<<10&4294967295|K>>>22),K=G+(P^(Q|~V))+H[6]+2734768916&4294967295,G=Q+(K<<15&4294967295|K>>>17),K=V+(Q^(G|~P))+H[13]+1309151649&4294967295,V=G+(K<<21&4294967295|K>>>11),K=P+(G^(V|~Q))+H[4]+4149444226&4294967295,P=V+(K<<6&4294967295|K>>>26),K=Q+(V^(P|~G))+H[11]+3174756917&4294967295,Q=P+(K<<10&4294967295|K>>>22),K=G+(P^(Q|~V))+H[2]+718787259&4294967295,G=Q+(K<<15&4294967295|K>>>17),K=V+(Q^(G|~P))+H[9]+3951481745&4294967295,R.g[0]=R.g[0]+P&4294967295,R.g[1]=R.g[1]+(G+(K<<21&4294967295|K>>>11))&4294967295,R.g[2]=R.g[2]+G&4294967295,R.g[3]=R.g[3]+Q&4294967295}r.prototype.v=function(R,P){P===void 0&&(P=R.length);const V=P-this.blockSize,H=this.C;let G=this.h,Q=0;for(;Q<P;){if(G==0)for(;Q<=V;)i(this,R,Q),Q+=this.blockSize;if(typeof R=="string"){for(;Q<P;)if(H[G++]=R.charCodeAt(Q++),G==this.blockSize){i(this,H),G=0;break}}else for(;Q<P;)if(H[G++]=R[Q++],G==this.blockSize){i(this,H),G=0;break}}this.h=G,this.o+=P},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var P=1;P<R.length-8;++P)R[P]=0;P=this.o*8;for(var V=R.length-8;V<R.length;++V)R[V]=P&255,P/=256;for(this.v(R),R=Array(16),P=0,V=0;V<4;++V)for(let H=0;H<32;H+=8)R[P++]=this.g[V]>>>H&255;return R};function s(R,P){var V=c;return Object.prototype.hasOwnProperty.call(V,R)?V[R]:V[R]=P(R)}function a(R,P){this.h=P;const V=[];let H=!0;for(let G=R.length-1;G>=0;G--){const Q=R[G]|0;H&&Q==P||(V[G]=Q,H=!1)}this.g=V}var c={};function u(R){return-128<=R&&R<128?s(R,function(P){return new a([P|0],P<0?-1:0)}):new a([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return m;if(R<0)return _(d(-R));const P=[];let V=1;for(let H=0;R>=V;H++)P[H]=R/V|0,V*=4294967296;return new a(P,0)}function h(R,P){if(R.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(R.charAt(0)=="-")return _(h(R.substring(1),P));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=d(Math.pow(P,8));let H=m;for(let Q=0;Q<R.length;Q+=8){var G=Math.min(8,R.length-Q);const K=parseInt(R.substring(Q,Q+G),P);G<8?(G=d(Math.pow(P,G)),H=H.j(G).add(d(K))):(H=H.j(V),H=H.add(d(K)))}return H}var m=u(0),v=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-_(this).m();let R=0,P=1;for(let V=0;V<this.g.length;V++){const H=this.i(V);R+=(H>=0?H:4294967296+H)*P,P*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(k(this))return"-"+_(this).toString(R);const P=d(Math.pow(R,6));var V=this;let H="";for(;;){const G=L(V,P).g;V=O(V,G.j(P));let Q=((V.g.length>0?V.g[0]:V.h)>>>0).toString(R);if(V=G,S(V))return Q+H;for(;Q.length<6;)Q="0"+Q;H=Q+H}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(let P=0;P<R.g.length;P++)if(R.g[P]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=O(this,R),k(R)?-1:S(R)?0:1};function _(R){const P=R.g.length,V=[];for(let H=0;H<P;H++)V[H]=~R.g[H];return new a(V,~R.h).add(v)}t.abs=function(){return k(this)?_(this):this},t.add=function(R){const P=Math.max(this.g.length,R.g.length),V=[];let H=0;for(let G=0;G<=P;G++){let Q=H+(this.i(G)&65535)+(R.i(G)&65535),K=(Q>>>16)+(this.i(G)>>>16)+(R.i(G)>>>16);H=K>>>16,Q&=65535,K&=65535,V[G]=K<<16|Q}return new a(V,V[V.length-1]&-2147483648?-1:0)};function O(R,P){return R.add(_(P))}t.j=function(R){if(S(this)||S(R))return m;if(k(this))return k(R)?_(this).j(_(R)):_(_(this).j(R));if(k(R))return _(this.j(_(R)));if(this.l(w)<0&&R.l(w)<0)return d(this.m()*R.m());const P=this.g.length+R.g.length,V=[];for(var H=0;H<2*P;H++)V[H]=0;for(H=0;H<this.g.length;H++)for(let G=0;G<R.g.length;G++){const Q=this.i(H)>>>16,K=this.i(H)&65535,je=R.i(G)>>>16,Re=R.i(G)&65535;V[2*H+2*G]+=K*Re,B(V,2*H+2*G),V[2*H+2*G+1]+=Q*Re,B(V,2*H+2*G+1),V[2*H+2*G+1]+=K*je,B(V,2*H+2*G+1),V[2*H+2*G+2]+=Q*je,B(V,2*H+2*G+2)}for(R=0;R<P;R++)V[R]=V[2*R+1]<<16|V[2*R];for(R=P;R<2*P;R++)V[R]=0;return new a(V,0)};function B(R,P){for(;(R[P]&65535)!=R[P];)R[P+1]+=R[P]>>>16,R[P]&=65535,P++}function W(R,P){this.g=R,this.h=P}function L(R,P){if(S(P))throw Error("division by zero");if(S(R))return new W(m,m);if(k(R))return P=L(_(R),P),new W(_(P.g),_(P.h));if(k(P))return P=L(R,_(P)),new W(_(P.g),P.h);if(R.g.length>30){if(k(R)||k(P))throw Error("slowDivide_ only works with positive integers.");for(var V=v,H=P;H.l(R)<=0;)V=q(V),H=q(H);var G=U(V,1),Q=U(H,1);for(H=U(H,2),V=U(V,2);!S(H);){var K=Q.add(H);K.l(R)<=0&&(G=G.add(V),Q=K),H=U(H,1),V=U(V,1)}return P=O(R,G.j(P)),new W(G,P)}for(G=m;R.l(P)>=0;){for(V=Math.max(1,Math.floor(R.m()/P.m())),H=Math.ceil(Math.log(V)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),Q=d(V),K=Q.j(P);k(K)||K.l(R)>0;)V-=H,Q=d(V),K=Q.j(P);S(Q)&&(Q=v),G=G.add(Q),R=O(R,K)}return new W(G,R)}t.B=function(R){return L(this,R).h},t.and=function(R){const P=Math.max(this.g.length,R.g.length),V=[];for(let H=0;H<P;H++)V[H]=this.i(H)&R.i(H);return new a(V,this.h&R.h)},t.or=function(R){const P=Math.max(this.g.length,R.g.length),V=[];for(let H=0;H<P;H++)V[H]=this.i(H)|R.i(H);return new a(V,this.h|R.h)},t.xor=function(R){const P=Math.max(this.g.length,R.g.length),V=[];for(let H=0;H<P;H++)V[H]=this.i(H)^R.i(H);return new a(V,this.h^R.h)};function q(R){const P=R.g.length+1,V=[];for(let H=0;H<P;H++)V[H]=R.i(H)<<1|R.i(H-1)>>>31;return new a(V,R.h)}function U(R,P){const V=P>>5;P%=32;const H=R.g.length-V,G=[];for(let Q=0;Q<H;Q++)G[Q]=P>0?R.i(Q+V)>>>P|R.i(Q+V+1)<<32-P:R.i(Q+V);return new a(G,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,H2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Pc=a}).apply(typeof HO<"u"?HO:typeof self<"u"?self:typeof window<"u"?window:{});var Jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var q2,op,$2,Oy,jx,W2,K2,G2;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jg=="object"&&Jg];for(var C=0;C<g.length;++C){var D=g[C];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(g,C){if(C)e:{var D=r;g=g.split(".");for(var $=0;$<g.length-1;$++){var he=g[$];if(!(he in D))break e;D=D[he]}g=g[g.length-1],$=D[g],C=C($),C!=$&&C!=null&&e(D,g,{configurable:!0,writable:!0,value:C})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(C){var D=[],$;for($ in C)Object.prototype.hasOwnProperty.call(C,$)&&D.push([$,C[$]]);return D}});var s=s||{},a=this||self;function c(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function u(g,C,D){return g.call.apply(g.bind,arguments)}function d(g,C,D){return d=u,d.apply(null,arguments)}function h(g,C){var D=Array.prototype.slice.call(arguments,1);return function(){var $=D.slice();return $.push.apply($,arguments),g.apply(this,$)}}function m(g,C){function D(){}D.prototype=C.prototype,g.Z=C.prototype,g.prototype=new D,g.prototype.constructor=g,g.Ob=function($,he,xe){for(var Ke=Array(arguments.length-2),At=2;At<arguments.length;At++)Ke[At-2]=arguments[At];return C.prototype[he].apply($,Ke)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const C=g.length;if(C>0){const D=Array(C);for(let $=0;$<C;$++)D[$]=g[$];return D}return[]}function S(g,C){for(let $=1;$<arguments.length;$++){const he=arguments[$];var D=typeof he;if(D=D!="object"?D:he?Array.isArray(he)?"array":D:"null",D=="array"||D=="object"&&typeof he.length=="number"){D=g.length||0;const xe=he.length||0;g.length=D+xe;for(let Ke=0;Ke<xe;Ke++)g[D+Ke]=he[Ke]}else g.push(he)}}class k{constructor(C,D){this.i=C,this.j=D,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function _(g){a.setTimeout(()=>{throw g},0)}function O(){var g=R;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class B{constructor(){this.h=this.g=null}add(C,D){const $=W.get();$.set(C,D),this.h?this.h.next=$:this.g=$,this.h=$}}var W=new k(()=>new L,g=>g.reset());class L{constructor(){this.next=this.g=this.h=null}set(C,D){this.h=C,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let q,U=!1,R=new B,P=()=>{const g=Promise.resolve(void 0);q=()=>{g.then(V)}};function V(){for(var g;g=O();){try{g.h.call(g.g)}catch(D){_(D)}var C=W;C.j(g),C.h<100&&(C.h++,g.next=C.g,C.g=g)}U=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const D=()=>{};a.addEventListener("test",D,C),a.removeEventListener("test",D,C)}catch{}return g})();function K(g){return/^[\s\xa0]*$/.test(g)}function je(g,C){G.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,C)}m(je,G),je.prototype.init=function(g,C){const D=this.type=g.type,$=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget,C||(D=="mouseover"?C=g.fromElement:D=="mouseout"&&(C=g.toElement)),this.relatedTarget=C,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),oe=0;function Ee(g,C,D,$,he){this.listener=g,this.proxy=null,this.src=C,this.type=D,this.capture=!!$,this.ha=he,this.key=++oe,this.da=this.fa=!1}function ve(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Qe(g,C,D){for(const $ in g)C.call(D,g[$],$,g)}function Ze(g,C){for(const D in g)C.call(void 0,g[D],D,g)}function J(g){const C={};for(const D in g)C[D]=g[D];return C}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(g,C){let D,$;for(let he=1;he<arguments.length;he++){$=arguments[he];for(D in $)g[D]=$[D];for(let xe=0;xe<Z.length;xe++)D=Z[xe],Object.prototype.hasOwnProperty.call($,D)&&(g[D]=$[D])}}function Te(g){this.src=g,this.g={},this.h=0}Te.prototype.add=function(g,C,D,$,he){const xe=g.toString();g=this.g[xe],g||(g=this.g[xe]=[],this.h++);const Ke=Ue(g,C,$,he);return Ke>-1?(C=g[Ke],D||(C.fa=!1)):(C=new Ee(C,this.src,xe,!!$,he),C.fa=D,g.push(C)),C};function Oe(g,C){const D=C.type;if(D in g.g){var $=g.g[D],he=Array.prototype.indexOf.call($,C,void 0),xe;(xe=he>=0)&&Array.prototype.splice.call($,he,1),xe&&(ve(C),g.g[D].length==0&&(delete g.g[D],g.h--))}}function Ue(g,C,D,$){for(let he=0;he<g.length;++he){const xe=g[he];if(!xe.da&&xe.listener==C&&xe.capture==!!D&&xe.ha==$)return he}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),bt={};function ze(g,C,D,$,he){if(Array.isArray(C)){for(let xe=0;xe<C.length;xe++)ze(g,C[xe],D,$,he);return null}return D=Li(D),g&&g[Re]?g.J(C,D,c($)?!!$.capture:!1,he):tn(g,C,D,!1,$,he)}function tn(g,C,D,$,he,xe){if(!C)throw Error("Invalid event type");const Ke=c(he)?!!he.capture:!!he;let At=Xr(g);if(At||(g[$e]=At=new Te(g)),D=At.add(C,D,$,Ke,xe),D.proxy)return D;if($=Bn(),D.proxy=$,$.src=g,$.listener=D,g.addEventListener)Q||(he=Ke),he===void 0&&(he=!1),g.addEventListener(C.toString(),$,he);else if(g.attachEvent)g.attachEvent(Ir(C.toString()),$);else if(g.addListener&&g.removeListener)g.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Bn(){function g(D){return C.call(g.src,g.listener,D)}const C=ar;return g}function Tt(g,C,D,$,he){if(Array.isArray(C))for(var xe=0;xe<C.length;xe++)Tt(g,C[xe],D,$,he);else $=c($)?!!$.capture:!!$,D=Li(D),g&&g[Re]?(g=g.i,xe=String(C).toString(),xe in g.g&&(C=g.g[xe],D=Ue(C,D,$,he),D>-1&&(ve(C[D]),Array.prototype.splice.call(C,D,1),C.length==0&&(delete g.g[xe],g.h--)))):g&&(g=Xr(g))&&(C=g.g[C.toString()],g=-1,C&&(g=Ue(C,D,$,he)),(D=g>-1?C[g]:null)&&gr(D))}function gr(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[Re])Oe(C.i,g);else{var D=g.type,$=g.proxy;C.removeEventListener?C.removeEventListener(D,$,g.capture):C.detachEvent?C.detachEvent(Ir(D),$):C.addListener&&C.removeListener&&C.removeListener($),(D=Xr(C))?(Oe(D,g),D.h==0&&(D.src=null,C[$e]=null)):ve(g)}}}function Ir(g){return g in bt?bt[g]:bt[g]="on"+g}function ar(g,C){if(g.da)g=!0;else{C=new je(C,this);const D=g.listener,$=g.ha||g.src;g.fa&&gr(g),g=D.call($,C)}return g}function Xr(g){return g=g[$e],g instanceof Te?g:null}var Ti="__closure_events_fn_"+(Math.random()*1e9>>>0);function Li(g){return typeof g=="function"?g:(g[Ti]||(g[Ti]=function(C){return g.handleEvent(C)}),g[Ti])}function hn(){H.call(this),this.i=new Te(this),this.M=this,this.G=null}m(hn,H),hn.prototype[Re]=!0,hn.prototype.removeEventListener=function(g,C,D,$){Tt(this,g,C,D,$)};function Xt(g,C){var D,$=g.G;if($)for(D=[];$;$=$.G)D.push($);if(g=g.M,$=C.type||C,typeof C=="string")C=new G(C,g);else if(C instanceof G)C.target=C.target||g;else{var he=C;C=new G($,g),ye(C,he)}he=!0;let xe,Ke;if(D)for(Ke=D.length-1;Ke>=0;Ke--)xe=C.g=D[Ke],he=un(xe,$,!0,C)&&he;if(xe=C.g=g,he=un(xe,$,!0,C)&&he,he=un(xe,$,!1,C)&&he,D)for(Ke=0;Ke<D.length;Ke++)xe=C.g=D[Ke],he=un(xe,$,!1,C)&&he}hn.prototype.N=function(){if(hn.Z.N.call(this),this.i){var g=this.i;for(const C in g.g){const D=g.g[C];for(let $=0;$<D.length;$++)ve(D[$]);delete g.g[C],g.h--}}this.G=null},hn.prototype.J=function(g,C,D,$){return this.i.add(String(g),C,!1,D,$)},hn.prototype.K=function(g,C,D,$){return this.i.add(String(g),C,!0,D,$)};function un(g,C,D,$){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();let he=!0;for(let xe=0;xe<C.length;++xe){const Ke=C[xe];if(Ke&&!Ke.da&&Ke.capture==D){const At=Ke.listener,Yn=Ke.ha||Ke.src;Ke.fa&&Oe(g.i,Ke),he=At.call(Yn,$)!==!1&&he}}return he&&!$.defaultPrevented}function zi(g,C){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:a.setTimeout(g,C||0)}function lr(g){g.g=zi(()=>{g.g=null,g.i&&(g.i=!1,lr(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class xn extends H{constructor(C,D){super(),this.m=C,this.l=D,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:lr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(g){H.call(this),this.h=g,this.g={}}m(er,H);var yr=[];function vr(g){Qe(g.g,function(C,D){this.g.hasOwnProperty(D)&&gr(C)},g),g.g={}}er.prototype.N=function(){er.Z.N.call(this),vr(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=a.JSON.stringify,cs=a.JSON.parse,Is=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function us(){}function fi(){}var br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){G.call(this,"d")}m(Se,G);function Ye(){G.call(this,"c")}m(Ye,G);var Ce={},Nt=null;function wt(){return Nt=Nt||new hn}Ce.Ia="serverreachability";function rt(g){G.call(this,Ce.Ia,g)}m(rt,G);function Ae(g){const C=wt();Xt(C,new rt(C))}Ce.STAT_EVENT="statevent";function st(g,C){G.call(this,Ce.STAT_EVENT,g),this.stat=C}m(st,G);function ut(g){const C=wt();Xt(C,new st(C,g))}Ce.Ja="timingevent";function $t(g,C){G.call(this,Ce.Ja,g),this.size=C}m($t,G);function yt(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},C)}function tr(){this.g=!0}tr.prototype.ua=function(){this.g=!1};function ji(g,C,D,$,he,xe){g.info(function(){if(g.g)if(xe){var Ke="",At=xe.split("&");for(let Jt=0;Jt<At.length;Jt++){var Yn=At[Jt].split("=");if(Yn.length>1){const gn=Yn[0];Yn=Yn[1];const Yi=gn.split("_");Ke=Yi.length>=2&&Yi[1]=="type"?Ke+(gn+"="+Yn+"&"):Ke+(gn+"=redacted&")}}}else Ke=null;else Ke=xe;return"XMLHTTP REQ ("+$+") [attempt "+he+"]: "+C+`
`+D+`
`+Ke})}function Bo(g,C,D,$,he,xe,Ke){g.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+he+"]: "+C+`
`+D+`
`+xe+" "+Ke})}function Nn(g,C,D,$){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+su(g,D)+($?" "+$:"")})}function qn(g,C){g.info(function(){return"TIMEOUT: "+C})}tr.prototype.info=function(){};function su(g,C){if(!g.g)return C;if(!C)return null;try{const xe=JSON.parse(C);if(xe){for(g=0;g<xe.length;g++)if(Array.isArray(xe[g])){var D=xe[g];if(!(D.length<2)){var $=D[1];if(Array.isArray($)&&!($.length<1)){var he=$[0];if(he!="noop"&&he!="stop"&&he!="close")for(let Ke=1;Ke<$.length;Ke++)$[Ke]=""}}}}return Pr(xe)}catch{return C}}var Ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Un;function ka(){}m(ka,us),ka.prototype.g=function(){return new XMLHttpRequest},Un=new ka;function Vi(g){return encodeURIComponent(String(g))}function Ca(g){var C=1;g=g.split(":");const D=[];for(;C>0&&g.length;)D.push(g.shift()),C--;return g.length&&D.push(g.join(":")),D}function di(g,C,D,$){this.j=g,this.i=C,this.l=D,this.S=$||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fs}function fs(){this.i=null,this.g="",this.h=!1}var pn={},Dn={};function Lr(g,C,D){g.M=1,g.A=Ho(Wn(C)),g.u=D,g.R=!0,po(g,null)}function po(g,C){g.F=Date.now(),Ur(g),g.B=Wn(g.A);var D=g.B,$=g.S;Array.isArray($)||($=[String($)]),Rl(D.i,"t",$),g.C=0,D=g.j.L,g.h=new fs,g.g=fr(g.j,D?C:null,!g.u),g.P>0&&(g.O=new xn(d(g.Y,g,g.g),g.P)),C=g.V,D=g.g,$=g.ba;var he="readystatechange";Array.isArray(he)||(he&&(yr[0]=he.toString()),he=yr);for(let xe=0;xe<he.length;xe++){const Ke=ze(D,he[xe],$||C.handleEvent,!1,C.h||C);if(!Ke)break;C.g[Ke.key]=Ke}C=g.J?J(g.J):{},g.u?(g.v||(g.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,C)):(g.v="GET",g.g.ea(g.B,g.v,null,C)),Ae(),ji(g.i,g.v,g.B,g.l,g.S,g.u)}di.prototype.ba=function(g){g=g.target;const C=this.O;C&&bs(g)==3?C.j():this.Y(g)},di.prototype.Y=function(g){try{if(g==this.g)e:{const At=bs(this.g),Yn=this.g.ya(),Jt=this.g.ca();if(!(At<3)&&(At!=3||this.g&&(this.h.h||this.g.la()||Gn(this.g)))){this.K||At!=4||Yn==7||(Yn==8||Jt<=0?Ae(3):Ae(2)),Bi(this);var C=this.g.ca();this.X=C;var D=hh(this);if(this.o=C==200,Bo(this.i,this.v,this.B,this.l,this.S,At,C),this.o){if(this.U&&!this.L){t:{if(this.g){var $,he=this.g;if(($=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K($)){var xe=$;break t}}xe=null}if(g=xe)Nn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wr(this,g);else{this.o=!1,this.m=3,ut(12),cr(this),nn(this);break e}}if(this.R){g=!0;let gn;for(;!this.K&&this.C<D.length;)if(gn=ou(this,D),gn==Dn){At==4&&(this.m=4,ut(14),g=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==pn){this.m=4,ut(15),Nn(this.i,this.l,D,"[Invalid Chunk]"),g=!1;break}else Nn(this.i,this.l,gn,null),wr(this,gn);if(ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||D.length!=0||this.h.h||(this.m=1,ut(16),g=!1),this.o=this.o&&g,!g)Nn(this.i,this.l,D,"[Invalid Chunked Response]"),cr(this),nn(this);else if(D.length>0&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.aa&&!Ke.P&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),$o(Ke),Ke.P=!0,ut(11))}}else Nn(this.i,this.l,D,null),wr(this,D);At==4&&cr(this),this.o&&!this.K&&(At==4?xo(this.j,this):(this.o=!1,Ur(this)))}else bo(this.g),C==400&&D.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),cr(this),nn(this)}}}catch{}};function hh(g){if(!ds(g))return g.g.la();const C=Gn(g.g);if(C==="")return"";let D="";const $=C.length,he=bs(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return cr(g),nn(g),"";g.h.i=new a.TextDecoder}for(let xe=0;xe<$;xe++)g.h.h=!0,D+=g.h.i.decode(C[xe],{stream:!(he&&xe==$-1)});return C.length=0,g.h.g+=D,g.C=0,g.h.g}function ds(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function ou(g,C){var D=g.C,$=C.indexOf(`
`,D);return $==-1?Dn:(D=Number(C.substring(D,$)),isNaN(D)?pn:($+=1,$+D>C.length?Dn:(C=C.slice($,$+D),g.C=$+D,C)))}di.prototype.cancel=function(){this.K=!0,cr(this)};function Ur(g){g.T=Date.now()+g.H,Aa(g,g.H)}function Aa(g,C){if(g.D!=null)throw Error("WatchDog timer not null");g.D=yt(d(g.aa,g),C)}function Bi(g){g.D&&(a.clearTimeout(g.D),g.D=null)}di.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(qn(this.i,this.B),this.M!=2&&(Ae(),ut(17)),cr(this),this.m=2,nn(this)):Aa(this,this.T-g)};function nn(g){g.j.I==0||g.K||xo(g.j,g)}function cr(g){Bi(g);var C=g.O;C&&typeof C.dispose=="function"&&C.dispose(),g.O=null,vr(g.V),g.g&&(C=g.g,g.g=null,C.abort(),C.dispose())}function wr(g,C){try{var D=g.j;if(D.I!=0&&(D.g==g||Fi(D.h,g))){if(!g.L&&Fi(D.h,g)&&D.I==3){try{var $=D.Ba.g.parse(C)}catch{$=null}if(Array.isArray($)&&$.length==3){var he=$;if(he[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<g.F)Pl(D),Bs(D);else break e;Fs(D),ut(18)}}else D.xa=he[1],0<D.xa-D.K&&he[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=yt(d(D.Va,D),6e3));Ui(D.h)<=1&&D.ta&&(D.ta=void 0)}else Ki(D,11)}else if((g.L||D.g==g)&&Pl(D),!K(C))for(he=D.Ba.g.parse(C),C=0;C<he.length;C++){let Jt=he[C];const gn=Jt[0];if(!(gn<=D.K))if(D.K=gn,Jt=Jt[1],D.I==2)if(Jt[0]=="c"){D.M=Jt[1],D.ba=Jt[2];const Yi=Jt[3];Yi!=null&&(D.ka=Yi,D.j.info("VER="+D.ka));const Qi=Jt[4];Qi!=null&&(D.za=Qi,D.j.info("SVER="+D.za));const Ai=Jt[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&($=1.5*Ai,D.O=$,D.j.info("backChannelRequestTimeoutMs_="+$)),$=D;const xs=g.g;if(xs){const Ko=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var xe=$.h;xe.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(hs(xe,xe.h),xe.h=null))}if($.G){const Vl=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&($.wa=Vl,on($.J,$.G,Vl))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-g.F,D.j.info("Handshake RTT: "+D.T+"ms")),$=D;var Ke=g;if($.na=jl($,$.L?$.ba:null,$.W),Ke.L){Cl($.h,Ke);var At=Ke,Yn=$.O;Yn&&(At.H=Yn),At.D&&(Bi(At),Ur(At)),$.g=Ke}else Na($);D.i.length>0&&Us(D)}else Jt[0]!="stop"&&Jt[0]!="close"||Ki(D,7);else D.I==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Ki(D,7):qo(D):Jt[0]!="noop"&&D.l&&D.l.qa(Jt),D.A=0)}}Ae(4)}catch{}}var $n=class{constructor(g,C){this.g=g,this.map=C}};function Ls(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ui(g){return g.h?1:g.g?g.g.size:0}function Fi(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function hs(g,C){g.g?g.g.add(C):g.h=C}function Cl(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}Ls.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Fo(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const D of g.g.values())C=C.concat(D.G);return C}return w(g.i)}var au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dt(g,C){if(g){g=g.split("&");for(let D=0;D<g.length;D++){const $=g[D].indexOf("=");let he,xe=null;$>=0?(he=g[D].substring(0,$),xe=g[D].substring($+1)):he=g[D],C(he,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function hi(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;g instanceof hi?(this.l=g.l,Kn(this,g.j),this.o=g.o,this.g=g.g,Hi(this,g.u),this.h=g.h,Al(this,bf(g.i)),this.m=g.m):g&&(C=String(g).match(au))?(this.l=!1,Kn(this,C[1]||"",!0),this.o=Ft(C[2]||""),this.g=Ft(C[3]||"",!0),Hi(this,C[4]),this.h=Ft(C[5]||"",!0),Al(this,C[6]||"",!0),this.m=Ft(C[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}hi.prototype.toString=function(){const g=[];var C=this.j;C&&g.push(ps(C,ms,!0),":");var D=this.g;return(D||C=="file")&&(g.push("//"),(C=this.o)&&g.push(ps(C,ms,!0),"@"),g.push(Vi(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&g.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&g.push("/"),g.push(ps(D,D.charAt(0)=="/"?Oa:Ol,!0))),(D=this.i.toString())&&g.push("?",D),(D=this.m)&&g.push("#",ps(D,lu)),g.join("")},hi.prototype.resolve=function(g){const C=Wn(this);let D=!!g.j;D?Kn(C,g.j):D=!!g.o,D?C.o=g.o:D=!!g.g,D?C.g=g.g:D=g.u!=null;var $=g.h;if(D)Hi(C,g.u);else if(D=!!g.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var he=C.h.lastIndexOf("/");he!=-1&&($=C.h.slice(0,he+1)+$)}if(he=$,he==".."||he==".")$="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){$=he.lastIndexOf("/",0)==0,he=he.split("/");const xe=[];for(let Ke=0;Ke<he.length;){const At=he[Ke++];At=="."?$&&Ke==he.length&&xe.push(""):At==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),$&&Ke==he.length&&xe.push("")):(xe.push(At),$=!0)}$=xe.join("/")}else $=he}return D?C.h=$:D=g.i.toString()!=="",D?Al(C,bf(g.i)):D=!!g.m,D&&(C.m=g.m),C};function Wn(g){return new hi(g)}function Kn(g,C,D){g.j=D?Ft(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Hi(g,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);g.u=C}else g.u=null}function Al(g,C,D){C instanceof ys?(g.i=C,vs(g.i,g.l)):(D||(C=ps(C,gs)),g.i=new ys(C,g.l))}function on(g,C,D){g.i.set(C,D)}function Ho(g){return on(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Ft(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ps(g,C,D){return typeof g=="string"?(g=encodeURI(g).replace(C,xr),D&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function xr(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ms=/[#\/\?@]/g,Ol=/[#\?:]/g,Oa=/[#\?]/g,gs=/[#\?@]/g,lu=/#/g;function ys(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function Jr(g){g.g||(g.g=new Map,g.h=0,g.i&&Dt(g.i,function(C,D){g.add(decodeURIComponent(C.replace(/\+/g," ")),D)}))}t=ys.prototype,t.add=function(g,C){Jr(this),this.i=null,g=nr(this,g);let D=this.g.get(g);return D||this.g.set(g,D=[]),D.push(C),this.h+=1,this};function vf(g,C){Jr(g),C=nr(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function Ut(g,C){return Jr(g),C=nr(g,C),g.g.has(C)}t.forEach=function(g,C){Jr(this),this.g.forEach(function(D,$){D.forEach(function(he){g.call(C,he,$,this)},this)},this)};function Ml(g,C){Jr(g);let D=[];if(typeof C=="string")Ut(g,C)&&(D=D.concat(g.g.get(nr(g,C))));else for(g=Array.from(g.g.values()),C=0;C<g.length;C++)D=D.concat(g[C]);return D}t.set=function(g,C){return Jr(this),this.i=null,g=nr(this,g),Ut(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=Ml(this,g),g.length>0?String(g[0]):C):C};function Rl(g,C,D){vf(g,C),D.length>0&&(g.i=null,g.g.set(nr(g,C),w(D)),g.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(let $=0;$<C.length;$++){var D=C[$];const he=Vi(D);D=Ml(this,D);for(let xe=0;xe<D.length;xe++){let Ke=he;D[xe]!==""&&(Ke+="="+Vi(D[xe])),g.push(Ke)}}return this.i=g.join("&")};function bf(g){const C=new ys;return C.i=g.i,g.g&&(C.g=new Map(g.g),C.h=g.h),C}function nr(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function vs(g,C){C&&!g.j&&(Jr(g),g.i=null,g.g.forEach(function(D,$){const he=$.toLowerCase();$!=he&&(vf(this,$),Rl(this,he,D))},g)),g.j=C}function pi(g,C){const D=new tr;if(a.Image){const $=new Image;$.onload=h(ki,D,"TestLoadImage: loaded",!0,C,$),$.onerror=h(ki,D,"TestLoadImage: error",!1,C,$),$.onabort=h(ki,D,"TestLoadImage: abort",!1,C,$),$.ontimeout=h(ki,D,"TestLoadImage: timeout",!1,C,$),a.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=g}else C(!1)}function qi(g,C){const D=new tr,$=new AbortController,he=setTimeout(()=>{$.abort(),ki(D,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:$.signal}).then(xe=>{clearTimeout(he),xe.ok?ki(D,"TestPingServer: ok",!0,C):ki(D,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(he),ki(D,"TestPingServer: error",!1,C)})}function ki(g,C,D,$,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),$(D)}catch{}}function mo(){this.g=new Is}function mn(g){this.i=g.Sb||null,this.h=g.ab||!1}m(mn,us),mn.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(g,C){hn.call(this),this.H=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Fr,hn),t=Fr.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=C,this.readyState=1,Ci(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(C.body=g),(this.H||a).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zs(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function zs(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?$i(this):Ci(this),this.readyState==3&&zs(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,$i(this))},t.Na=function(g){this.g&&(this.response=g,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ci(g)}t.setRequestHeader=function(g,C){this.A.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var D=C.next();!D.done;)D=D.value,g.push(D[0]+": "+D[1]),D=C.next();return g.join(`\r
`)};function Ci(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ur(g){let C="";return Qe(g,function(D,$){C+=$,C+=":",C+=D,C+=`\r
`}),C}function Ma(g,C,D){e:{for($ in D){var $=!1;break e}$=!0}$||(D=ur(D),typeof g=="string"?D!=null&&Vi(D):on(g,C,D))}function Vt(g){hn.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Vt,hn);var Wi=/^https?$/i,Nl=["POST","PUT"];t=Vt.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,C,D,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Un.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(xe){go(this,xe);return}if(g=D||"",D=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var he in $)D.set(he,$[he]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const xe of $.keys())D.set(xe,$.get(xe));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(D.keys()).find(xe=>xe.toLowerCase()=="content-type"),he=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Nl,C,void 0)>=0)||$||he||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Ke]of D)this.g.setRequestHeader(xe,Ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(xe){go(this,xe)}};function go(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.o=5,yo(g),js(g)}function yo(g){g.A||(g.A=!0,Xt(g,"complete"),Xt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Xt(this,"complete"),Xt(this,"abort"),js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vo(this):this.Xa())},t.Xa=function(){vo(this)};function vo(g){if(g.h&&typeof s<"u"){if(g.v&&bs(g)==4)setTimeout(g.Ca.bind(g),0);else if(Xt(g,"readystatechange"),bs(g)==4){g.h=!1;try{const xe=g.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var D;if(!(D=C)){var $;if($=xe===0){let Ke=String(g.D).match(au)[1]||null;!Ke&&a.self&&a.self.location&&(Ke=a.self.location.protocol.slice(0,-1)),$=!Wi.test(Ke?Ke.toLowerCase():"")}D=$}if(D)Xt(g,"complete"),Xt(g,"success");else{g.o=6;try{var he=bs(g)>2?g.g.statusText:""}catch{he=""}g.l=he+" ["+g.ca()+"]",yo(g)}}finally{js(g)}}}}function js(g,C){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const D=g.g;g.g=null,C||Xt(g,"ready");try{D.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bs(g){return g.g?g.g.readyState:0}t.ca=function(){try{return bs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),cs(C)}};function Gn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function bo(g){const C={};g=(g.g&&bs(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<g.length;$++){if(K(g[$]))continue;var D=Ca(g[$]);const he=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const xe=C[he]||[];C[he]=xe,xe.push(D)}Ze(C,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(g,C,D){return D&&D.internalChannelParams&&D.internalChannelParams[g]||C}function ws(g){this.za=0,this.i=[],this.j=new tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vs("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vs("baseRetryDelayMs",5e3,g),this.Za=Vs("retryDelaySeedMs",1e4,g),this.Ta=Vs("forwardChannelMaxRetries",2,g),this.va=Vs("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Ls(g&&g.concurrentRequestLimit),this.Ba=new mo,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ws.prototype,t.ka=8,t.I=1,t.connect=function(g,C,D,$){ut(0),this.W=g,this.H=C||{},D&&$!==void 0&&(this.H.OSID=D,this.H.OAID=$),this.F=this.X,this.J=jl(this,null,this.W),Us(this)};function qo(g){if(Dl(g),g.I==3){var C=g.V++,D=Wn(g.J);if(on(D,"SID",g.M),on(D,"RID",C),on(D,"TYPE","terminate"),wo(g,D),C=new di(g,g.j,C),C.M=2,C.A=Ho(Wn(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(C.A.toString(),"")}catch{}!D&&a.Image&&(new Image().src=C.A,D=!0),D||(C.g=fr(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Ur(C)}zl(g)}function Bs(g){g.g&&($o(g),g.g.cancel(),g.g=null)}function Dl(g){Bs(g),g.v&&(a.clearTimeout(g.v),g.v=null),Pl(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function Us(g){if(!Uo(g.h)&&!g.m){g.m=!0;var C=g.Ea;q||P(),U||(q(),U=!0),R.add(C,g),g.D=0}}function Il(g,C){return Ui(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=C.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=yt(d(g.Ea,g,C),Ll(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const he=new di(this,this.j,g);let xe=this.o;if(this.U&&(xe?(xe=J(xe),ye(xe,this.U)):xe=this.U),this.u!==null||this.R||(he.J=xe,xe=null),this.S)e:{for(var C=0,D=0;D<this.i.length;D++){t:{var $=this.i[D];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(C+=$,C>4096){C=D;break e}if(C===4096||D===this.i.length-1){C=D+1;break e}}C=1e3}else C=1e3;C=cu(this,he,C),D=Wn(this.J),on(D,"RID",g),on(D,"CVER",22),this.G&&on(D,"X-HTTP-Session-Id",this.G),wo(this,D),xe&&(this.R?C="headers="+Vi(ur(xe))+"&"+C:this.u&&Ma(D,this.u,xe)),hs(this.h,he),this.Ra&&on(D,"TYPE","init"),this.S?(on(D,"$req",C),on(D,"SID","null"),he.U=!0,Lr(he,D,null)):Lr(he,D,C),this.I=2}}else this.I==3&&(g?Ra(this,g):this.i.length==0||Uo(this.h)||Ra(this))};function Ra(g,C){var D;C?D=C.l:D=g.V++;const $=Wn(g.J);on($,"SID",g.M),on($,"RID",D),on($,"AID",g.K),wo(g,$),g.u&&g.o&&Ma($,g.u,g.o),D=new di(g,g.j,D,g.D+1),g.u===null&&(D.J=g.o),C&&(g.i=C.G.concat(g.i)),C=cu(g,D,1e3),D.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),hs(g.h,D),Lr(D,$,C)}function wo(g,C){g.H&&Qe(g.H,function(D,$){on(C,$,D)}),g.l&&Qe({},function(D,$){on(C,$,D)})}function cu(g,C,D){D=Math.min(g.i.length,D);const $=g.l?d(g.l.Ka,g.l,g):null;e:{var he=g.i;let At=-1;for(;;){const Yn=["count="+D];At==-1?D>0?(At=he[0].g,Yn.push("ofs="+At)):At=0:Yn.push("ofs="+At);let Jt=!0;for(let gn=0;gn<D;gn++){var xe=he[gn].g;const Yi=he[gn].map;if(xe-=At,xe<0)At=Math.max(0,he[gn].g-100),Jt=!1;else try{xe="req"+xe+"_"||"";try{var Ke=Yi instanceof Map?Yi:Object.entries(Yi);for(const[Qi,Ai]of Ke){let xs=Ai;c(Ai)&&(xs=Pr(Ai)),Yn.push(xe+Qi+"="+encodeURIComponent(xs))}}catch(Qi){throw Yn.push(xe+"type="+encodeURIComponent("_badmap")),Qi}}catch{$&&$(Yi)}}if(Jt){Ke=Yn.join("&");break e}}Ke=void 0}return g=g.i.splice(0,D),C.G=g,Ke}function Na(g){if(!g.g&&!g.v){g.Y=1;var C=g.Da;q||P(),U||(q(),U=!0),R.add(C,g),g.A=0}}function Fs(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=yt(d(g.Da,g),Ll(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=yt(d(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Bs(this),uu(this))};function $o(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function uu(g){g.g=new di(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var C=Wn(g.na);on(C,"RID","rpc"),on(C,"SID",g.M),on(C,"AID",g.K),on(C,"CI",g.F?"0":"1"),!g.F&&g.ia&&on(C,"TO",g.ia),on(C,"TYPE","xmlhttp"),wo(g,C),g.u&&g.o&&Ma(C,g.u,g.o),g.O&&(g.g.H=g.O);var D=g.g;g=g.ba,D.M=1,D.A=Ho(Wn(C)),D.u=null,D.R=!0,po(D,g)}t.Va=function(){this.C!=null&&(this.C=null,Bs(this),Fs(this),ut(19))};function Pl(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function xo(g,C){var D=null;if(g.g==C){Pl(g),$o(g),g.g=null;var $=2}else if(Fi(g.h,C))D=C.G,Cl(g.h,C),$=1;else return;if(g.I!=0){if(C.o)if($==1){D=C.u?C.u.length:0,C=Date.now()-C.F;var he=g.D;$=wt(),Xt($,new $t($,D)),Us(g)}else Na(g);else if(he=C.m,he==3||he==0&&C.X>0||!($==1&&Il(g,C)||$==2&&Fs(g)))switch(D&&D.length>0&&(C=g.h,C.i=C.i.concat(D)),he){case 1:Ki(g,5);break;case 4:Ki(g,10);break;case 3:Ki(g,6);break;default:Ki(g,2)}}}function Ll(g,C){let D=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(D*=2),D*C}function Ki(g,C){if(g.j.info("Error code "+C),C==2){var D=d(g.bb,g),$=g.Ua;const he=!$;$=new hi($||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kn($,"https"),Ho($),he?pi($.toString(),D):qi($.toString(),D)}else ut(2);g.I=0,g.l&&g.l.pa(C),zl(g),Dl(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function zl(g){if(g.I=0,g.ja=[],g.l){const C=Fo(g.h);(C.length!=0||g.i.length!=0)&&(S(g.ja,C),S(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function jl(g,C,D){var $=D instanceof hi?Wn(D):new hi(D);if($.g!="")C&&($.g=C+"."+$.g),Hi($,$.u);else{var he=a.location;$=he.protocol,C=C?C+"."+he.hostname:he.hostname,he=+he.port;const xe=new hi(null);$&&Kn(xe,$),C&&(xe.g=C),he&&Hi(xe,he),D&&(xe.h=D),$=xe}return D=g.G,C=g.wa,D&&C&&on($,D,C),on($,"VER",g.ka),wo(g,$),$}function fr(g,C,D){if(C&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Aa&&!g.ma?new Vt(new mn({ab:D})):new Vt(g.ma),C.Fa(g.L),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wo(){}t=Wo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gi(){}Gi.prototype.g=function(g,C){return new Hr(g,C)};function Hr(g,C){hn.call(this),this.g=new ws(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(g?g["X-WebChannel-Client-Profile"]=C.sa:g={"X-WebChannel-Client-Profile":C.sa}),this.g.U=g,(g=C&&C.Qb)&&!K(g)&&(this.g.u=g),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!K(C)&&(this.g.G=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new Hs(this)}m(Hr,hn),Hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hr.prototype.close=function(){qo(this.g)},Hr.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var D={};D.__data__=g,g=D}else this.v&&(D={},D.__data__=Pr(g),g=D);C.i.push(new $n(C.Ya++,g)),C.I==3&&Us(C)},Hr.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,Hr.Z.N.call(this)};function Da(g){Se.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const D in C){g=D;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}m(Da,Se);function fu(){Ye.call(this),this.status=1}m(fu,Ye);function Hs(g){this.g=g}m(Hs,Wo),Hs.prototype.ra=function(){Xt(this.g,"a")},Hs.prototype.qa=function(g){Xt(this.g,new Da(g))},Hs.prototype.pa=function(g){Xt(this.g,new fu)},Hs.prototype.oa=function(){Xt(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,Hr.prototype.send=Hr.prototype.o,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,G2=function(){return new Gi},K2=function(){return wt()},W2=Ce,jx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,Oy=Ps,fn.COMPLETE="complete",$2=fn,fi.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",hn.prototype.listen=hn.prototype.J,op=fi,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,q2=Vt}).apply(typeof Jg<"u"?Jg:typeof self<"u"?self:typeof window<"u"?window:{});const qO="@firebase/firestore",$O="4.9.3";class bi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let rh="12.7.0";const ef=new lS("@firebase/firestore");function rd(){return ef.logLevel}function nt(t,...e){if(ef.logLevel<=Gt.DEBUG){const n=e.map(xS);ef.debug(`Firestore (${rh}): ${t}`,...n)}}function wl(t,...e){if(ef.logLevel<=Gt.ERROR){const n=e.map(xS);ef.error(`Firestore (${rh}): ${t}`,...n)}}function Cd(t,...e){if(ef.logLevel<=Gt.WARN){const n=e.map(xS);ef.warn(`Firestore (${rh}): ${t}`,...n)}}function xS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Et(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y2(t,r,n)}function Y2(t,e,n){let r=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wl(r),new Error(r)}function dn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Y2(e,i,r)}function Rt(t,e){return t}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Sl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bu{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Q2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(bi.UNAUTHENTICATED)))}shutdown(){}}class L7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class z7{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dn(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Bu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bu,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bu)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dn(typeof r.accessToken=="string",31837,{l:r}),new Q2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dn(e===null||typeof e=="string",2055,{h:e}),new bi(e)}}class j7{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V7{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new j7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(bi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class WO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B7{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,To(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dn(this.o===void 0,3512);const r=s=>{s.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,nt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new WO(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(dn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new WO(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function U7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class ES{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=U7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Yt(t,e){return t<e?-1:t>e?1:0}function Vx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return x1(i)===x1(s)?Yt(i,s):x1(i)?1:-1}return Yt(t.length,e.length)}const F7=55296,H7=57343;function x1(t){const e=t.charCodeAt(0);return e>=F7&&e<=H7}function Ad(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const KO="__name__";class ra{constructor(e,n,r){n===void 0?n=0:n>e.length&&Et(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Et(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ra.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ra?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ra.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Yt(e.length,n.length)}static compareSegments(e,n){const r=ra.isNumericId(e),i=ra.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ra.extractNumericId(e).compare(ra.extractNumericId(n)):Vx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pc.fromString(e.substring(4,e.length-2))}}class Mn extends ra{construct(e,n,r){return new Mn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new it(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Mn(n)}static emptyPath(){return new Mn([])}}const q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends ra{construct(e,n,r){return new li(e,n,r)}static isValidIdentifier(e){return q7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KO}static keyField(){return new li([KO])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new it(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new it(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new it(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new it(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new li(n)}static emptyPath(){return new li([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Mn.fromString(e))}static fromName(e){return new mt(Mn.fromString(e).popFirst(5))}static empty(){return new mt(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Mn(e.slice()))}}function X2(t,e,n){if(!n)throw new it(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $7(t,e,n,r){if(e===!0&&r===!0)throw new it(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GO(t){if(!mt.isDocumentKey(t))throw new it(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YO(t){if(mt.isDocumentKey(t))throw new it(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function J2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function S0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et(12329,{type:typeof t})}function bd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new it(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=S0(t);throw new it(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Mr(t,e){const n={typeString:t};return e&&(n.value=e),n}function _m(t,e){if(!J2(t))throw new it(Pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new it(Pe.INVALID_ARGUMENT,n);return!0}const QO=-62135596800,XO=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*XO);return new Rn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new it(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QO)throw new it(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XO}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_m(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:Mr("string",Rn._jsonSchemaVersion),seconds:Mr("number"),nanoseconds:Mr("number")};class Ot{static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Rn(0,0))}static max(){return new Ot(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hp=-1;function W7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(r===1e9?new Rn(n+1,0):new Rn(n,r));return new qc(i,mt.empty(),e)}function K7(t){return new qc(t.readTime,t.key,Hp)}class qc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qc(Ot.min(),mt.empty(),Hp)}static max(){return new qc(Ot.max(),mt.empty(),Hp)}}function G7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=mt.comparator(t.documentKey,e.documentKey),n!==0?n:Yt(t.largestBatchId,e.largestBatchId))}const Y7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ih(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==Y7)throw t;nt("LocalStore","Unexpectedly lost primary lease")}class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Le(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Le?n:Le.resolve(n)}catch(n){return Le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Le.reject(n)}static resolve(e){return new Le(((n,r)=>{n(e)}))}static reject(e){return new Le(((n,r)=>{r(e)}))}static waitFor(e){return new Le(((n,r)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&n()}),(u=>r(u)))})),a=!0,s===i&&n()}))}static or(e){let n=Le.resolve(!1);for(const r of e)n=n.next((i=>i?Le.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new Le(((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next((h=>{a[d]=h,++c,c===s&&r(a)}),(h=>i(h)))}}))}static doWhile(e,n){return new Le(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function X7(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sh(t){return t.name==="IndexedDbTransactionError"}class _0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_0.ce=-1;const SS=-1;function T0(t){return t==null}function tv(t){return t===0&&1/t==-1/0}function J7(t){return typeof t=="number"&&Number.isInteger(t)&&!tv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Z2="";function Z7(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JO(e)),e=eW(t.get(n),e);return JO(e)}function eW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Z2:n+="";break;default:n+=s}}return n}function JO(t){return t+Z2+""}function ZO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Jn{constructor(e,n){this.comparator=e,this.root=n||ii.EMPTY}insert(e,n){return new Jn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zg(this.root,e,this.comparator,!0)}}class Zg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ii.RED,this.left=i??ii.EMPTY,this.right=s??ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ii(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1;ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ii(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Br{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eM(this.data.getIterator())}getIteratorFrom(e){return new eM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Br(this.comparator);return n.data=e,n}}class eM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ao{constructor(e){this.fields=e,e.sort(li.comparator)}static empty(){return new Ao([])}unionWith(e){let n=new Br(li.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ao(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ad(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class tP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tP("Invalid base64 string: "+s):s}})(e);return new ui(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new ui(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const tW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $c(t){if(dn(!!t,39018),typeof t=="string"){let e=0;const n=tW.exec(t);if(dn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(t.seconds),nanos:pr(t.nanos)}}function pr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wc(t){return typeof t=="string"?ui.fromBase64String(t):ui.fromUint8Array(t)}const nP="server_timestamp",rP="__type__",iP="__previous_value__",sP="__local_write_time__";function _S(t){return(t?.mapValue?.fields||{})[rP]?.stringValue===nP}function k0(t){const e=t.mapValue.fields[iP];return _S(e)?k0(e):e}function qp(t){const e=$c(t.mapValue.fields[sP].timestampValue);return new Rn(e.seconds,e.nanos)}class nW{constructor(e,n,r,i,s,a,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const nv="(default)";class $p{constructor(e,n){this.projectId=e,this.database=n||nv}static empty(){return new $p("","")}get isDefaultDatabase(){return this.database===nv}isEqual(e){return e instanceof $p&&e.projectId===this.projectId&&e.database===this.database}}const oP="__type__",rW="__max__",ey={mapValue:{}},aP="__vector__",rv="value";function Kc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_S(t)?4:sW(t)?9007199254740991:iW(t)?10:11:Et(28295,{value:t})}function va(t,e){if(t===e)return!0;const n=Kc(t);if(n!==Kc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qp(t).isEqual(qp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=$c(i.timestampValue),c=$c(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Wc(i.bytesValue).isEqual(Wc(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return pr(i.geoPointValue.latitude)===pr(s.geoPointValue.latitude)&&pr(i.geoPointValue.longitude)===pr(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return pr(i.integerValue)===pr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=pr(i.doubleValue),c=pr(s.doubleValue);return a===c?tv(a)===tv(c):isNaN(a)&&isNaN(c)}return!1})(t,e);case 9:return Ad(t.arrayValue.values||[],e.arrayValue.values||[],va);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(ZO(a)!==ZO(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!va(a[u],c[u])))return!1;return!0})(t,e);default:return Et(52216,{left:t})}}function Wp(t,e){return(t.values||[]).find((n=>va(n,e)))!==void 0}function Od(t,e){if(t===e)return 0;const n=Kc(t),r=Kc(e);if(n!==r)return Yt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yt(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=pr(s.integerValue||s.doubleValue),u=pr(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return tM(t.timestampValue,e.timestampValue);case 4:return tM(qp(t),qp(e));case 5:return Vx(t.stringValue,e.stringValue);case 6:return(function(s,a){const c=Wc(s),u=Wc(a);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=Yt(c[d],u[d]);if(h!==0)return h}return Yt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=Yt(pr(s.latitude),pr(a.latitude));return c!==0?c:Yt(pr(s.longitude),pr(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return nM(t.arrayValue,e.arrayValue);case 10:return(function(s,a){const c=s.fields||{},u=a.fields||{},d=c[rv]?.arrayValue,h=u[rv]?.arrayValue,m=Yt(d?.values?.length||0,h?.values?.length||0);return m!==0?m:nM(d,h)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===ey.mapValue&&a===ey.mapValue)return 0;if(s===ey.mapValue)return 1;if(a===ey.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const v=Vx(u[m],h[m]);if(v!==0)return v;const w=Od(c[u[m]],d[h[m]]);if(w!==0)return w}return Yt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Et(23264,{he:n})}}function tM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Yt(t,e);const n=$c(t),r=$c(e),i=Yt(n.seconds,r.seconds);return i!==0?i:Yt(n.nanos,r.nanos)}function nM(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Od(n[i],r[i]);if(s)return s}return Yt(n.length,r.length)}function Md(t){return Bx(t)}function Bx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=$c(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Wc(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return mt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Bx(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Bx(n.fields[a])}`;return i+"}"})(t.mapValue):Et(61005,{value:t})}function My(t){switch(Kc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=k0(t);return e?16+My(e):16;case 5:return 2*t.stringValue.length;case 6:return Wc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+My(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return uf(r.fields,((s,a)=>{i+=s.length+My(a)})),i})(t.mapValue);default:throw Et(13486,{value:t})}}function rM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ux(t){return!!t&&"integerValue"in t}function TS(t){return!!t&&"arrayValue"in t}function iM(t){return!!t&&"nullValue"in t}function sM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ry(t){return!!t&&"mapValue"in t}function iW(t){return(t?.mapValue?.fields||{})[oP]?.stringValue===aP}function bp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uf(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=bp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bp(t.arrayValue.values[n]);return e}return{...t}}function sW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rW}class ro{constructor(e){this.value=e}static empty(){return new ro({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ry(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bp(n)}setAll(e){let n=li.emptyPath(),r={},i=[];e.forEach(((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=bp(a):i.push(c.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ry(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ry(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){uf(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new ro(bp(this.value))}}function lP(t){const e=[];return uf(t.fields,((n,r)=>{const i=new li([n]);if(Ry(r)){const s=lP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Ao(e)}class xi{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new xi(e,0,Ot.min(),Ot.min(),Ot.min(),ro.empty(),0)}static newFoundDocument(e,n,r,i){return new xi(e,1,n,Ot.min(),r,i,0)}static newNoDocument(e,n){return new xi(e,2,n,Ot.min(),Ot.min(),ro.empty(),0)}static newUnknownDocument(e,n){return new xi(e,3,n,Ot.min(),Ot.min(),ro.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ro.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ro.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iv{constructor(e,n){this.position=e,this.inclusive=n}}function oM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=mt.comparator(mt.fromName(a.referenceValue),n.key):r=Od(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function aM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!va(t.position[n],e.position[n]))return!1;return!0}class sv{constructor(e,n="asc"){this.field=e,this.dir=n}}function oW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class cP{}class Or extends cP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lW(e,n,r):n==="array-contains"?new fW(e,r):n==="in"?new dW(e,r):n==="not-in"?new hW(e,r):n==="array-contains-any"?new pW(e,r):new Or(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cW(e,r):new uW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Od(n,this.value)):n!==null&&Kc(this.value)===Kc(n)&&this.matchesComparison(Od(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lo extends cP{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Lo(e,n)}matches(e){return uP(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uP(t){return t.op==="and"}function fP(t){return aW(t)&&uP(t)}function aW(t){for(const e of t.filters)if(e instanceof Lo)return!1;return!0}function Fx(t){if(t instanceof Or)return t.field.canonicalString()+t.op.toString()+Md(t.value);if(fP(t))return t.filters.map((e=>Fx(e))).join(",");{const e=t.filters.map((n=>Fx(n))).join(",");return`${t.op}(${e})`}}function dP(t,e){return t instanceof Or?(function(r,i){return i instanceof Or&&r.op===i.op&&r.field.isEqual(i.field)&&va(r.value,i.value)})(t,e):t instanceof Lo?(function(r,i){return i instanceof Lo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,c)=>s&&dP(a,i.filters[c])),!0):!1})(t,e):void Et(19439)}function hP(t){return t instanceof Or?(function(n){return`${n.field.canonicalString()} ${n.op} ${Md(n.value)}`})(t):t instanceof Lo?(function(n){return n.op.toString()+" {"+n.getFilters().map(hP).join(" ,")+"}"})(t):"Filter"}class lW extends Or{constructor(e,n,r){super(e,n,r),this.key=mt.fromName(r.referenceValue)}matches(e){const n=mt.comparator(e.key,this.key);return this.matchesComparison(n)}}class cW extends Or{constructor(e,n){super(e,"in",n),this.keys=pP("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class uW extends Or{constructor(e,n){super(e,"not-in",n),this.keys=pP("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pP(t,e){return(e.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class fW extends Or{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return TS(n)&&Wp(n.arrayValue,this.value)}}class dW extends Or{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wp(this.value.arrayValue,n)}}class hW extends Or{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wp(this.value.arrayValue,n)}}class pW extends Or{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!TS(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Wp(this.value.arrayValue,r)))}}class mW{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Te=null}}function lM(t,e=null,n=[],r=[],i=null,s=null,a=null){return new mW(t,e,n,r,i,s,a)}function kS(t){const e=Rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Fx(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),T0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Md(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Md(r))).join(",")),e.Te=n}return e.Te}function CS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aM(t.startAt,e.startAt)&&aM(t.endAt,e.endAt)}function Hx(t){return mt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Tm{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gW(t,e,n,r,i,s,a,c){return new Tm(t,e,n,r,i,s,a,c)}function AS(t){return new Tm(t)}function cM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mP(t){return t.collectionGroup!==null}function wp(t){const e=Rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Br(li.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new sv(s,r))})),n.has(li.keyField().canonicalString())||e.Ie.push(new sv(li.keyField(),r))}return e.Ie}function ca(t){const e=Rt(t);return e.Ee||(e.Ee=yW(e,wp(t))),e.Ee}function yW(t,e){if(t.limitType==="F")return lM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new sv(i.field,s)}));const n=t.endAt?new iv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iv(t.startAt.position,t.startAt.inclusive):null;return lM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qx(t,e){const n=t.filters.concat([e]);return new Tm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $x(t,e,n){return new Tm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function C0(t,e){return CS(ca(t),ca(e))&&t.limitType===e.limitType}function gP(t){return`${kS(ca(t))}|lt:${t.limitType}`}function id(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>hP(i))).join(", ")}]`),T0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Md(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Md(i))).join(",")),`Target(${r})`})(ca(t))}; limitType=${t.limitType})`}function A0(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):mt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of wp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,u){const d=oM(a,c,u);return a.inclusive?d<=0:d<0})(r.startAt,wp(r),i)||r.endAt&&!(function(a,c,u){const d=oM(a,c,u);return a.inclusive?d>=0:d>0})(r.endAt,wp(r),i))})(t,e)}function vW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yP(t){return(e,n)=>{let r=!1;for(const i of wp(t)){const s=bW(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bW(t,e,n){const r=t.field.isKeyField()?mt.comparator(e.key,n.key):(function(s,a,c){const u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Od(u,d):Et(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:t.dir})}}class ff{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uf(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return eP(this.inner)}size(){return this.innerSize}}const wW=new Jn(mt.comparator);function xl(){return wW}const vP=new Jn(mt.comparator);function ap(...t){let e=vP;for(const n of t)e=e.insert(n.key,n);return e}function bP(t){let e=vP;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Iu(){return xp()}function wP(){return xp()}function xp(){return new ff((t=>t.toString()),((t,e)=>t.isEqual(e)))}const xW=new Jn(mt.comparator),EW=new Br(mt.comparator);function Qt(...t){let e=EW;for(const n of t)e=e.add(n);return e}const SW=new Br(Yt);function _W(){return SW}function OS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tv(e)?"-0":e}}function xP(t){return{integerValue:""+t}}function TW(t,e){return J7(e)?xP(e):OS(t,e)}class O0{constructor(){this._=void 0}}function kW(t,e,n){return t instanceof ov?(function(i,s){const a={fields:{[rP]:{stringValue:nP},[sP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_S(s)&&(s=k0(s)),s&&(a.fields[iP]=s),{mapValue:a}})(n,e):t instanceof Kp?SP(t,e):t instanceof Gp?_P(t,e):(function(i,s){const a=EP(i,s),c=uM(a)+uM(i.Ae);return Ux(a)&&Ux(i.Ae)?xP(c):OS(i.serializer,c)})(t,e)}function CW(t,e,n){return t instanceof Kp?SP(t,e):t instanceof Gp?_P(t,e):n}function EP(t,e){return t instanceof av?(function(r){return Ux(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class ov extends O0{}class Kp extends O0{constructor(e){super(),this.elements=e}}function SP(t,e){const n=TP(e);for(const r of t.elements)n.some((i=>va(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Gp extends O0{constructor(e){super(),this.elements=e}}function _P(t,e){let n=TP(e);for(const r of t.elements)n=n.filter((i=>!va(i,r)));return{arrayValue:{values:n}}}class av extends O0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uM(t){return pr(t.integerValue||t.doubleValue)}function TP(t){return TS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AW(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Kp&&i instanceof Kp||r instanceof Gp&&i instanceof Gp?Ad(r.elements,i.elements,va):r instanceof av&&i instanceof av?va(r.Ae,i.Ae):r instanceof ov&&i instanceof ov})(t.transform,e.transform)}class OW{constructor(e,n){this.version=e,this.transformResults=n}}class pl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pl}static exists(e){return new pl(void 0,e)}static updateTime(e){return new pl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ny(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class M0{}function kP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new AP(t.key,pl.none()):new km(t.key,t.data,pl.none());{const n=t.data,r=ro.empty();let i=new Br(li.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new df(t.key,r,new Ao(i.toArray()),pl.none())}}function MW(t,e,n){t instanceof km?(function(i,s,a){const c=i.value.clone(),u=dM(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,n):t instanceof df?(function(i,s,a){if(!Ny(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=dM(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(CP(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function Ep(t,e,n,r){return t instanceof km?(function(s,a,c,u){if(!Ny(s.precondition,a))return c;const d=s.value.clone(),h=hM(s.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof df?(function(s,a,c,u){if(!Ny(s.precondition,a))return c;const d=hM(s.fieldTransforms,u,a),h=a.data;return h.setAll(CP(s)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(t,e,n,r):(function(s,a,c){return Ny(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(t,e,n)}function RW(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=EP(r.transform,i||null);s!=null&&(n===null&&(n=ro.empty()),n.set(r.field,s))}return n||null}function fM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ad(r,i,((s,a)=>AW(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class km extends M0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class df extends M0{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CP(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function dM(t,e,n){const r=new Map;dn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,CW(a,c,n[i]))}return r}function hM(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,kW(s,a,e))}return r}class AP extends M0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NW extends M0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DW{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&MW(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ep(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ep(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wP();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const u=kP(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(Ot.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&Ad(this.mutations,e.mutations,((n,r)=>fM(n,r)))&&Ad(this.baseMutations,e.baseMutations,((n,r)=>fM(n,r)))}}class MS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){dn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return xW})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new MS(e,n,r,i)}}class IW{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class PW{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ar,rn;function LW(t){switch(t){case Pe.OK:return Et(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return Et(15467,{code:t})}}function OP(t){if(t===void 0)return wl("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case Ar.OK:return Pe.OK;case Ar.CANCELLED:return Pe.CANCELLED;case Ar.UNKNOWN:return Pe.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return Pe.INTERNAL;case Ar.UNAVAILABLE:return Pe.UNAVAILABLE;case Ar.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Ar.NOT_FOUND:return Pe.NOT_FOUND;case Ar.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Ar.ABORTED:return Pe.ABORTED;case Ar.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Ar.DATA_LOSS:return Pe.DATA_LOSS;default:return Et(39323,{code:t})}}(rn=Ar||(Ar={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";function zW(){return new TextEncoder}const jW=new Pc([4294967295,4294967295],0);function pM(t){const e=zW().encode(t),n=new H2;return n.update(e),new Uint8Array(n.digest())}function mM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pc([n,r],0),new Pc([i,s],0)]}class RS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lp(`Invalid padding: ${n}`);if(r<0)throw new lp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Pc.fromNumber(r)));return i.compare(jW)===1&&(i=new Pc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=pM(e),[r,i]=mM(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new RS(s,i,n);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const n=pM(e),[r,i]=mM(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class R0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new R0(Ot.min(),i,new Jn(Yt),xl(),Qt())}}class Cm{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cm(r,n,Qt(),Qt(),Qt())}}class Dy{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class MP{constructor(e,n){this.targetId=e,this.Ce=n}}class RP{constructor(e,n,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gM{constructor(){this.ve=0,this.Fe=yM(),this.Me=ui.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),n=Qt(),r=Qt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:s})}})),new Cm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=yM()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VW{constructor(e){this.Ge=e,this.ze=new Map,this.je=xl(),this.Je=ty(),this.He=ty(),this.Ye=new Jn(Yt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Hx(s))if(r===0){const a=new mt(s.path);this.et(n,a,xi.newNoDocument(a,Ot.min()))}else dn(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=Wc(r).toUint8Array()}catch(u){if(u instanceof tP)return Cd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new RS(a,i,s)}catch(u){return Cd(u instanceof lp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,a)=>{const c=this.ot(a);if(c){if(s.current&&Hx(c.target)){const u=new mt(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,xi.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.qe())}}));let r=Qt();this.He.forEach(((s,a)=>{let c=!0;a.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new R0(e,n,this.Ye,this.je,r);return this.je=xl(),this.Je=ty(),this.He=ty(),this.Ye=new Jn(Yt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new gM,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Br(Yt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Br(Yt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||nt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gM),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ty(){return new Jn(mt.comparator)}function yM(){return new Jn(mt.comparator)}const BW={asc:"ASCENDING",desc:"DESCENDING"},UW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FW={and:"AND",or:"OR"};class HW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wx(t,e){return t.useProto3Json||T0(e)?e:{value:e}}function lv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qW(t,e){return lv(t,e.toTimestamp())}function ua(t){return dn(!!t,49232),Ot.fromTimestamp((function(n){const r=$c(n);return new Rn(r.seconds,r.nanos)})(t))}function NS(t,e){return Kx(t,e).canonicalString()}function Kx(t,e){const n=(function(i){return new Mn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function DP(t){const e=Mn.fromString(t);return dn(jP(e),10190,{key:e.toString()}),e}function Gx(t,e){return NS(t.databaseId,e.path)}function E1(t,e){const n=DP(e);if(n.get(1)!==t.databaseId.projectId)throw new it(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new it(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new mt(PP(n))}function IP(t,e){return NS(t.databaseId,e)}function $W(t){const e=DP(t);return e.length===4?Mn.emptyPath():PP(e)}function Yx(t){return new Mn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PP(t){return dn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vM(t,e,n){return{name:Gx(t,e),fields:n.value.mapValue.fields}}function WW(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Et(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(dn(h===void 0||typeof h=="string",58123),ui.fromBase64String(h||"")):(dn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ui.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(d){const h=d.code===void 0?Pe.UNKNOWN:OP(d.code);return new it(h,d.message||"")})(a);n=new RP(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=E1(t,r.document.name),s=ua(r.document.updateTime),a=r.document.createTime?ua(r.document.createTime):Ot.min(),c=new ro({mapValue:{fields:r.document.fields}}),u=xi.newFoundDocument(i,s,a,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Dy(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=E1(t,r.document),s=r.readTime?ua(r.readTime):Ot.min(),a=xi.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Dy([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=E1(t,r.document),s=r.removedTargetIds||[];n=new Dy([],s,i,null)}else{if(!("filter"in e))return Et(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new PW(i,s),c=r.targetId;n=new MP(c,a)}}return n}function KW(t,e){let n;if(e instanceof km)n={update:vM(t,e.key,e.value)};else if(e instanceof AP)n={delete:Gx(t,e.key)};else if(e instanceof df)n={update:vM(t,e.key,e.data),updateMask:nK(e.fieldMask)};else{if(!(e instanceof NW))return Et(16599,{Vt:e.type});n={verify:Gx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const c=a.transform;if(c instanceof ov)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Kp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof av)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Et(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:qW(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Et(27497)})(t,e.precondition)),n}function GW(t,e){return t&&t.length>0?(dn(e!==void 0,14353),t.map((n=>(function(i,s){let a=i.updateTime?ua(i.updateTime):ua(s);return a.isEqual(Ot.min())&&(a=ua(s)),new OW(a,i.transformResults||[])})(n,e)))):[]}function YW(t,e){return{documents:[IP(t,e.path)]}}function QW(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IP(t,i);const s=(function(d){if(d.length!==0)return zP(Lo.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((h=>(function(v){return{field:sd(v.field),direction:ZW(v.dir)}})(h)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Wx(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function XW(t){let e=$W(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){dn(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=(function(m){const v=LP(m);return v instanceof Lo&&fP(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((v=>(function(S){return new sv(od(S.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v)))})(n.orderBy));let c=null;n.limit&&(c=(function(m){let v;return v=typeof m=="object"?m.value:m,T0(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(m){const v=!!m.before,w=m.values||[];return new iv(w,v)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){const v=!m.before,w=m.values||[];return new iv(w,v)})(n.endAt)),gW(e,i,a,s,c,"F",u,d)}function JW(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=od(n.unaryFilter.field);return Or.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=od(n.unaryFilter.field);return Or.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=od(n.unaryFilter.field);return Or.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=od(n.unaryFilter.field);return Or.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Or.create(od(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Lo.create(n.compositeFilter.filters.map((r=>LP(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(t):Et(30097,{filter:t})}function ZW(t){return BW[t]}function eK(t){return UW[t]}function tK(t){return FW[t]}function sd(t){return{fieldPath:t.canonicalString()}}function od(t){return li.fromServerFormat(t.fieldPath)}function zP(t){return t instanceof Or?(function(n){if(n.op==="=="){if(sM(n.value))return{unaryFilter:{field:sd(n.field),op:"IS_NAN"}};if(iM(n.value))return{unaryFilter:{field:sd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sM(n.value))return{unaryFilter:{field:sd(n.field),op:"IS_NOT_NAN"}};if(iM(n.value))return{unaryFilter:{field:sd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sd(n.field),op:eK(n.op),value:n.value}}})(t):t instanceof Lo?(function(n){const r=n.getFilters().map((i=>zP(i)));return r.length===1?r[0]:{compositeFilter:{op:tK(n.op),filters:r}}})(t):Et(54877,{filter:t})}function nK(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function jP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class kc{constructor(e,n,r,i,s=Ot.min(),a=Ot.min(),c=ui.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rK{constructor(e){this.yt=e}}function iK(t){const e=XW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$x(e,e.limit,"L"):e}class sK{constructor(){this.Cn=new oK}addToCollectionParentIndex(e,n){return this.Cn.add(n),Le.resolve()}getCollectionParents(e,n){return Le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Le.resolve()}deleteFieldIndex(e,n){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,n){return Le.resolve()}getDocumentsMatchingTarget(e,n){return Le.resolve(null)}getIndexType(e,n){return Le.resolve(0)}getFieldIndexes(e,n){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,n){return Le.resolve(qc.min())}getMinOffsetFromCollectionGroup(e,n){return Le.resolve(qc.min())}updateCollectionGroup(e,n,r){return Le.resolve()}updateIndexEntries(e,n){return Le.resolve()}}class oK{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Br(Mn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Br(Mn.comparator)).toArray()}}const bM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VP=41943040;class rs{static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(VP,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class Rd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rd(0)}static cr(){return new Rd(-1)}}const wM="LruGarbageCollector",aK=1048576;function xM([t,e],[n,r]){const i=Yt(t,n);return i===0?Yt(e,r):i}class lK{constructor(e){this.Ir=e,this.buffer=new Br(xM),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){nt(wM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sh(n)?nt(wM,"Ignoring IndexedDB error during garbage collection: ",n):await ih(n)}await this.Vr(3e5)}))}}class uK{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Le.resolve(_0.ce);const r=new lK(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(bM)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bM):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,n)))).next((m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(d=Date.now(),rd()<=Gt.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function fK(t,e){return new uK(t,e)}class dK{constructor(){this.changes=new ff((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class pK{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Ep(r.mutation,i,Ao.empty(),Rn.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Qt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Qt()){const i=Iu();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let a=ap();return s.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Iu();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Qt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{n.set(a,c)}))}))}computeViews(e,n,r,i){let s=xl();const a=xp(),c=(function(){return xp()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof df)?s=s.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Ep(h.mutation,d,h.mutation.getFieldMask(),Rn.now())):a.set(d.key,Ao.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((d,h)=>a.set(d,h))),n.forEach(((d,h)=>c.set(d,new hK(h,a.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=xp();let i=new Jn(((a,c)=>a-c)),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const c of a)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Ao.empty();h=c.applyToLocalView(d,h),r.set(u,h);const m=(i.get(c.batchId)||Qt()).add(u);i=i.insert(c.batchId,m)}))})).next((()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=wP();h.forEach((v=>{if(!s.has(v)){const w=kP(n.get(v),r.get(v));w!==null&&m.set(v,w),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Le.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(a){return mt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Le.resolve(Iu());let c=Hp,u=s;return a.next((d=>Le.forEach(d,((h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(h)?Le.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{u=u.insert(h,v)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,u,d,Qt()))).next((h=>({batchId:c,changes:bP(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new mt(n)).next((r=>{let i=ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=ap();return this.indexManager.getCollectionParents(e,s).next((c=>Le.forEach(c,(u=>{const d=(function(m,v){return new Tm(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((m,v)=>{a=a.insert(m,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((a=>{s.forEach(((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,xi.newInvalidDocument(h)))}));let c=ap();return a.forEach(((u,d)=>{const h=s.get(u);h!==void 0&&Ep(h.mutation,d,Ao.empty(),Rn.now()),A0(n,d)&&(c=c.insert(u,d))})),c}))}}class mK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ua(i.createTime)}})(n)),Le.resolve()}getNamedQuery(e,n){return Le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:iK(i.bundledQuery),readTime:ua(i.readTime)}})(n)),Le.resolve()}}class gK{constructor(){this.overlays=new Jn(mt.comparator),this.qr=new Map}getOverlay(e,n){return Le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Iu();return Le.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),Le.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),Le.resolve()}getOverlaysForCollection(e,n,r){const i=Iu(),s=n.length+1,a=new mt(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Le.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Jn(((d,h)=>d-h));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Iu(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Iu(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return Le.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new IW(n,r));let s=this.qr.get(n);s===void 0&&(s=Qt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class yK{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Le.resolve()}}class DS{constructor(){this.Qr=new Br(Wr.$r),this.Ur=new Br(Wr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Wr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new mt(new Mn([])),r=new Wr(n,e),i=new Wr(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new mt(new Mn([])),r=new Wr(n,e),i=new Wr(n,e+1);let s=Qt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const n=new Wr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return mt.comparator(e.key,n.key)||Yt(e.Yr,n.Yr)}static Kr(e,n){return Yt(e.Yr,n.Yr)||mt.comparator(e.key,n.key)}}class vK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Br(Wr.$r)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DW(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.Zr=this.Zr.add(new Wr(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Le.resolve(a)}lookupMutationBatch(e,n){return Le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?SS:this.tr-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wr(n,0),i=new Wr(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const c=this.Xr(a.Yr);s.push(c)})),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Br(Yt);return n.forEach((i=>{const s=new Wr(i,0),a=new Wr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(c=>{r=r.add(c.Yr)}))})),Le.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;mt.isDocumentKey(s)||(s=s.child(""));const a=new Wr(new mt(s),0);let c=new Br(Yt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),a),Le.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){dn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Le.forEach(n.mutations,(i=>{const s=new Wr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Wr(n,0),i=this.Zr.firstAfterOrEqual(r);return Le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bK{constructor(e){this.ri=e,this.docs=(function(){return new Jn(mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Le.resolve(r?r.document.mutableCopy():xi.newInvalidDocument(n))}getEntries(e,n){let r=xl();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xi.newInvalidDocument(i))})),Le.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xl();const a=n.path,c=new mt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||G7(K7(h),r)<=0||(i.has(h.key)||A0(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Et(9500)}ii(e,n){return Le.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new wK(this)}getSize(e){return Le.resolve(this.size)}}class wK extends dK{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class xK{constructor(e){this.persistence=e,this.si=new ff((n=>kS(n)),CS),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.oi=0,this._i=new DS,this.targetCount=0,this.ai=Rd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Le.resolve()}updateTargetData(e,n){return this.Pr(n),Le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Le.waitFor(s).next((()=>i))}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Le.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Le.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Le.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Le.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Le.resolve(r)}containsKey(e,n){return Le.resolve(this._i.containsKey(n))}}class BP{constructor(e,n){this.ui={},this.overlays={},this.ci=new _0(0),this.li=!1,this.li=!0,this.hi=new yK,this.referenceDelegate=e(this),this.Pi=new xK(this),this.indexManager=new sK,this.remoteDocumentCache=(function(i){return new bK(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new rK(n),this.Ii=new mK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){nt("MemoryPersistence","Starting transaction:",e);const i=new EK(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return Le.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class EK extends Q7{constructor(e){super(),this.currentSequenceNumber=e}}class IS{constructor(e){this.persistence=e,this.Ri=new DS,this.Vi=null}static mi(e){return new IS(e)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Le.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.fi,(r=>{const i=mt.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,Ot.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Le.or([()=>Le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cv{constructor(e,n){this.persistence=e,this.pi=new ff((r=>Z7(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=fK(this,n)}static mi(e,n){return new cv(e,n)}Ei(){}di(e){return Le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Le.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?Le.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,n).next((c=>{c||(r++,s.removeEntry(a,Ot.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Le.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=My(e.data.value)),n}br(e,n,r){return Le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class PS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Qt(),i=Qt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new PS(e,n.fromCache,r,i)}}class SK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _K{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return p8()?8:X7(Ei())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new SK;return this.Ss(e,n,a).next((c=>{if(s.result=c,this.Vs)return this.bs(e,n,a,c.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(rd()<=Gt.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",id(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Le.resolve()):(rd()<=Gt.DEBUG&&nt("QueryEngine","Query:",id(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(rd()<=Gt.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",id(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ca(n))):Le.resolve())}ys(e,n){if(cM(n))return Le.resolve(null);let r=ca(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=$x(n,null,"F"),r=ca(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Qt(...s);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,$x(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return cM(n)||i.isEqual(Ot.min())?Le.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?Le.resolve(null):(rd()<=Gt.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),id(n)),this.vs(e,a,n,W7(i,Hp)).next((c=>c)))}))}Ds(e,n){let r=new Br(yP(e));return n.forEach(((i,s)=>{A0(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return rd()<=Gt.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",id(n)),this.ps.getDocumentsMatchingQuery(e,n,qc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const LS="LocalStore",TK=3e8;class kK{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Jn(Yt),this.xs=new ff((s=>kS(s)),CS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function CK(t,e,n,r){return new kK(t,e,n,r)}async function UP(t,e){const n=Rt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],c=[];let u=Qt();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:c})))}))}))}function AK(t,e){const n=Rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const m=d.batch,v=m.keys();let w=Le.resolve();return v.forEach((S=>{w=w.next((()=>h.getEntry(u,S))).next((k=>{const _=d.docVersions.get(S);dn(_!==null,48541),k.version.compareTo(_)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,m)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=Qt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function FP(t){const e=Rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function OK(t,e){const n=Rt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,m)=>{const v=i.get(m);if(!v)return;c.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,m).next((()=>n.Pi.addMatchingKeys(s,h.addedDocuments,m))));let w=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(ui.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(m,w),(function(k,_,O){return k.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=TK?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(v,w,h)&&c.push(n.Pi.updateTargetData(s,w))}));let u=xl(),d=Qt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))})),c.push(MK(s,a,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(Ot.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next((m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(h)}return Le.waitFor(c).next((()=>a.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,u,d))).next((()=>u))})).then((s=>(n.Ms=i,s)))}function MK(t,e,n){let r=Qt(),i=Qt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let a=xl();return n.forEach(((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Ot.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):nt(LS,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:a,qs:i}}))}function RK(t,e){const n=Rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=SS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function NK(t,e){const n=Rt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,Le.resolve(i)):n.Pi.allocateTargetId(r).next((a=>(i=new kc(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Qx(t,e,n){const r=Rt(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!sh(a))throw a;nt(LS,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function EM(t,e,n){const r=Rt(t);let i=Ot.min(),s=Qt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,d,h){const m=Rt(u),v=m.xs.get(h);return v!==void 0?Le.resolve(m.Ms.get(v)):m.Pi.getTargetData(d,h)})(r,a,ca(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{s=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:Ot.min(),n?s:Qt()))).next((c=>(DK(r,vW(e),c),{documents:c,Qs:s})))))}function DK(t,e,n){let r=t.Os.get(e)||Ot.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class SM{constructor(){this.activeTargetIds=_W()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IK{constructor(){this.Mo=new SM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new SM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PK{Oo(e){}shutdown(){}}const _M="ConnectivityMonitor";class TM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nt(_M,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){nt(_M,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ny=null;function Xx(){return ny===null?ny=(function(){return 268435456+Math.round(2147483648*Math.random())})():ny++,"0x"+ny.toString(16)}const S1="RestConnection",LK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===nv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=Xx(),c=this.zo(e,n.toUriEncodedString());nt(S1,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(c),h=eh(d);return this.Jo(e,c,u,r,h).then((m=>(nt(S1,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw Cd(S1,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m}))}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=LK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class jK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yi="WebChannelConnection";class VK extends zK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=Xx();return new Promise(((c,u)=>{const d=new q2;d.setWithCredentials(!0),d.listenOnce($2.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Oy.NO_ERROR:const m=d.getResponseJson();nt(yi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case Oy.TIMEOUT:nt(yi,`RPC '${e}' ${a} timed out`),u(new it(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case Oy.HTTP_ERROR:const v=d.getStatus();if(nt(yi,`RPC '${e}' ${a} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const k=(function(O){const B=O.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(B)>=0?B:Pe.UNKNOWN})(S.status);u(new it(k,S.message))}else u(new it(Pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new it(Pe.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{nt(yi,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);nt(yi,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=Xx(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=G2(),c=K2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");nt(yi,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=a.createWebChannel(h,u);this.I_(m);let v=!1,w=!1;const S=new jK({Yo:_=>{w?nt(yi,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(v||(nt(yi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),nt(yi,`RPC '${e}' stream ${i} sending:`,_),m.send(_))},Zo:()=>m.close()}),k=(_,O,B)=>{_.listen(O,(W=>{try{B(W)}catch(L){setTimeout((()=>{throw L}),0)}}))};return k(m,op.EventType.OPEN,(()=>{w||(nt(yi,`RPC '${e}' stream ${i} transport opened.`),S.o_())})),k(m,op.EventType.CLOSE,(()=>{w||(w=!0,nt(yi,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(m))})),k(m,op.EventType.ERROR,(_=>{w||(w=!0,Cd(yi,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),S.a_(new it(Pe.UNAVAILABLE,"The operation could not be completed")))})),k(m,op.EventType.MESSAGE,(_=>{if(!w){const O=_.data[0];dn(!!O,16349);const B=O,W=B?.error||B[0]?.error;if(W){nt(yi,`RPC '${e}' stream ${i} received error:`,W);const L=W.status;let q=(function(P){const V=Ar[P];if(V!==void 0)return OP(V)})(L),U=W.message;q===void 0&&(q=Pe.INTERNAL,U="Unknown error status: "+L+" with message "+W.message),w=!0,S.a_(new it(q,U)),m.close()}else nt(yi,`RPC '${e}' stream ${i} received:`,O),S.u_(O)}})),k(c,W2.STAT_EVENT,(_=>{_.stat===jx.PROXY?nt(yi,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===jx.NOPROXY&&nt(yi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _1(){return typeof document<"u"?document:null}function N0(t){return new HW(t,!0)}class HP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const kM="PersistentStream";class qP{constructor(e,n,r,i,s,a,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(wl(n.toString()),wl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new it(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return nt(kM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(nt(kM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BK extends qP{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=WW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ot.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?ua(a.readTime):Ot.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Yx(this.serializer),n.addTarget=(function(s,a){let c;const u=a.target;if(c=Hx(u)?{documents:YW(s,u)}:{query:QW(s,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=NP(s,a.resumeToken);const d=Wx(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ot.min())>0){c.readTime=lv(s,a.snapshotVersion.toTimestamp());const d=Wx(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=JW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Yx(this.serializer),n.removeTarget=e,this.q_(n)}}class UK extends qP{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return dn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=GW(e.writeResults,e.commitTime),r=ua(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Yx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>KW(this.serializer,r)))};this.q_(n)}}class FK{}class HK extends FK{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new it(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,Kx(n,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new it(Pe.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,Kx(n,r),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new it(Pe.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wl(n),this.aa=!1):nt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const tf="RemoteStore";class $K{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{hf(this)&&(nt(tf,"Restarting streams for network reachability change."),await(async function(u){const d=Rt(u);d.Ea.add(4),await Am(d),d.Ra.set("Unknown"),d.Ea.delete(4),await D0(d)})(this))}))})),this.Ra=new qK(r,i)}}async function D0(t){if(hf(t))for(const e of t.da)await e(!0)}async function Am(t){for(const e of t.da)await e(!1)}function $P(t,e){const n=Rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),BS(n)?VS(n):oh(n).O_()&&jS(n,e))}function zS(t,e){const n=Rt(t),r=oh(n);n.Ia.delete(e),r.O_()&&WP(n,e),n.Ia.size===0&&(r.O_()?r.L_():hf(n)&&n.Ra.set("Unknown"))}function jS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oh(t).Y_(e)}function WP(t,e){t.Va.Ue(e),oh(t).Z_(e)}function VS(t){t.Va=new VW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oh(t).start(),t.Ra.ua()}function BS(t){return hf(t)&&!oh(t).x_()&&t.Ia.size>0}function hf(t){return Rt(t).Ea.size===0}function KP(t){t.Va=void 0}async function WK(t){t.Ra.set("Online")}async function KK(t){t.Ia.forEach(((e,n)=>{jS(t,e)}))}async function GK(t,e){KP(t),BS(t)?(t.Ra.ha(e),VS(t)):t.Ra.set("Unknown")}async function YK(t,e,n){if(t.Ra.set("Online"),e instanceof RP&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){nt(tf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uv(t,r)}else if(e instanceof Dy?t.Va.Ze(e):e instanceof MP?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ot.min()))try{const r=await FP(t.localStore);n.compareTo(r)>=0&&await(function(s,a){const c=s.Va.Tt(a);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,d)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(ui.EMPTY_BYTE_STRING,h.snapshotVersion)),WP(s,u);const m=new kc(h.target,u,d,h.sequenceNumber);jS(s,m)})),s.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){nt(tf,"Failed to raise snapshot:",r),await uv(t,r)}}async function uv(t,e,n){if(!sh(e))throw e;t.Ea.add(1),await Am(t),t.Ra.set("Offline"),n||(n=()=>FP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nt(tf,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await D0(t)}))}function GP(t,e){return e().catch((n=>uv(t,n,e)))}async function I0(t){const e=Rt(t),n=Gc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:SS;for(;QK(e);)try{const i=await RK(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,XK(e,i)}catch(i){await uv(e,i)}YP(e)&&QP(e)}function QK(t){return hf(t)&&t.Ta.length<10}function XK(t,e){t.Ta.push(e);const n=Gc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YP(t){return hf(t)&&!Gc(t).x_()&&t.Ta.length>0}function QP(t){Gc(t).start()}async function JK(t){Gc(t).ra()}async function ZK(t){const e=Gc(t);for(const n of t.Ta)e.ea(n.mutations)}async function eG(t,e,n){const r=t.Ta.shift(),i=MS.from(r,e,n);await GP(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await I0(t)}async function tG(t,e){e&&Gc(t).X_&&await(async function(r,i){if((function(a){return LW(a)&&a!==Pe.ABORTED})(i.code)){const s=r.Ta.shift();Gc(r).B_(),await GP(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await I0(r)}})(t,e),YP(t)&&QP(t)}async function CM(t,e){const n=Rt(t);n.asyncQueue.verifyOperationInProgress(),nt(tf,"RemoteStore received new credentials");const r=hf(n);n.Ea.add(3),await Am(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await D0(n)}async function nG(t,e){const n=Rt(t);e?(n.Ea.delete(2),await D0(n)):e||(n.Ea.add(2),await Am(n),n.Ra.set("Unknown"))}function oh(t){return t.ma||(t.ma=(function(n,r,i){const s=Rt(n);return s.sa(),new BK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:WK.bind(null,t),t_:KK.bind(null,t),r_:GK.bind(null,t),H_:YK.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),BS(t)?VS(t):t.Ra.set("Unknown")):(await t.ma.stop(),KP(t))}))),t.ma}function Gc(t){return t.fa||(t.fa=(function(n,r,i){const s=Rt(n);return s.sa(),new UK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JK.bind(null,t),r_:tG.bind(null,t),ta:ZK.bind(null,t),na:eG.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await I0(t)):(await t.fa.stop(),t.Ta.length>0&&(nt(tf,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class US{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new US(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FS(t,e){if(wl("AsyncQueue",`${e}: ${t}`),sh(t))return new it(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}class wd{static emptySet(e){return new wd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||mt.comparator(n.key,r.key):(n,r)=>mt.comparator(n.key,r.key),this.keyedMap=ap(),this.sortedSet=new Jn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class AM{constructor(){this.ga=new Jn(mt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Et(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Nd{constructor(e,n,r,i,s,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach((c=>{a.push({type:0,doc:c})})),new Nd(e,n,wd.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&C0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class rG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iG{constructor(){this.queries=OM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Rt(n),s=i.queries;i.queries=OM(),s.forEach(((a,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new it(Pe.ABORTED,"Firestore shutting down"))}}function OM(){return new ff((t=>gP(t)),C0)}async function sG(t,e){const n=Rt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new rG,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=FS(a,`Initialization of query '${id(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&HS(n)}async function oG(t,e){const n=Rt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aG(t,e){const n=Rt(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.Sa)c.Fa(i)&&(r=!0);a.wa=i}}r&&HS(n)}function lG(t,e,n){const r=Rt(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function HS(t){t.Ca.forEach((e=>{e.next()}))}var Jx,MM;(MM=Jx||(Jx={})).Ma="default",MM.Cache="cache";class cG{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jx.Cache}}class XP{constructor(e){this.key=e}}class JP{constructor(e){this.key=e}}class uG{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=yP(e),this.tu=new wd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new AM,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,m)=>{const v=i.get(h),w=A0(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;v&&w?v.data.isEqual(w.data)?S!==k&&(r.track({type:3,doc:w}),_=!0):this.su(v,w)||(r.track({type:2,doc:w}),_=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!v&&w?(r.track({type:0,doc:w}),_=!0):v&&!w&&(r.track({type:1,doc:v}),_=!0,(u||d)&&(c=!0)),_&&(w?(a=a.add(w),s=k?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:c,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,m)=>(function(w,S){const k=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:_})}};return k(w)-k(S)})(h.type,m.type)||this.eu(h.doc,m.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Nd(this.query,e.tu,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new JP(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new XP(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Nd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qS="SyncEngine";class fG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dG{constructor(e){this.key=e,this.hu=!1}}class hG{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ff((c=>gP(c)),C0),this.Iu=new Map,this.Eu=new Set,this.du=new Jn(mt.comparator),this.Au=new Map,this.Ru=new DS,this.Vu={},this.mu=new Map,this.fu=Rd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pG(t,e,n=!0){const r=iL(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ZP(r,e,n,!0),i}async function mG(t,e){const n=iL(t);await ZP(n,e,!0,!1)}async function ZP(t,e,n,r){const i=await NK(t.localStore,ca(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await gG(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&$P(t.remoteStore,i),c}async function gG(t,e,n,r,i){t.pu=(m,v,w)=>(async function(k,_,O,B){let W=_.view.ru(O);W.Cs&&(W=await EM(k.localStore,_.query,!1).then((({documents:R})=>_.view.ru(R,W))));const L=B&&B.targetChanges.get(_.targetId),q=B&&B.targetMismatches.get(_.targetId)!=null,U=_.view.applyChanges(W,k.isPrimaryClient,L,q);return NM(k,_.targetId,U.au),U.snapshot})(t,m,v,w);const s=await EM(t.localStore,e,!0),a=new uG(e,s.Qs),c=a.ru(s.documents),u=Cm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(c,t.isPrimaryClient,u);NM(t,n,d.au);const h=new fG(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function yG(t,e,n){const r=Rt(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!C0(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zS(r.remoteStore,i.targetId),Zx(r,i.targetId)})).catch(ih)):(Zx(r,i.targetId),await Qx(r.localStore,i.targetId,!0))}async function vG(t,e){const n=Rt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zS(n.remoteStore,r.targetId))}async function bG(t,e,n){const r=kG(t);try{const i=await(function(a,c){const u=Rt(a),d=Rn.now(),h=c.reduce(((w,S)=>w.add(S.key)),Qt());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let S=xl(),k=Qt();return u.Ns.getEntries(w,h).next((_=>{S=_,S.forEach(((O,B)=>{B.isValidDocument()||(k=k.add(O))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,S))).next((_=>{m=_;const O=[];for(const B of c){const W=RW(B,m.get(B.key).overlayedDocument);W!=null&&O.push(new df(B.key,W,lP(W.value.mapValue),pl.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,O,c)})).next((_=>{v=_;const O=_.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(w,_.batchId,O)}))})).then((()=>({batchId:v.batchId,changes:bP(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Jn(Yt)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d})(r,i.batchId,n),await Om(r,i.changes),await I0(r.remoteStore)}catch(i){const s=FS(i,"Failed to persist write");n.reject(s)}}async function eL(t,e){const n=Rt(t);try{const r=await OK(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=n.Au.get(s);a&&(dn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?dn(a.hu,14607):i.removedDocuments.size>0&&(dn(a.hu,42227),a.hu=!1))})),await Om(n,r,e)}catch(r){await ih(r)}}function RM(t,e,n){const r=Rt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,a)=>{const c=a.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){const u=Rt(a);u.onlineState=c;let d=!1;u.queries.forEach(((h,m)=>{for(const v of m.Sa)v.va(c)&&(d=!0)})),d&&HS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wG(t,e,n){const r=Rt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Jn(mt.comparator);a=a.insert(s,xi.newNoDocument(s,Ot.min()));const c=Qt().add(s),u=new R0(Ot.min(),new Map,new Jn(Yt),a,c);await eL(r,u),r.du=r.du.remove(s),r.Au.delete(e),$S(r)}else await Qx(r.localStore,e,!1).then((()=>Zx(r,e,n))).catch(ih)}async function xG(t,e){const n=Rt(t),r=e.batch.batchId;try{const i=await AK(n.localStore,e);nL(n,r,null),tL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Om(n,i)}catch(i){await ih(i)}}async function EG(t,e,n){const r=Rt(t);try{const i=await(function(a,c){const u=Rt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((m=>(dn(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);nL(r,e,n),tL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Om(r,i)}catch(i){await ih(i)}}function tL(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function nL(t,e,n){const r=Rt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Zx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||rL(t,r)}))}function rL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zS(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),$S(t))}function NM(t,e,n){for(const r of n)r instanceof XP?(t.Ru.addReference(r.key,e),SG(t,r)):r instanceof JP?(nt(qS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||rL(t,r.key)):Et(19791,{wu:r})}function SG(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(nt(qS,"New document in limbo: "+n),t.Eu.add(r),$S(t))}function $S(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new mt(Mn.fromString(e)),r=t.fu.next();t.Au.set(r,new dG(n)),t.du=t.du.insert(n,r),$P(t.remoteStore,new kc(ca(AS(n.path)),r,"TargetPurposeLimboResolution",_0.ce))}}async function Om(t,e,n){const r=Rt(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{a.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=PS.As(u.targetId,d);s.push(h)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(u,d){const h=Rt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Le.forEach(d,(v=>Le.forEach(v.Es,(w=>h.persistence.referenceDelegate.addReference(m,v.targetId,w))).next((()=>Le.forEach(v.ds,(w=>h.persistence.referenceDelegate.removeReference(m,v.targetId,w)))))))))}catch(m){if(!sh(m))throw m;nt(LS,"Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const w=h.Ms.get(v),S=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(v,k)}}})(r.localStore,s))}async function _G(t,e){const n=Rt(t);if(!n.currentUser.isEqual(e)){nt(qS,"User change. New user:",e.toKey());const r=await UP(n.localStore,e);n.currentUser=e,(function(s,a){s.mu.forEach((c=>{c.forEach((u=>{u.reject(new it(Pe.CANCELLED,a))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Om(n,r.Ls)}}function TG(t,e){const n=Rt(t),r=n.Au.get(e);if(r&&r.hu)return Qt().add(r.key);{let i=Qt();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const c=n.Tu.get(a);i=i.unionWith(c.view.nu)}return i}}function iL(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wG.bind(null,e),e.Pu.H_=aG.bind(null,e.eventManager),e.Pu.yu=lG.bind(null,e.eventManager),e}function kG(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EG.bind(null,e),e}class fv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=N0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CK(this.persistence,new _K,e.initialUser,this.serializer)}Cu(e){return new BP(IS.mi,this.serializer)}Du(e){return new IK}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fv.provider={build:()=>new fv};class CG extends fv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){dn(this.persistence.referenceDelegate instanceof cv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cK(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new BP((r=>cv.mi(r,n)),this.serializer)}}class eE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_G.bind(null,this.syncEngine),await nG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iG})()}createDatastore(e){const n=N0(e.databaseInfo.databaseId),r=(function(s){return new VK(s)})(e.databaseInfo);return(function(s,a,c,u){return new HK(s,a,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,a,c){return new $K(r,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>RM(this.syncEngine,n,0)),(function(){return TM.v()?new TM:new PK})())}createSyncEngine(e,n){return(function(i,s,a,c,u,d,h){const m=new hG(i,s,a,c,u,d);return h&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Rt(n);nt(tf,"RemoteStore shutting down."),r.Ea.add(5),await Am(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}eE.provider={build:()=>new eE};class AG{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Yc="FirestoreClient";class OG{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=ES.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{nt(Yc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(nt(Yc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=FS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function T1(t,e){t.asyncQueue.verifyOperationInProgress(),nt(Yc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await UP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function DM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MG(t);nt(Yc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>CM(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>CM(e.remoteStore,i))),t._onlineComponents=e}async function MG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nt(Yc,"Using user provided OfflineComponentProvider");try{await T1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Cd("Error using user provided cache. Falling back to memory cache: "+n),await T1(t,new fv)}}else nt(Yc,"Using default OfflineComponentProvider"),await T1(t,new CG(void 0));return t._offlineComponents}async function sL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nt(Yc,"Using user provided OnlineComponentProvider"),await DM(t,t._uninitializedComponentsProvider._online)):(nt(Yc,"Using default OnlineComponentProvider"),await DM(t,new eE))),t._onlineComponents}function RG(t){return sL(t).then((e=>e.syncEngine))}async function IM(t){const e=await sL(t),n=e.eventManager;return n.onListen=pG.bind(null,e.syncEngine),n.onUnlisten=yG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vG.bind(null,e.syncEngine),n}function oL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const PM=new Map;const aL="firestore.googleapis.com",LM=!0;class zM{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aL,this.ssl=LM}else this.host=e.host,this.ssl=e.ssl??LM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aK)throw new it(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new it(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new it(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new it(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class P0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zM(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new P7;switch(r.type){case"firstParty":return new V7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new it(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=PM.get(n);r&&(nt("ComponentProvider","Removing Datastore"),PM.delete(n),r.terminate())})(this),Promise.resolve()}}function NG(t,e,n,r={}){t=bd(t,P0);const i=eh(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(s2(`https://${c}`),o2("Firestore",!0)),s.host!==aL&&s.host!==c&&Cd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:r};if(!Xu(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=bi.MOCK_USER;else{d=s8(r.mockUserToken,t._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new it(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new bi(m)}t._authCredentials=new L7(new Q2(d,h))}}class ah{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ah(this.firestore,e,this._query)}}class Rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}toJSON(){return{type:Rr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_m(n,Rr._jsonSchema))return new Rr(e,r||null,new mt(Mn.fromString(n.referencePath)))}}Rr._jsonSchemaVersion="firestore/documentReference/1.0",Rr._jsonSchema={type:Mr("string",Rr._jsonSchemaVersion),referencePath:Mr("string")};class Lc extends ah{constructor(e,n,r){super(e,n,AS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new mt(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function DG(t,e,...n){if(t=Ni(t),X2("collection","path",e),t instanceof P0){const r=Mn.fromString(e,...n);return YO(r),new Lc(t,null,r)}{if(!(t instanceof Rr||t instanceof Lc))throw new it(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mn.fromString(e,...n));return YO(r),new Lc(t.firestore,null,r)}}function IG(t,e,...n){if(t=Ni(t),arguments.length===1&&(e=ES.newId()),X2("doc","path",e),t instanceof P0){const r=Mn.fromString(e,...n);return GO(r),new Rr(t,null,new mt(r))}{if(!(t instanceof Rr||t instanceof Lc))throw new it(Pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mn.fromString(e,...n));return GO(r),new Rr(t.firestore,t instanceof Lc?t.converter:null,new mt(r))}}const jM="AsyncQueue";class VM{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HP(this,"async_queue_retry"),this._c=()=>{const r=_1();r&&nt(jM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Bu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sh(e))throw e;nt(jM,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wl("INTERNAL UNHANDLED ERROR: ",BM(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=US.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Et(47125,{Pc:BM(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function BM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function UM(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class dv extends P0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new VM,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VM(e),this._firestoreClient=void 0,await e}}}function PG(t,e){const n=typeof t=="object"?t:u2(),r=typeof t=="string"?t:nv,i=uS(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=r8("firestore");s&&NG(i,...s)}return i}function lL(t){if(t._terminated)throw new it(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LG(t),t._firestoreClient}function LG(t){const e=t._freezeSettings(),n=(function(i,s,a,c){return new nW(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oL(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new OG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(ui.fromBase64String(e))}catch(n){throw new it(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:io._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_m(e,io._jsonSchema))return io.fromBase64String(e.bytes)}}io._jsonSchemaVersion="firestore/bytes/1.0",io._jsonSchema={type:Mr("string",io._jsonSchemaVersion),bytes:Mr("string")};class WS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new it(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cL{constructor(e){this._methodName=e}}class fa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new it(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new it(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fa._jsonSchemaVersion}}static fromJSON(e){if(_m(e,fa._jsonSchema))return new fa(e.latitude,e.longitude)}}fa._jsonSchemaVersion="firestore/geoPoint/1.0",fa._jsonSchema={type:Mr("string",fa._jsonSchemaVersion),latitude:Mr("number"),longitude:Mr("number")};class da{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:da._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_m(e,da._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new da(e.vectorValues);throw new it(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}da._jsonSchemaVersion="firestore/vectorValue/1.0",da._jsonSchema={type:Mr("string",da._jsonSchemaVersion),vectorValues:Mr("object")};const zG=/^__.*__$/;class jG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new df(e,this.data,this.fieldMask,n,this.fieldTransforms):new km(e,this.data,n,this.fieldTransforms)}}function uL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:t})}}class KS{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new KS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uL(this.Ac)&&zG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||N0(e)}Cc(e,n,r,i=!1){return new KS({Ac:e,methodName:n,Dc:r,path:li.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fL(t){const e=t._freezeSettings(),n=N0(t._databaseId);return new VG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BG(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);pL("Data must be an object, but it was:",a,r);const c=dL(r,a);let u,d;if(s.merge)u=new Ao(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const v=FG(e,m,n);if(!a.contains(v))throw new it(Pe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);qG(h,v)||h.push(v)}u=new Ao(h),d=a.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,d=a.fieldTransforms;return new jG(new ro(c),u,d)}function UG(t,e,n,r=!1){return GS(n,t.Cc(r?4:3,e))}function GS(t,e){if(hL(t=Ni(t)))return pL("Unsupported field value:",e,t),dL(t,e);if(t instanceof cL)return(function(r,i){if(!uL(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const c of r){let u=GS(c,i.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=Ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Rn.fromDate(r);return{timestampValue:lv(i.serializer,s)}}if(r instanceof Rn){const s=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lv(i.serializer,s)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:NP(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:NS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof da)return(function(a,c){return{mapValue:{fields:{[oP]:{stringValue:aP},[rv]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return OS(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${S0(r)}`)})(t,e)}function dL(t,e){const n={};return eP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uf(t,((r,i)=>{const s=GS(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function hL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rn||t instanceof fa||t instanceof io||t instanceof Rr||t instanceof cL||t instanceof da)}function pL(t,e,n){if(!hL(n)||!J2(n)){const r=S0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function FG(t,e,n){if((e=Ni(e))instanceof WS)return e._internalPath;if(typeof e=="string")return mL(t,e);throw hv("Field path arguments must be of type string or ",t,!1,void 0,n)}const HG=new RegExp("[~\\*/\\[\\]]");function mL(t,e,n){if(e.search(HG)>=0)throw hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new WS(...e.split("."))._internalPath}catch{throw hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hv(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new it(Pe.INVALID_ARGUMENT,c+t+u)}function qG(t,e){return t.some((n=>n.isEqual(e)))}class gL{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $G(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yL("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $G extends gL{data(){return super.data()}}function yL(t,e){return typeof e=="string"?mL(t,e):e instanceof WS?e._internalPath:e._delegate._internalPath}function WG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new it(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YS{}class KG extends YS{}function GG(t,e,...n){let r=[];e instanceof YS&&r.push(e),r=r.concat(n),(function(s){const a=s.filter((u=>u instanceof XS)).length,c=s.filter((u=>u instanceof QS)).length;if(a>1||a>0&&c>0)throw new it(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class QS extends KG{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new QS(e,n,r)}_apply(e){const n=this._parse(e);return vL(e._query,n),new ah(e.firestore,e.converter,qx(e._query,n))}_parse(e){const n=fL(e.firestore);return(function(s,a,c,u,d,h,m){let v;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new it(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){HM(m,h);const S=[];for(const k of m)S.push(FM(u,s,k));v={arrayValue:{values:S}}}else v=FM(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||HM(m,h),v=UG(c,a,m,h==="in"||h==="not-in");return Or.create(d,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class XS extends YS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new XS(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Lo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)vL(a,u),a=qx(a,u)})(e._query,n),new ah(e.firestore,e.converter,qx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function FM(t,e,n){if(typeof(n=Ni(n))=="string"){if(n==="")throw new it(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mP(e)&&n.indexOf("/")!==-1)throw new it(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Mn.fromString(n));if(!mt.isDocumentKey(r))throw new it(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rM(t,new mt(r))}if(n instanceof Rr)return rM(t,n._key);throw new it(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S0(n)}.`)}function HM(t,e){if(!Array.isArray(t)||t.length===0)throw new it(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vL(t,e){const n=(function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new it(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YG{convertValue(e,n="none"){switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uf(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[rv].arrayValue?.values?.map((r=>pr(r.doubleValue)));return new da(n)}convertGeoPoint(e){return new fa(pr(e.latitude),pr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=k0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){const n=$c(e);return new Rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Mn.fromString(e);dn(jP(r),9688,{name:e});const i=new $p(r.get(1),r.get(3)),s=new mt(r.popFirst(5));return i.isEqual(n)||wl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function QG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends gL{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Uu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Uu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uu._jsonSchema={type:Mr("string",Uu._jsonSchemaVersion),bundleSource:Mr("string","DocumentSnapshot"),bundleName:Mr("string"),bundle:Mr("string")};class Iy extends Uu{data(e={}){return super.data(e)}}class xd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Iy(this._firestore,this._userDataWriter,r.key,r,new cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{const u=new Iy(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const u=new Iy(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:XG(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ES.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:t})}}xd._jsonSchemaVersion="firestore/querySnapshot/1.0",xd._jsonSchema={type:Mr("string",xd._jsonSchemaVersion),bundleSource:Mr("string","QuerySnapshot"),bundleName:Mr("string"),bundle:Mr("string")};class bL extends YG{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function JG(t,e,n){t=bd(t,Rr);const r=bd(t.firestore,dv),i=QG(t.converter,e,n);return eY(r,[BG(fL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,pl.none())])}function ZG(t,...e){t=Ni(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||UM(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(UM(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let s,a,c;if(t instanceof Rr)a=bd(t.firestore,dv),c=AS(t._key.path),s={next:u=>{e[r]&&e[r](tY(a,t,u))},error:e[r+1],complete:e[r+2]};else{const u=bd(t,ah);a=bd(u.firestore,dv),c=u._query;const d=new bL(a);s={next:h=>{e[r]&&e[r](new xd(a,d,u,h))},error:e[r+1],complete:e[r+2]},WG(t._query)}return(function(d,h,m,v){const w=new AG(v),S=new cG(h,w,m);return d.asyncQueue.enqueueAndForget((async()=>sG(await IM(d),S))),()=>{w.Nu(),d.asyncQueue.enqueueAndForget((async()=>oG(await IM(d),S)))}})(lL(a),c,i,s)}function eY(t,e){return(function(r,i){const s=new Bu;return r.asyncQueue.enqueueAndForget((async()=>bG(await RG(r),i,s))),s.promise})(lL(t),e)}function tY(t,e,n){const r=n.docs.get(e._key),i=new bL(t);return new Uu(t,i,e._key,r,new cp(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){rh=i})(th),Td(new Ju("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new dv(new z7(r.getProvider("auth-internal")),new B7(a,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new it(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $p(d.options.projectId,h)})(a,i),a);return s={useFetchStreams:n,...s},c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),Ic(qO,$O,e),Ic(qO,$O,"esm2020")})();const k1={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0};let C1,Sp,tE,pv;try{if(!k1.apiKey||!k1.authDomain)throw new Error("Missing Firebase Config");C1=c2(k1),Sp=D7(C1),tE=new sl,pv=PG(C1)}catch{console.warn("Firebase Init Failed (likely missing .env). Using MOCK services to prevent crash."),Sp={currentUser:null,onAuthStateChanged:e=>(e(null),()=>{}),signOut:async()=>console.log("Mock SignOut")},tE={},pv={}}function pf(){const[t,e]=z.useState(null),[n,r]=z.useState(!0),{setSyncStatus:i}=Xd();return z.useEffect(()=>{const c=x$(Sp,u=>{e(u),r(!1),u?Ax(async()=>{const{syncEngine:d}=await Promise.resolve().then(()=>$E);return{syncEngine:d}},[]).then(({syncEngine:d})=>{d.userId=u.uid,d.start(),i("idle")}):Ax(async()=>{const{syncEngine:d}=await Promise.resolve().then(()=>$E);return{syncEngine:d}},void 0).then(({syncEngine:d})=>{d.stop(),d.userId=null})});return()=>c()},[i]),{user:t,loading:n,signInWithGoogle:async()=>{try{await F$(Sp,tE)}catch(c){console.error("Error signing in with Google",c)}},signOut:async()=>{try{await E$(Sp),e(null)}catch(c){console.error("Error signing out",c)}}}}function lh({startDate:t,endDate:e}={}){const{user:n,loading:r}=pf(),i=n?n.uid:"guest",s=v0(()=>{if(r)return[];if(t&&e){const a=new Date(e);return a.setHours(23,59,59,999),sn.logs.where("[userId+dateIso]").between([i,new Date(t).toISOString()],[i,a.toISOString()],!0,!0).reverse().toArray()}return sn.logs.where("[userId+dateIso]").between([i,Hc.minKey],[i,Hc.maxKey]).reverse().toArray()},[t,e,i,r]);return{logs:s,isLoading:!s||r}}function wL(){const t=mm(),{user:e}=pf(),n=e?e.uid:"guest";return pd({mutationFn:async({json:r,text:i,impact:s="medium",date:a})=>{const c=r||{};let u=i||"",d=a?new Date(a).toISOString():new Date().toISOString();const h=/^(yesterday|last friday|last monday|last tuesday|last wednesday|last thursday|last saturday|last sunday|(\d+)\s+days?\s+ago):\s*/i,m=u.match(h);if(m){const L=m[1].toLowerCase(),q=m[2];let U=new Date;if(L==="yesterday")U.setDate(U.getDate()-1);else if(q)U.setDate(U.getDate()-parseInt(q));else if(L.startsWith("last ")){const R=L.replace("last ",""),V={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[R];let G=U.getDay()-V;G<=0&&(G+=7),U.setDate(U.getDate()-G)}u=u.replace(m[0],""),d=U.toISOString()}const v=(u.match(/#[\w-]+/g)||[]).map(L=>L.substring(1)),w=["Quality","FunctionalExpertise","Productivity","ServiceExcellence","Leadership","Innovation","Teamwork"],k=(u.match(/@[\w]+/g)||[]).map(L=>L.substring(1)).filter(L=>w.some(q=>q.toLowerCase()===L.toLowerCase())).map(L=>w.find(q=>q.toLowerCase()===L.toLowerCase()));await Promise.all(v.map(async L=>{const q=await sn.tags.where({userId:n,label:L}).first();q?await sn.tags.update(q.id,{usageCount:q.usageCount+1,lastUsed:Date.now()}):await sn.tags.add({id:gp(),userId:n,label:L,normalizedLabel:L.toLowerCase(),category:"skill",usageCount:1,lastUsed:Date.now()})}));const _=/\b[A-Z]{2,}-\d+\b/g,O=[...new Set(u.match(_)||[])],B=[];await Promise.all(O.map(async L=>{let q=await sn.externalTickets.where({userId:n,ticketKey:L}).first();const U=new Date().toISOString();if(q){const R=await sn.externalTickets.get(q.id);await sn.externalTickets.update(q.id,{lastWorkedOn:U,totalLogCount:(R.totalLogCount||0)+1}),B.push(q.id)}else{const R=gp();await sn.externalTickets.add({id:R,userId:n,ticketSystem:"unknown",ticketKey:L,url:"",firstWorkedOn:U,lastWorkedOn:U,totalLogCount:1,status:"active"}),B.push(R)}}));const W={id:gp(),userId:n,dateIso:d,content:{format:"tiptap-json",body:c,plainTextSnippet:u.substring(0,100)},tags:v,externalTickets:B,metadata:{mood:3,impact:s,isMajorWin:!1,isStarred:!1,performanceCategories:k},syncState:{isSynced:!1,lastModified:Date.now()}};return await sn.logs.add(W),W},onSuccess:async r=>{t.invalidateQueries(["logs"]),Ax(async()=>{const{syncEngine:i}=await Promise.resolve().then(()=>$E);return{syncEngine:i}},void 0).then(({syncEngine:i})=>{i.userId&&sn.logs.get(r.id).then(s=>{s&&i.pushLog(s)})})}})}function nY(){const t=mm();return pd({mutationFn:async e=>{await sn.logs.delete(e)},onSuccess:()=>{t.invalidateQueries(["logs"])}})}function rY(){const t=mm();return pd({mutationFn:async e=>{const n=await sn.logs.get(e);if(n){const r=n.metadata||{};await sn.logs.update(e,{metadata:{...r,isStarred:!r.isStarred}})}},onSuccess:()=>{t.invalidateQueries(["logs"])}})}function iY(){const{user:t,loading:e}=pf(),n=t?t.uid:"guest";mm();const r=v0(()=>e?[]:sn.careerGoals.where("userId").equals(n).toArray(),[n,e]),i=pd({mutationFn:async({title:c,description:u,targetDate:d})=>{const h={id:gp(),userId:n,title:c,description:u,status:"active",linkedLogIds:[],targetDate:d,createdAt:Date.now()};return await sn.careerGoals.add(h),h},onSuccess:()=>{}}),s=pd({mutationFn:async({id:c,status:u})=>{await sn.careerGoals.update(c,{status:u})}}),a=pd({mutationFn:async c=>{await sn.careerGoals.delete(c)}});return{goals:r,isLoading:!r||e,addGoal:i,toggleGoalStatus:s,deleteGoal:a}}function sY(){const{user:t,loading:e}=pf(),n=t?t.uid:"guest",r=v0(async()=>e?[]:(await sn.tags.where("userId").equals(n).toArray()).sort((s,a)=>a.usageCount-s.usageCount),[n,e]);return{tags:r,isLoading:!r||e}}var A1={exports:{}},O1={};var qM;function oY(){if(qM)return O1;qM=1;var t=um();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function c(m,v){var w=v(),S=r({inst:{value:w,getSnapshot:v}}),k=S[0].inst,_=S[1];return s(function(){k.value=w,k.getSnapshot=v,u(k)&&_({inst:k})},[m,w,v]),i(function(){return u(k)&&_({inst:k}),m(function(){u(k)&&_({inst:k})})},[m]),a(w),w}function u(m){var v=m.getSnapshot;m=m.value;try{var w=v();return!n(m,w)}catch{return!0}}function d(m,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return O1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,O1}var $M;function xL(){return $M||($M=1,A1.exports=oY()),A1.exports}var EL=xL();function ri(t){this.content=t}ri.prototype={constructor:ri,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ri(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ri(n)},addToStart:function(t,e){return new ri([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ri(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ri(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ri.from(t),t.size?new ri(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ri.from(t),t.size?new ri(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ri.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ri.from=function(t){if(t instanceof ri)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ri(e)};function SL(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){let a=SL(i.content,s.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function _L(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let a=t.child(--i),c=e.child(--s),u=a.nodeSize;if(a==c){n-=u,r-=u;continue}if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){let d=0,h=Math.min(a.text.length,c.text.length);for(;d<h&&a.text[a.text.length-d-1]==c.text[c.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){let d=_L(a.content,c.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class Ve{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let a=0,c=0;c<n;a++){let u=this.content[a],d=c+u.nodeSize;if(d>e&&r(u,i+c,s||null,a)!==!1&&u.content.size){let h=c+1;u.nodesBetween(Math.max(0,e-h),Math.min(u.content.size,n-h),r,i+h)}c=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",a=!0;return this.nodesBetween(e,n,(c,u)=>{let d=c.isText?c.text.slice(Math.max(e,u)-u,n-u):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&d||c.isTextblock)&&r&&(a?a=!1:s+=r),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ve(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,a=0;a<n;s++){let c=this.content[s],u=a+c.nodeSize;u>e&&((a<e||u>n)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,n-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,n-a-1))),r.push(c),i+=c.nodeSize),a=u}return new Ve(r,i)}cutByIndex(e,n){return e==n?Ve.empty:e==0&&n==this.content.length?this:new Ve(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ve(i,s)}addToStart(e){return new Ve([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ve(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return SL(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return _L(this,e,n,r)}findIndex(e){if(e==0)return ry(0,e);if(e==this.size)return ry(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?ry(n+1,s):ry(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ve.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ve(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ve.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ve(n||e,r)}static from(e){if(!e)return Ve.empty;if(e instanceof Ve)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ve([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ve.empty=new Ve([],0);const M1={index:0,offset:0};function ry(t,e){return M1.index=t,M1.offset=e,M1}function mv(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!mv(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!mv(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Cn=class nE{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&mv(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return nE.none;if(e instanceof nE)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Cn.none=[];class gv extends Error{}class et{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=kL(this.content,e+this.openStart,n);return r&&new et(r,this.openStart,this.openEnd)}removeBetween(e,n){return new et(TL(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return et.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new et(Ve.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new et(e,r,i)}}et.empty=new et(Ve.empty,0,0);function TL(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:a,offset:c}=t.findIndex(n);if(i==e||s.isText){if(c!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(TL(s.content,e-i-1,n-i-1)))}function kL(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=kL(a.content,e-s-1,n,a);return c&&t.replaceChild(i,a.copy(c))}function aY(t,e,n){if(n.openStart>t.depth)throw new gv("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gv("Inconsistent open depths");return CL(t,e,n,0)}function CL(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let a=CL(t,e,n,r+1);return s.copy(s.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,c=a.content;return Hu(a,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:a,end:c}=lY(n,t);return Hu(s,OL(t,a,c,e,r))}else return Hu(s,yv(t,e,r))}function AL(t,e){if(!e.type.compatibleContent(t.type))throw new gv("Cannot join "+e.type.name+" onto "+t.type.name)}function rE(t,e,n){let r=t.node(n);return AL(r,e.node(n)),r}function Fu(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function _p(t,e,n,r){let i=(e||t).node(n),s=0,a=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Fu(t.nodeAfter,r),s++));for(let c=s;c<a;c++)Fu(i.child(c),r);e&&e.depth==n&&e.textOffset&&Fu(e.nodeBefore,r)}function Hu(t,e){return t.type.checkContent(e),t.copy(e)}function OL(t,e,n,r,i){let s=t.depth>i&&rE(t,e,i+1),a=r.depth>i&&rE(n,r,i+1),c=[];return _p(null,t,i,c),s&&a&&e.index(i)==n.index(i)?(AL(s,a),Fu(Hu(s,OL(t,e,n,r,i+1)),c)):(s&&Fu(Hu(s,yv(t,e,i+1)),c),_p(e,n,i,c),a&&Fu(Hu(a,yv(n,r,i+1)),c)),_p(r,null,i,c),new Ve(c)}function yv(t,e,n){let r=[];if(_p(null,t,n,r),t.depth>n){let i=rE(t,e,n+1);Fu(Hu(i,yv(t,e,n+1)),r)}return _p(e,null,n,r),new Ve(r)}function lY(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ve.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Yp{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Cn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let c=r;r=i,i=c}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new vv(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let a=e;;){let{index:c,offset:u}=a.content.findIndex(s),d=s-u;if(r.push(a,c,i+u),!d||(a=a.child(c),a.isText))break;s=d-1,i+=u+1}return new Yp(n,r,s)}static resolveCached(e,n){let r=WM.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else WM.set(e,r=new cY);let i=r.elts[r.i]=Yp.resolve(e,n);return r.i=(r.i+1)%uY,i}}class cY{constructor(){this.elts=[],this.i=0}}const uY=12,WM=new WeakMap;class vv{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fY=Object.create(null);let ha=class iE{constructor(e,n,r,i=Cn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ve.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&mv(this.attrs,n||e.defaultAttrs||fY)&&Cn.sameSet(this.marks,r||Cn.none)}copy(e=null){return e==this.content?this:new iE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new iE(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return et.empty;let i=this.resolve(e),s=this.resolve(n),a=r?0:i.sharedDepth(n),c=i.start(a),d=i.node(a).content.cut(i.pos-c,s.pos-c);return new et(d,i.depth-a,s.depth-a)}replace(e,n,r){return aY(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Yp.resolveCached(this,e)}resolveNoCache(e){return Yp.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ML(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ve.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),c=a&&a.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Cn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Cn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ve.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ha.prototype.text=void 0;class bv extends ha{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ML(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bv(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ML(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class nf{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new dY(e,n);if(r.next==null)return nf.empty;let i=RL(r);r.next&&r.err("Unexpected trailing text");let s=bY(vY(i));return wY(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(a,c){let u=a.matchFragment(e,r);if(u&&(!n||u.validEnd))return Ve.from(c.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:h,next:m}=a.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let v=s(m,c.concat(h));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let c=i;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:c,next:u}=s.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!i.type||u.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}nf.empty=new nf(!0);class dY{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function RL(t){let e=[];do e.push(hY(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hY(t){let e=[];do e.push(pY(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function pY(t){let e=yY(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=mY(t,e);else break;return e}function KM(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function mY(t,e){let n=KM(t),r=n;return t.eat(",")&&(t.next!="}"?r=KM(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function gY(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let a=n[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function yY(t){if(t.eat("(")){let e=RL(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=gY(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vY(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(a,c,u){let d={term:u,to:c};return e[a].push(d),d}function i(a,c){a.forEach(u=>u.to=c)}function s(a,c){if(a.type=="choice")return a.exprs.reduce((u,d)=>u.concat(s(d,c)),[]);if(a.type=="seq")for(let u=0;;u++){let d=s(a.exprs[u],c);if(u==a.exprs.length-1)return d;i(d,c=n())}else if(a.type=="star"){let u=n();return r(c,u),i(s(a.expr,u),u),[r(u)]}else if(a.type=="plus"){let u=n();return i(s(a.expr,c),u),i(s(a.expr,u),u),[r(u)]}else{if(a.type=="opt")return[r(c)].concat(s(a.expr,c));if(a.type=="range"){let u=c;for(let d=0;d<a.min;d++){let h=n();i(s(a.expr,u),h),u=h}if(a.max==-1)i(s(a.expr,u),u);else for(let d=a.min;d<a.max;d++){let h=n();r(u,h),i(s(a.expr,u),h),u=h}return[r(u)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function NL(t,e){return e-t}function GM(t,e){let n=[];return r(e),n.sort(NL);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let a=0;a<s.length;a++){let{term:c,to:u}=s[a];!c&&n.indexOf(u)==-1&&r(u)}}}function bY(t){let e=Object.create(null);return n(GM(t,0));function n(r){let i=[];r.forEach(a=>{t[a].forEach(({term:c,to:u})=>{if(!c)return;let d;for(let h=0;h<i.length;h++)i[h][0]==c&&(d=i[h][1]);GM(t,u).forEach(h=>{d||i.push([c,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=e[r.join(",")]=new nf(r.indexOf(t.length-1)>-1);for(let a=0;a<i.length;a++){let c=i[a][1].sort(NL);s.next.push({type:i[a][0],next:e[c.join(",")]||n(c)})}return s}}function wY(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,a=[];for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];a.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function DL(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function IL(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function PL(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function LL(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new EY(t,r,e[r]);return n}let YM=class zL{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=LL(e,r.attrs),this.defaultAttrs=DL(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==nf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:IL(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ha(this,this.computeAttrs(e),Ve.from(n),Cn.setFrom(r))}createChecked(e=null,n,r){return n=Ve.from(n),this.checkContent(n),new ha(this,this.computeAttrs(e),n,Cn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ve.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ve.empty,!0);return s?new ha(this,e,n.append(s),Cn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){PL(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Cn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,a)=>r[s]=new zL(s,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function xY(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class EY{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?xY(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class L0{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=LL(e,i.attrs),this.excluded=null;let s=DL(this.attrs);this.instance=s?new Cn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Cn(this,IL(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new L0(s,i++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){PL(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class jL{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ri.from(e.nodes),n.marks=ri.from(e.marks||{}),this.nodes=YM.compile(this.spec.nodes,this),this.marks=L0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",c=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=nf.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=c=="_"?null:c?QM(this,c.split(" ")):c==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:QM(this,a.split(" "))}this.nodeFromJSON=i=>ha.fromJSON(this,i),this.markFromJSON=i=>Cn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof YM){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new bv(r,r.defaultAttrs,e,Cn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function QM(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],a=s;if(s)n.push(s);else for(let c in t.marks){let u=t.marks[c];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function SY(t){return t.tag!=null}function _Y(t){return t.style!=null}class zc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(SY(i))this.tags.push(i);else if(_Y(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new JM(this,n,!1);return r.addAll(e,Cn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new JM(this,n,!0);return r.addAll(e,Cn.none,n.from,n.to),et.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(CY(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],c=a.style;if(!(c.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(a.getAttrs){let u=a.getAttrs(n);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let c=n[a];if((c.priority==null?50:c.priority)<s)break}n.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=ZM(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=ZM(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new zc(e,zc.schemaRules(e)))}}const VL={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},TY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},BL={ol:!0,ul:!0},Qp=1,sE=2,Tp=4;function XM(t,e,n){return e!=null?(e?Qp:0)|(e==="full"?sE:0):t&&t.whitespace=="pre"?Qp|sE:n&~Tp}class iy{constructor(e,n,r,i,s,a){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=Cn.none,this.match=s||(a&Tp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ve.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ve.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ve.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!VL.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class JM{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,a=XM(null,n.preserveWhitespace,0)|(r?Tp:0);i?s=new iy(i.type,i.attrs,Cn.none,!0,n.topMatch||i.type.contentMatch,a):r?s=new iy(null,null,Cn.none,!0,null,a):s=new iy(e.schema.topNodeType,null,Cn.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&sE?"full":this.localPreserveWS||(i.options&Qp)>0,{schema:a}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let u=0;u<c.length;u++)u&&this.insertNode(a.linebreakReplacement.create(),n,!0),c[u]&&this.insertNode(a.text(c[u]),n,!/\S/.test(c[u]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],u=e.previousSibling;(!c||u&&u.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),c;BL.hasOwnProperty(a)&&this.parser.normalizeLists&&kY(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(u?u.ignore:TY.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let d,h=this.needsBlock;if(VL.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=u&&u.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,u,d,u.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let c=void 0;;){let u=this.parser.matchStyle(s,a,this,c);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)c=u;else break}}return n}addElementByRule(e,n,r,i){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(a,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}s&&this.sync(c)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,c=i==null?null:e.childNodes[i];a!=c;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let a=this.open,c=0;a>=0;a--){let u=this.nodes[a],d=u.findWrapping(e);if(d&&(!i||i.length>d.length+c)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;c+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=Cn.none;for(let c of i.concat(e.marks))(s.type?s.type.allowsMarkType(c.type):eR(c.type,e.type))&&(a=c.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let c=XM(e,s,a.options);a.options&Tp&&a.content.length==0&&(c|=Tp);let u=Cn.none;return r=r.filter(d=>(a.type?a.type.allowsMarkType(d.type):eR(d.type,e))?(u=d.addToSet(u),!1):!0),this.nodes.push(new iy(e,n,u,i,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Qp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(c,u)=>{for(;c>=0;c--){let d=n[c];if(d==""){if(c==n.length-1||c==0)continue;for(;u>=s;u--)if(a(c-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function kY(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&BL.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function CY(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ZM(t){let e={};for(let n in t)e[n]=t[n];return e}function eR(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],a=c=>{s.push(c);for(let u=0;u<c.edgeCount;u++){let{type:d,next:h}=c.edge(u);if(d==e||s.indexOf(h)<0&&a(h))return!0}};if(a(i.contentMatch))return!0}}class mf{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=R1(n).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let c=0,u=0;for(;c<s.length&&u<a.marks.length;){let d=a.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[c][0])||d.type.spec.spanning===!1)break;c++,u++}for(;c<s.length;)i=s.pop()[1];for(;u<a.marks.length;){let d=a.marks[u++],h=this.serializeMark(d,a.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Py(R1(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Py(R1(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Py(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new mf(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=tR(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return tR(e.marks)}}function tR(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function R1(t){return t.document||window.document}const nR=new WeakMap;function AY(t){let e=nR.get(t);return e===void 0&&nR.set(t,e=OY(t)),e}function OY(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Py(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=AY(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let c,u=n?t.createElementNS(n,i):t.createElement(i),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let m in d)if(d[m]!=null){let v=m.indexOf(" ");v>0?u.setAttributeNS(m.slice(0,v),m.slice(v+1),d[m]):m=="style"&&u.style?u.style.cssText=d[m]:u.setAttribute(m,d[m])}}for(let m=h;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:w,contentDOM:S}=Py(t,v,n,r);if(u.appendChild(w),S){if(c)throw new RangeError("Multiple content holes");c=S}}}return{dom:u,contentDOM:c}}const UL=65535,FL=Math.pow(2,16);function MY(t,e){return t+e*FL}function rR(t){return t&UL}function RY(t){return(t-(t&UL))/FL}const HL=1,qL=2,Ly=4,$L=8;class oE{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&$L)>0}get deletedBefore(){return(this.delInfo&(HL|Ly))>0}get deletedAfter(){return(this.delInfo&(qL|Ly))>0}get deletedAcross(){return(this.delInfo&Ly)>0}}class Os{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Os.empty)return Os.empty}recover(e){let n=0,r=rR(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+RY(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?i:0);if(u>e)break;let d=this.ranges[c+s],h=this.ranges[c+a],m=u+d;if(e<=m){let v=d?e==u?-1:e==m?1:n:n,w=u+i+(v<0?0:h);if(r)return w;let S=e==(n<0?u:m)?null:MY(c/3,e-u),k=e==u?qL:e==m?HL:Ly;return(n<0?e!=u:e!=m)&&(k|=$L),new oE(w,k,S)}i+=h-d}return r?e+i:new oE(e+i,0,null)}touches(e,n){let r=0,i=rR(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?r:0);if(u>e)break;let d=this.ranges[c+s],h=u+d;if(e<=h&&c==i*3)return!0;r+=this.ranges[c+a]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],c=a-(this.inverted?s:0),u=a+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];e(c,c+d,u,u+h),s+=h-d}}invert(){return new Os(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Os.empty:new Os(e<0?[0,-e,0]:[0,0,e])}}Os.empty=new Os([]);class Xp{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Xp(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Xp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],c=a.mapResult(e,n);if(c.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,e=this._maps[u].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new oE(e,i,null)}}const N1=Object.create(null);class _i{getMap(){return Os.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=N1[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in N1)throw new RangeError("Duplicate use of step JSON ID "+e);return N1[e]=n,n.prototype.jsonID=e,n}}class Nr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Nr(e,null)}static fail(e){return new Nr(null,e)}static fromReplace(e,n,r,i){try{return Nr.ok(e.replace(n,r,i))}catch(s){if(s instanceof gv)return Nr.fail(s.message);throw s}}}function JS(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(JS(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ve.fromArray(r)}class Cc extends _i{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new et(JS(n.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Nr.fromReplace(e,this.from,this.to,s)}invert(){return new Oo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Cc(n.pos,r.pos,this.mark)}merge(e){return e instanceof Cc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Cc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Cc(n.from,n.to,e.markFromJSON(n.mark))}}_i.jsonID("addMark",Cc);class Oo extends _i{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new et(JS(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Nr.fromReplace(e,this.from,this.to,r)}invert(){return new Cc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Oo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Oo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Oo(n.from,n.to,e.markFromJSON(n.mark))}}_i.jsonID("removeMark",Oo);class Ac extends _i{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Nr.fromReplace(e,this.pos,this.pos+1,new et(Ve.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ac(this.pos,n.marks[i]);return new Ac(this.pos,this.mark)}}return new rf(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ac(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ac(n.pos,e.markFromJSON(n.mark))}}_i.jsonID("addNodeMark",Ac);class rf extends _i{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Nr.fromReplace(e,this.pos,this.pos+1,new et(Ve.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ac(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new rf(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new rf(n.pos,e.markFromJSON(n.mark))}}_i.jsonID("removeNodeMark",rf);class Kr extends _i{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&aE(e,this.from,this.to)?Nr.fail("Structure replace would overwrite content"):Nr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Os([this.from,this.to-this.from,this.slice.size])}invert(e){return new Kr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Kr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Kr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?et.empty:new et(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Kr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?et.empty:new et(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Kr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Kr(n.from,n.to,et.fromJSON(e,n.slice),!!n.structure)}}_i.jsonID("replace",Kr);class Yr extends _i{constructor(e,n,r,i,s,a,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=c}apply(e){if(this.structure&&(aE(e,this.from,this.gapFrom)||aE(e,this.gapTo,this.to)))return Nr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Nr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Nr.fromReplace(e,this.from,this.to,r):Nr.fail("Content does not fit in gap")}getMap(){return new Os([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Yr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Yr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yr(n.from,n.to,n.gapFrom,n.gapTo,et.fromJSON(e,n.slice),n.insert,!!n.structure)}}_i.jsonID("replaceAround",Yr);function aE(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function NY(t,e,n,r){let i=[],s=[],a,c;t.doc.nodesBetween(e,n,(u,d,h)=>{if(!u.isInline)return;let m=u.marks;if(!r.isInSet(m)&&h.type.allowsMarkType(r.type)){let v=Math.max(d,e),w=Math.min(d+u.nodeSize,n),S=r.addToSet(m);for(let k=0;k<m.length;k++)m[k].isInSet(S)||(a&&a.to==v&&a.mark.eq(m[k])?a.to=w:i.push(a=new Oo(v,w,m[k])));c&&c.to==v?c.to=w:s.push(c=new Cc(v,w,r))}}),i.forEach(u=>t.step(u)),s.forEach(u=>t.step(u))}function DY(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(a,c)=>{if(!a.isInline)return;s++;let u=null;if(r instanceof L0){let d=a.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(a.marks)&&(u=[r]):u=a.marks;if(u&&u.length){let d=Math.min(c+a.nodeSize,n);for(let h=0;h<u.length;h++){let m=u[h],v;for(let w=0;w<i.length;w++){let S=i[w];S.step==s-1&&m.eq(i[w].style)&&(v=S)}v?(v.to=d,v.step=s):i.push({style:m,from:Math.max(c,e),to:d,step:s})}}}),i.forEach(a=>t.step(new Oo(a.from,a.to,a.style)))}function ZS(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),a=[],c=e+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=c+d.nodeSize,m=r.matchType(d.type);if(!m)a.push(new Kr(c,h,et.empty));else{r=m;for(let v=0;v<d.marks.length;v++)n.allowsMarkType(d.marks[v].type)||t.step(new Oo(c,h,d.marks[v]));if(i&&d.isText&&n.whitespace!="pre"){let v,w=/\r?\n|\r/g,S;for(;v=w.exec(d.text);)S||(S=new et(Ve.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),a.push(new Kr(c+v.index,c+v.index+v[0].length,S))}}c=h}if(!r.validEnd){let u=r.fillBefore(Ve.empty,!0);t.replace(c,c,new et(u,0,0))}for(let u=a.length-1;u>=0;u--)t.step(a[u])}function IY(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ch(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let a=t.$from.node(r),c=t.$from.index(r)+i,u=t.$to.indexAfter(r)-s;if(r<t.depth&&a.canReplace(c,u,n))return r;if(r==0||a.type.spec.isolating||!IY(a,c,u))break;c&&(i=1),u<a.childCount&&(s=1)}return null}function PY(t,e,n){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),c=i.after(s+1),u=a,d=c,h=Ve.empty,m=0;for(let S=s,k=!1;S>n;S--)k||r.index(S)>0?(k=!0,h=Ve.from(r.node(S).copy(h)),m++):u--;let v=Ve.empty,w=0;for(let S=s,k=!1;S>n;S--)k||i.after(S+1)<i.end(S)?(k=!0,v=Ve.from(i.node(S).copy(v)),w++):d++;t.step(new Yr(u,d,a,c,new et(h.append(v),m,w),h.size-m,!0))}function e_(t,e,n=null,r=t){let i=LY(t,e),s=i&&zY(r,e);return s?i.map(iR).concat({type:e,attrs:n}).concat(s.map(iR)):null}function iR(t){return{type:t,attrs:null}}function LY(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return n.canReplaceWith(r,i,a)?s:null}function zY(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let u=(a.length?a[a.length-1]:e).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:a}function jY(t,e,n){let r=Ve.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let c=n[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ve.from(n[a].type.create(n[a].attrs,r))}let i=e.start,s=e.end;t.step(new Yr(i,s,i,s,new et(r,0,0),n.length,!0))}function VY(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(a,c)=>{let u=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,u)&&BY(t.doc,t.mapping.slice(s).map(c),r)){let d=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!S?d=!1:!w&&S&&(d=!0)}d===!1&&KL(t,a,c,s),ZS(t,t.mapping.slice(s).map(c,1),r,void 0,d===null);let h=t.mapping.slice(s),m=h.map(c,1),v=h.map(c+a.nodeSize,1);return t.step(new Yr(m,v,m+1,v-1,new et(Ve.from(r.create(u,null,a.marks)),0,0),1,!0)),d===!0&&WL(t,a,c,s),!1}})}function WL(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(i.text);){let u=t.mapping.slice(r).map(n+1+s+a.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function KL(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+s);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function BY(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function UY(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Yr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new et(Ve.from(a),0,0),1,!0))}function ml(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let m=i.node(d),v=i.index(d);if(m.type.spec.isolating)return!1;let w=m.content.cutByIndex(v,m.childCount),S=r&&r[h+1];S&&(w=w.replaceChild(0,S.type.create(S.attrs)));let k=r&&r[h]||m;if(!m.canReplace(v+1,m.childCount)||!k.type.validContent(w))return!1}let c=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(c,c,u?u.type:i.node(s+1).type)}function FY(t,e,n=1,r){let i=t.doc.resolve(e),s=Ve.empty,a=Ve.empty;for(let c=i.depth,u=i.depth-n,d=n-1;c>u;c--,d--){s=Ve.from(i.node(c).copy(s));let h=r&&r[d];a=Ve.from(h?h.type.create(h.attrs,a):i.node(c).copy(a))}t.step(new Kr(e,e,new et(s.append(a),n,n),!0))}function tu(t,e){let n=t.resolve(e),r=n.index();return GL(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function HY(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function GL(t,e){return!!(t&&e&&!t.isLeaf&&HY(t,e))}function z0(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,a,c=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(i+1),c++,a=r.node(i).maybeChild(c)):(s=r.node(i).maybeChild(c-1),a=r.node(i+1)),s&&!s.isTextblock&&GL(s,a)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function qY(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),a=s.node().type;if(i&&a.inlineContent){let h=a.whitespace=="pre",m=!!a.contentMatch.matchType(i);h&&!m?r=!1:!h&&m&&(r=!0)}let c=t.steps.length;if(r===!1){let h=t.doc.resolve(e+n);KL(t,h.node(),h.before(),c)}a.inlineContent&&ZS(t,e+n-1,a,s.node().contentMatchAt(s.index()),r==null);let u=t.mapping.slice(c),d=u.map(e-n);if(t.step(new Kr(d,u.map(e+n,-1),et.empty,!0)),r===!0){let h=t.doc.resolve(d);WL(t,h.node(),h.before(),t.steps.length)}return t}function $Y(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function YL(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),d=r.node(a),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let m=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=m&&d.canReplaceWith(u,u,m[0])}if(h)return c==0?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function j0(t,e,n=e,r=et.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return QL(i,s,r)?new Kr(e,n,r):new WY(i,s,r).fit()}function QL(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class WY{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ve.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ve.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,c=i.depth;for(;a&&c&&s.childCount==1;)s=s.firstChild.content,a--,c--;let u=new et(s,a,c);return e>-1?new Yr(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Kr(r.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=D1(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:u,match:d}=this.frontier[c],h,m=null;if(n==1&&(a?d.matchType(a.type)||(m=d.fillBefore(Ve.from(a),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:c,parent:s,inject:m};if(n==2&&a&&(h=d.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=D1(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new et(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=D1(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new et(up(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new et(up(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let k=0;k<s.length;k++)this.openFrontierNode(s[k]);let a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,d=0,h=[],{match:m,type:v}=this.frontier[n];if(i){for(let k=0;k<i.childCount;k++)h.push(i.child(k));m=m.matchFragment(i)}let w=c.size+e-(a.content.size-a.openEnd);for(;d<c.childCount;){let k=c.child(d),_=m.matchType(k.type);if(!_)break;d++,(d>1||u==0||k.content.size)&&(m=_,h.push(XL(k.mark(v.allowedMarks(k.marks)),d==1?u:0,d==c.childCount?w:-1)))}let S=d==c.childCount;S||(w=-1),this.placed=fp(this.placed,n,Ve.from(h)),this.frontier[n].match=m,S&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,_=c;k<w;k++){let O=_.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),_=O.content}this.unplaced=S?e==0?et.empty:new et(up(a.content,e-1,1),e-1,w<0?a.openEnd:e-1):new et(up(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!I1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=I1(e,n,i,r,s);if(a){for(let c=n-1;c>=0;c--){let{match:u,type:d}=this.frontier[c],h=I1(e,c,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:a,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=fp(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=fp(this.placed,this.depth,Ve.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ve.empty,!0);n.childCount&&(this.placed=fp(this.placed,this.frontier.length,n))}}function up(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(up(t.firstChild.content,e-1,n)))}function fp(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(fp(t.lastChild.content,e-1,n)))}function D1(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function XL(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,XL(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ve.empty,!0)))),t.copy(r)}function I1(t,e,n,r,i){let s=t.node(e),a=i?t.indexAfter(e):t.index(e);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let c=r.fillBefore(s.content,!0,a);return c&&!KY(n,s.content,a)?c:null}function KY(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function GY(t){return t.spec.defining||t.spec.definingForContent}function YY(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(QL(i,s,r))return t.step(new Kr(e,n,r));let a=ZL(i,s);a[a.length-1]==0&&a.pop();let c=-(i.depth+1);a.unshift(c);for(let v=i.depth,w=i.pos-1;v>0;v--,w--){let S=i.node(v).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;a.indexOf(v)>-1?c=v:i.before(v)==w&&a.splice(1,0,-v)}let u=a.indexOf(c),d=[],h=r.openStart;for(let v=r.content,w=0;;w++){let S=v.firstChild;if(d.push(S),w==r.openStart)break;v=S.content}for(let v=h-1;v>=0;v--){let w=d[v],S=GY(w.type);if(S&&!w.sameMarkup(i.node(Math.abs(c)-1)))h=v;else if(S||!w.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let w=(v+h+1)%(r.openStart+1),S=d[w];if(S)for(let k=0;k<a.length;k++){let _=a[(k+u)%a.length],O=!0;_<0&&(O=!1,_=-_);let B=i.node(_-1),W=i.index(_-1);if(B.canReplaceWith(W,W,S.type,S.marks))return t.replace(i.before(_),O?s.after(_):n,new et(JL(r.content,0,r.openStart,w),w,r.openEnd))}}let m=t.steps.length;for(let v=a.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>m));v--){let w=a[v];w<0||(e=i.before(w),n=s.after(w))}}function JL(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(JL(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Ve.empty,!0))}return t}function QY(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=$Y(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new et(Ve.from(r),0,0))}function XY(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=ZL(r,i);for(let a=0;a<s.length;a++){let c=s[a],u=a==s.length-1;if(u&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),i.end(c));if(c>0&&(u||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return t.delete(r.before(c),i.after(c))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function ZL(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Ed extends _i{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Nr.fromReplace(e,this.pos,this.pos+1,new et(Ve.from(i),0,n.isLeaf?0:1))}getMap(){return Os.empty}invert(e){return new Ed(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ed(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ed(n.pos,n.attr,n.value)}}_i.jsonID("attr",Ed);class Jp extends _i{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Nr.ok(r)}getMap(){return Os.empty}invert(e){return new Jp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Jp(n.attr,n.value)}}_i.jsonID("docAttr",Jp);let Dd=class extends Error{};Dd=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Dd.prototype=Object.create(Error.prototype);Dd.prototype.constructor=Dd;Dd.prototype.name="TransformError";class ez{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Xp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Dd(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=et.empty){let i=j0(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new et(Ve.from(r),0,0))}delete(e,n){return this.replace(e,n,et.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return YY(this,e,n,r),this}replaceRangeWith(e,n,r){return QY(this,e,n,r),this}deleteRange(e,n){return XY(this,e,n),this}lift(e,n){return PY(this,e,n),this}join(e,n=1){return qY(this,e,n),this}wrap(e,n){return jY(this,e,n),this}setBlockType(e,n=e,r,i=null){return VY(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return UY(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ed(e,n,r)),this}setDocAttribute(e,n){return this.step(new Jp(e,n)),this}addNodeMark(e,n){return this.step(new Ac(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Cn)n.isInSet(r.marks)&&this.step(new rf(e,n));else{let i=r.marks,s,a=[];for(;s=n.isInSet(i);)a.push(new rf(e,s)),i=s.removeFromSet(i);for(let c=a.length-1;c>=0;c--)this.step(a[c])}return this}split(e,n=1,r){return FY(this,e,n,r),this}addMark(e,n,r){return NY(this,e,n,r),this}removeMark(e,n,r){return DY(this,e,n,r),this}clearIncompatible(e,n,r){return ZS(this,e,n,r),this}}const P1=Object.create(null);class xt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new tz(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=et.empty){let r=n.content.lastChild,i=null;for(let c=0;c<n.openEnd;c++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:u,$to:d}=a[c],h=e.mapping.slice(s);e.replaceRange(h.map(u.pos),h.map(d.pos),c?et.empty:n),c==0&&aR(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:c}=i[s],u=e.mapping.slice(r),d=u.map(a.pos),h=u.map(c.pos);s?e.deleteRange(d,h):(e.replaceRangeWith(d,h,n),aR(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _t(e):ad(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=n<0?ad(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):ad(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ms(e.node(0))}static atStart(e){return ad(e,e,0,0,1)||new Ms(e)}static atEnd(e){return ad(e,e,e.content.size,e.childCount,-1)||new Ms(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=P1[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in P1)throw new RangeError("Duplicate use of selection JSON ID "+e);return P1[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _t.between(this.$anchor,this.$head).getBookmark()}}xt.prototype.visible=!0;class tz{constructor(e,n){this.$from=e,this.$to=n}}let sR=!1;function oR(t){!sR&&!t.parent.inlineContent&&(sR=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _t extends xt{constructor(e,n=e){oR(e),oR(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return xt.near(r);let i=e.resolve(n.map(this.anchor));return new _t(i.parent.inlineContent?i:r,r)}replace(e,n=et.empty){if(super.replace(e,n),n==et.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new V0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=xt.findFrom(n,r,!0)||xt.findFrom(n,-r,!0);if(s)n=s.$head;else return xt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(xt.findFrom(e,-r,!0)||xt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _t(e,n)}}xt.jsonID("text",_t);class V0{constructor(e,n){this.anchor=e,this.head=n}map(e){return new V0(e.map(this.anchor),e.map(this.head))}resolve(e){return _t.between(e.resolve(this.anchor),e.resolve(this.head))}}class gt extends xt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?xt.near(s):new gt(s)}content(){return new et(Ve.from(this.node),0,0)}eq(e){return e instanceof gt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new t_(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new gt(e.resolve(n.anchor))}static create(e,n){return new gt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}gt.prototype.visible=!1;xt.jsonID("node",gt);class t_{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new V0(r,r):new t_(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&gt.isSelectable(r)?new gt(n):xt.near(n)}}class Ms extends xt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=et.empty){if(n==et.empty){e.delete(0,e.doc.content.size);let r=xt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ms(e)}map(e){return new Ms(e)}eq(e){return e instanceof Ms}getBookmark(){return JY}}xt.jsonID("all",Ms);const JY={map(){return this},resolve(t){return new Ms(t)}};function ad(t,e,n,r,i,s=!1){if(e.inlineContent)return _t.create(t,n);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let c=e.child(a);if(c.isAtom){if(!s&&gt.isSelectable(c))return gt.create(t,n-(i<0?c.nodeSize:0))}else{let u=ad(t,c,n+i,i<0?c.childCount:0,i,s);if(u)return u}n+=c.nodeSize*i}return null}function aR(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Kr||i instanceof Yr))return;let s=t.mapping.maps[r],a;s.forEach((c,u,d,h)=>{a==null&&(a=h)}),t.setSelection(xt.near(t.doc.resolve(a),n))}const lR=1,sy=2,cR=4;class ZY extends ez{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|lR)&~sy,this.storedMarks=null,this}get selectionSet(){return(this.updated&lR)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=sy,this}ensureMarks(e){return Cn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&sy)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~sy,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Cn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(xt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=cR,this}get scrolledIntoView(){return(this.updated&cR)>0}}function uR(t,e){return!e||!t?t:t.bind(e)}class dp{constructor(e,n,r){this.name=e,this.init=uR(n.init,r),this.apply=uR(n.apply,r)}}const eQ=[new dp("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new dp("selection",{init(t,e){return t.selection||xt.atStart(e.doc)},apply(t){return t.selection}}),new dp("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new dp("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class L1{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=eQ.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new dp(r.key,r.spec.state,r))})}}class hd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let u=i?i[a].n:0,d=i?i[a].state:this,h=u<n.length&&c.spec.appendTransaction.call(c,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,a)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<a?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new hd(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new ZY(this)}static create(e){let n=new L1(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new hd(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new L1(this.schema,e.plugins),r=n.fields,i=new hd(n);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new L1(e.schema,e.plugins),s=new hd(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=ha.fromJSON(e.schema,n.doc);else if(a.name=="selection")s.selection=xt.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let u=r[c],d=u.spec.state;if(u.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){s[a.name]=d.fromJSON.call(u,e,n[c],s);return}}s[a.name]=a.init(e,s)}}),s}}function nz(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=nz(i,e,{})),n[r]=i}return n}class An{constructor(e){this.spec=e,this.props={},e.props&&nz(e.props,this,this.props),this.key=e.key?e.key.key:rz("plugin")}getState(e){return e[this.key]}}const z1=Object.create(null);function rz(t){return t in z1?t+"$"+ ++z1[t]:(z1[t]=0,t+"$")}class On{constructor(e="key"){this.key=rz(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const n_=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function iz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const sz=(t,e,n)=>{let r=iz(t,n);if(!r)return!1;let i=r_(r);if(!i){let a=r.blockRange(),c=a&&ch(a);return c==null?!1:(e&&e(t.tr.lift(a,c).scrollIntoView()),!0)}let s=i.nodeBefore;if(pz(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Id(s,"end")||gt.isSelectable(s)))for(let a=r.depth;;a--){let c=j0(t.doc,r.before(a),r.after(a),et.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=t.tr.step(c);u.setSelection(Id(s,"end")?xt.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):gt.create(u.doc,i.pos-s.nodeSize)),e(u.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},tQ=(t,e,n)=>{let r=iz(t,n);if(!r)return!1;let i=r_(r);return i?oz(t,i,e):!1},nQ=(t,e,n)=>{let r=lz(t,n);if(!r)return!1;let i=i_(r);return i?oz(t,i,e):!1};function oz(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let a=e.nodeAfter,c=a,u=e.pos+1;for(;!c.isTextblock;u++){if(c.type.spec.isolating)return!1;let h=c.firstChild;if(!h)return!1;c=h}let d=j0(t.doc,s,u,et.empty);if(!d||d.from!=s||d instanceof Kr&&d.slice.size>=u-s)return!1;if(n){let h=t.tr.step(d);h.setSelection(_t.create(h.doc,s)),n(h.scrollIntoView())}return!0}function Id(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const az=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=r_(r)}let a=s&&s.nodeBefore;return!a||!gt.isSelectable(a)?!1:(e&&e(t.tr.setSelection(gt.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function r_(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function lz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const cz=(t,e,n)=>{let r=lz(t,n);if(!r)return!1;let i=i_(r);if(!i)return!1;let s=i.nodeAfter;if(pz(t,i,e,1))return!0;if(r.parent.content.size==0&&(Id(s,"start")||gt.isSelectable(s))){let a=j0(t.doc,r.before(),r.after(),et.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=t.tr.step(a);c.setSelection(Id(s,"start")?xt.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):gt.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},uz=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=i_(r)}let a=s&&s.nodeAfter;return!a||!gt.isSelectable(a)?!1:(e&&e(t.tr.setSelection(gt.create(t.doc,s.pos)).scrollIntoView()),!0)};function i_(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const rQ=(t,e)=>{let n=t.selection,r=n instanceof gt,i;if(r){if(n.node.isTextblock||!tu(t.doc,n.from))return!1;i=n.from}else if(i=z0(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(gt.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},iQ=(t,e)=>{let n=t.selection,r;if(n instanceof gt){if(n.node.isTextblock||!tu(t.doc,n.to))return!1;r=n.to}else if(r=z0(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},sQ=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&ch(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},fz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function s_(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const oQ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=s_(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let c=n.after(),u=t.tr.replaceWith(c,c,a.createAndFill());u.setSelection(xt.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0},dz=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ms||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=s_(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(_t.create(c.doc,a+1)),e(c.scrollIntoView())}return!0},hz=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ml(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ch(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function aQ(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof gt&&e.selection.node.isBlock)return!r.parentOffset||!ml(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,c,u=!1,d=!1;for(let w=r.depth;;w--)if(r.node(w).isBlock){u=r.end(w)==r.pos+(r.depth-w),d=r.start(w)==r.pos-(r.depth-w),c=s_(r.node(w-1).contentMatchAt(r.indexAfter(w-1))),s.unshift(u&&c?{type:c}:null),a=w;break}else{if(w==1)return!1;s.unshift(null)}let h=e.tr;(e.selection instanceof _t||e.selection instanceof Ms)&&h.deleteSelection();let m=h.mapping.map(r.pos),v=ml(h.doc,m,s.length,s);if(v||(s[0]=c?{type:c}:null,v=ml(h.doc,m,s.length,s)),!v)return!1;if(h.split(m,s.length,s),!u&&d&&r.node(a).type!=c){let w=h.mapping.map(r.before(a)),S=h.doc.resolve(w);c&&r.node(a-1).canReplaceWith(S.index(),S.index()+1,c)&&h.setNodeMarkup(h.mapping.map(r.before(a)),c)}return n&&n(h.scrollIntoView()),!0}}const lQ=aQ(),cQ=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(gt.create(t.doc,i))),!0)};function uQ(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||tu(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function pz(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,a,c,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&uQ(t,e,n))return!0;let d=!u&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(a=(c=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&c.matchType(a[0]||s.type).validEnd){if(n){let w=e.pos+s.nodeSize,S=Ve.empty;for(let O=a.length-1;O>=0;O--)S=Ve.from(a[O].create(null,S));S=Ve.from(i.copy(S));let k=t.tr.step(new Yr(e.pos-1,w,e.pos,w,new et(S,1,0),a.length,!0)),_=k.doc.resolve(w+2*a.length);_.nodeAfter&&_.nodeAfter.type==i.type&&tu(k.doc,_.pos)&&k.join(_.pos),n(k.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:xt.findFrom(e,1),m=h&&h.$from.blockRange(h.$to),v=m&&ch(m);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(m,v).scrollIntoView()),!0;if(d&&Id(s,"start",!0)&&Id(i,"end")){let w=i,S=[];for(;S.push(w),!w.isTextblock;)w=w.lastChild;let k=s,_=1;for(;!k.isTextblock;k=k.firstChild)_++;if(w.canReplace(w.childCount,w.childCount,k.content)){if(n){let O=Ve.empty;for(let W=S.length-1;W>=0;W--)O=Ve.from(S[W].copy(O));let B=t.tr.step(new Yr(e.pos-S.length,e.pos+s.nodeSize,e.pos+_,e.pos+s.nodeSize-_,new et(O,S.length,0),0,!0));n(B.scrollIntoView())}return!0}}return!1}function mz(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(_t.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const fQ=mz(-1),dQ=mz(1);function hQ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s),c=a&&e_(a,t,e);return c?(r&&r(n.tr.wrap(a,c).scrollIntoView()),!0):!1}}function fR(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[s];n.doc.nodesBetween(a,c,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)i=!0;else{let h=n.doc.resolve(d),m=h.index();i=h.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:u}}=n.selection.ranges[a];s.setBlockType(c,u,t,e)}r(s.scrollIntoView())}return!0}}function o_(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}o_(n_,sz,az);o_(n_,cz,uz);o_(fz,dz,hz,lQ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function pQ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let c=r?n.tr:null;return mQ(c,a,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function mQ(t,e,n,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=a.resolve(e.start-2);s=new vv(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new vv(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let c=e_(s,n,r,e);return c?(t&&gQ(t,e,c,i,n),!0):!1}function gQ(t,e,n,r,i){let s=Ve.empty;for(let h=n.length-1;h>=0;h--)s=Ve.from(n[h].type.create(n[h].attrs,s));t.step(new Yr(e.start-(r?2:0),e.end,e.start,e.end,new et(s,0,0),n.length,!0));let a=0;for(let h=0;h<n.length;h++)n[h].type==i&&(a=h+1);let c=n.length-a,u=e.start+n.length-(r?2:0),d=e.parent;for(let h=e.startIndex,m=e.endIndex,v=!0;h<m;h++,v=!1)!v&&ml(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=d.child(h).nodeSize;return t}function yQ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?vQ(e,n,t,s):bQ(e,n,s):!0:!1}}function vQ(t,e,n,r){let i=t.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Yr(s-1,a,s,a,new et(Ve.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new vv(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const c=ch(r);if(c==null)return!1;i.lift(r,c);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return tu(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),e(i.scrollIntoView()),!0}function bQ(t,e,n){let r=t.tr,i=n.parent;for(let w=n.end,S=n.endIndex-1,k=n.startIndex;S>k;S--)w-=i.child(S).nodeSize,r.delete(w-1,w+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(c?0:1),h+1,a.content.append(u?Ve.empty:Ve.from(i))))return!1;let m=s.pos,v=m+a.nodeSize;return r.step(new Yr(m-(c?1:0),v+(u?1:0),m+1,v-1,new et((c?Ve.empty:Ve.from(i.copy(Ve.empty))).append(u?Ve.empty:Ve.from(i.copy(Ve.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function wQ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let c=s.parent,u=c.child(a-1);if(u.type!=t)return!1;if(n){let d=u.lastChild&&u.lastChild.type==c.type,h=Ve.from(d?t.create():null),m=new et(Ve.from(t.create(null,Ve.from(c.type.create(null,h)))),d?3:1,0),v=s.start,w=s.end;n(e.tr.step(new Yr(v-(d?3:1),w,v,w,m,1,!0)).scrollIntoView())}return!0}}const oi=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Pd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let lE=null;const rl=function(t,e,n){let r=lE||(lE=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},xQ=function(){lE=null},sf=function(t,e,n,r){return n&&(dR(t,e,n,r,-1)||dR(t,e,n,r,1))},EQ=/^(img|br|input|textarea|hr)$/i;function dR(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:so(t))){let a=t.parentNode;if(!a||a.nodeType!=1||Mm(t)||EQ.test(t.nodeName)||t.contentEditable=="false")return!1;e=oi(t)+(i<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=a,e=i<0?so(t):0}else return!1}}function so(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function SQ(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=so(t)}else if(t.parentNode&&!Mm(t))e=oi(t),t=t.parentNode;else return null}}function _Q(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Mm(t))e=oi(t)+1,t=t.parentNode;else return null}}function TQ(t,e,n){for(let r=e==0,i=e==so(t);r||i;){if(t==n)return!0;let s=oi(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==so(t)}}function Mm(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const B0=function(t){return t.focusNode&&sf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Nu(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function kQ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function CQ(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(so(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(so(r.startContainer),r.startOffset)}}}const ba=typeof navigator<"u"?navigator:null,hR=typeof document<"u"?document:null,nu=ba&&ba.userAgent||"",cE=/Edge\/(\d+)/.exec(nu),gz=/MSIE \d/.exec(nu),uE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nu),ss=!!(gz||uE||cE),jc=gz?document.documentMode:uE?+uE[1]:cE?+cE[1]:0,oo=!ss&&/gecko\/(\d+)/i.test(nu);oo&&+(/Firefox\/(\d+)/.exec(nu)||[0,0])[1];const fE=!ss&&/Chrome\/(\d+)/.exec(nu),Gr=!!fE,yz=fE?+fE[1]:0,Si=!ss&&!!ba&&/Apple Computer/.test(ba.vendor),Ld=Si&&(/Mobile\/\w+/.test(nu)||!!ba&&ba.maxTouchPoints>2),no=Ld||(ba?/Mac/.test(ba.platform):!1),vz=ba?/Win/.test(ba.platform):!1,ll=/Android \d/.test(nu),Rm=!!hR&&"webkitFontSmoothing"in hR.documentElement.style,AQ=Rm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function OQ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ja(t,e){return typeof t=="number"?t:t[e]}function MQ(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function pR(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=Pd(a);continue}let c=a,u=c==s.body,d=u?OQ(s):MQ(c),h=0,m=0;if(e.top<d.top+Ja(r,"top")?m=-(d.top-e.top+Ja(i,"top")):e.bottom>d.bottom-Ja(r,"bottom")&&(m=e.bottom-e.top>d.bottom-d.top?e.top+Ja(i,"top")-d.top:e.bottom-d.bottom+Ja(i,"bottom")),e.left<d.left+Ja(r,"left")?h=-(d.left-e.left+Ja(i,"left")):e.right>d.right-Ja(r,"right")&&(h=e.right-d.right+Ja(i,"right")),h||m)if(u)s.defaultView.scrollBy(h,m);else{let w=c.scrollLeft,S=c.scrollTop;m&&(c.scrollTop+=m),h&&(c.scrollLeft+=h);let k=c.scrollLeft-w,_=c.scrollTop-S;e={left:e.left-k,top:e.top-_,right:e.right-k,bottom:e.bottom-_}}let v=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a=v=="absolute"?a.offsetParent:Pd(a)}}function RQ(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let c=t.root.elementFromPoint(s,a);if(!c||c==t.dom||!t.dom.contains(c))continue;let u=c.getBoundingClientRect();if(u.top>=n-20){r=c,i=u.top;break}}return{refDOM:r,refTop:i,stack:bz(t.dom)}}function bz(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Pd(r));return e}function NQ({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;wz(n,r==0?0:r-e)}function wz(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Xf=null;function DQ(t){if(t.setActive)return t.setActive();if(Xf)return t.focus(Xf);let e=bz(t);t.focus(Xf==null?{get preventScroll(){return Xf={preventScroll:!0},!0}}:void 0),Xf||(Xf=!1,wz(e,0))}function xz(t,e){let n,r=2e8,i,s=0,a=e.top,c=e.top,u,d;for(let h=t.firstChild,m=0;h;h=h.nextSibling,m++){let v;if(h.nodeType==1)v=h.getClientRects();else if(h.nodeType==3)v=rl(h).getClientRects();else continue;for(let w=0;w<v.length;w++){let S=v[w];if(S.top<=a&&S.bottom>=c){a=Math.max(S.bottom,a),c=Math.min(S.top,c);let k=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(k<r){n=h,r=k,i=k&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,h.nodeType==1&&k&&(s=m+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!u&&S.left<=e.left&&S.right>=e.left&&(u=h,d={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=m+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?IQ(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:xz(n,i)}function IQ(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let a=yc(r,1);if(a.top!=a.bottom&&a_(e,a)){i={node:t,offset:s+(e.left>=(a.left+a.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function a_(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function PQ(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function LQ(t,e,n){let{node:r,offset:i}=xz(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function zQ(t,e,n,r){let i=-1;for(let s=e,a=!1;s!=t.dom;){let c=t.docView.nearestDesc(s,!0),u;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((u=c.dom.getBoundingClientRect()).width||u.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!a&&u.left>r.left||u.top>r.top?i=c.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(i=c.posAfter),a=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?c.posBefore:c.posAfter;s=c.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Ez(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let a=t.childNodes[s];if(a.nodeType==1){let c=a.getClientRects();for(let u=0;u<c.length;u++){let d=c[u];if(a_(e,d))return Ez(a,e,d)}}if((s=(s+1)%r)==i)break}return t}function jQ(t,e){let n=t.dom.ownerDocument,r,i=0,s=CQ(n,e.left,e.top);s&&({node:r,offset:i}=s);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let d=t.dom.getBoundingClientRect();if(!a_(e,d)||(a=Ez(t.dom,e,d),!a))return null}if(Si)for(let d=a;r&&d;d=Pd(d))d.draggable&&(r=void 0);if(a=PQ(a,e),r){if(oo&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],m;h.nodeName=="IMG"&&(m=h.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let d;Rm&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=zQ(t,r,i,e))}c==null&&(c=LQ(t,a,e));let u=t.docView.nearestDesc(a,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function mR(t){return t.top<t.bottom||t.left<t.right}function yc(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(mR(r))return r}return Array.prototype.find.call(n,mR)||t.getBoundingClientRect()}const VQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Sz(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),a=Rm||oo;if(r.nodeType==3)if(a&&(VQ.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=yc(rl(r,i,i),n);if(oo&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=yc(rl(r,i-1,i-1),-1);if(d.top==u.top){let h=yc(rl(r,i,i+1),-1);if(h.top!=u.top)return ep(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,ep(yc(rl(r,u,d),h),h<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==so(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return j1(u.getBoundingClientRect(),!1)}if(s==null&&i<so(r)){let u=r.childNodes[i];if(u.nodeType==1)return j1(u.getBoundingClientRect(),!0)}return j1(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==so(r))){let u=r.childNodes[i-1],d=u.nodeType==3?rl(u,so(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return ep(yc(d,1),!1)}if(s==null&&i<so(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?rl(u,0,a?0:1):u.nodeType==1?u:null:null;if(d)return ep(yc(d,-1),!0)}return ep(yc(r.nodeType==3?rl(r):r,-n),n>=0)}function ep(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function j1(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function _z(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function BQ(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return _z(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(s,!0);if(!c)break;if(c.node.isBlock){s=c.contentDOM||c.dom;break}s=c.dom.parentNode}let a=Sz(t,i.pos,1);for(let c=s.firstChild;c;c=c.nextSibling){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=rl(c,0,c.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?a.top-h.top>(h.bottom-a.top)*2:h.bottom-a.bottom>(a.bottom-h.top)*2))return!1}}return!0})}const UQ=/[\u0590-\u08ac]/;function FQ(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,c=t.domSelection();return c?!UQ.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?s:a:_z(t,e,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:m}=t.domSelectionRange(),v=c.caretBidiLevel;c.modify("move",n,"character");let w=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:k}=t.domSelectionRange(),_=S&&!w.contains(S.nodeType==1?S:S.parentNode)||u==S&&d==k;try{c.collapse(h,m),u&&(u!=h||d!=m)&&c.extend&&c.extend(u,d)}catch{}return v!=null&&(c.caretBidiLevel=v),_}):r.pos==r.start()||r.pos==r.end()}let gR=null,yR=null,vR=!1;function HQ(t,e,n){return gR==e&&yR==n?vR:(gR=e,yR=n,vR=n=="up"||n=="down"?BQ(t,e,n):FQ(t,e,n))}const ao=0,bR=1,Pu=2,wa=3;class Nm{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ao,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>oi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let c=i.children[a];if(c.size){i=c;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],c=s+a.size;if(c>e||a instanceof kz){i=e-s;break}s=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Tz&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?oi(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?oi(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,c=0;;c++){let u=this.children[c],d=a+u.size;if(i==-1&&e<=d){let h=a+u.border;if(e>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,h);e=a;for(let m=c;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=oi(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(d>n||c==this.children.length-1)){n=d;for(let h=c+1;h<this.children.length;h++){let m=this.children[h];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){s=oi(m.dom);break}n+=m.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),a=Math.max(e,n);for(let w=0,S=0;w<this.children.length;w++){let k=this.children[w],_=S+k.size;if(s>S&&a<_)return k.setSelection(e-S-k.border,n-S-k.border,r,i);S=_}let c=this.domFromPos(e,e?-1:1),u=n==e?c:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),m=!1;if((oo||Si)&&e==n){let{node:w,offset:S}=c;if(w.nodeType==3){if(m=!!(S&&w.nodeValue[S-1]==`
`),m&&S==w.nodeValue.length)for(let k=w,_;k;k=k.parentNode){if(_=k.nextSibling){_.nodeName=="BR"&&(c=u={node:_.parentNode,offset:oi(_)+1});break}let O=k.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let k=w.childNodes[S-1];m=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(oo&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let w=h.focusNode.childNodes[h.focusOffset];w&&w.contentEditable=="false"&&(i=!0)}if(!(i||m&&Si)&&sf(c.node,c.offset,h.anchorNode,h.anchorOffset)&&sf(u.node,u.offset,h.focusNode,h.focusOffset))return;let v=!1;if((d.extend||e==n)&&!(m&&oo)){d.collapse(c.node,c.offset);try{e!=n&&d.extend(u.node,u.offset),v=!0}catch{}}if(!v){if(e>n){let S=c;c=u,u=S}let w=document.createRange();w.setEnd(u.node,u.offset),w.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(w)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let c=r+s.border,u=a-s.border;if(e>=c&&n<=u){this.dirty=e==r||n==a?Pu:bR,e==c&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=wa:s.markDirty(e-c,n-c);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Pu:wa}r=a}this.dirty=Pu}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Pu:bR;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Tz extends Nm{constructor(e,n,r,i){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ao&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class qQ extends Nm{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class of extends Nm{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return(!a||!a.dom)&&(a=mf.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new of(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&wa||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wa&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ao){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ao}}slice(e,n,r){let i=of.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=hE(s,n,a,r)),e>0&&(s=hE(s,0,e,r));for(let c=0;c<s.length;c++)s[c].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vc extends Nm{constructor(e,n,r,i,s,a,c,u,d){super(e,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,n,r,i,s,a){let c=s.nodeViews[n.type.name],u,d=c&&c(n,s,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,m=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:m}=mf.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let v=h;return h=Oz(h,r,n),d?u=new $Q(e,n,r,i,h,m||null,v,d,s,a+1):n.isText?new U0(e,n,r,i,h,v,s):new Vc(e,n,r,i,h,m||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ve.empty)}return e}matchesNode(e,n,r){return this.dirty==ao&&e.eq(this.node)&&wv(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,a=s&&s.pos>-1?s:null,c=s&&s.pos<0,u=new KQ(this,a&&a.node,e);QQ(this.node,this.innerDeco,(d,h,m)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!m&&u.syncToMarks(h==this.node.childCount?Cn.none:this.node.child(h).marks,r,e),u.placeWidget(d,e,i)},(d,h,m,v)=>{u.syncToMarks(d.marks,r,e);let w;u.findNodeMatch(d,h,m,v)||c&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(w=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,m,w,e)||u.updateNextNode(d,h,m,e,v,i)||u.addNode(d,h,m,e,i),i+=d.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Pu)&&(a&&this.protectLocalComposition(e,a),Cz(this.contentDOM,this.children,e),Ld&&XQ(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _t)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,c=JQ(this.node.content,a,r-n,i-n);return c<0?null:{node:s,pos:c,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new qQ(this,s,n,i);e.input.compositionNodes.push(a),this.children=hE(this.children,r,r+i.length,e,a)}update(e,n,r,i){return this.dirty==wa||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ao}updateOuterDeco(e){if(wv(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Az(this.dom,this.nodeDOM,dE(this.outerDeco,this.node,n),dE(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function wR(t,e,n,r,i){Oz(r,e,t);let s=new Vc(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class U0 extends Vc{constructor(e,n,r,i,s,a,c){super(e,n,r,i,s,null,a,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==wa||this.dirty!=ao&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ao||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ao,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new U0(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wa)}get domAtom(){return!1}isText(e){return this.node.text==e}}class kz extends Nm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ao&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class $Q extends Vc{constructor(e,n,r,i,s,a,c,u,d,h){super(e,n,r,i,s,a,c,d,h),this.spec=u}update(e,n,r,i){if(this.dirty==wa)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Cz(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],c=a.dom;if(c.parentNode==t){for(;c!=r;)r=xR(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(c,r);if(a instanceof of){let u=r?r.previousSibling:t.lastChild;Cz(a.contentDOM,a.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=xR(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const kp=function(t){t&&(this.nodeName=t)};kp.prototype=Object.create(null);const Lu=[new kp];function dE(t,e,n){if(t.length==0)return Lu;let r=n?Lu[0]:new kp,i=[r];for(let s=0;s<t.length;s++){let a=t[s].type.attrs;if(a){a.nodeName&&i.push(r=new kp(a.nodeName));for(let c in a){let u=a[c];u!=null&&(n&&i.length==1&&i.push(r=new kp(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+u:c=="style"?r.style=(r.style?r.style+";":"")+u:c!="nodeName"&&(r[c]=u))}}}return i}function Az(t,e,n,r){if(n==Lu&&r==Lu)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(s){let u;c&&c.nodeName==a.nodeName&&i!=t&&(u=i.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(i),c=Lu[0]),i=u}WQ(i,c||Lu[0],a)}return i}function WQ(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Oz(t,e,n){return Az(t,t,Lu,dE(e,n,t.nodeType!=1))}function wv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function xR(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class KQ{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=GQ(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ao,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){c=u;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let u=of.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))s=this.top.children.indexOf(a,this.index);else for(let c=this.index,u=Math.min(this.top.children.length,c+5);c<u;c++){let d=this.top.children[c];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){s=c;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let a=this.top.children[i];return a.dirty==wa&&a.dom==a.contentDOM&&(a.dirty=Pu),a.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,a){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof Vc){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,m,v=this.isLocked(h)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=wa&&wv(n,u.outerDeco));if(!v&&u.update(e,n,r,i))return this.destroyBetween(this.index,c),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(u,e,n,r,i,a)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Pu,m.updateChildren(i,a+1),m.dirty=ao),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!wv(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let c=Vc.create(this.top,n,r,i,s,a);if(c.contentDOM){c.children=e.children,e.children=[];for(let u of c.children)u.parent=c}return e.destroy(),c}addNode(e,n,r,i,s){let a=Vc.create(this.top,e,n,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Tz(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof of;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof U0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Si||Gr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new kz(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function GQ(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,a=[];e:for(;i>0;){let c;for(;;)if(r){let d=n.children[r-1];if(d instanceof of)n=d,r=d.children.length;else{c=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=c.node;if(u){if(u!=t.child(i-1))break;--i,s.set(c,i),a.push(c)}}return{index:i,matched:s,matches:a.reverse()}}function YQ(t,e){return t.type.side-e.type.side}function QQ(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let h=t.child(d);r(h,i,e.forChild(s,h),d),s+=h.nodeSize}return}let a=0,c=[],u=null;for(let d=0;;){let h,m;for(;a<i.length&&i[a].to==s;){let _=i[a++];_.widget&&(h?(m||(m=[h])).push(_):h=_)}if(h)if(m){m.sort(YQ);for(let _=0;_<m.length;_++)n(m[_],d,!!u)}else n(h,d,!!u);let v,w;if(u)w=-1,v=u,u=null;else if(d<t.childCount)w=d,v=t.child(d++);else break;for(let _=0;_<c.length;_++)c[_].to<=s&&c.splice(_--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)c.push(i[a++]);let S=s+v.nodeSize;if(v.isText){let _=S;a<i.length&&i[a].from<_&&(_=i[a].from);for(let O=0;O<c.length;O++)c[O].to<_&&(_=c[O].to);_<S&&(u=v.cut(_-s),v=v.cut(0,_-s),S=_,w=-1)}else for(;a<i.length&&i[a].to<S;)a++;let k=v.isInline&&!v.isLeaf?c.filter(_=>!_.inline):c.slice();r(v,k,e.forChild(s,v),w),s=S}}function XQ(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function JQ(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let a=t.child(i++),c=s;if(s+=a.nodeSize,!a.isText)continue;let u=a.text;for(;i<t.childCount;){let d=t.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-e.length-c,r-c)==e)return r-e.length;let d=c<r?u.lastIndexOf(e,r-c-1):-1;if(d>=0&&d+e.length+c>=n)return c+d;if(n==r&&u.length>=r+e.length-c&&u.slice(r-c,r-c+e.length)==e)return r}}return-1}function hE(t,e,n,r,i){let s=[];for(let a=0,c=0;a<t.length;a++){let u=t[a],d=c,h=c+=u.size;d>=n||h<=e?s.push(u):(d<e&&s.push(u.slice(0,e-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function l_(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let c=r.resolve(a),u,d;if(B0(n)){for(u=a;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&gt.isSelectable(m)&&i.parent&&!(m.isInline&&TQ(n.focusNode,n.focusOffset,i.dom))){let v=i.posBefore;d=new gt(a==v?c:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=a,v=a;for(let w=0;w<n.rangeCount;w++){let S=n.getRangeAt(w);m=Math.min(m,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(m<0)return null;[u,a]=v==t.state.selection.anchor?[v,m]:[m,v],c=r.resolve(a)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let m=e=="pointer"||t.state.selection.head<c.pos&&!s?1:-1;d=c_(t,h,c,m)}return d}function Mz(t){return t.editable?t.hasFocus():Nz(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function gl(t,e=!1){let n=t.state.selection;if(Rz(t,n),!!Mz(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Gr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&sf(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)eX(t);else{let{anchor:r,head:i}=n,s,a;ER&&!(n instanceof _t)&&(n.$from.parent.inlineContent||(s=SR(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=SR(t,n.to))),t.docView.setSelection(r,i,t,e),ER&&(s&&_R(s),a&&_R(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ZQ(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ER=Si||Gr&&yz<63;function SR(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Si&&i&&i.contentEditable=="false")return V1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return V1(i);if(s)return V1(s)}}function V1(t){return t.contentEditable="true",Si&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function _R(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ZQ(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Mz(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function eX(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,oi(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&ss&&jc<=11&&(n.disabled=!0,n.disabled=!1)}function Rz(t,e){if(e instanceof gt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(TR(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else TR(t)}function TR(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function c_(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_t.between(e,n,r)}function kR(t){return t.editable&&!t.hasFocus()?!1:Nz(t)}function Nz(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function tX(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return sf(e.node,e.offset,n.anchorNode,n.anchorOffset)}function pE(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&xt.findFrom(s,e)}function vc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function CR(t,e,n){let r=t.state.selection;if(r instanceof _t)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return vc(t,new _t(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=pE(t.state,e);return i&&i instanceof gt?vc(t,i):!1}else if(!(no&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let c=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=t.docView.descAt(c))&&!a.contentDOM?gt.isSelectable(s)?vc(t,new gt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Rm?vc(t,new _t(t.state.doc.resolve(e<0?c:c+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof gt&&r.node.isInline)return vc(t,new _t(e>0?r.$to:r.$from));{let i=pE(t.state,e);return i?vc(t,i):!1}}}function xv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Cp(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Jf(t,e){return e<0?nX(t):rX(t)}function nX(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,a=!1;for(oo&&n.nodeType==1&&r<xv(n)&&Cp(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(Cp(c,-1))i=n,s=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(Dz(n))break;{let c=n.previousSibling;for(;c&&Cp(c,-1);)i=n.parentNode,s=oi(c),c=c.previousSibling;if(c)n=c,r=xv(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?mE(t,n,r):i&&mE(t,i,s)}function rX(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=xv(n),s,a;for(;;)if(r<i){if(n.nodeType!=1)break;let c=n.childNodes[r];if(Cp(c,1))s=n,a=++r;else break}else{if(Dz(n))break;{let c=n.nextSibling;for(;c&&Cp(c,1);)s=c.parentNode,a=oi(c)+1,c=c.nextSibling;if(c)n=c,r=0,i=xv(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&mE(t,s,a)}function Dz(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function iX(t,e){for(;t&&e==t.childNodes.length&&!Mm(t);)e=oi(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function sX(t,e){for(;t&&!e&&!Mm(t);)e=oi(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function mE(t,e,n){if(e.nodeType!=3){let s,a;(a=iX(e,n))?(e=a,n=0):(s=sX(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(B0(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&gl(t)},50)}function AR(t,e){let n=t.state.doc.resolve(e);if(!(Gr||vz)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function OR(t,e,n){let r=t.state.selection;if(r instanceof _t&&!r.empty||n.indexOf("s")>-1||no&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=pE(t.state,e);if(a&&a instanceof gt)return vc(t,a)}if(!i.parent.inlineContent){let a=e<0?i:s,c=r instanceof Ms?xt.near(a,e):xt.findFrom(a,e);return c?vc(t,c):!1}return!1}function MR(t,e){if(!(t.state.selection instanceof _t))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=t.state.tr;return e<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),t.dispatch(a),!0}return!1}function RR(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function oX(t){if(!Si||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;RR(t,r,"true"),setTimeout(()=>RR(t,r,"false"),20)}return!1}function aX(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function lX(t,e){let n=e.keyCode,r=aX(e);if(n==8||no&&n==72&&r=="c")return MR(t,-1)||Jf(t,-1);if(n==46&&!e.shiftKey||no&&n==68&&r=="c")return MR(t,1)||Jf(t,1);if(n==13||n==27)return!0;if(n==37||no&&n==66&&r=="c"){let i=n==37?AR(t,t.state.selection.from)=="ltr"?-1:1:-1;return CR(t,i,r)||Jf(t,i)}else if(n==39||no&&n==70&&r=="c"){let i=n==39?AR(t,t.state.selection.from)=="ltr"?1:-1:1;return CR(t,i,r)||Jf(t,i)}else{if(n==38||no&&n==80&&r=="c")return OR(t,-1,r)||Jf(t,-1);if(n==40||no&&n==78&&r=="c")return oX(t)||OR(t,1,r)||Jf(t,1);if(r==(no?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function u_(t,e){t.someProp("transformCopied",w=>{e=w(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let w=r.firstChild;n.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let a=t.someProp("clipboardSerializer")||mf.fromSchema(t.state.schema),c=Vz(),u=c.createElement("div");u.appendChild(a.serializeFragment(r,{document:c}));let d=u.firstChild,h,m=0;for(;d&&d.nodeType==1&&(h=jz[d.nodeName.toLowerCase()]);){for(let w=h.length-1;w>=0;w--){let S=c.createElement(h[w]);for(;u.firstChild;)S.appendChild(u.firstChild);u.appendChild(S),m++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${m?` -${m}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",w=>w(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:v,slice:e}}function Iz(t,e,n,r,i){let s=i.parent.type.spec.code,a,c;if(!n&&!e)return null;let u=!!e&&(r||s||!n);if(u){if(t.someProp("transformPastedText",v=>{e=v(e,s||r,t)}),s)return c=new et(Ve.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{c=v(c,t,!0)}),c;let m=t.someProp("clipboardTextParser",v=>v(e,i,r,t));if(m)c=m;else{let v=i.marks(),{schema:w}=t.state,S=mf.fromSchema(w);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let _=a.appendChild(document.createElement("p"));k&&_.appendChild(S.serializeNode(w.text(k,v)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),a=dX(n),Rm&&hX(a);let d=a&&a.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let m=+h[3];m>0;m--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||zc.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!cX.test(v.parentNode.nodeName)?{ignore:!0}:null}})),h)c=pX(NR(c,+h[1],+h[2]),h[4]);else if(c=et.maxOpen(uX(c.content,i),!0),c.openStart||c.openEnd){let m=0,v=0;for(let w=c.content.firstChild;m<c.openStart&&!w.type.spec.isolating;m++,w=w.firstChild);for(let w=c.content.lastChild;v<c.openEnd&&!w.type.spec.isolating;v++,w=w.lastChild);c=NR(c,m,v)}return t.someProp("transformPasted",m=>{c=m(c,t,u)}),c}const cX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function uX(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,a=[];if(t.forEach(c=>{if(!a)return;let u=i.findWrapping(c.type),d;if(!u)return a=null;if(d=a.length&&s.length&&Lz(u,s,c,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=zz(a[a.length-1],s.length));let h=Pz(c,u);a.push(h),i=i.matchType(h.type),s=u}}),a)return Ve.from(a)}return t}function Pz(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ve.from(t));return t}function Lz(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Lz(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ve.from(Pz(n,t,i+1))))}}function zz(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,zz(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ve.empty,!0);return t.copy(n.append(r))}function gE(t,e,n,r,i,s){let a=e<0?t.firstChild:t.lastChild,c=a.content;return t.childCount>1&&(s=0),i<r-1&&(c=gE(c,e,n,r,i+1,s)),i>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(Ve.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}function NR(t,e,n){return e<t.openStart&&(t=new et(gE(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new et(gE(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const jz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let DR=null;function Vz(){return DR||(DR=document.implementation.createHTMLDocument("title"))}let B1=null;function fX(t){let e=window.trustedTypes;return e?(B1||(B1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),B1.createHTML(t)):t}function dX(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Vz().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&jz[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=fX(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function hX(t){let e=t.querySelectorAll(Gr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function pX(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:a}=t;for(let c=r.length-2;c>=0;c-=2){let u=n.nodes[r[c]];if(!u||u.hasRequiredAttrs())break;i=Ve.from(u.create(r[c+1],i)),s++,a++}return new et(i,s,a)}const Di={},Ii={},mX={touchstart:!0,touchmove:!0};class gX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function yX(t){for(let e in Di){let n=Di[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{bX(t,r)&&!f_(t,r)&&(t.editable||!(r.type in Ii))&&n(t,r)},mX[e]?{passive:!0}:void 0)}Si&&t.dom.addEventListener("input",()=>null),yE(t)}function Oc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function vX(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function yE(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>f_(t,r))})}function f_(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function bX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function wX(t,e){!f_(t,e)&&Di[e.type]&&(t.editable||!(e.type in Ii))&&Di[e.type](t,e)}Ii.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Uz(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ll&&Gr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ld&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Nu(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||lX(t,n)?n.preventDefault():Oc(t,"key")};Ii.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ii.keypress=(t,e)=>{let n=e;if(Uz(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||no&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _t)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",a=>a(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function F0(t){return{left:t.clientX,top:t.clientY}}function xX(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function d_(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(t.someProp(e,c=>a>s.depth?c(t,n,s.nodeAfter,s.before(a),i,!0):c(t,n,s.node(a),s.before(a),i,!1)))return!0;return!1}function Sd(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function EX(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&gt.isSelectable(r)?(Sd(t,new gt(n)),!0):!1}function SX(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof gt&&(r=n.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let c=a>s.depth?s.nodeAfter:s.node(a);if(gt.isSelectable(c)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(a);break}}return i!=null?(Sd(t,gt.create(t.state.doc,i)),!0):!1}function _X(t,e,n,r,i){return d_(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?SX(t,n):EX(t,n))}function TX(t,e,n,r){return d_(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function kX(t,e,n,r){return d_(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||CX(t,n,r)}function CX(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Sd(t,_t.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),c=i.before(s);if(a.inlineContent)Sd(t,_t.create(r,c+1,c+1+a.content.size));else if(gt.isSelectable(a))Sd(t,gt.create(r,c));else continue;return!0}}function h_(t){return Ev(t)}const Bz=no?"metaKey":"ctrlKey";Di.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=h_(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&xX(n,t.input.lastClick)&&!n[Bz]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=t.posAtCoords(F0(n));a&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new AX(t,a,n,!!r)):(s=="doubleClick"?TX:kX)(t,a.pos,a.inside,n)?n.preventDefault():Oc(t,"pointer"))};class AX{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Bz],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),a=n.inside;else{let h=e.state.doc.resolve(n.pos);s=h.parent,a=h.depth?h.before():0}const c=i?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof gt&&d.from<=a&&d.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&oo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>gl(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(F0(e))),this.updateAllowDefault(e),this.allowDefault||!n?Oc(this.view,"pointer"):_X(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Si&&this.mightDrag&&!this.mightDrag.node.isAtom||Gr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Sd(this.view,xt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Oc(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Di.touchstart=t=>{t.input.lastTouch=Date.now(),h_(t),Oc(t,"pointer")};Di.touchmove=t=>{t.input.lastTouch=Date.now(),Oc(t,"pointer")};Di.contextmenu=t=>h_(t);function Uz(t,e){return t.composing?!0:Si&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const OX=ll?5e3:-1;Ii.compositionstart=Ii.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _t&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Gr&&vz&&MX(t)))t.markCursor=t.state.storedMarks||n.marks(),Ev(t,!0),t.markCursor=null;else if(Ev(t,!e.selection.empty),oo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let c=t.domSelection();c&&c.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}t.input.composing=!0}Fz(t,OX)};function MX(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Ii.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Fz(t,20))};function Fz(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ev(t),e))}function Hz(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=NX());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function RX(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=SQ(e.focusNode,e.focusOffset),r=_Q(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function NX(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ev(t,e=!1){if(!(ll&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Hz(t),e||t.docView&&t.docView.dirty){let n=l_(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function DX(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Zp=ss&&jc<15||Ld&&AQ<604;Di.copy=Ii.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Zp?null:n.clipboardData,a=r.content(),{dom:c,text:u}=u_(t,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",c.innerHTML),s.setData("text/plain",u)):DX(t,c),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function IX(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function PX(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?em(t,r.value,null,i,e):em(t,r.textContent,r.innerHTML,i,e)},50)}function em(t,e,n,r,i){let s=Iz(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,i,s||et.empty)))return!0;if(!s)return!1;let a=IX(s),c=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(s);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qz(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ii.paste=(t,e)=>{let n=e;if(t.composing&&!ll)return;let r=Zp?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&em(t,qz(r),r.getData("text/html"),i,n)?n.preventDefault():PX(t,n)};class $z{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const LX=no?"altKey":"ctrlKey";function Wz(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[LX]}Di.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(F0(n)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof gt?i.to-1:i.to))){if(r&&r.mightDrag)a=gt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(a=gt.create(t.state.doc,m.posBefore))}}let c=(a||t.state.selection).content(),{dom:u,text:d,slice:h}=u_(t,c);(!n.dataTransfer.files.length||!Gr||yz>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Zp?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Zp||n.dataTransfer.setData("text/plain",d),t.dragging=new $z(h,Wz(t,n),a)};Di.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ii.dragover=Ii.dragenter=(t,e)=>e.preventDefault();Ii.drop=(t,e)=>{try{zX(t,e,t.dragging)}finally{t.dragging=null}};function zX(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(F0(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",w=>{s=w(s,t,!1)}):s=Iz(t,qz(e.dataTransfer),Zp?null:e.dataTransfer.getData("text/html"),!1,i);let a=!!(n&&Wz(t,e));if(t.someProp("handleDrop",w=>w(t,e,s||et.empty,a))){e.preventDefault();return}if(!s)return;e.preventDefault();let c=s?YL(t.state.doc,i.pos,s):i.pos;c==null&&(c=i.pos);let u=t.state.tr;if(a){let{node:w}=n;w?w.replace(u):u.deleteSelection()}let d=u.mapping.map(c),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=u.doc;if(h?u.replaceRangeWith(d,d,s.content.firstChild):u.replaceRange(d,d,s),u.doc.eq(m))return;let v=u.doc.resolve(d);if(h&&gt.isSelectable(s.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new gt(v));else{let w=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((S,k,_,O)=>w=O),u.setSelection(c_(t,v,u.doc.resolve(w)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}Di.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&gl(t)},20))};Di.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Di.beforeinput=(t,e)=>{if(Gr&&ll&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Nu(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ii)Di[t]=Ii[t];function tm(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Sv{constructor(e,n){this.toDOM=e,this.spec=n||qu,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:a}=e.mapResult(n.from+i,this.side<0?-1:1);return a?null:new ci(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Sv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tm(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Bc{constructor(e,n){this.attrs=e,this.spec=n||qu}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new ci(s,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Bc&&tm(this.attrs,e.attrs)&&tm(this.spec,e.spec)}static is(e){return e.type instanceof Bc}destroy(){}}class p_{constructor(e,n){this.attrs=e,this.spec=n||qu}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let a=e.mapResult(n.to+i,-1);return a.deleted||a.pos<=s.pos?null:new ci(s.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof p_&&tm(this.attrs,e.attrs)&&tm(this.spec,e.spec)}destroy(){}}class ci{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ci(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ci(e,e,new Sv(n,r))}static inline(e,n,r,i){return new ci(e,n,new Bc(r,i))}static node(e,n,r,i){return new ci(e,n,new p_(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Bc}get widget(){return this.type instanceof Sv}}const ld=[],qu={};class jn{constructor(e,n){this.local=e.length?e:ld,this.children=n.length?n:ld}static create(e,n){return n.length?_v(n,e,0,qu):vi}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=n&&c.to>=e&&(!s||s(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let c=this.children[a]+1;this.children[a+2].findInner(e-c,n-c,r,i+c,s)}}map(e,n,r){return this==vi||e.maps.length==0?this:this.mapInner(e,n,0,0,r||qu)}mapInner(e,n,r,i,s){let a;for(let c=0;c<this.local.length;c++){let u=this.local[c].map(e,r,i);u&&u.type.valid(n,u)?(a||(a=[])).push(u):s.onRemove&&s.onRemove(this.local[c].spec)}return this.children.length?jX(this.children,a||[],e,n,r,i,s):a?new jn(a.sort($u),ld):vi}add(e,n){return n.length?this==vi?jn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((c,u)=>{let d=u+r,h;if(h=Gz(n,c,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(c,h,d+1):i.splice(s,0,u,u+c.nodeSize,_v(h,c,d+1,qu)),s+=3}});let a=Kz(s?Yz(n):n,-r);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new jn(a.length?this.local.concat(a).sort($u):this.local,i||this.children)}remove(e){return e.length==0||this==vi?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,c=r[s]+n,u=r[s+1]+n;for(let h=0,m;h<e.length;h++)(m=e[h])&&m.from>c&&m.to<u&&(e[h]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(a,c+1);d!=vi?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let c=0;c<i.length;c++)i[c].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new jn(i,r):vi}forChild(e,n){if(this==vi)return this;if(n.isLeaf)return jn.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let s=e+1,a=s+n.content.size;for(let c=0;c<this.local.length;c++){let u=this.local[c];if(u.from<a&&u.to>s&&u.type instanceof Bc){let d=Math.max(s,u.from)-s,h=Math.min(a,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let c=new jn(i.sort($u),ld);return r?new _c([c,r]):c}return r||vi}eq(e){if(this==e)return!0;if(!(e instanceof jn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return m_(this.localsInner(e))}localsInner(e){if(this==vi)return ld;if(e.inlineContent||!this.local.some(Bc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Bc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}jn.empty=new jn([],[]);jn.removeOverlap=m_;const vi=jn.empty;class _c{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,qu));return _c.from(r)}forChild(e,n){if(n.isLeaf)return jn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=vi&&(s instanceof _c?r=r.concat(s.members):r.push(s))}return _c.from(r)}eq(e){if(!(e instanceof _c)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?m_(r?n:n.sort($u)):ld}static from(e){switch(e.length){case 0:return vi;case 1:return e[0];default:return new _c(e.every(n=>n instanceof jn)?e:e.reduce((n,r)=>n.concat(r instanceof jn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function jX(t,e,n,r,i,s,a){let c=t.slice();for(let d=0,h=s;d<n.maps.length;d++){let m=0;n.maps[d].forEach((v,w,S,k)=>{let _=k-S-(w-v);for(let O=0;O<c.length;O+=3){let B=c[O+1];if(B<0||v>B+h-m)continue;let W=c[O]+h-m;w>=W?c[O+1]=v<=W?-2:-1:v>=h&&_&&(c[O]+=_,c[O+1]+=_)}m+=_}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<c.length;d+=3)if(c[d+1]<0){if(c[d+1]==-2){u=!0,c[d+1]=-1;continue}let h=n.map(t[d]+s),m=h-i;if(m<0||m>=r.content.size){u=!0;continue}let v=n.map(t[d+1]+s,-1),w=v-i,{index:S,offset:k}=r.content.findIndex(m),_=r.maybeChild(S);if(_&&k==m&&k+_.nodeSize==w){let O=c[d+2].mapInner(n,_,h+1,t[d]+s+1,a);O!=vi?(c[d]=m,c[d+1]=w,c[d+2]=O):(c[d+1]=-2,u=!0)}else u=!0}if(u){let d=VX(c,t,e,n,i,s,a),h=_v(d,r,0,a);e=h.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,v=0;m<h.children.length;m+=3){let w=h.children[m];for(;v<c.length&&c[v]<w;)v+=3;c.splice(v,0,h.children[m],h.children[m+1],h.children[m+2])}}return new jn(e.sort($u),c)}function Kz(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ci(i.from+e,i.to+e,i.type))}return n}function VX(t,e,n,r,i,s,a){function c(u,d){for(let h=0;h<u.local.length;h++){let m=u.local[h].map(r,i,d);m?n.push(m):a.onRemove&&a.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)c(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&c(t[u+2],e[u]+s+1);return n}function Gz(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,a;s<t.length;s++)(a=t[s])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),t[s]=null);return i}function Yz(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function _v(t,e,n,r){let i=[],s=!1;e.forEach((c,u)=>{let d=Gz(t,c,u+n);if(d){s=!0;let h=_v(d,c,n+u+1,r);h!=vi&&i.push(u,u+c.nodeSize,h)}});let a=Kz(s?Yz(t):t,-n).sort($u);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||(r.onRemove&&r.onRemove(a[c].spec),a.splice(c--,1));return a.length||i.length?new jn(a,i):vi}function $u(t,e){return t.from-e.from||t.to-e.to}function m_(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),IR(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),IR(e,i,r.copy(s.from,r.to)));break}}}return e}function IR(t,e,n){for(;e<t.length&&$u(n,t[e])>0;)e++;t.splice(e,0,n)}function U1(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=vi&&e.push(r)}),t.cursorWrapper&&e.push(jn.create(t.state.doc,[t.cursorWrapper.deco])),_c.from(e)}const BX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},UX=ss&&jc<=11;let FX=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}};class HX{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new FX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ss&&jc<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),UX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,BX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(kR(this.view)){if(this.suppressingSelectionUpdates)return gl(this.view);if(ss&&jc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&sf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Pd(s))n.add(s);for(let s=e.anchorNode;s;s=Pd(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&kR(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,c=!1,u=[];if(e.editable)for(let h=0;h<n.length;h++){let m=this.registerMutation(n[h],u);m&&(s=s<0?m.from:Math.min(m.from,s),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(c=!0))}if(oo&&u.length){let h=u.filter(m=>m.nodeName=="BR");if(h.length==2){let[m,v]=h;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of h){let w=v.parentNode;w&&w.nodeName=="LI"&&(!m||WX(e,m)!=w)&&v.remove()}}}else if((Gr||Si)&&u.some(h=>h.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let h of u)if(h.nodeName=="BR"&&h.parentNode){let m=h.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&h.parentNode.removeChild(h)}}let d=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&B0(r)&&(d=l_(e))&&d.eq(xt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,gl(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),qX(e)),this.handleDOMChange(s,a,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||gl(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let m=e.addedNodes[h];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ss&&jc<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:m,nextSibling:v}=e.addedNodes[h];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=i&&i.parentNode==e.target?oi(i)+1:0,c=r.localPosFromDOM(e.target,a,-1),u=s&&s.parentNode==e.target?oi(s):e.target.childNodes.length,d=r.localPosFromDOM(e.target,u,1);return{from:c,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let PR=new WeakMap,LR=!1;function qX(t){if(!PR.has(t)&&(PR.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=oo,LR)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),LR=!0}}function zR(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return sf(a.node,a.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function $X(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return zR(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?zR(t,n):null}function WX(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function KX(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:a,to:c}=t.docView.parseRange(e,n),u=t.domSelectionRange(),d,h=u.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],B0(u)||d.push({node:u.focusNode,offset:u.focusOffset})),Gr&&t.input.lastKeyCode===8)for(let _=s;_>i;_--){let O=r.childNodes[_-1],B=O.pmViewDesc;if(O.nodeName=="BR"&&!B){s=_;break}if(!B||B.size)break}let m=t.state.doc,v=t.someProp("domParser")||zc.fromSchema(t.state.schema),w=m.resolve(a),S=null,k=v.parse(r,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:i,to:s,preserveWhitespace:w.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:GX,context:w});if(d&&d[0].pos!=null){let _=d[0].pos,O=d[1]&&d[1].pos;O==null&&(O=_),S={anchor:_+a,head:O+a}}return{doc:k,sel:S,from:a,to:c}}function GX(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Si&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Si&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const YX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function QX(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=l_(t,R);if(P&&!t.state.selection.eq(P)){if(Gr&&ll&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",H=>H(t,Nu(13,"Enter"))))return;let V=t.state.tr.setSelection(P);R=="pointer"?V.setMeta("pointer",!0):R=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),t.dispatch(V)}return}let a=t.state.doc.resolve(e),c=a.sharedDepth(n);e=a.before(c+1),n=t.state.doc.resolve(n).after(c+1);let u=t.state.selection,d=KX(t,e,n),h=t.state.doc,m=h.slice(d.from,d.to),v,w;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,w="end"):(v=t.state.selection.from,w="start"),t.input.lastKeyCode=null;let S=ZX(m.content,d.doc.content,d.from,v,w);if(S&&t.input.domChangeCount++,(Ld&&t.input.lastIOSEnter>Date.now()-225||ll)&&i.some(R=>R.nodeType==1&&!YX.test(R.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",R=>R(t,Nu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&u instanceof _t&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))S={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=jR(t,t.state.doc,d.sel);if(R&&!R.eq(t.state.selection)){let P=t.state.tr.setSelection(R);s&&P.setMeta("composition",s),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof _t&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),ss&&jc<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>d.from&&d.doc.textBetween(S.start-d.from-1,S.start-d.from+1)==" "&&(S.start--,S.endA--,S.endB--);let k=d.doc.resolveNoCache(S.start-d.from),_=d.doc.resolveNoCache(S.endB-d.from),O=h.resolve(S.start),B=k.sameParent(_)&&k.parent.inlineContent&&O.end()>=S.endA;if((Ld&&t.input.lastIOSEnter>Date.now()-225&&(!B||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!B&&k.pos<d.doc.content.size&&(!k.sameParent(_)||!k.parent.inlineContent)&&k.pos<_.pos&&!/\S/.test(d.doc.textBetween(k.pos,_.pos,"","")))&&t.someProp("handleKeyDown",R=>R(t,Nu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&JX(h,S.start,S.endA,k,_)&&t.someProp("handleKeyDown",R=>R(t,Nu(8,"Backspace")))){ll&&Gr&&t.domObserver.suppressSelectionUpdates();return}Gr&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),ll&&!B&&k.start()!=_.start()&&_.parentOffset==0&&k.depth==_.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==S.endA&&(S.endB-=2,_=d.doc.resolveNoCache(S.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,Nu(13,"Enter"))})},20));let W=S.start,L=S.endA,q=R=>{let P=R||t.state.tr.replace(W,L,d.doc.slice(S.start-d.from,S.endB-d.from));if(d.sel){let V=jR(t,P.doc,d.sel);V&&!(Gr&&t.composing&&V.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(V.head==W||V.head==P.mapping.map(L)-1)||ss&&V.empty&&V.head==W)&&P.setSelection(V)}return s&&P.setMeta("composition",s),P.scrollIntoView()},U;if(B)if(k.pos==_.pos){ss&&jc<=11&&k.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>gl(t),20));let R=q(t.state.tr.delete(W,L)),P=h.resolve(S.start).marksAcross(h.resolve(S.endA));P&&R.ensureMarks(P),t.dispatch(R)}else if(S.endA==S.endB&&(U=XX(k.parent.content.cut(k.parentOffset,_.parentOffset),O.parent.content.cut(O.parentOffset,S.endA-O.start())))){let R=q(t.state.tr);U.type=="add"?R.addMark(W,L,U.mark):R.removeMark(W,L,U.mark),t.dispatch(R)}else if(k.parent.child(k.index()).isText&&k.index()==_.index()-(_.textOffset?0:1)){let R=k.parent.textBetween(k.parentOffset,_.parentOffset),P=()=>q(t.state.tr.insertText(R,W,L));t.someProp("handleTextInput",V=>V(t,W,L,R,P))||t.dispatch(P())}else t.dispatch(q());else t.dispatch(q())}function jR(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:c_(t,e.resolve(n.anchor),e.resolve(n.head))}function XX(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,a,c,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)c=i[0],a="add",u=h=>h.mark(c.addToSet(h.marks));else if(i.length==0&&s.length==1)c=s[0],a="remove",u=h=>h.mark(c.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(u(e.child(h)));if(Ve.from(d).eq(t))return{mark:c,type:a}}function JX(t,e,n,r,i){if(n-e<=i.pos-r.pos||F1(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let c=s.nodeAfter;return c!=null&&n==e+c.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=t.resolve(F1(s,!0,!0));return!a.parent.isTextblock||a.pos>n||F1(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function F1(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function ZX(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let u=Math.max(0,s-Math.min(a,c));r-=a+u-s}if(a<s&&t.size<e.size){let u=r<=s&&r>=a?s-r:0;s-=u,s&&s<e.size&&VR(e.textBetween(s-1,s+1))&&(s+=u?1:-1),c=s+(c-a),a=s}else if(c<s){let u=r<=s&&r>=c?s-r:0;s-=u,s&&s<t.size&&VR(t.textBetween(s-1,s+1))&&(s+=u?1:-1),a=s+(a-c),c=s}return{start:s,endA:a,endB:c}}function VR(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Qz{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new gX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(qR),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=FR(this),UR(this),this.nodeViews=HR(this),this.docView=wR(this.state.doc,BR(this),U1(this),this.dom,this),this.domObserver=new HX(this,(r,i,s,a)=>QX(this,r,i,s,a)),this.domObserver.start(),yX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&yE(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(qR),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(Hz(this),a=!0),this.state=e;let c=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let w=HR(this);tJ(w,this.nodeViews)&&(this.nodeViews=w,s=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&yE(this),this.editable=FR(this),UR(this);let u=U1(this),d=BR(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=s||!this.docView.matchesNode(e.doc,d,u);(m||!e.selection.eq(i.selection))&&(a=!0);let v=h=="preserve"&&a&&this.dom.style.overflowAnchor==null&&RQ(this);if(a){this.domObserver.stop();let w=m&&(ss||Gr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&eJ(i.selection,e.selection);if(m){let S=Gr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=RX(this)),(s||!this.docView.update(e.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=wR(e.doc,d,u,this.dom,this)),S&&!this.trackWrites&&(w=!0)}w||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&tX(this))?gl(this,w):(Rz(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():v&&NQ(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof gt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&pR(this,n.getBoundingClientRect(),e)}else pR(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new $z(e.slice,e.move,i<0?void 0:gt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[e];if(c!=null&&(i=n?n(c):c))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let c=s[a].props[e];if(c!=null&&(i=n?n(c):c))return i}}hasFocus(){if(ss){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&DQ(this.dom),gl(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return jQ(this,e)}coordsAtPos(e,n=1){return Sz(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return HQ(this,n||this.state,e)}pasteHTML(e,n){return em(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return em(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return u_(this,e)}destroy(){this.docView&&(vX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],U1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,xQ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return wX(this,e)}domSelectionRange(){let e=this.domSelection();return e?Si&&this.root.nodeType===11&&kQ(this.dom.ownerDocument)==this.dom&&$X(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Qz.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function BR(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ci.node(0,t.state.doc.content.size,e)]}function UR(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ci.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function FR(t){return!t.someProp("editable",e=>e(t.state)===!1)}function eJ(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function HR(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function tJ(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function qR(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Qc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),rJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ai=0;ai<10;ai++)Qc[48+ai]=Qc[96+ai]=String(ai);for(var ai=1;ai<=24;ai++)Qc[ai+111]="F"+ai;for(var ai=65;ai<=90;ai++)Qc[ai]=String.fromCharCode(ai+32),Tv[ai]=String.fromCharCode(ai);for(var H1 in Qc)Tv.hasOwnProperty(H1)||(Tv[H1]=Qc[H1]);function iJ(t){var e=nJ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||rJ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Tv:Qc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const sJ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),oJ=typeof navigator<"u"&&/Win/.test(navigator.platform);function aJ(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,a;for(let c=0;c<e.length-1;c++){let u=e[c];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))sJ?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function lJ(t){let e=Object.create(null);for(let n in t)e[aJ(n)]=t[n];return e}function q1(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function cJ(t){return new An({props:{handleKeyDown:g_(t)}})}function g_(t){let e=lJ(t);return function(n,r){let i=iJ(r),s,a=e[q1(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[q1(i,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(oJ&&r.ctrlKey&&r.altKey)&&(s=Qc[r.keyCode])&&s!=i){let c=e[q1(s,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var uJ=Object.defineProperty,y_=(t,e)=>{for(var n in e)uJ(t,n,{get:e[n],enumerable:!0})};function H0(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var q0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...d)=>{const h=c(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a=[],c=!!t,u=t||i.tr,d=()=>(!c&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(m=>m===!0)),h={...Object.fromEntries(Object.entries(n).map(([m,v])=>[m,(...S)=>{const k=this.buildProps(u,e),_=v(...S)(k);return a.push(_),h}])),run:d};return h}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([c,u])=>[c,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a={tr:t,editor:r,view:s,state:H0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...d)=>u(...d)(a)]))}};return a}},Xz={};y_(Xz,{blur:()=>fJ,clearContent:()=>dJ,clearNodes:()=>hJ,command:()=>pJ,createParagraphNear:()=>mJ,cut:()=>gJ,deleteCurrentNode:()=>yJ,deleteNode:()=>vJ,deleteRange:()=>bJ,deleteSelection:()=>wJ,enter:()=>xJ,exitCode:()=>EJ,extendMarkRange:()=>SJ,first:()=>_J,focus:()=>kJ,forEach:()=>CJ,insertContent:()=>AJ,insertContentAt:()=>RJ,joinBackward:()=>IJ,joinDown:()=>DJ,joinForward:()=>PJ,joinItemBackward:()=>LJ,joinItemForward:()=>zJ,joinTextblockBackward:()=>jJ,joinTextblockForward:()=>VJ,joinUp:()=>NJ,keyboardShortcut:()=>UJ,lift:()=>FJ,liftEmptyBlock:()=>HJ,liftListItem:()=>qJ,newlineInCode:()=>$J,resetAttributes:()=>WJ,scrollIntoView:()=>KJ,selectAll:()=>GJ,selectNodeBackward:()=>YJ,selectNodeForward:()=>QJ,selectParentNode:()=>XJ,selectTextblockEnd:()=>JJ,selectTextblockStart:()=>ZJ,setContent:()=>eZ,setMark:()=>wZ,setMeta:()=>xZ,setNode:()=>EZ,setNodeSelection:()=>SZ,setTextDirection:()=>_Z,setTextSelection:()=>TZ,sinkListItem:()=>kZ,splitBlock:()=>CZ,splitListItem:()=>AZ,toggleList:()=>OZ,toggleMark:()=>MZ,toggleNode:()=>RZ,toggleWrap:()=>NZ,undoInputRule:()=>DZ,unsetAllMarks:()=>IZ,unsetMark:()=>PZ,unsetTextDirection:()=>LZ,updateAttributes:()=>zZ,wrapIn:()=>jZ,wrapInList:()=>VZ});var fJ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),dJ=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),hJ=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:a})=>{t.doc.nodesBetween(s.pos,a.pos,(c,u)=>{if(c.type.isText)return;const{doc:d,mapping:h}=e,m=d.resolve(h.map(u)),v=d.resolve(h.map(u+c.nodeSize)),w=m.blockRange(v);if(!w)return;const S=ch(w);if(c.type.isTextblock){const{defaultType:k}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(w.start,k)}(S||S===0)&&e.lift(w,S)})}),!0},pJ=t=>e=>t(e),mJ=()=>({state:t,dispatch:e})=>dz(t,e),gJ=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new _t(r.doc.resolve(Math.max(a-1,0)))),!0},yJ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const c=i.before(s),u=i.after(s);t.delete(c,u).scrollIntoView()}return!0}return!1};function Dr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var vJ=t=>({tr:e,state:n,dispatch:r})=>{const i=Dr(t,n.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const u=s.before(a),d=s.after(a);e.delete(u,d).scrollIntoView()}return!0}return!1},bJ=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},wJ=()=>({state:t,dispatch:e})=>n_(t,e),xJ=()=>({commands:t})=>t.keyboardShortcut("Enter"),EJ=()=>({state:t,dispatch:e})=>oQ(t,e);function v_(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function kv(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:v_(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Jz(t,e,n={}){return t.find(r=>r.type===e&&kv(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $R(t,e,n={}){return!!Jz(t,e,n)}function b_(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!Jz([...i.node.marks],e,n)))return;let a=i.index,c=t.start()+i.offset,u=a+1,d=c+i.node.nodeSize;for(;a>0&&$R([...t.parent.child(a-1).marks],e,n);)a-=1,c-=t.parent.child(a).nodeSize;for(;u<t.parent.childCount&&$R([...t.parent.child(u).marks],e,n);)d+=t.parent.child(u).nodeSize,u+=1;return{from:c,to:d}}function _l(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var SJ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=_l(t,r.schema),{doc:a,selection:c}=n,{$from:u,from:d,to:h}=c;if(i){const m=b_(u,s,e);if(m&&m.from<=d&&m.to>=h){const v=_t.create(a,m.from,m.to);n.setSelection(v)}}return!0},_J=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function w_(t){return t instanceof _t}function cl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Zz(t,e=null){if(!e)return null;const n=xt.atStart(t),r=xt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?_t.create(t,cl(0,i,s),cl(t.content.size,i,s)):_t.create(t,cl(e,i,s),cl(e,i,s))}function TJ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function x_(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var kJ=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(x_()||TJ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!w_(n.state.selection))return a(),!0;const c=Zz(i.doc,t)||n.state.selection,u=n.state.selection.eq(c);return s&&(u||i.setSelection(c),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},CJ=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),AJ=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),e4=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&e4(r)}return t};function oy(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return e4(n)}function nm(t,e,n){if(t instanceof ha||t instanceof Ve)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ve.fromArray(t.map(c=>e.nodeFromJSON(c)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),nm("",e,n)}if(i){if(n.errorOnInvalidContent){let a=!1,c="";const u=new jL({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(a=!0,c=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?zc.fromSchema(u).parseSlice(oy(t),n.parseOptions):zc.fromSchema(u).parse(oy(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const s=zc.fromSchema(e);return n.slice?s.parseSlice(oy(t),n.parseOptions).content:s.parse(oy(t),n.parseOptions)}return nm("",e,n)}function OJ(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Kr||i instanceof Yr))return;const s=t.mapping.maps[r];let a=0;s.forEach((c,u,d,h)=>{a===0&&(a=h)}),t.setSelection(xt.near(t.doc.resolve(a),n))}var MJ=t=>!("type"in t),RJ=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const u=_=>{s.emit("contentError",{editor:s,error:_,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{nm(e,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(_){u(_)}try{c=nm(e,s.schema,{parseOptions:d,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(_){return u(_),!1}let{from:h,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,w=!0;if((MJ(c)?c:[c]).forEach(_=>{_.check(),v=v?_.isText&&_.marks.length===0:!1,w=w?_.isBlock:!1}),h===m&&w){const{parent:_}=r.doc.resolve(h);_.isTextblock&&!_.type.spec.code&&!_.childCount&&(h-=1,m+=1)}let k;if(v){if(Array.isArray(e))k=e.map(_=>_.text||"").join("");else if(e instanceof Ve){let _="";e.forEach(O=>{O.text&&(_+=O.text)}),k=_}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,h,m)}else{k=c;const _=r.doc.resolve(h),O=_.node(),B=_.parentOffset===0,W=O.isText||O.isTextblock,L=O.content.size>0;B&&W&&L&&(h=Math.max(0,h-1)),r.replaceWith(h,m,k)}n.updateSelection&&OJ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:k})}return!0},NJ=()=>({state:t,dispatch:e})=>rQ(t,e),DJ=()=>({state:t,dispatch:e})=>iQ(t,e),IJ=()=>({state:t,dispatch:e})=>sz(t,e),PJ=()=>({state:t,dispatch:e})=>cz(t,e),LJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=z0(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},zJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=z0(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},jJ=()=>({state:t,dispatch:e})=>tQ(t,e),VJ=()=>({state:t,dispatch:e})=>nQ(t,e);function t4(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function BJ(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,a;for(let c=0;c<e.length-1;c+=1){const u=e[c];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))x_()||t4()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var UJ=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=BJ(t).split(/-(?!$)/),a=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,c))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function Xc(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,a=e?Dr(e,t.schema):null,c=[];t.doc.nodesBetween(r,i,(m,v)=>{if(m.isText)return;const w=Math.max(r,v),S=Math.min(i,v+m.nodeSize);c.push({node:m,from:w,to:S})});const u=i-r,d=c.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>kv(m.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((m,v)=>m+v.to-v.from,0)>=u}var FJ=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return Xc(n,i,e)?sQ(n,r):!1},HJ=()=>({state:t,dispatch:e})=>hz(t,e),qJ=t=>({state:e,dispatch:n})=>{const r=Dr(t,e.schema);return yQ(r)(e,n)},$J=()=>({state:t,dispatch:e})=>fz(t,e);function $0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function WR(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var WJ=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const c=$0(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(s=Dr(t,r.schema)),c==="mark"&&(a=_l(t,r.schema));let u=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{s&&s===h.type&&(u=!0,i&&n.setNodeMarkup(m,void 0,WR(h.attrs,e))),a&&h.marks.length&&h.marks.forEach(v=>{a===v.type&&(u=!0,i&&n.addMark(m,m+h.nodeSize,a.create(WR(v.attrs,e))))})})}),u},KJ=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),GJ=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ms(t.doc);t.setSelection(n)}return!0},YJ=()=>({state:t,dispatch:e})=>az(t,e),QJ=()=>({state:t,dispatch:e})=>uz(t,e),XJ=()=>({state:t,dispatch:e})=>cQ(t,e),JJ=()=>({state:t,dispatch:e})=>dQ(t,e),ZJ=()=>({state:t,dispatch:e})=>fQ(t,e);function vE(t,e,n={},r={}){return nm(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var eZ=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:c})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=vE(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function n4(t,e){const n=_l(e,t.schema),{from:r,to:i,empty:s}=t.selection,a=[];s?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,u=>{a.push(...u.marks)});const c=a.find(u=>u.type.name===n.name);return c?{...c.attrs}:{}}function r4(t,e){const n=new ez(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function tZ(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function nZ(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function rZ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function W0(t){return e=>rZ(e.$from,t)}function pt(t,e,n){return t.config[e]===void 0&&t.parent?pt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?pt(t.parent,e,n):null}):t.config[e]}function E_(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=pt(e,"addExtensions",n);return r?[e,...E_(r())]:e}).flat(10)}function S_(t,e){const n=mf.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function i4(t){return typeof t=="function"}function bn(t,e=void 0,...n){return i4(t)?e?t.bind(e)(...n):t(...n):t}function iZ(t={}){return Object.keys(t).length===0&&t.constructor===Object}function zd(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function s4(t){const e=[],{nodeExtensions:n,markExtensions:r}=zd(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:i},u=pt(a,"addGlobalAttributes",c);if(!u)return;u().forEach(h=>{h.types.forEach(m=>{Object.entries(h.attributes).forEach(([v,w])=>{e.push({type:m,name:v,attribute:{...s,...w}})})})})}),i.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},u=pt(a,"addAttributes",c);if(!u)return;const d=u();Object.entries(d).forEach(([h,m])=>{const v={...s,...m};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:a.name,name:h,attribute:v})})}),e}function Vn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const c=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=c.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const c=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[m,v]=h.split(":").map(w=>w.trim());d.set(m,v)}),c.forEach(h=>{const[m,v]=h.split(":").map(w=>w.trim());d.set(m,v)}),r[i]=Array.from(d.entries()).map(([h,m])=>`${h}: ${m}`).join("; ")}else r[i]=s}),r},{})}function Cv(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Vn(n,r),{})}function sZ(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function KR(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(n):sZ(n.getAttribute(a.name));return c==null?s:{...s,[a.name]:c}},{});return{...r,...i}}}}function GR(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&iZ(n)?!1:n!=null))}function YR(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function o4(t,e){var n;const r=s4(t),{nodeExtensions:i,markExtensions:s}=zd(t),a=(n=i.find(d=>pt(d,"topNode")))==null?void 0:n.name,c=Object.fromEntries(i.map(d=>{const h=r.filter(O=>O.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},v=t.reduce((O,B)=>{const W=pt(B,"extendNodeSchema",m);return{...O,...W?W(d):{}}},{}),w=GR({...v,content:bn(pt(d,"content",m)),marks:bn(pt(d,"marks",m)),group:bn(pt(d,"group",m)),inline:bn(pt(d,"inline",m)),atom:bn(pt(d,"atom",m)),selectable:bn(pt(d,"selectable",m)),draggable:bn(pt(d,"draggable",m)),code:bn(pt(d,"code",m)),whitespace:bn(pt(d,"whitespace",m)),linebreakReplacement:bn(pt(d,"linebreakReplacement",m)),defining:bn(pt(d,"defining",m)),isolating:bn(pt(d,"isolating",m)),attrs:Object.fromEntries(h.map(YR))}),S=bn(pt(d,"parseHTML",m));S&&(w.parseDOM=S.map(O=>KR(O,h)));const k=pt(d,"renderHTML",m);k&&(w.toDOM=O=>k({node:O,HTMLAttributes:Cv(O,h)}));const _=pt(d,"renderText",m);return _&&(w.toText=_),[d.name,w]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(_=>_.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},v=t.reduce((_,O)=>{const B=pt(O,"extendMarkSchema",m);return{..._,...B?B(d):{}}},{}),w=GR({...v,inclusive:bn(pt(d,"inclusive",m)),excludes:bn(pt(d,"excludes",m)),group:bn(pt(d,"group",m)),spanning:bn(pt(d,"spanning",m)),code:bn(pt(d,"code",m)),attrs:Object.fromEntries(h.map(YR))}),S=bn(pt(d,"parseHTML",m));S&&(w.parseDOM=S.map(_=>KR(_,h)));const k=pt(d,"renderHTML",m);return k&&(w.toDOM=_=>k({mark:_,HTMLAttributes:Cv(_,h)})),[d.name,w]}));return new jL({topNode:a,nodes:c,marks:u})}function oZ(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function __(t){return t.sort((n,r)=>{const i=pt(n,"priority")||100,s=pt(r,"priority")||100;return i>s?-1:i<s?1:0})}function T_(t){const e=__(E_(t)),n=oZ(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function aZ(t,e){const n=T_(t);return o4(n,e)}function a4(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let c="";return t.nodesBetween(r,i,(u,d,h,m)=>{var v;u.isBlock&&d>r&&(c+=s);const w=a?.[u.type.name];if(w)return h&&(c+=w({node:u,pos:d,parent:h,index:m,range:e})),!1;u.isText&&(c+=(v=u?.text)==null?void 0:v.slice(Math.max(r,d)-d,i-d))}),c}function k_(t,e){const n={from:0,to:t.content.size};return a4(t,n,e)}function K0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function lZ(t,e,n){const{blockSeparator:r=`

`,textSerializers:i={}}={},s=aZ(e),a=ha.fromJSON(s,t);return k_(a,{blockSeparator:r,textSerializers:{...K0(s),...i}})}function cZ(t,e){const n=Dr(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,c=>{s.push(c)});const a=s.reverse().find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function l4(t,e){const n=$0(typeof e=="string"?e:e.name,t.schema);return n==="node"?cZ(t,e):n==="mark"?n4(t,e):{}}function uZ(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function fZ(t){const e=uZ(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function c4(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((c,u)=>{a.push({from:c,to:u})});else{const{from:c,to:u}=n[s];if(c===void 0||u===void 0)return;a.push({from:c,to:u})}a.forEach(({from:c,to:u})=>{const d=e.slice(s).map(c,-1),h=e.slice(s).map(u),m=e.invert().map(d,-1),v=e.invert().map(h);r.push({oldRange:{from:m,to:v},newRange:{from:d,to:h}})})}),fZ(r)}function C_(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),a=b_(s,i.type);a&&r.push({mark:i,...a})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var dZ=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,a=null;for(;s>0&&a===null;){const c=i.node(s);c?.type.name===e?a=c:s-=1}return[a,s]};function $1(t,e){return e.nodes[t]||e.marks[t]||null}function zy(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var hZ=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,c)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:a,index:c}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function bE(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?_l(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>s?s.name===m.type.name:!0).find(m=>kv(m.attrs,n,{strict:!1}));let a=0;const c=[];if(i.forEach(({$from:m,$to:v})=>{const w=m.pos,S=v.pos;t.doc.nodesBetween(w,S,(k,_)=>{if(!k.isText&&!k.marks.length)return;const O=Math.max(w,_),B=Math.min(S,_+k.nodeSize),W=B-O;a+=W,c.push(...k.marks.map(L=>({mark:L,from:O,to:B})))})}),a===0)return!1;const u=c.filter(m=>s?s.name===m.mark.type.name:!0).filter(m=>kv(m.mark.attrs,n,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),d=c.filter(m=>s?m.mark.type!==s&&m.mark.type.excludes(s):!0).reduce((m,v)=>m+v.to-v.from,0);return(u>0?u+d:u)>=a}function pZ(t,e,n={}){if(!e)return Xc(t,null,n)||bE(t,null,n);const r=$0(e,t.schema);return r==="node"?Xc(t,e,n):r==="mark"?bE(t,e,n):!1}var mZ=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=W0(c=>c.type.name===e)(t.selection);if(!s)return!1;const a=t.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},gZ=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function QR(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function XR(t,e){const{nodeExtensions:n}=zd(e),r=n.find(a=>a.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=bn(pt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function G0(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(G0(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function u4(t){return t instanceof gt}var f4=class d4{constructor(e){this.position=e}static fromJSON(e){return new d4(e.position)}toJSON(){return{position:this.position}}};function yZ(t,e){const n=e.mapping.mapResult(t.position);return{position:new f4(n.pos),mapResult:n}}function vZ(t){return new f4(t)}function h4(t,e,n){const i=t.state.doc.content.size,s=cl(e,0,i),a=cl(n,0,i),c=t.coordsAtPos(s),u=t.coordsAtPos(a,-1),d=Math.min(c.top,u.top),h=Math.max(c.bottom,u.bottom),m=Math.min(c.left,u.left),v=Math.max(c.right,u.right),w=v-m,S=h-d,O={top:d,bottom:h,left:m,right:v,width:w,height:S,x:m,y:d};return{...O,toJSON:()=>O}}function bZ(t,e,n){var r;const{selection:i}=e;let s=null;if(w_(i)&&(s=i.$cursor),s){const c=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(d=>d.type.excludes(n)))}const{ranges:a}=i;return a.some(({$from:c,$to:u})=>{let d=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,u.pos,(h,m,v)=>{if(d)return!1;if(h.isInline){const w=!v||v.type.allowsMarkType(n),S=!!n.isInSet(h.marks)||!h.marks.some(k=>k.type.excludes(n));d=w&&S}return!d}),d})}var wZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:a,ranges:c}=s,u=_l(t,r.schema);if(i)if(a){const d=n4(r,u);n.addStoredMark(u.create({...d,...e}))}else c.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;r.doc.nodesBetween(h,m,(v,w)=>{const S=Math.max(w,h),k=Math.min(w+v.nodeSize,m);v.marks.find(O=>O.type===u)?v.marks.forEach(O=>{u===O.type&&n.addMark(S,k,u.create({...O.attrs,...e}))}):n.addMark(S,k,u.create(e))})});return bZ(r,n,u)},xZ=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),EZ=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Dr(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:c})=>fR(s,{...a,...e})(n)?!0:c.clearNodes()).command(({state:c})=>fR(s,{...a,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},SZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=cl(t,0,r.content.size),s=gt.create(r,i);e.setSelection(s)}return!0},_Z=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let a,c;return typeof e=="number"?(a=e,c=e):e&&"from"in e&&"to"in e?(a=e.from,c=e.to):(a=s.from,c=s.to),i&&n.doc.nodesBetween(a,c,(u,d)=>{u.isText||n.setNodeMarkup(d,void 0,{...u.attrs,dir:t})}),!0},TZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,a=_t.atStart(r).from,c=_t.atEnd(r).to,u=cl(i,a,c),d=cl(s,a,c),h=_t.create(r,u,d);e.setSelection(h)}return!0},kZ=t=>({state:e,dispatch:n})=>{const r=Dr(t,e.schema);return wQ(r)(e,n)};function JR(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var CZ=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:c,$to:u}=s,d=i.extensionManager.attributes,h=zy(d,c.node().type.name,c.node().attrs);if(s instanceof gt&&s.node.isBlock)return!c.parentOffset||!ml(a,c.pos)?!1:(r&&(t&&JR(n,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=u.parentOffset===u.parent.content.size,v=c.depth===0?void 0:tZ(c.node(-1).contentMatchAt(c.indexAfter(-1)));let w=m&&v?[{type:v,attrs:h}]:void 0,S=ml(e.doc,e.mapping.map(c.pos),1,w);if(!w&&!S&&ml(e.doc,e.mapping.map(c.pos),1,v?[{type:v}]:void 0)&&(S=!0,w=v?[{type:v,attrs:h}]:void 0),r){if(S&&(s instanceof _t&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,w),v&&!m&&!c.parentOffset&&c.parent.type!==v)){const k=e.mapping.map(c.before()),_=e.doc.resolve(k);c.node(-1).canReplaceWith(_.index(),_.index()+1,v)&&e.setNodeMarkup(e.mapping.map(c.before()),v)}t&&JR(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return S},AZ=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var a;const c=Dr(t,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const m=u.node(-1);if(m.type!==c)return!1;const v=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let O=Ve.empty;const B=u.index(-1)?1:u.index(-2)?2:3;for(let P=u.depth-B;P>=u.depth-3;P-=1)O=Ve.from(u.node(P).copy(O));const W=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,L={...zy(v,u.node().type.name,u.node().attrs),...e},q=((a=c.contentMatch.defaultType)==null?void 0:a.createAndFill(L))||void 0;O=O.append(Ve.from(c.createAndFill(null,q)||void 0));const U=u.before(u.depth-(B-1));n.replace(U,u.after(-W),new et(O,4-B,0));let R=-1;n.doc.nodesBetween(U,n.doc.content.size,(P,V)=>{if(R>-1)return!1;P.isTextblock&&P.content.size===0&&(R=V+1)}),R>-1&&n.setSelection(_t.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const w=d.pos===u.end()?m.contentMatchAt(0).defaultType:null,S={...zy(v,m.type.name,m.attrs),...e},k={...zy(v,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,d.pos);const _=w?[{type:c,attrs:S},{type:w,attrs:k}]:[{type:c,attrs:S}];if(!ml(n.doc,u.pos,2))return!1;if(i){const{selection:O,storedMarks:B}=r,{splittableMarks:W}=s.extensionManager,L=B||O.$to.parentOffset&&O.$from.marks();if(n.split(u.pos,2,_).scrollIntoView(),!L||!i)return!0;const q=L.filter(U=>W.includes(U.type.name));n.ensureMarks(q)}return!0},W1=(t,e)=>{const n=W0(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&tu(t.doc,n.pos)&&t.join(n.pos),!0},K1=(t,e)=>{const n=W0(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&tu(t.doc,r)&&t.join(r),!0},OZ=(t,e,n,r={})=>({editor:i,tr:s,state:a,dispatch:c,chain:u,commands:d,can:h})=>{const{extensions:m,splittableMarks:v}=i.extensionManager,w=Dr(t,a.schema),S=Dr(e,a.schema),{selection:k,storedMarks:_}=a,{$from:O,$to:B}=k,W=O.blockRange(B),L=_||k.$to.parentOffset&&k.$from.marks();if(!W)return!1;const q=W0(U=>XR(U.type.name,m))(k);if(W.depth>=1&&q&&W.depth-q.depth<=1){if(q.node.type===w)return d.liftListItem(S);if(XR(q.node.type.name,m)&&w.validContent(q.node.content)&&c)return u().command(()=>(s.setNodeMarkup(q.pos,w),!0)).command(()=>W1(s,w)).command(()=>K1(s,w)).run()}return!n||!L||!c?u().command(()=>h().wrapInList(w,r)?!0:d.clearNodes()).wrapInList(w,r).command(()=>W1(s,w)).command(()=>K1(s,w)).run():u().command(()=>{const U=h().wrapInList(w,r),R=L.filter(P=>v.includes(P.type.name));return s.ensureMarks(R),U?!0:d.clearNodes()}).wrapInList(w,r).command(()=>W1(s,w)).command(()=>K1(s,w)).run()},MZ=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,a=_l(t,r.schema);return bE(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},RZ=(t,e,n={})=>({state:r,commands:i})=>{const s=Dr(t,r.schema),a=Dr(e,r.schema),c=Xc(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),c?i.setNode(a,u):i.setNode(s,{...u,...n})},NZ=(t,e={})=>({state:n,commands:r})=>{const i=Dr(t,n.schema);return Xc(n,i,e)?r.lift(i):r.wrapIn(i,e)},DZ=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const a=t.tr,c=s.transform;for(let u=c.steps.length-1;u>=0;u-=1)a.step(c.steps[u].invert(c.docs[u]));if(s.text){const u=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,t.schema.text(s.text,u))}else a.delete(s.from,s.to)}return!0}}return!1},IZ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},PZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:c}=n,u=_l(t,r.schema),{$from:d,empty:h,ranges:m}=c;if(!i)return!0;if(h&&a){let{from:v,to:w}=c;const S=(s=d.marks().find(_=>_.type===u))==null?void 0:s.attrs,k=b_(d,u,S);k&&(v=k.from,w=k.to),n.removeMark(v,w,u)}else m.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,u)});return n.removeStoredMark(u),!0},LZ=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,a;return typeof t=="number"?(s=t,a=t):t&&"from"in t&&"to"in t?(s=t.from,a=t.to):(s=i.from,a=i.to),r&&e.doc.nodesBetween(s,a,(c,u)=>{if(c.isText)return;const d={...c.attrs};delete d.dir,e.setNodeMarkup(u,void 0,d)}),!0},zZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const c=$0(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(s=Dr(t,r.schema)),c==="mark"&&(a=_l(t,r.schema));let u=!1;return n.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let v,w,S,k;n.selection.empty?r.doc.nodesBetween(h,m,(_,O)=>{s&&s===_.type&&(u=!0,S=Math.max(O,h),k=Math.min(O+_.nodeSize,m),v=O,w=_)}):r.doc.nodesBetween(h,m,(_,O)=>{O<h&&s&&s===_.type&&(u=!0,S=Math.max(O,h),k=Math.min(O+_.nodeSize,m),v=O,w=_),O>=h&&O<=m&&(s&&s===_.type&&(u=!0,i&&n.setNodeMarkup(O,void 0,{..._.attrs,...e})),a&&_.marks.length&&_.marks.forEach(B=>{if(a===B.type&&(u=!0,i)){const W=Math.max(O,h),L=Math.min(O+_.nodeSize,m);n.addMark(W,L,a.create({...B.attrs,...e}))}}))}),w&&(v!==void 0&&i&&n.setNodeMarkup(v,void 0,{...w.attrs,...e}),a&&w.marks.length&&w.marks.forEach(_=>{a===_.type&&i&&n.addMark(S,k,a.create({..._.attrs,...e}))}))}),u},jZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return hQ(i,e)(n,r)},VZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return pQ(i,e)(n,r)},BZ=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Y0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},UZ=(t,e)=>{if(v_(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ay(t){var e;const{editor:n,from:r,to:i,text:s,rules:a,plugin:c}=t,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let h=!1;const m=hZ(d)+s;return a.forEach(v=>{if(h)return;const w=UZ(m,v.find);if(!w)return;const S=u.state.tr,k=H0({state:u.state,transaction:S}),_={from:r-(w[0].length-s.length),to:i},{commands:O,chain:B,can:W}=new q0({editor:n,state:k});v.handler({state:k,range:_,match:w,commands:O,chain:B,can:W})===null||!S.steps.length||(v.undoable&&S.setMeta(c,{transform:S,from:r,to:i,text:s}),u.dispatch(S),h=!0)}),h}function FZ(t){const{editor:e,rules:n}=t,r=new An({state:{init(){return null},apply(i,s,a){const c=i.getMeta(r);if(c)return c;const u=i.getMeta("applyInputRules");return u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=S_(Ve.from(h),a.schema);const{from:m}=u,v=m+h.length;ay({editor:e,from:m,to:v,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,c){return ay({editor:e,from:s,to:a,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&ay({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?ay({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function HZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function ly(t){return HZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function p4(t,e){const n={...t};return ly(t)&&ly(e)&&Object.keys(e).forEach(r=>{ly(e[r])&&ly(t[r])?n[r]=p4(t[r],e[r]):n[r]=e[r]}),n}var A_=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...bn(pt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bn(pt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>p4(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},gf=class m4 extends A_{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new m4(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(d=>d?.type.name===n.name))return!1;const u=a.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function qZ(t){return typeof t=="number"}var $Z=class{constructor(t){this.find=t.find,this.handler=t.handler}},WZ=(t,e,n)=>{if(v_(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function KZ(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:a,dropEvent:c}=t,{commands:u,chain:d,can:h}=new q0({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(w,S)=>{var k,_,O,B,W;if((_=(k=w.type)==null?void 0:k.spec)!=null&&_.code||!(w.isText||w.isTextblock||w.isInline))return;const L=(W=(B=(O=w.content)==null?void 0:O.size)!=null?B:w.nodeSize)!=null?W:0,q=Math.max(r,S),U=Math.min(i,S+L);if(q>=U)return;const R=w.isText?w.text||"":w.textBetween(q-S,U-S,void 0,"");WZ(R,s.find,a).forEach(V=>{if(V.index===void 0)return;const H=q+V.index+1,G=H+V[0].length,Q={from:n.tr.mapping.map(H),to:n.tr.mapping.map(G)},K=s.handler({state:n,range:Q,match:V,commands:u,chain:d,can:h,pasteEvent:a,dropEvent:c});m.push(K)})}),m.every(w=>w!==null)}var cy=null,GZ=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function YZ(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const u=({state:h,from:m,to:v,rule:w,pasteEvt:S})=>{const k=h.tr,_=H0({state:h,transaction:k});if(!(!KZ({editor:e,state:_,from:Math.max(m-1,0),to:v.b-1,rule:w,pasteEvent:S,dropEvent:c})||!k.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(h=>new An({view(m){const v=S=>{var k;r=(k=m.dom.parentElement)!=null&&k.contains(S.target)?m.dom.parentElement:null,r&&(cy=e)},w=()=>{cy&&(cy=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",w),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",w)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(s=r===m.dom.parentElement,c=v,!s){const w=cy;w?.isEditable&&setTimeout(()=>{const S=w.state.selection;S&&w.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(m,v)=>{var w;const S=(w=v.clipboardData)==null?void 0:w.getData("text/html");return a=v,i=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(m,v,w)=>{const S=m[0],k=S.getMeta("uiEvent")==="paste"&&!i,_=S.getMeta("uiEvent")==="drop"&&!s,O=S.getMeta("applyPasteRules"),B=!!O;if(!k&&!_&&!B)return;if(B){let{text:q}=O;typeof q=="string"?q=q:q=S_(Ve.from(q),w.schema);const{from:U}=O,R=U+q.length,P=GZ(q);return u({rule:h,state:w,from:U,to:{b:R},pasteEvt:P})}const W=v.doc.content.findDiffStart(w.doc.content),L=v.doc.content.findDiffEnd(w.doc.content);if(!(!qZ(W)||!L||W===L.b))return u({rule:h,state:w,from:W,to:L,pasteEvt:a})}}))}var Q0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=T_(t),this.schema=o4(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$1(e.name,this.schema)},r=pt(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return __([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:$1(r.name,this.schema)},s=[],a=pt(r,"addKeyboardShortcuts",i);let c={};if(r.type==="mark"&&pt(r,"exitable",i)&&(c.ArrowRight=()=>gf.handleExit({editor:t,mark:r})),a){const v=Object.fromEntries(Object.entries(a()).map(([w,S])=>[w,()=>S({editor:t})]));c={...c,...v}}const u=cJ(c);s.push(u);const d=pt(r,"addInputRules",i);if(QR(r,t.options.enableInputRules)&&d){const v=d();if(v&&v.length){const w=FZ({editor:t,rules:v}),S=Array.isArray(w)?w:[w];s.push(...S)}}const h=pt(r,"addPasteRules",i);if(QR(r,t.options.enablePasteRules)&&h){const v=h();if(v&&v.length){const w=YZ({editor:t,rules:v});s.push(...w)}}const m=pt(r,"addProseMirrorPlugins",i);if(m){const v=m();s.push(...v)}return s})}get attributes(){return s4(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=zd(this.extensions);return Object.fromEntries(e.filter(n=>!!pt(n,"addNodeView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Dr(n.name,this.schema)},s=pt(n,"addNodeView",i);if(!s)return[];const a=s();if(!a)return[];const c=(u,d,h,m,v)=>{const w=Cv(u,r);return a({node:u,view:d,getPos:h,decorations:m,innerDecorations:v,editor:t,extension:n,HTMLAttributes:w})};return[n.name,c]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=zd(this.extensions);return Object.fromEntries(e.filter(n=>!!pt(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:_l(n.name,this.schema)},s=pt(n,"addMarkView",i);if(!s)return[];const a=(c,u,d)=>{const h=Cv(c,r);return s()({mark:c,view:u,inline:d,editor:t,extension:n,HTMLAttributes:h,updateAttributes:m=>{cee(c,t,m)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$1(e.name,this.schema)};e.type==="mark"&&((n=bn(pt(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=pt(e,"onBeforeCreate",r),s=pt(e,"onCreate",r),a=pt(e,"onUpdate",r),c=pt(e,"onSelectionUpdate",r),u=pt(e,"onTransaction",r),d=pt(e,"onFocus",r),h=pt(e,"onBlur",r),m=pt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),c&&this.editor.on("selectionUpdate",c),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),m&&this.editor.on("destroy",m)})}};Q0.resolve=T_;Q0.sort=__;Q0.flatten=E_;var QZ={};y_(QZ,{ClipboardTextSerializer:()=>y4,Commands:()=>v4,Delete:()=>b4,Drop:()=>w4,Editable:()=>x4,FocusEvents:()=>S4,Keymap:()=>_4,Paste:()=>T4,Tabindex:()=>k4,TextDirection:()=>C4,focusEventsPluginKey:()=>E4});var Zn=class g4 extends A_{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new g4(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},y4=Zn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new An({key:new On("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(h=>h.$from.pos)),c=Math.max(...s.map(h=>h.$to.pos)),u=K0(n);return a4(r,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),v4=Zn.create({name:"commands",addCommands(){return{...Xz}}}),b4=Zn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var a,c,u,d;if((d=(u=(c=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:c.filterTransaction)==null?void 0:u.call(c,t))!=null?d:t.getMeta("y-sync$"))return;const h=r4(t.before,[t,...e]);c4(h).forEach(w=>{h.mapping.mapResult(w.oldRange.from).deletedAfter&&h.mapping.mapResult(w.oldRange.to).deletedBefore&&h.before.nodesBetween(w.oldRange.from,w.oldRange.to,(S,k)=>{const _=k+S.nodeSize-2,O=w.oldRange.from<=k&&_<=w.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:k,to:_,newFrom:h.mapping.map(k),newTo:h.mapping.map(_),deletedRange:w.oldRange,newRange:w.newRange,partial:!O,editor:this.editor,transaction:t,combinedTransform:h})})});const v=h.mapping;h.steps.forEach((w,S)=>{var k,_;if(w instanceof Oo){const O=v.slice(S).map(w.from,-1),B=v.slice(S).map(w.to),W=v.invert().map(O,-1),L=v.invert().map(B),q=(k=h.doc.nodeAt(O-1))==null?void 0:k.marks.some(R=>R.eq(w.mark)),U=(_=h.doc.nodeAt(B))==null?void 0:_.marks.some(R=>R.eq(w.mark));this.editor.emit("delete",{type:"mark",mark:w.mark,from:w.from,to:w.to,deletedRange:{from:W,to:L},newRange:{from:O,to:B},partial:!!(U||q),editor:this.editor,transaction:t,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),w4=Zn.create({name:"drop",addProseMirrorPlugins(){return[new An({key:new On("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),x4=Zn.create({name:"editable",addProseMirrorPlugins(){return[new An({key:new On("editable"),props:{editable:()=>this.editor.options.editable}})]}}),E4=new On("focusEvents"),S4=Zn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new An({key:E4,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),_4=Zn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:u,doc:d}=c,{empty:h,$anchor:m}=u,{pos:v,parent:w}=m,S=m.parent.isTextblock&&v>0?c.doc.resolve(v-1):m,k=S.parent.type.spec.isolating,_=m.pos-m.parentOffset,O=k&&S.parent.childCount===1?_===m.pos:xt.atStart(d).from===v;return!h||!w.type.isTextblock||w.textContent.length||!O||O&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return x_()||t4()?s:i},addProseMirrorPlugins(){return[new An({key:new On("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(k=>k.getMeta("composition")))return;const r=t.some(k=>k.docChanged)&&!e.doc.eq(n.doc),i=t.some(k=>k.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:c}=e.selection,u=xt.atStart(e.doc).from,d=xt.atEnd(e.doc).to;if(s||!(a===u&&c===d)||!G0(n.doc))return;const v=n.tr,w=H0({state:n,transaction:v}),{commands:S}=new q0({editor:this.editor,state:w});if(S.clearNodes(),!!v.steps.length)return v}})]}}),T4=Zn.create({name:"paste",addProseMirrorPlugins(){return[new An({key:new On("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),k4=Zn.create({name:"tabindex",addProseMirrorPlugins(){return[new An({key:new On("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),C4=Zn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=zd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new An({key:new On("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),XZ=class cd{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new cd(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new cd(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new cd(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(a);if(!i&&c.depth<=this.depth)return;const u=new cd(c,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),e.push(new cd(c,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,a=Object.keys(n);for(let c=0;c<a.length;c+=1){const u=a[c];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(u=>n[u]===a.node.attrs[u])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},JZ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function ZZ(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var eee=class extends BZ{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:yZ,createMappablePosition:vZ},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=Zz(e,this.options.autofocus);this.editorState=hd.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=ZZ(JZ,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=i4(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[x4,y4.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),v4,S4,_4,k4,w4,T4,b4,C4.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Q0(r,this)}createCommandManager(){this.commandManager=new q0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=vE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=vE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new Qz(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const a=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),c=a?.getMeta("focus"),u=a?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:a}),u&&this.emit("blur",{editor:this,event:u.event,transaction:a}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return l4(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return pZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return S_(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return k_(this.state.doc,{blockSeparator:e,textSerializers:{...K0(this.schema),...n}})}get isEmpty(){return G0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new XZ(e,this)}get $doc(){return this.$pos(0)}};function jd(t){return new Y0({find:t.find,handler:({state:e,range:n,match:r})=>{const i=bn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],c=r[0];if(a){const u=c.search(/\S/),d=n.from+c.indexOf(a),h=d+a.length;if(C_(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(k=>k===t.type&&k!==w.mark.type)).filter(w=>w.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const v=n.from+u+a.length;s.addMark(n.from+u,v,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function tee(t){return new Y0({find:t.find,handler:({state:e,range:n,match:r})=>{const i=bn(t.getAttributes,void 0,r)||{},{tr:s}=e,a=n.from;let c=n.to;const u=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=a+d;h>c?h=c:c=h+r[1].length;const m=r[0][r[0].length-1];s.insertText(m,a+r[0].length-1),s.replaceWith(h,c,u)}else if(r[0]){const d=t.type.isInline?a:a-1;s.insert(d,t.type.create(i)).delete(s.mapping.map(a),s.mapping.map(c))}s.scrollIntoView()},undoable:t.undoable})}function wE(t){return new Y0({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=bn(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function Vd(t){return new Y0({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=bn(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),u=a.doc.resolve(n.from).blockRange(),d=u&&e_(u,t.type,s);if(!d)return null;if(a.wrap(u,d),t.keepMarks&&t.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:w}=t.editor.extensionManager,S=v||m.$to.parentOffset&&m.$from.marks();if(S){const k=S.filter(_=>w.includes(_.type.name));a.ensureMarks(k)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,s).run()}const h=a.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&tu(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&a.join(n.from-1)},undoable:t.undoable})}function nee(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof gt){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function ree(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var iee={};y_(iee,{createAtomBlockMarkdownSpec:()=>see,createBlockMarkdownSpec:()=>oee,createInlineMarkdownSpec:()=>A4,parseAttributes:()=>O_,parseIndentedBlocks:()=>xE,renderNestedMarkdownContent:()=>R_,serializeAttributes:()=>M_});function O_(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const d=i.map(h=>h.trim().slice(1));e.class=d.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,d,h])=>{var m;const v=parseInt(((m=h.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),w=n[v];w&&(e[d]=w.slice(1,-1))});const u=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return u&&u.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function M_(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function see(t){const{nodeName:e,name:n,parseAttributes:r=O_,serializeAttributes:i=M_,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:c}=t,u=n||e,d=h=>{if(!c)return h;const m={};return c.forEach(v=>{v in h&&(m[v]=h[v])}),m};return{parseMarkdown:(h,m)=>{const v={...s,...h.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(h){var m;const v=new RegExp(`^:::${u}(?:\\s|$)`,"m"),w=(m=h.match(v))==null?void 0:m.index;return w!==void 0?w:-1},tokenize(h,m,v){const w=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=h.match(w);if(!S)return;const k=S[1]||"",_=r(k);if(!a.find(B=>!(B in _)))return{type:e,raw:S[0],attributes:_}}},renderMarkdown:h=>{const m=d(h.attrs||{}),v=i(m),w=v?` {${v}}`:"";return`:::${u}${w} :::`}}}function oee(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=O_,serializeAttributes:s=M_,defaultAttributes:a={},content:c="block",allowedAttributes:u}=t,d=n||e,h=m=>{if(!u)return m;const v={};return u.forEach(w=>{w in m&&(v[w]=m[w])}),v};return{parseMarkdown:(m,v)=>{let w;if(r){const k=r(m);w=typeof k=="string"?[{type:"text",text:k}]:k}else c==="block"?w=v.parseChildren(m.tokens||[]):w=v.parseInline(m.tokens||[]);const S={...a,...m.attributes};return v.createNode(e,S,w)},markdownTokenizer:{name:e,level:"block",start(m){var v;const w=new RegExp(`^:::${d}`,"m"),S=(v=m.match(w))==null?void 0:v.index;return S!==void 0?S:-1},tokenize(m,v,w){var S;const k=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),_=m.match(k);if(!_)return;const[O,B=""]=_,W=i(B);let L=1;const q=O.length;let U="";const R=/^:::([\w-]*)(\s.*)?/gm,P=m.slice(q);for(R.lastIndex=0;;){const V=R.exec(P);if(V===null)break;const H=V.index,G=V[1];if(!((S=V[2])!=null&&S.endsWith(":::"))){if(G)L+=1;else if(L-=1,L===0){const Q=P.slice(0,H);U=Q.trim();const K=m.slice(0,q+H+V[0].length);let je=[];if(U)if(c==="block")for(je=w.blockTokens(Q),je.forEach(Re=>{Re.text&&(!Re.tokens||Re.tokens.length===0)&&(Re.tokens=w.inlineTokens(Re.text))});je.length>0;){const Re=je[je.length-1];if(Re.type==="paragraph"&&(!Re.text||Re.text.trim()===""))je.pop();else break}else je=w.inlineTokens(U);return{type:e,raw:K,attributes:W,content:U,tokens:je}}}}}},renderMarkdown:(m,v)=>{const w=h(m.attrs||{}),S=s(w),k=S?` {${S}}`:"",_=v.renderChildren(m.content||[],`

`);return`:::${d}${k}

${_}

:::`}}}function aee(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,a]=r;e[i]=s||a,r=n.exec(t)}return e}function lee(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function A4(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=aee,serializeAttributes:s=lee,defaultAttributes:a={},selfClosing:c=!1,allowedAttributes:u}=t,d=n||e,h=v=>{if(!u)return v;const w={};return u.forEach(S=>{const k=typeof S=="string"?S:S.name,_=typeof S=="string"?void 0:S.skipIfDefault;if(k in v){const O=v[k];if(_!==void 0&&O===_)return;w[k]=O}}),w},m=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,w)=>{const S={...a,...v.attributes};if(c)return w.createNode(e,S);const k=r?r(v):v.content||"";return k?w.createNode(e,S,[w.createTextNode(k)]):w.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(v){const w=c?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),S=v.match(w),k=S?.index;return k!==void 0?k:-1},tokenize(v,w,S){const k=c?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),_=v.match(k);if(!_)return;let O="",B="";if(c){const[,L]=_;B=L}else{const[,L,q]=_;B=L,O=q||""}const W=i(B.trim());return{type:e,raw:_[0],content:O.trim(),attributes:W}}},renderMarkdown:v=>{let w="";r?w=r(v):v.content&&v.content.length>0&&(w=v.content.filter(O=>O.type==="text").map(O=>O.text).join(""));const S=h(v.attrs||{}),k=s(S),_=k?` ${k}`:"";return c?`[${d}${_}]`:`[${d}${_}]${w}[/${d}]`}}}function xE(t,e,n){var r,i,s,a;const c=t.split(`
`),u=[];let d="",h=0;const m=e.baseIndentSize||2;for(;h<c.length;){const v=c[h],w=v.match(e.itemPattern);if(!w){if(u.length>0)break;if(v.trim()===""){h+=1,d=`${d}${v}
`;continue}else return}const S=e.extractItemData(w),{indentLevel:k,mainContent:_}=S;d=`${d}${v}
`;const O=[_];for(h+=1;h<c.length;){const q=c[h];if(q.trim()===""){const R=c.slice(h+1).findIndex(H=>H.trim()!=="");if(R===-1)break;if((((i=(r=c[h+1+R].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>k){O.push(q),d=`${d}${q}
`,h+=1;continue}else break}if((((a=(s=q.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:a.length)||0)>k)O.push(q),d=`${d}${q}
`,h+=1;else break}let B;const W=O.slice(1);if(W.length>0){const q=W.map(U=>U.slice(k+m)).join(`
`);q.trim()&&(e.customNestedParser?B=e.customNestedParser(q):B=n.blockTokens(q))}const L=e.createToken(S,B);u.push(L)}if(u.length!==0)return{items:u,raw:d}}function R_(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...a]=t.content,c=e.renderChildren([s]),u=[`${i}${c}`];return a&&a.length>0&&a.forEach(d=>{const h=e.renderChildren([d]);if(h){const m=h.split(`
`).map(v=>v?e.indent(v):"").join(`
`);u.push(m)}}),u.join(`
`)}function cee(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,a=t;i.descendants((c,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+c.nodeSize;let m=null;if(c.marks.forEach(w=>{if(w!==a)return!1;m=w}),!m)return;let v=!1;if(Object.keys(n).forEach(w=>{n[w]!==m.attrs[w]&&(v=!0)}),v){const w=t.type.create({...t.attrs,...n});s.removeMark(d,h,t.type),s.addMark(d,h,w)}}),s.docChanged&&e.view.dispatch(s)}var Pi=class O4 extends A_{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new O4(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function af(t){return new $Z({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=bn(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,c=r[r.length-1],u=r[0];let d=n.to;if(c){const h=u.search(/\S/),m=n.from+u.indexOf(c),v=m+c.length;if(C_(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(_=>_===t.type&&_!==S.mark.type)).filter(S=>S.to>m).length)return null;v<n.to&&a.delete(v,n.to),m>n.from&&a.delete(n.from+h,m),d=n.from+h+c.length,a.addMark(n.from+h,d,t.type.create(s||{})),a.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:uee,getOwnPropertySymbols:fee}=Object,{hasOwnProperty:dee}=Object.prototype;function G1(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function uy(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,a=s.get(n),c=s.get(r);if(a&&c)return a===r&&c===n;s.set(n,r),s.set(r,n);const u=t(n,r,i);return s.delete(n),s.delete(r),u}}function hee(t){return t?.[Symbol.toStringTag]}function ZR(t){return uee(t).concat(fee(t))}const pee=Object.hasOwn||((t,e)=>dee.call(t,e));function yf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const mee="__v",gee="__o",yee="_owner",{getOwnPropertyDescriptor:eN,keys:tN}=Object;function vee(t,e){return t.byteLength===e.byteLength&&Av(new Uint8Array(t),new Uint8Array(e))}function bee(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function wee(t,e){return t.byteLength===e.byteLength&&Av(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function xee(t,e){return yf(t.getTime(),e.getTime())}function Eee(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function See(t,e){return t===e}function nN(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let a,c,u=0;for(;(a=s.next())&&!a.done;){const d=e.entries();let h=!1,m=0;for(;(c=d.next())&&!c.done;){if(i[m]){m++;continue}const v=a.value,w=c.value;if(n.equals(v[0],w[0],u,m,t,e,n)&&n.equals(v[1],w[1],v[0],w[0],t,e,n)){h=i[m]=!0;break}m++}if(!h)return!1;u++}return!0}const _ee=yf;function Tee(t,e,n){const r=tN(t);let i=r.length;if(tN(e).length!==i)return!1;for(;i-- >0;)if(!M4(t,e,n,r[i]))return!1;return!0}function tp(t,e,n){const r=ZR(t);let i=r.length;if(ZR(e).length!==i)return!1;let s,a,c;for(;i-- >0;)if(s=r[i],!M4(t,e,n,s)||(a=eN(t,s),c=eN(e,s),(a||c)&&(!a||!c||a.configurable!==c.configurable||a.enumerable!==c.enumerable||a.writable!==c.writable)))return!1;return!0}function kee(t,e){return yf(t.valueOf(),e.valueOf())}function Cee(t,e){return t.source===e.source&&t.flags===e.flags}function rN(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let a,c;for(;(a=s.next())&&!a.done;){const u=e.values();let d=!1,h=0;for(;(c=u.next())&&!c.done;){if(!i[h]&&n.equals(a.value,c.value,a.value,c.value,t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1}return!0}function Av(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Aee(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function M4(t,e,n,r){return(r===yee||r===gee||r===mee)&&(t.$$typeof||e.$$typeof)?!0:pee(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const Oee="[object ArrayBuffer]",Mee="[object Arguments]",Ree="[object Boolean]",Nee="[object DataView]",Dee="[object Date]",Iee="[object Error]",Pee="[object Map]",Lee="[object Number]",zee="[object Object]",jee="[object RegExp]",Vee="[object Set]",Bee="[object String]",Uee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Fee="[object URL]",Hee=Object.prototype.toString;function qee({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:c,areObjectsEqual:u,arePrimitiveWrappersEqual:d,areRegExpsEqual:h,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:w,unknownTagComparators:S}){return function(_,O,B){if(_===O)return!0;if(_==null||O==null)return!1;const W=typeof _;if(W!==typeof O)return!1;if(W!=="object")return W==="number"?c(_,O,B):W==="function"?s(_,O,B):!1;const L=_.constructor;if(L!==O.constructor)return!1;if(L===Object)return u(_,O,B);if(Array.isArray(_))return e(_,O,B);if(L===Date)return r(_,O,B);if(L===RegExp)return h(_,O,B);if(L===Map)return a(_,O,B);if(L===Set)return m(_,O,B);const q=Hee.call(_);if(q===Dee)return r(_,O,B);if(q===jee)return h(_,O,B);if(q===Pee)return a(_,O,B);if(q===Vee)return m(_,O,B);if(q===zee)return typeof _.then!="function"&&typeof O.then!="function"&&u(_,O,B);if(q===Fee)return w(_,O,B);if(q===Iee)return i(_,O,B);if(q===Mee)return u(_,O,B);if(Uee[q])return v(_,O,B);if(q===Oee)return t(_,O,B);if(q===Nee)return n(_,O,B);if(q===Ree||q===Lee||q===Bee)return d(_,O,B);if(S){let U=S[q];if(!U){const R=hee(_);R&&(U=S[R])}if(U)return U(_,O,B)}return!1}}function $ee({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:vee,areArraysEqual:n?tp:bee,areDataViewsEqual:wee,areDatesEqual:xee,areErrorsEqual:Eee,areFunctionsEqual:See,areMapsEqual:n?G1(nN,tp):nN,areNumbersEqual:_ee,areObjectsEqual:n?tp:Tee,arePrimitiveWrappersEqual:kee,areRegExpsEqual:Cee,areSetsEqual:n?G1(rN,tp):rN,areTypedArraysEqual:n?G1(Av,tp):Av,areUrlsEqual:Aee,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=uy(r.areArraysEqual),s=uy(r.areMapsEqual),a=uy(r.areObjectsEqual),c=uy(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:c})}return r}function Wee(t){return function(e,n,r,i,s,a,c){return t(e,n,c)}}function Kee({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(c,u){const{cache:d=t?new WeakMap:void 0,meta:h}=n();return e(c,u,{cache:d,equals:r,meta:h,strict:i})};if(t)return function(c,u){return e(c,u,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(c,u){return e(c,u,s)}}const Gee=ru();ru({strict:!0});ru({circular:!0});ru({circular:!0,strict:!0});ru({createInternalComparator:()=>yf});ru({strict:!0,createInternalComparator:()=>yf});ru({circular:!0,createInternalComparator:()=>yf});ru({circular:!0,createInternalComparator:()=>yf,strict:!0});function ru(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=$ee(t),a=qee(s),c=n?n(a):Wee(a);return Kee({circular:e,comparator:a,createState:r,equals:c,strict:i})}var Y1={exports:{}},Q1={};var iN;function Yee(){if(iN)return Q1;iN=1;var t=um(),e=xL();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,c=t.useMemo,u=t.useDebugValue;return Q1.useSyncExternalStoreWithSelector=function(d,h,m,v,w){var S=s(null);if(S.current===null){var k={hasValue:!1,value:null};S.current=k}else k=S.current;S=c(function(){function O(U){if(!B){if(B=!0,W=U,U=v(U),w!==void 0&&k.hasValue){var R=k.value;if(w(R,U))return L=R}return L=U}if(R=L,r(W,U))return R;var P=v(U);return w!==void 0&&w(R,P)?(W=U,R):(W=U,L=P)}var B=!1,W,L,q=m===void 0?null:m;return[function(){return O(h())},q===null?void 0:function(){return O(q())}]},[h,m,v,w]);var _=i(d,S[0],S[1]);return a(function(){k.hasValue=!0,k.value=_},[_]),u(_),_},Q1}var sN;function Qee(){return sN||(sN=1,Y1.exports=Yee()),Y1.exports}var Xee=Qee(),Jee=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Zee=({contentComponent:t})=>{const e=EL.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return M.jsx(M.Fragment,{children:Object.values(e)})};function ete(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:BD.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var tte=class extends Be.Component{constructor(t){var e;super(t),this.editorContentRef=Be.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=ete(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return M.jsxs(M.Fragment,{children:[M.jsx("div",{ref:Jee(e,this.editorContentRef),...n}),t?.contentComponent&&M.jsx(Zee,{contentComponent:t.contentComponent})]})}},nte=z.forwardRef((t,e)=>{const n=Be.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Be.createElement(tte,{key:n,innerRef:e,...t})}),R4=Be.memo(nte),rte=typeof window<"u"?z.useLayoutEffect:z.useEffect,ite=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function ste(t){var e;const[n]=z.useState(()=>new ite(t.editor)),r=Xee.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Gee);return rte(()=>n.watch(t.editor),[t.editor,n]),z.useDebugValue(r),r}var ote=!1,EE=typeof window>"u",ate=EE||!!(typeof window<"u"&&window.next),lte=class N4{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?EE||ate?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new eee(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=n.extensions)==null?void 0:a[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?N4.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function D4(t={},e=[]){const n=z.useRef(t);n.current=t;const[r]=z.useState(()=>new lte(n)),i=EL.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return z.useDebugValue(i),z.useEffect(r.onRender(e)),ste({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var I4=z.createContext({editor:null});I4.Consumer;var P4=()=>z.useContext(I4),cte=z.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),ute=()=>z.useContext(cte);Be.forwardRef((t,e)=>{const{onDragStart:n}=ute(),r=t.as||"div";return M.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function oN(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function aN(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function fte(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function dte(t){if(oN(t)||aN(t))return!0;if(fte(t)){const e=t.type;if(e)return oN(e)||aN(e)}return!1}function hte(){try{if(z.version)return parseInt(z.version.split(".")[0],10)>=19}catch{}return!1}var L4=class{constructor(t,{editor:e,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Qd.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,n=this.props,r=this.editor,i=hte(),s=dte(e),a={...n};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=c=>{this.ref=c}),this.reactElement=M.jsx(e,{...a}),(t=r?.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e?.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};Be.createContext({markViewContentRef:()=>{}});const z4=["top","right","bottom","left"],lN=["start","end"],cN=z4.reduce((t,e)=>t.concat(e,e+"-"+lN[0],e+"-"+lN[1]),[]),xa=Math.min,Ri=Math.max,Ov=Math.round,pa=t=>({x:t,y:t}),pte={left:"right",right:"left",bottom:"top",top:"bottom"},mte={start:"end",end:"start"};function SE(t,e,n){return Ri(t,xa(e,n))}function Tl(t,e){return typeof t=="function"?t(e):t}function co(t){return t.split("-")[0]}function Io(t){return t.split("-")[1]}function j4(t){return t==="x"?"y":"x"}function N_(t){return t==="y"?"height":"width"}const gte=new Set(["top","bottom"]);function oa(t){return gte.has(co(t))?"y":"x"}function D_(t){return j4(oa(t))}function V4(t,e,n){n===void 0&&(n=!1);const r=Io(t),i=D_(t),s=N_(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Rv(a)),[a,Rv(a)]}function yte(t){const e=Rv(t);return[Mv(t),e,Mv(e)]}function Mv(t){return t.replace(/start|end/g,e=>mte[e])}const uN=["left","right"],fN=["right","left"],vte=["top","bottom"],bte=["bottom","top"];function wte(t,e,n){switch(t){case"top":case"bottom":return n?e?fN:uN:e?uN:fN;case"left":case"right":return e?vte:bte;default:return[]}}function xte(t,e,n,r){const i=Io(t);let s=wte(co(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Mv)))),s}function Rv(t){return t.replace(/left|right|bottom|top/g,e=>pte[e])}function Ete(t){return{top:0,right:0,bottom:0,left:0,...t}}function I_(t){return typeof t!="number"?Ete(t):{top:t,right:t,bottom:t,left:t}}function Bd(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function dN(t,e,n){let{reference:r,floating:i}=t;const s=oa(e),a=D_(e),c=N_(a),u=co(e),d=s==="y",h=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,v=r[c]/2-i[c]/2;let w;switch(u){case"top":w={x:h,y:r.y-i.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:m};break;case"left":w={x:r.x-i.width,y:m};break;default:w={x:r.x,y:r.y}}switch(Io(e)){case"start":w[a]-=v*(n&&d?-1:1);break;case"end":w[a]+=v*(n&&d?-1:1);break}return w}const Ste=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,c=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:m}=dN(d,r,u),v=r,w={},S=0;for(let k=0;k<c.length;k++){const{name:_,fn:O}=c[k],{x:B,y:W,data:L,reset:q}=await O({x:h,y:m,initialPlacement:r,placement:v,strategy:i,middlewareData:w,rects:d,platform:a,elements:{reference:t,floating:e}});h=B??h,m=W??m,w={...w,[_]:{...w[_],...L}},q&&S<=50&&(S++,typeof q=="object"&&(q.placement&&(v=q.placement),q.rects&&(d=q.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):q.rects),{x:h,y:m}=dN(d,v,u)),k=-1)}return{x:h,y:m,placement:v,strategy:i,middlewareData:w}};async function Ud(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:c,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:v=!1,padding:w=0}=Tl(e,t),S=I_(w),_=c[v?m==="floating"?"reference":"floating":m],O=Bd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:d,rootBoundary:h,strategy:u})),B=m==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,W=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),L=await(s.isElement==null?void 0:s.isElement(W))?await(s.getScale==null?void 0:s.getScale(W))||{x:1,y:1}:{x:1,y:1},q=Bd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:B,offsetParent:W,strategy:u}):B);return{top:(O.top-q.top+S.top)/L.y,bottom:(q.bottom-O.bottom+S.bottom)/L.y,left:(O.left-q.left+S.left)/L.x,right:(q.right-O.right+S.right)/L.x}}const _te=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:c,middlewareData:u}=e,{element:d,padding:h=0}=Tl(t,e)||{};if(d==null)return{};const m=I_(h),v={x:n,y:r},w=D_(i),S=N_(w),k=await a.getDimensions(d),_=w==="y",O=_?"top":"left",B=_?"bottom":"right",W=_?"clientHeight":"clientWidth",L=s.reference[S]+s.reference[w]-v[w]-s.floating[S],q=v[w]-s.reference[w],U=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let R=U?U[W]:0;(!R||!await(a.isElement==null?void 0:a.isElement(U)))&&(R=c.floating[W]||s.floating[S]);const P=L/2-q/2,V=R/2-k[S]/2-1,H=xa(m[O],V),G=xa(m[B],V),Q=H,K=R-k[S]-G,je=R/2-k[S]/2+P,Re=SE(Q,je,K),oe=!u.arrow&&Io(i)!=null&&je!==Re&&s.reference[S]/2-(je<Q?H:G)-k[S]/2<0,Ee=oe?je<Q?je-Q:je-K:0;return{[w]:v[w]+Ee,data:{[w]:Re,centerOffset:je-Re-Ee,...oe&&{alignmentOffset:Ee}},reset:oe}}});function Tte(t,e,n){return(t?[...n.filter(i=>Io(i)===t),...n.filter(i=>Io(i)!==t)]:n.filter(i=>co(i)===i)).filter(i=>t?Io(i)===t||(e?Mv(i)!==i:!1):!0)}const kte=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:s,middlewareData:a,placement:c,platform:u,elements:d}=e,{crossAxis:h=!1,alignment:m,allowedPlacements:v=cN,autoAlignment:w=!0,...S}=Tl(t,e),k=m!==void 0||v===cN?Tte(m||null,w,v):v,_=await Ud(e,S),O=((n=a.autoPlacement)==null?void 0:n.index)||0,B=k[O];if(B==null)return{};const W=V4(B,s,await(u.isRTL==null?void 0:u.isRTL(d.floating)));if(c!==B)return{reset:{placement:k[0]}};const L=[_[co(B)],_[W[0]],_[W[1]]],q=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:B,overflows:L}],U=k[O+1];if(U)return{data:{index:O+1,overflows:q},reset:{placement:U}};const R=q.map(H=>{const G=Io(H.placement);return[H.placement,G&&h?H.overflows.slice(0,2).reduce((Q,K)=>Q+K,0):H.overflows[0],H.overflows]}).sort((H,G)=>H[1]-G[1]),V=((i=R.filter(H=>H[2].slice(0,Io(H[0])?2:3).every(G=>G<=0))[0])==null?void 0:i[0])||R[0][0];return V!==c?{data:{index:O+1,overflows:q},reset:{placement:V}}:{}}}},Cte=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:c,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:k=!0,..._}=Tl(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const O=co(i),B=oa(c),W=co(c)===c,L=await(u.isRTL==null?void 0:u.isRTL(d.floating)),q=v||(W||!k?[Rv(c)]:yte(c)),U=S!=="none";!v&&U&&q.push(...xte(c,k,S,L));const R=[c,...q],P=await Ud(e,_),V=[];let H=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&V.push(P[O]),m){const je=V4(i,a,L);V.push(P[je[0]],P[je[1]])}if(H=[...H,{placement:i,overflows:V}],!V.every(je=>je<=0)){var G,Q;const je=(((G=s.flip)==null?void 0:G.index)||0)+1,Re=R[je];if(Re&&(!(m==="alignment"?B!==oa(Re):!1)||H.every(ve=>oa(ve.placement)===B?ve.overflows[0]>0:!0)))return{data:{index:je,overflows:H},reset:{placement:Re}};let oe=(Q=H.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,ve)=>Ee.overflows[1]-ve.overflows[1])[0])==null?void 0:Q.placement;if(!oe)switch(w){case"bestFit":{var K;const Ee=(K=H.filter(ve=>{if(U){const Qe=oa(ve.placement);return Qe===B||Qe==="y"}return!0}).map(ve=>[ve.placement,ve.overflows.filter(Qe=>Qe>0).reduce((Qe,Ze)=>Qe+Ze,0)]).sort((ve,Qe)=>ve[1]-Qe[1])[0])==null?void 0:K[0];Ee&&(oe=Ee);break}case"initialPlacement":oe=c;break}if(i!==oe)return{reset:{placement:oe}}}return{}}}};function hN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pN(t){return z4.some(e=>t[e]>=0)}const Ate=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Tl(t,e);switch(r){case"referenceHidden":{const s=await Ud(e,{...i,elementContext:"reference"}),a=hN(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:pN(a)}}}case"escaped":{const s=await Ud(e,{...i,altBoundary:!0}),a=hN(s,n.floating);return{data:{escapedOffsets:a,escaped:pN(a)}}}default:return{}}}}};function B4(t){const e=xa(...t.map(s=>s.left)),n=xa(...t.map(s=>s.top)),r=Ri(...t.map(s=>s.right)),i=Ri(...t.map(s=>s.bottom));return{x:e,y:n,width:r-e,height:i-n}}function Ote(t){const e=t.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Bd(B4(i)))}const Mte=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:s,strategy:a}=e,{padding:c=2,x:u,y:d}=Tl(t,e),h=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),m=Ote(h),v=Bd(B4(h)),w=I_(c);function S(){if(m.length===2&&m[0].left>m[1].right&&u!=null&&d!=null)return m.find(_=>u>_.left-w.left&&u<_.right+w.right&&d>_.top-w.top&&d<_.bottom+w.bottom)||v;if(m.length>=2){if(oa(n)==="y"){const H=m[0],G=m[m.length-1],Q=co(n)==="top",K=H.top,je=G.bottom,Re=Q?H.left:G.left,oe=Q?H.right:G.right,Ee=oe-Re,ve=je-K;return{top:K,bottom:je,left:Re,right:oe,width:Ee,height:ve,x:Re,y:K}}const _=co(n)==="left",O=Ri(...m.map(H=>H.right)),B=xa(...m.map(H=>H.left)),W=m.filter(H=>_?H.left===B:H.right===O),L=W[0].top,q=W[W.length-1].bottom,U=B,R=O,P=R-U,V=q-L;return{top:L,bottom:q,left:U,right:R,width:P,height:V,x:U,y:L}}return v}const k=await s.getElementRects({reference:{getBoundingClientRect:S},floating:r.floating,strategy:a});return i.reference.x!==k.reference.x||i.reference.y!==k.reference.y||i.reference.width!==k.reference.width||i.reference.height!==k.reference.height?{reset:{rects:k}}:{}}}},Rte=new Set(["left","top"]);async function Nte(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=co(n),c=Io(n),u=oa(n)==="y",d=Rte.has(a)?-1:1,h=s&&u?-1:1,m=Tl(e,t);let{mainAxis:v,crossAxis:w,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof S=="number"&&(w=c==="end"?S*-1:S),u?{x:w*h,y:v*d}:{x:v*d,y:w*h}}const Dte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:c}=e,u=await Nte(e,t);return a===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:a}}}}},Ite=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:_=>{let{x:O,y:B}=_;return{x:O,y:B}}},...u}=Tl(t,e),d={x:n,y:r},h=await Ud(e,u),m=oa(co(i)),v=j4(m);let w=d[v],S=d[m];if(s){const _=v==="y"?"top":"left",O=v==="y"?"bottom":"right",B=w+h[_],W=w-h[O];w=SE(B,w,W)}if(a){const _=m==="y"?"top":"left",O=m==="y"?"bottom":"right",B=S+h[_],W=S-h[O];S=SE(B,S,W)}const k=c.fn({...e,[v]:w,[m]:S});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[v]:s,[m]:a}}}}}},Pte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:c}=e,{apply:u=()=>{},...d}=Tl(t,e),h=await Ud(e,d),m=co(i),v=Io(i),w=oa(i)==="y",{width:S,height:k}=s.floating;let _,O;m==="top"||m==="bottom"?(_=m,O=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(O=m,_=v==="end"?"top":"bottom");const B=k-h.top-h.bottom,W=S-h.left-h.right,L=xa(k-h[_],B),q=xa(S-h[O],W),U=!e.middlewareData.shift;let R=L,P=q;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=W),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=B),U&&!v){const H=Ri(h.left,0),G=Ri(h.right,0),Q=Ri(h.top,0),K=Ri(h.bottom,0);w?P=S-2*(H!==0||G!==0?H+G:Ri(h.left,h.right)):R=k-2*(Q!==0||K!==0?Q+K:Ri(h.top,h.bottom))}await u({...e,availableWidth:P,availableHeight:R});const V=await a.getDimensions(c.floating);return S!==V.width||k!==V.height?{reset:{rects:!0}}:{}}}};function X0(){return typeof window<"u"}function uh(t){return U4(t)?(t.nodeName||"").toLowerCase():"#document"}function Rs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function kl(t){var e;return(e=(U4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function U4(t){return X0()?t instanceof Node||t instanceof Rs(t).Node:!1}function zo(t){return X0()?t instanceof Element||t instanceof Rs(t).Element:!1}function Ea(t){return X0()?t instanceof HTMLElement||t instanceof Rs(t).HTMLElement:!1}function mN(t){return!X0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rs(t).ShadowRoot}const Lte=new Set(["inline","contents"]);function Dm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=jo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Lte.has(i)}const zte=new Set(["table","td","th"]);function jte(t){return zte.has(uh(t))}const Vte=[":popover-open",":modal"];function J0(t){return Vte.some(e=>{try{return t.matches(e)}catch{return!1}})}const Bte=["transform","translate","scale","rotate","perspective"],Ute=["transform","translate","scale","rotate","perspective","filter"],Fte=["paint","layout","strict","content"];function P_(t){const e=L_(),n=zo(t)?jo(t):t;return Bte.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ute.some(r=>(n.willChange||"").includes(r))||Fte.some(r=>(n.contain||"").includes(r))}function Hte(t){let e=Jc(t);for(;Ea(e)&&!Fd(e);){if(P_(e))return e;if(J0(e))return null;e=Jc(e)}return null}function L_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qte=new Set(["html","body","#document"]);function Fd(t){return qte.has(uh(t))}function jo(t){return Rs(t).getComputedStyle(t)}function Z0(t){return zo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Jc(t){if(uh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mN(t)&&t.host||kl(t);return mN(e)?e.host:e}function F4(t){const e=Jc(t);return Fd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ea(e)&&Dm(e)?e:F4(e)}function H4(t,e,n){var r;e===void 0&&(e=[]);const i=F4(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=Rs(i);return s?(_E(a),e.concat(a,a.visualViewport||[],Dm(i)?i:[],[])):e.concat(i,H4(i,[]))}function _E(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function q4(t){const e=jo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ea(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,c=Ov(n)!==s||Ov(r)!==a;return c&&(n=s,r=a),{width:n,height:r,$:c}}function $4(t){return zo(t)?t:t.contextElement}function _d(t){const e=$4(t);if(!Ea(e))return pa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=q4(e);let a=(s?Ov(n.width):n.width)/r,c=(s?Ov(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const $te=pa(0);function W4(t){const e=Rs(t);return!L_()||!e.visualViewport?$te:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Wte(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rs(t)?!1:e}function rm(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=$4(t);let a=pa(1);e&&(r?zo(r)&&(a=_d(r)):a=_d(t));const c=Wte(s,n,r)?W4(s):pa(0);let u=(i.left+c.x)/a.x,d=(i.top+c.y)/a.y,h=i.width/a.x,m=i.height/a.y;if(s){const v=Rs(s),w=r&&zo(r)?Rs(r):r;let S=v,k=_E(S);for(;k&&r&&w!==S;){const _=_d(k),O=k.getBoundingClientRect(),B=jo(k),W=O.left+(k.clientLeft+parseFloat(B.paddingLeft))*_.x,L=O.top+(k.clientTop+parseFloat(B.paddingTop))*_.y;u*=_.x,d*=_.y,h*=_.x,m*=_.y,u+=W,d+=L,S=Rs(k),k=_E(S)}}return Bd({width:h,height:m,x:u,y:d})}function eb(t,e){const n=Z0(t).scrollLeft;return e?e.left+n:rm(kl(t)).left+n}function K4(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-eb(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Kte(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=kl(r),c=e?J0(e.floating):!1;if(r===a||c&&s)return n;let u={scrollLeft:0,scrollTop:0},d=pa(1);const h=pa(0),m=Ea(r);if((m||!m&&!s)&&((uh(r)!=="body"||Dm(a))&&(u=Z0(r)),Ea(r))){const w=rm(r);d=_d(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const v=a&&!m&&!s?K4(a,u):pa(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+v.x,y:n.y*d.y-u.scrollTop*d.y+h.y+v.y}}function Gte(t){return Array.from(t.getClientRects())}function Yte(t){const e=kl(t),n=Z0(t),r=t.ownerDocument.body,i=Ri(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ri(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+eb(t);const c=-n.scrollTop;return jo(r).direction==="rtl"&&(a+=Ri(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:c}}const gN=25;function Qte(t,e){const n=Rs(t),r=kl(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,u=0;if(i){s=i.width,a=i.height;const h=L_();(!h||h&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}const d=eb(r);if(d<=0){const h=r.ownerDocument,m=h.body,v=getComputedStyle(m),w=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,S=Math.abs(r.clientWidth-m.clientWidth-w);S<=gN&&(s-=S)}else d<=gN&&(s+=d);return{width:s,height:a,x:c,y:u}}const Xte=new Set(["absolute","fixed"]);function Jte(t,e){const n=rm(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ea(t)?_d(t):pa(1),a=t.clientWidth*s.x,c=t.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:a,height:c,x:u,y:d}}function yN(t,e,n){let r;if(e==="viewport")r=Qte(t,n);else if(e==="document")r=Yte(kl(t));else if(zo(e))r=Jte(e,n);else{const i=W4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Bd(r)}function G4(t,e){const n=Jc(t);return n===e||!zo(n)||Fd(n)?!1:jo(n).position==="fixed"||G4(n,e)}function Zte(t,e){const n=e.get(t);if(n)return n;let r=H4(t,[]).filter(c=>zo(c)&&uh(c)!=="body"),i=null;const s=jo(t).position==="fixed";let a=s?Jc(t):t;for(;zo(a)&&!Fd(a);){const c=jo(a),u=P_(a);!u&&c.position==="fixed"&&(i=null),(s?!u&&!i:!u&&c.position==="static"&&!!i&&Xte.has(i.position)||Dm(a)&&!u&&G4(t,a))?r=r.filter(h=>h!==a):i=c,a=Jc(a)}return e.set(t,r),r}function ene(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?J0(e)?[]:Zte(e,this._c):[].concat(n),r],c=a[0],u=a.reduce((d,h)=>{const m=yN(e,h,i);return d.top=Ri(m.top,d.top),d.right=xa(m.right,d.right),d.bottom=xa(m.bottom,d.bottom),d.left=Ri(m.left,d.left),d},yN(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function tne(t){const{width:e,height:n}=q4(t);return{width:e,height:n}}function nne(t,e,n){const r=Ea(e),i=kl(e),s=n==="fixed",a=rm(t,!0,s,e);let c={scrollLeft:0,scrollTop:0};const u=pa(0);function d(){u.x=eb(i)}if(r||!r&&!s)if((uh(e)!=="body"||Dm(i))&&(c=Z0(e)),r){const w=rm(e,!0,s,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else i&&d();s&&!r&&i&&d();const h=i&&!r&&!s?K4(i,c):pa(0),m=a.left+c.scrollLeft-u.x-h.x,v=a.top+c.scrollTop-u.y-h.y;return{x:m,y:v,width:a.width,height:a.height}}function X1(t){return jo(t).position==="static"}function vN(t,e){if(!Ea(t)||jo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return kl(t)===n&&(n=n.ownerDocument.body),n}function Y4(t,e){const n=Rs(t);if(J0(t))return n;if(!Ea(t)){let i=Jc(t);for(;i&&!Fd(i);){if(zo(i)&&!X1(i))return i;i=Jc(i)}return n}let r=vN(t,e);for(;r&&jte(r)&&X1(r);)r=vN(r,e);return r&&Fd(r)&&X1(r)&&!P_(r)?n:r||Hte(t)||n}const rne=async function(t){const e=this.getOffsetParent||Y4,n=this.getDimensions,r=await n(t.floating);return{reference:nne(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ine(t){return jo(t).direction==="rtl"}const sne={convertOffsetParentRelativeRectToViewportRelativeRect:Kte,getDocumentElement:kl,getClippingRect:ene,getOffsetParent:Y4,getElementRects:rne,getClientRects:Gte,getDimensions:tne,getScale:_d,isElement:zo,isRTL:ine},Q4=Dte,X4=kte,J4=Ite,Z4=Cte,e3=Pte,t3=Ate,n3=_te,r3=Mte,i3=(t,e,n)=>{const r=new Map,i={platform:sne,...n},s={...i.platform,_c:r};return Ste(t,e,{...i,platform:s})};let TE,kE;if(typeof WeakMap<"u"){let t=new WeakMap;TE=e=>t.get(e),kE=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;TE=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},kE=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var il=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,a=i+1;for(let c=1;s<this.width&&this.map[e+c]==n;c++)s++;for(let c=1;a<this.height&&this.map[e+this.width*c]==n;c++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:a}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:a,right:c,top:u,bottom:d}=this.findCell(e);return{left:Math.min(n,a),top:Math.min(i,u),right:Math.max(r,c),bottom:Math.max(s,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,a=this.map[s];n[a]||(n[a]=!0,!(i==t.left&&i&&this.map[s-1]==a||r==t.top&&r&&this.map[s-this.width]==a)&&e.push(a))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let a=e+t*this.width;const c=(t+1)*this.width;for(;a<c&&this.map[a]<i;)a++;return a==c?s-1:this.map[a]}i=s}}static get(t){return TE(t)||kE(t,one(t))}};function one(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=ane(t),n=t.childCount,r=[];let i=0,s=null;const a=[];for(let d=0,h=e*n;d<h;d++)r[d]=0;for(let d=0,h=0;d<n;d++){const m=t.child(d);h++;for(let S=0;;S++){for(;i<r.length&&r[i]!=0;)i++;if(S==m.childCount)break;const k=m.child(S),{colspan:_,rowspan:O,colwidth:B}=k.attrs;for(let W=0;W<O;W++){if(W+d>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:O-W});break}const L=i+W*e;for(let q=0;q<_;q++){r[L+q]==0?r[L+q]=h:(s||(s=[])).push({type:"collision",row:d,pos:h,n:_-q});const U=B&&B[q];if(U){const R=(L+q)%e*2,P=a[R];P==null||P!=U&&a[R+1]==1?(a[R]=U,a[R+1]=1):P==U&&a[R+1]++}}}i+=_,h+=k.nodeSize}const v=(d+1)*e;let w=0;for(;i<v;)r[i++]==0&&w++;w&&(s||(s=[])).push({type:"missing",row:d,n:w}),h++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const c=new il(e,n,r,s);let u=!1;for(let d=0;!u&&d<a.length;d+=2)a[d]!=null&&a[d+1]<n&&(u=!0);return u&&lne(c,a,t),c}function ane(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let a=0;a<r;a++){const c=t.child(a);for(let u=0;u<c.childCount;u++){const d=c.child(u);a+d.attrs.rowspan>r&&(s+=d.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const c=i.child(a);s+=c.attrs.colspan,c.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function lne(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let c=null;const u=a.attrs;for(let d=0;d<u.colspan;d++){const h=e[(i+d)%t.width*2];h!=null&&(!u.colwidth||u.colwidth[d]!=h)&&((c||(c=cne(u)))[d]=h)}c&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:c})}}function cne(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function z_(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}new On("selectingCells");function une(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function s3(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function fne(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=une(e.$head)||dne(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function dne(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function bN(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function o3(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function a3(t,e,n){const r=t.node(-1),i=il.get(r),s=t.start(-1),a=i.nextCell(t.pos-s,e,n);return a==null?null:t.node(0).resolve(s+a)}function wN(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var ma=class tl extends xt{constructor(e,n=e){const r=e.node(-1),i=il.get(r),s=e.start(-1),a=i.rectBetween(e.pos-s,n.pos-s),c=e.node(0),u=i.cellsInRect(a).filter(h=>h!=n.pos-s);u.unshift(n.pos-s);const d=u.map(h=>{const m=r.nodeAt(h);if(!m)throw new RangeError(`No cell with offset ${h} found`);const v=s+h+1;return new tz(c.resolve(v),c.resolve(v+m.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(bN(r)&&bN(i)&&o3(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?tl.rowSelection(r,i):s&&this.isColSelection()?tl.colSelection(r,i):new tl(r,i)}return _t.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=il.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let u=i.top;u<i.bottom;u++){const d=[];for(let h=u*n.width+i.left,m=i.left;m<i.right;m++,h++){const v=n.map[h];if(s[v])continue;s[v]=!0;const w=n.findCell(v);let S=e.nodeAt(v);if(!S)throw new RangeError(`No cell with offset ${v} found`);const k=i.left-w.left,_=w.right-i.right;if(k>0||_>0){let O=S.attrs;if(k>0&&(O=wN(O,0,k)),_>0&&(O=wN(O,O.colspan-_,_)),w.left<i.left){if(S=S.type.createAndFill(O),!S)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(O)}`)}else S=S.type.create(O,S.content)}if(w.top<i.top||w.bottom>i.bottom){const O={...S.attrs,rowspan:Math.min(w.bottom,i.bottom)-Math.max(w.top,i.top)};w.top<i.top?S=S.type.createAndFill(O):S=S.type.create(O,S.content)}d.push(S)}a.push(e.child(u).copy(Ve.from(d)))}const c=this.isColSelection()&&this.isRowSelection()?e:a;return new et(Ve.from(c),1,1)}replace(e,n=et.empty){const r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:c,$to:u}=i[a],d=e.mapping.slice(r);e.replace(d.map(c.pos),d.map(u.pos),a?et.empty:n)}const s=xt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new et(Ve.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=il.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)e(n.nodeAt(s[a]),i+s[a])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=il.get(r),s=e.start(-1),a=i.findCell(e.pos-s),c=i.findCell(n.pos-s),u=e.node(0);return a.top<=c.top?(a.top>0&&(e=u.resolve(s+i.map[a.left])),c.bottom<i.height&&(n=u.resolve(s+i.map[i.width*(i.height-1)+c.right-1]))):(c.top>0&&(n=u.resolve(s+i.map[c.left])),a.bottom<i.height&&(e=u.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new tl(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=il.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,c=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,c)==n.width}eq(e){return e instanceof tl&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=il.get(r),s=e.start(-1),a=i.findCell(e.pos-s),c=i.findCell(n.pos-s),u=e.node(0);return a.left<=c.left?(a.left>0&&(e=u.resolve(s+i.map[a.top*i.width])),c.right<i.width&&(n=u.resolve(s+i.map[i.width*(c.top+1)-1]))):(c.left>0&&(n=u.resolve(s+i.map[c.top*i.width])),a.right<i.width&&(e=u.resolve(s+i.map[i.width*(a.top+1)-1]))),new tl(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new tl(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new tl(e.resolve(n),e.resolve(r))}getBookmark(){return new hne(this.$anchorCell.pos,this.$headCell.pos)}};ma.prototype.visible=!1;xt.jsonID("cell",ma);var hne=class l3{constructor(e,n){this.anchor=e,this.head=n}map(e){return new l3(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&o3(n,r)?new ma(n,r):xt.near(r,1)}};new On("fix-tables");function c3(t){const e=t.selection,n=fne(t),r=n.node(-1),i=n.start(-1),s=il.get(r);return{...e instanceof ma?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function pne(t){return function(e,n){if(!s3(e))return!1;if(n){const r=z_(e.schema),i=c3(e),s=e.tr,a=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),c=a.map(u=>i.table.nodeAt(u));for(let u=0;u<a.length;u++)c[u].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[u],r.cell,c[u].attrs);if(s.steps.length===0)for(let u=0;u<a.length;u++)s.setNodeMarkup(i.tableStart+a[u],r.header_cell,c[u].attrs);n(s)}return!0}}function xN(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function j_(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?pne(t):function(n,r){if(!s3(n))return!1;if(r){const i=z_(n.schema),s=c3(n),a=n.tr,c=xN("row",s,i),u=xN("column",s,i),d=(t==="column"?c:t==="row"&&u)?1:0,h=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,m=t=="column"?u?i.cell:i.header_cell:t=="row"?c?i.cell:i.header_cell:i.cell;s.map.cellsInRect(h).forEach(v=>{const w=v+s.tableStart,S=a.doc.nodeAt(w);S&&a.setNodeMarkup(w,m,S.attrs)}),r(a)}return!0}}j_("row",{useDeprecatedLogic:!0});j_("column",{useDeprecatedLogic:!0});j_("cell",{useDeprecatedLogic:!0});function fy(t,e){const n=t.selection;if(!(n instanceof ma))return!1;if(e){const r=t.tr,i=z_(t.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new et(i,0,0))}),r.docChanged&&e(r)}return!0}g_({ArrowLeft:dy("horiz",-1),ArrowRight:dy("horiz",1),ArrowUp:dy("vert",-1),ArrowDown:dy("vert",1),"Shift-ArrowLeft":hy("horiz",-1),"Shift-ArrowRight":hy("horiz",1),"Shift-ArrowUp":hy("vert",-1),"Shift-ArrowDown":hy("vert",1),Backspace:fy,"Mod-Backspace":fy,Delete:fy,"Mod-Delete":fy});function jy(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function dy(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof ma)return jy(n,r,xt.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const a=u3(i,t,e);if(a==null)return!1;if(t=="horiz")return jy(n,r,xt.near(n.doc.resolve(s.head+e),e));{const c=n.doc.resolve(a),u=a3(c,t,e);let d;return u?d=xt.near(u,1):e<0?d=xt.near(n.doc.resolve(c.before(-1)),-1):d=xt.near(n.doc.resolve(c.after(-1)),1),jy(n,r,d)}}}function hy(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let a;if(s instanceof ma)a=s;else{const u=u3(i,t,e);if(u==null)return!1;a=new ma(n.doc.resolve(u))}const c=a3(a.$headCell,t,e);return c?jy(n,r,new ma(a.$anchorCell,c)):!1}}function u3(t,e,n){if(!(t.state.selection instanceof _t))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(i),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?a:null}}return null}new On("tableColumnResizing");function mne(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),a=Math.max(t.right,e.right)-i,c=r-n,u=i,d=n;return new DOMRect(u,d,a,c)}var gne=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:s,appendTo:a,getReferencedVirtualElement:c,options:u}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:h,state:m,from:v,to:w})=>{const{doc:S,selection:k}=m,{empty:_}=k,O=!S.textBetween(v,w).length&&w_(m.selection),B=this.element.contains(document.activeElement);return!(!(h.hasFocus()||B)||_||O||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}h?.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(h.relatedTarget))||h?.relatedTarget!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(h,m)=>{const v=!m?.selection.eq(h.state.selection),w=!m?.doc.eq(h.state.doc);!v&&!w||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(h,v,w,m)},this.updateDelay))},this.updateHandler=(h,m,v,w)=>{const{composing:S}=h;if(S||!m&&!v)return;if(!this.getShouldShow(w)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:h})=>{h.getMeta("bubbleMenu")==="updatePosition"&&this.updatePosition()};var d;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=a,this.scrollTarget=(d=u?.scrollTarget)!=null?d:window,this.getReferencedVirtualElement=c,this.floatingUIOptions={...this.floatingUIOptions,...u},this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Z4(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(J4(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Q4(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(n3(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(e3(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(X4(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(t3(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(r3(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t;const{selection:e}=this.editor.state,n=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(n)return n;const r=h4(this.view,e.from,e.to);let i={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(e instanceof gt){let s=this.view.nodeDOM(e.from);const a=s.dataset.nodeViewWrapper?s:s.querySelector("[data-node-view-wrapper]");a&&(s=a),s&&(i={getBoundingClientRect:()=>s.getBoundingClientRect(),getClientRects:()=>[s.getBoundingClientRect()]})}if(e instanceof ma){const{$anchorCell:s,$headCell:a}=e,c=s?s.pos:a.pos,u=a?a.pos:s.pos,d=this.view.nodeDOM(c),h=this.view.nodeDOM(u);if(!d||!h)return;const m=d===h?d.getBoundingClientRect():mne(d.getBoundingClientRect(),h.getBoundingClientRect());i={getBoundingClientRect:()=>m,getClientRects:()=>[m]}}return i}updatePosition(){const t=this.virtualElement;t&&i3(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!e?.selection.eq(t.state.selection),s=!e?.doc.eq(t.state.doc);this.updateHandler(t,i,s,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:s,to:a}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},f3=t=>new An({key:typeof t.pluginKey=="string"?new On(t.pluginKey):t.pluginKey,view:e=>new gne({view:e,...t})}),yne=Zn.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[f3({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}}),vne=yne,bne=class{constructor({editor:t,element:e,view:n,options:r,appendTo:i,shouldShow:s}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:a,state:c})=>{const{selection:u}=c,{$anchor:d,empty:h}=u,m=d.depth===1,v=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent&&d.parent.childCount===0&&!this.getTextContent(d.parent);return!(!a.hasFocus()||!h||!m||!v||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(a,c,u,d)=>{const{composing:h}=a;if(h||!c&&!u)return;if(!this.getShouldShow(d)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var c;if(this.preventHide){this.preventHide=!1;return}a?.relatedTarget&&((c=this.element.parentNode)!=null&&c.contains(a.relatedTarget))||a?.relatedTarget!==this.editor.view.dom&&this.hide()},this.editor=t,this.element=e,this.view=n,this.appendTo=i,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return k_(t,{textSerializers:K0(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Z4(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(J4(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Q4(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(n3(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(e3(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(X4(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(t3(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(r3(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:s,to:a})}updatePosition(){const{selection:t}=this.editor.state,e=h4(this.view,t.from,t.to);i3({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!e?.selection.eq(t.state.selection),r=!e?.doc.eq(t.state.doc);this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},d3=t=>new An({key:typeof t.pluginKey=="string"?new On(t.pluginKey):t.pluginKey,view:e=>new bne({view:e,...t})});Zn.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[d3({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var wne=Be.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:s=null,getReferencedVirtualElement:a,options:c,children:u,...d},h)=>{const m=z.useRef(document.createElement("div"));typeof h=="function"?h(m.current):h&&(h.current=m.current);const{editor:v}=P4(),w=e||v,S={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:s,getReferencedVirtualElement:a,options:c},k=z.useRef(S);return k.current=S,z.useEffect(()=>{if(w?.isDestroyed)return;if(!w){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const _=m.current;_.style.visibility="hidden",_.style.position="absolute";const O=f3({...k.current,editor:w,element:_});w.registerPlugin(O);const B=k.current.pluginKey;return()=>{w.unregisterPlugin(B),window.requestAnimationFrame(()=>{_.parentNode&&_.parentNode.removeChild(_)})}},[w]),Qd.createPortal(M.jsx("div",{...d,children:u}),m.current)});Be.forwardRef(({pluginKey:t="floatingMenu",editor:e,appendTo:n,shouldShow:r=null,options:i,children:s,...a},c)=>{const u=z.useRef(document.createElement("div"));typeof c=="function"?c(u.current):c&&(c.current=u.current);const{editor:d}=P4();return z.useEffect(()=>{const h=u.current;if(h.style.visibility="hidden",h.style.position="absolute",e?.isDestroyed||d?.isDestroyed)return;const m=e||d;if(!m){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const v=d3({editor:m,element:h,pluginKey:t,appendTo:n,shouldShow:r,options:i});return m.registerPlugin(v),()=>{m.unregisterPlugin(t),window.requestAnimationFrame(()=>{h.parentNode&&h.parentNode.removeChild(h)})}},[e,d,n,t,r,i]),Qd.createPortal(M.jsx("div",{...a,children:s}),u.current)});var Nv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},xne=/^\s*>\s$/,Ene=Pi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Nv("blockquote",{...Vn(this.options.HTMLAttributes,t),children:Nv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const c=e.renderChildren([i]).split(`
`).map(u=>u.trim()===""?n:`${n} ${u}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vd({find:xne,type:this.type})]}}),Sne=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_ne=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Tne=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,kne=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Cne=gf.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Nv("strong",{...Vn(this.options.HTMLAttributes,t),children:Nv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[jd({find:Sne,type:this.type}),jd({find:Tne,type:this.type})]},addPasteRules(){return[af({find:_ne,type:this.type}),af({find:kne,type:this.type})]}}),Ane=/(^|[^`])`([^`]+)`(?!`)$/,One=/(^|[^`])`([^`]+)`(?!`)/g,Mne=gf.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Vn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[jd({find:Ane,type:this.type})]},addPasteRules(){return[af({find:One,type:this.type})]}}),J1=4,Rne=/^```([a-z]+)?[\s\n]$/,Nne=/^~~~([a-z]+)?[\s\n]$/,Dne=Pi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:J1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Vn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:J1,{state:r}=t,{selection:i}=r,{$from:s,empty:a}=i;if(s.parent.type!==this.type)return!1;const c=" ".repeat(n);return a?t.commands.insertContent(c):t.commands.command(({tr:u})=>{const{from:d,to:h}=i,w=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(S=>c+S).join(`
`);return u.replaceWith(d,h,r.schema.text(w)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:J1,{state:r}=t,{selection:i}=r,{$from:s,empty:a}=i;return s.parent.type!==this.type?!1:a?t.commands.command(({tr:c})=>{var u;const{pos:d}=s,h=s.start(),m=s.end(),w=r.doc.textBetween(h,m,`
`,`
`).split(`
`);let S=0,k=0;const _=d-h;for(let U=0;U<w.length;U+=1){if(k+w[U].length>=_){S=U;break}k+=w[U].length+1}const B=((u=w[S].match(/^ */))==null?void 0:u[0])||"",W=Math.min(B.length,n);if(W===0)return!0;let L=h;for(let U=0;U<S;U+=1)L+=w[U].length+1;return c.delete(L,L+W),d-L<=W&&c.setSelection(_t.create(c.doc,L)),!0}):t.commands.command(({tr:c})=>{const{from:u,to:d}=i,v=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(w=>{var S;const k=((S=w.match(/^ */))==null?void 0:S[0])||"",_=Math.min(k.length,n);return w.slice(_)}).join(`
`);return c.replaceWith(u,d,r.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:d})=>(d.setSelection(xt.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[wE({find:Rne,type:this.type,getAttributes:t=>({language:t[1]})}),wE({find:Nne,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new An({key:new On("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:a,schema:c}=t.state,u=c.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},u)),a.selection.$from.parent.type!==this.type&&a.setSelection(_t.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),Ine=Pi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Pne=Pi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Vn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&a){const m=u.filter(v=>c.includes(v.type.name));d.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Lne=Pi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Vn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>wE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),zne=Pi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Vn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!nee(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return u4(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:a,dispatch:c})=>{if(c){const{$to:u}=a.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?a.setSelection(_t.create(a.doc,u.pos+1)):u.nodeAfter.isBlock?a.setSelection(gt.create(a.doc,u.pos)):a.setSelection(_t.create(a.doc,u.pos));else{const h=s.schema.nodes[this.options.nextNodeType]||u.parent.type.contentMatch.defaultType,m=h?.create();m&&(a.insert(d,m),a.setSelection(_t.create(a.doc,d+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[tee({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),jne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Vne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Bne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Une=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Fne=gf.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Vn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[jd({find:jne,type:this.type}),jd({find:Bne,type:this.type})]},addPasteRules(){return[af({find:Vne,type:this.type}),af({find:Une,type:this.type})]}});const Hne="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",qne="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",CE="numeric",AE="ascii",OE="alpha",Ap="asciinumeric",hp="alphanumeric",ME="domain",h3="emoji",$ne="scheme",Wne="slashscheme",Z1="whitespace";function Kne(t,e){return t in e||(e[t]=[]),e[t]}function zu(t,e,n){e[CE]&&(e[Ap]=!0,e[hp]=!0),e[AE]&&(e[Ap]=!0,e[OE]=!0),e[Ap]&&(e[hp]=!0),e[OE]&&(e[hp]=!0),e[hp]&&(e[ME]=!0),e[h3]&&(e[ME]=!0);for(const r in e){const i=Kne(r,n);i.indexOf(t)<0&&i.push(t)}}function Gne(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function is(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}is.groups={};is.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||is.groups;let i;return e&&e.j?i=e:(i=new is(e),n&&r&&zu(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(t[a]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||is.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let a,c=i.go(t);if(c?(a=new is,Object.assign(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new is,s){if(r)if(a.t&&typeof a.t=="string"){const u=Object.assign(Gne(a.t,r),n);zu(s,u,r)}else n&&zu(s,n,r);a.t=s}return i.j[t]=a,a}};const zt=(t,e,n,r,i)=>t.ta(e,n,r,i),sr=(t,e,n,r,i)=>t.tr(e,n,r,i),EN=(t,e,n,r,i)=>t.ts(e,n,r,i),qe=(t,e,n,r,i)=>t.tt(e,n,r,i),nl="WORD",RE="UWORD",p3="ASCIINUMERICAL",m3="ALPHANUMERICAL",im="LOCALHOST",NE="TLD",DE="UTLD",Vy="SCHEME",ud="SLASH_SCHEME",V_="NUM",IE="WS",B_="NL",Op="OPENBRACE",Mp="CLOSEBRACE",Dv="OPENBRACKET",Iv="CLOSEBRACKET",Pv="OPENPAREN",Lv="CLOSEPAREN",zv="OPENANGLEBRACKET",jv="CLOSEANGLEBRACKET",Vv="FULLWIDTHLEFTPAREN",Bv="FULLWIDTHRIGHTPAREN",Uv="LEFTCORNERBRACKET",Fv="RIGHTCORNERBRACKET",Hv="LEFTWHITECORNERBRACKET",qv="RIGHTWHITECORNERBRACKET",$v="FULLWIDTHLESSTHAN",Wv="FULLWIDTHGREATERTHAN",Kv="AMPERSAND",Gv="APOSTROPHE",Yv="ASTERISK",bc="AT",Qv="BACKSLASH",Xv="BACKTICK",Jv="CARET",Tc="COLON",U_="COMMA",Zv="DOLLAR",Zo="DOT",e0="EQUALS",F_="EXCLAMATION",Zs="HYPHEN",Rp="PERCENT",t0="PIPE",n0="PLUS",r0="POUND",Np="QUERY",H_="QUOTE",g3="FULLWIDTHMIDDLEDOT",q_="SEMI",ea="SLASH",Dp="TILDE",i0="UNDERSCORE",y3="EMOJI",s0="SYM";var v3=Object.freeze({__proto__:null,ALPHANUMERICAL:m3,AMPERSAND:Kv,APOSTROPHE:Gv,ASCIINUMERICAL:p3,ASTERISK:Yv,AT:bc,BACKSLASH:Qv,BACKTICK:Xv,CARET:Jv,CLOSEANGLEBRACKET:jv,CLOSEBRACE:Mp,CLOSEBRACKET:Iv,CLOSEPAREN:Lv,COLON:Tc,COMMA:U_,DOLLAR:Zv,DOT:Zo,EMOJI:y3,EQUALS:e0,EXCLAMATION:F_,FULLWIDTHGREATERTHAN:Wv,FULLWIDTHLEFTPAREN:Vv,FULLWIDTHLESSTHAN:$v,FULLWIDTHMIDDLEDOT:g3,FULLWIDTHRIGHTPAREN:Bv,HYPHEN:Zs,LEFTCORNERBRACKET:Uv,LEFTWHITECORNERBRACKET:Hv,LOCALHOST:im,NL:B_,NUM:V_,OPENANGLEBRACKET:zv,OPENBRACE:Op,OPENBRACKET:Dv,OPENPAREN:Pv,PERCENT:Rp,PIPE:t0,PLUS:n0,POUND:r0,QUERY:Np,QUOTE:H_,RIGHTCORNERBRACKET:Fv,RIGHTWHITECORNERBRACKET:qv,SCHEME:Vy,SEMI:q_,SLASH:ea,SLASH_SCHEME:ud,SYM:s0,TILDE:Dp,TLD:NE,UNDERSCORE:i0,UTLD:DE,UWORD:RE,WORD:nl,WS:IE});const Za=/[a-z]/,np=new RegExp("\\p{L}","u"),ex=new RegExp("\\p{Emoji}","u"),el=/\d/,tx=/\s/,SN="\r",nx=`
`,Yne="",Qne="",rx="";let py=null,my=null;function Xne(t=[]){const e={};is.groups=e;const n=new is;py==null&&(py=_N(Hne)),my==null&&(my=_N(qne)),qe(n,"'",Gv),qe(n,"{",Op),qe(n,"}",Mp),qe(n,"[",Dv),qe(n,"]",Iv),qe(n,"(",Pv),qe(n,")",Lv),qe(n,"<",zv),qe(n,">",jv),qe(n,"",Vv),qe(n,"",Bv),qe(n,"",Uv),qe(n,"",Fv),qe(n,"",Hv),qe(n,"",qv),qe(n,"",$v),qe(n,"",Wv),qe(n,"&",Kv),qe(n,"*",Yv),qe(n,"@",bc),qe(n,"`",Xv),qe(n,"^",Jv),qe(n,":",Tc),qe(n,",",U_),qe(n,"$",Zv),qe(n,".",Zo),qe(n,"=",e0),qe(n,"!",F_),qe(n,"-",Zs),qe(n,"%",Rp),qe(n,"|",t0),qe(n,"+",n0),qe(n,"#",r0),qe(n,"?",Np),qe(n,'"',H_),qe(n,"/",ea),qe(n,";",q_),qe(n,"~",Dp),qe(n,"_",i0),qe(n,"\\",Qv),qe(n,"",g3);const r=sr(n,el,V_,{[CE]:!0});sr(r,el,r);const i=sr(r,Za,p3,{[Ap]:!0}),s=sr(r,np,m3,{[hp]:!0}),a=sr(n,Za,nl,{[AE]:!0});sr(a,el,i),sr(a,Za,a),sr(i,el,i),sr(i,Za,i);const c=sr(n,np,RE,{[OE]:!0});sr(c,Za),sr(c,el,s),sr(c,np,c),sr(s,el,s),sr(s,Za),sr(s,np,s);const u=qe(n,nx,B_,{[Z1]:!0}),d=qe(n,SN,IE,{[Z1]:!0}),h=sr(n,tx,IE,{[Z1]:!0});qe(n,rx,h),qe(d,nx,u),qe(d,rx,h),sr(d,tx,h),qe(h,SN),qe(h,nx),sr(h,tx,h),qe(h,rx,h);const m=sr(n,ex,y3,{[h3]:!0});qe(m,"#"),sr(m,ex,m),qe(m,Yne,m);const v=qe(m,Qne);qe(v,"#"),sr(v,ex,m);const w=[[Za,a],[el,i]],S=[[Za,null],[np,c],[el,s]];for(let k=0;k<py.length;k++)hc(n,py[k],NE,nl,w);for(let k=0;k<my.length;k++)hc(n,my[k],DE,RE,S);zu(NE,{tld:!0,ascii:!0},e),zu(DE,{utld:!0,alpha:!0},e),hc(n,"file",Vy,nl,w),hc(n,"mailto",Vy,nl,w),hc(n,"http",ud,nl,w),hc(n,"https",ud,nl,w),hc(n,"ftp",ud,nl,w),hc(n,"ftps",ud,nl,w),zu(Vy,{scheme:!0,ascii:!0},e),zu(ud,{slashscheme:!0,ascii:!0},e),t=t.sort((k,_)=>k[0]>_[0]?1:-1);for(let k=0;k<t.length;k++){const _=t[k][0],B=t[k][1]?{[$ne]:!0}:{[Wne]:!0};_.indexOf("-")>=0?B[ME]=!0:Za.test(_)?el.test(_)?B[Ap]=!0:B[AE]=!0:B[CE]=!0,EN(n,_,_,B)}return EN(n,"localhost",im,{ascii:!0}),n.jd=new is(s0),{start:n,tokens:Object.assign({groups:e},v3)}}function b3(t,e){const n=Jne(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,i=[];let s=0,a=0;for(;a<r;){let c=t,u=null,d=0,h=null,m=-1,v=-1;for(;a<r&&(u=c.go(n[a]));)c=u,c.accepts()?(m=0,v=0,h=c):m>=0&&(m+=n[a].length,v++),d+=n[a].length,s+=n[a].length,a++;s-=m,a-=v,d-=m,i.push({t:h.t,v:e.slice(s-d,s),s:s-d,e:s})}return i}function Jne(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,a=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function hc(t,e,n,r,i){let s;const a=e.length;for(let c=0;c<a-1;c++){const u=e[c];t.j[u]?s=t.j[u]:(s=new is(r),s.jr=i.slice(),t.j[u]=s),t=s}return s=new is(n),s.jr=i.slice(),t.j[e[a-1]]=s,s}function _N(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(t[r]),r++}return e}const sm={defaultProtocol:"http",events:null,format:TN,formatHref:TN,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $_(t,e=null){let n=Object.assign({},sm);t&&(n=Object.assign(n,t instanceof $_?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}$_.prototype={o:sm,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:sm[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function TN(t){return t}function w3(t,e){this.t="token",this.v=t,this.tk=e}w3.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=sm.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),a={},c=t.get("className",n,e),u=t.get("target",n,e),d=t.get("rel",n,e),h=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return a.href=r,c&&(a.class=c),u&&(a.target=u),d&&(a.rel=d),h&&Object.assign(a,h),{tagName:i,attributes:a,content:s,eventListeners:m}}};function tb(t,e){class n extends w3{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const kN=tb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),CN=tb("text"),Zne=tb("nl"),gy=tb("url",{isLink:!0,toHref(t=sm.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==im&&t[1].t===Tc}}),Js=t=>new is(t);function ere({groups:t}){const e=t.domain.concat([Kv,Yv,bc,Qv,Xv,Jv,Zv,e0,Zs,V_,Rp,t0,n0,r0,ea,s0,Dp,i0]),n=[Gv,Tc,U_,Zo,F_,Rp,Np,H_,q_,zv,jv,Op,Mp,Iv,Dv,Pv,Lv,Vv,Bv,Uv,Fv,Hv,qv,$v,Wv],r=[Kv,Gv,Yv,Qv,Xv,Jv,Zv,e0,Zs,Op,Mp,Rp,t0,n0,r0,Np,ea,s0,Dp,i0],i=Js(),s=qe(i,Dp);zt(s,r,s),zt(s,t.domain,s);const a=Js(),c=Js(),u=Js();zt(i,t.domain,a),zt(i,t.scheme,c),zt(i,t.slashscheme,u),zt(a,r,s),zt(a,t.domain,a);const d=qe(a,bc);qe(s,bc,d),qe(c,bc,d),qe(u,bc,d);const h=qe(s,Zo);zt(h,r,s),zt(h,t.domain,s);const m=Js();zt(d,t.domain,m),zt(m,t.domain,m);const v=qe(m,Zo);zt(v,t.domain,m);const w=Js(kN);zt(v,t.tld,w),zt(v,t.utld,w),qe(d,im,w);const S=qe(m,Zs);qe(S,Zs,S),zt(S,t.domain,m),zt(w,t.domain,m),qe(w,Zo,v),qe(w,Zs,S);const k=qe(w,Tc);zt(k,t.numeric,kN);const _=qe(a,Zs),O=qe(a,Zo);qe(_,Zs,_),zt(_,t.domain,a),zt(O,r,s),zt(O,t.domain,a);const B=Js(gy);zt(O,t.tld,B),zt(O,t.utld,B),zt(B,t.domain,a),zt(B,r,s),qe(B,Zo,O),qe(B,Zs,_),qe(B,bc,d);const W=qe(B,Tc),L=Js(gy);zt(W,t.numeric,L);const q=Js(gy),U=Js();zt(q,e,q),zt(q,n,U),zt(U,e,q),zt(U,n,U),qe(B,ea,q),qe(L,ea,q);const R=qe(c,Tc),P=qe(u,Tc),V=qe(P,ea),H=qe(V,ea);zt(c,t.domain,a),qe(c,Zo,O),qe(c,Zs,_),zt(u,t.domain,a),qe(u,Zo,O),qe(u,Zs,_),zt(R,t.domain,q),qe(R,ea,q),qe(R,Np,q),zt(H,t.domain,q),zt(H,e,q),qe(H,ea,q);const G=[[Op,Mp],[Dv,Iv],[Pv,Lv],[zv,jv],[Vv,Bv],[Uv,Fv],[Hv,qv],[$v,Wv]];for(let Q=0;Q<G.length;Q++){const[K,je]=G[Q],Re=qe(q,K);qe(U,K,Re),qe(Re,je,q);const oe=Js(gy);zt(Re,e,oe);const Ee=Js();zt(Re,n),zt(oe,e,oe),zt(oe,n,Ee),zt(Ee,e,oe),zt(Ee,n,Ee),qe(oe,je,q),qe(Ee,je,q)}return qe(i,im,B),qe(i,B_,Zne),{start:i,tokens:v3}}function tre(t,e,n){let r=n.length,i=0,s=[],a=[];for(;i<r;){let c=t,u=null,d=null,h=0,m=null,v=-1;for(;i<r&&!(u=c.go(n[i].t));)a.push(n[i++]);for(;i<r&&(d=u||c.go(n[i].t));)u=null,c=d,c.accepts()?(v=0,m=c):v>=0&&v++,i++,h++;if(v<0)i-=h,i<r&&(a.push(n[i]),i++);else{a.length>0&&(s.push(ix(CN,e,a)),a=[]),i-=v,h-=v;const w=m.t,S=n.slice(i-h,i);s.push(ix(w,e,S))}}return a.length>0&&s.push(ix(CN,e,a)),s}function ix(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const nre=typeof console<"u"&&console&&console.warn||(()=>{}),rre="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",zn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ire(){return is.groups={},zn.scanner=null,zn.parser=null,zn.tokenQueue=[],zn.pluginQueue=[],zn.customSchemes=[],zn.initialized=!1,zn}function AN(t,e=!1){if(zn.initialized&&nre(`linkifyjs: already initialized - will not register custom scheme "${t}" ${rre}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);zn.customSchemes.push([t,e])}function sre(){zn.scanner=Xne(zn.customSchemes);for(let t=0;t<zn.tokenQueue.length;t++)zn.tokenQueue[t][1]({scanner:zn.scanner});zn.parser=ere(zn.scanner.tokens);for(let t=0;t<zn.pluginQueue.length;t++)zn.pluginQueue[t][1]({scanner:zn.scanner,parser:zn.parser});return zn.initialized=!0,zn}function W_(t){return zn.initialized||sre(),tre(zn.parser.start,t,b3(zn.scanner.start,t))}W_.scan=b3;function x3(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new $_(n),i=W_(t),s=[];for(let a=0;a<i.length;a++){const c=i[a];c.isLink&&(!e||c.t===e)&&r.check(c)&&s.push(c.toFormattedObject(r))}return s}var K_="[\0- -\u2029]",ore=new RegExp(K_),are=new RegExp(`${K_}$`),lre=new RegExp(K_,"g");function cre(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function ure(t){return new An({key:new On("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=e.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,c=r4(n.doc,[...e]);if(c4(c).forEach(({newRange:d})=>{const h=nZ(r.doc,d,w=>w.isTextblock);let m,v;if(h.length>1)m=h[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(h.length){const w=r.doc.textBetween(d.from,d.to," "," ");if(!are.test(w))return;m=h[0],v=r.doc.textBetween(m.pos,d.to,void 0," ")}if(m&&v){const w=v.split(ore).filter(Boolean);if(w.length<=0)return!1;const S=w[w.length-1],k=m.pos+v.lastIndexOf(S);if(!S)return!1;const _=W_(S).map(O=>O.toObject(t.defaultProtocol));if(!cre(_))return!1;_.filter(O=>O.isLink).map(O=>({...O,from:k+O.start+1,to:k+O.end+1})).filter(O=>r.schema.marks.code?!r.doc.rangeHasMark(O.from,O.to,r.schema.marks.code):!0).filter(O=>t.validate(O.value)).filter(O=>t.shouldAutoLink(O.value)).forEach(O=>{C_(O.from,O.to,r.doc).some(B=>B.mark.type===t.type)||a.addMark(O.from,O.to,t.type.create({href:O.href}))})}}),!!a.steps.length)return a}})}function fre(t){return new An({key:new On("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let c=null;if(r.target instanceof HTMLAnchorElement)c=r.target;else{let m=r.target;const v=[];for(;m.nodeName!=="DIV";)v.push(m),m=m.parentNode;c=v.find(w=>w.nodeName==="A")}if(!c)return a;const u=l4(e.state,t.type.name),d=(i=c?.href)!=null?i:u.href,h=(s=c?.target)!=null?s:u.target;c&&d&&(window.open(d,h),a=!0)}return a}}})}function dre(t){return new An({key:new On("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:a}=s,{empty:c}=a;if(c)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const d=x3(u,{defaultProtocol:t.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!d||i!==void 0&&!i(d.href)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function Au(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(lre,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var hre=gf.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){AN(t);return}AN(t.scheme,t.optionalSlashes)})},onDestroy(){ire()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Au(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Au(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Au(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Vn(this.options.HTMLAttributes,t),0]:["a",Vn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[af({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=x3(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!Au(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(ure({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Au(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(fre({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(dre({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),pre=Object.defineProperty,mre=(t,e)=>{for(var n in e)pre(t,n,{get:e[n],enumerable:!0})},gre="listItem",ON="textStyle",MN=/^\s*([-+*])\s$/,E3=Pi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Vn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(gre,this.editor.getAttributes(ON)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Vd({find:MN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Vd({find:MN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ON),editor:this.editor})),[t]}}),S3=Pi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Vn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const a=t.tokens.slice(1),c=e.parseChildren(a);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>R_(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yre={};mre(yre,{findListItemPos:()=>Im,getNextListDepth:()=>G_,handleBackspace:()=>PE,handleDelete:()=>LE,hasListBefore:()=>_3,hasListItemAfter:()=>vre,hasListItemBefore:()=>T3,listItemHasSubList:()=>k3,nextListIsDeeper:()=>C3,nextListIsHigher:()=>A3});var Im=(t,e)=>{const{$from:n}=e.selection,r=Dr(t,e.schema);let i=null,s=n.depth,a=n.pos,c=null;for(;s>0&&c===null;)i=n.node(s),i.type===r?c=s:(s-=1,a-=1);return c===null?null:{$pos:e.doc.resolve(a),depth:c}},G_=(t,e)=>{const n=Im(t,e);if(!n)return!1;const[,r]=dZ(e,t,n.$pos.pos+4);return r},_3=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},T3=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},k3=(t,e,n)=>{if(!n)return!1;const r=Dr(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},PE=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Xc(t.state,e)&&_3(t.state,e,n)){const{$anchor:c}=t.state.selection,u=t.state.doc.resolve(c.before()-1),d=[];u.node().descendants((v,w)=>{v.type.name===e&&d.push({node:v,pos:w})});const h=d.at(-1);if(!h)return!1;const m=t.state.doc.resolve(u.start()+h.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!Xc(t.state,e)||!gZ(t.state))return!1;const r=Im(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=k3(e,t.state,s);return T3(e,t.state)&&!a?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},C3=(t,e)=>{const n=G_(t,e),r=Im(t,e);return!r||!n?!1:n>r.depth},A3=(t,e)=>{const n=G_(t,e),r=Im(t,e);return!r||!n?!1:n<r.depth},LE=(t,e)=>{if(!Xc(t.state,e)||!mZ(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:C3(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():A3(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},vre=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},O3=Zn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&LE(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&LE(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&PE(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&PE(t,n,r)&&(e=!0)}),e}}}}),RN=/^(\s*)(\d+)\.\s+(.*)$/,bre=/^\s/;function wre(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(RN);if(!s)break;const[,a,c,u]=s,d=a.length;let h=u,m=n+1;const v=[i];for(;m<t.length;){const w=t[m];if(w.match(RN))break;if(w.trim()==="")v.push(w),h+=`
`,m+=1;else if(w.match(bre))v.push(w),h+=`
${w.slice(d+2)}`,m+=1;else break}e.push({indent:d,number:parseInt(c,10),content:h.trim(),raw:v.join(`
`)}),r=m,n=m}return[e,r]}function M3(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const a=t[s];if(a.indent===e){const c=a.content.split(`
`),u=((r=c[0])==null?void 0:r.trim())||"",d=[];u&&d.push({type:"paragraph",raw:u,tokens:n.inlineTokens(u)});const h=c.slice(1).join(`
`).trim();if(h){const w=n.blockTokens(h);d.push(...w)}let m=s+1;const v=[];for(;m<t.length&&t[m].indent>e;)v.push(t[m]),m+=1;if(v.length>0){const w=Math.min(...v.map(k=>k.indent)),S=M3(v,w,n);d.push({type:"list",ordered:!0,start:v[0].number,items:S,raw:v.map(k=>k.raw).join(`
`)})}i.push({type:"list_item",raw:a.raw,tokens:d}),s=m}else s+=1}return i}function xre(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var Ere="listItem",NN="textStyle",DN=/^(\d+)\.\s$/,R3=Pi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Vn(this.options.HTMLAttributes,n),0]:["ol",Vn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?xre(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,a]=wre(i);if(s.length===0)return;const c=M3(s,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:c,raw:i.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ere,this.editor.getAttributes(NN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Vd({find:DN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Vd({find:DN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(NN)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Sre=/^\s*(\[([( |x])?\])\s$/,_re=Pi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Vn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return R_(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),c=document.createElement("input"),u=document.createElement("div"),d=h=>{var m,v;c.ariaLabel=((v=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:v.call(m,h,c.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(t),s.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",h=>h.preventDefault()),c.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:m}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const w=n();if(typeof w!="number")return!1;const S=v.doc.nodeAt(w);return v.setNodeMarkup(w,void 0,{...S?.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,m])=>{i.setAttribute(h,m)}),i.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,s.append(c,a),i.append(s,u),Object.entries(e).forEach(([h,m])=>{i.setAttribute(h,m)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,c.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[Vd({find:Sre,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Tre=Pi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Vn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const a=xE(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,u)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:u}),customNestedParser:r},n);return a?[{type:"taskList",raw:a.raw,items:a.items}]:n.blockTokens(s)},i=xE(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,a)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:a}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Zn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(E3.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(S3.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(O3.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(R3.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(_re.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Tre.configure(this.options.taskList)),t}});var kre=Pi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Vn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cre=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Are=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ore=gf.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Vn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[jd({find:Cre,type:this.type})]},addPasteRules(){return[af({find:Are,type:this.type})]}}),Mre=Pi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Rre=gf.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Vn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Nre(t={}){return new An({view(e){return new Dre(e,t)}})}class Dre{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,c=s.height/i.offsetHeight;if(n){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let w=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(w){let S=w.getBoundingClientRect(),k=m?S.bottom:S.top;m&&v&&(k=(k+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let _=this.width/2*c;r={left:S.left,right:S.right,top:k-_,bottom:k+_}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*a;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let m=u.getBoundingClientRect(),v=m.width/u.offsetWidth,w=m.height/u.offsetHeight;d=m.left-u.scrollLeft*v,h=m.top-u.scrollTop*w}this.element.style.left=(r.left-d)/a+"px",this.element.style.top=(r.top-h)/c+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=YL(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class or extends xt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return or.valid(r)?new or(r):xt.near(r)}content(){return et.empty}eq(e){return e instanceof or&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new or(e.resolve(n.pos))}getBookmark(){return new Y_(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Ire(e)||!Pre(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&or.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let c=e.node(a);if(n>0?e.indexAfter(a)<c.childCount:e.index(a)>0){s=c.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=n;let u=e.doc.resolve(i);if(or.valid(u))return u}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!gt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=a,i+=n;let c=e.doc.resolve(i);if(or.valid(c))return c}return null}}}or.prototype.visible=!1;or.findFrom=or.findGapCursorFrom;xt.jsonID("gapcursor",or);class Y_{constructor(e){this.pos=e}map(e){return new Y_(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return or.valid(n)?new or(n):xt.near(n)}}function N3(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Ire(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||N3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Pre(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||N3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Lre(){return new An({props:{decorations:Bre,createSelectionBetween(t,e,n){return e.pos==n.pos&&or.valid(n)?new or(n):null},handleClick:jre,handleKeyDown:zre,handleDOMEvents:{beforeinput:Vre}}})}const zre=g_({ArrowLeft:yy("horiz",-1),ArrowRight:yy("horiz",1),ArrowUp:yy("vert",-1),ArrowDown:yy("vert",1)});function yy(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,c=e>0?a.$to:a.$from,u=a.empty;if(a instanceof _t){if(!s.endOfTextblock(n)||c.depth==0)return!1;u=!1,c=r.doc.resolve(e>0?c.after():c.before())}let d=or.findGapCursorFrom(c,e,u);return d?(i&&i(r.tr.setSelection(new or(d))),!0):!1}}function jre(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!or.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&gt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new or(r))),!0)}function Vre(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof or))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ve.empty;for(let a=r.length-1;a>=0;a--)i=Ve.from(r[a].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new et(i,0,0));return s.setSelection(_t.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Bre(t){if(!(t.selection instanceof or))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",jn.create(t.doc,[ci.widget(t.selection.head,e,{key:"gapcursor"})])}var o0=200,Qr=function(){};Qr.prototype.append=function(e){return e.length?(e=Qr.from(e),!this.length&&e||e.length<o0&&this.leafAppend(e)||this.length<o0&&e.leafPrepend(this)||this.appendInner(e)):this};Qr.prototype.prepend=function(e){return e.length?Qr.from(e).append(this):this};Qr.prototype.appendInner=function(e){return new Ure(this,e)};Qr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Qr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Qr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Qr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Qr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},n,r),i};Qr.from=function(e){return e instanceof Qr?e:e&&e.length?new D3(e):Qr.empty};var D3=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,c){for(var u=s;u<a;u++)if(i(this.values[u],c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,c){for(var u=s-1;u>=a;u--)if(i(this.values[u],c+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=o0)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=o0)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Qr);Qr.empty=new D3([]);var Ure=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(s,c),a)===!1||s>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,s)-c,a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(s,c)-c,a+c)===!1||s<c&&this.left.forEachInvertedInner(r,Math.min(i,c),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Qr);const Fre=500;class ko{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,c,u,d=[],h=[];return this.items.forEach((m,v)=>{if(!m.step){i||(i=this.remapping(r,v+1),s=i.maps.length),s--,h.push(m);return}if(i){h.push(new ta(m.map));let w=m.step.map(i.slice(s)),S;w&&a.maybeStep(w).doc&&(S=a.mapping.maps[a.mapping.maps.length-1],d.push(new ta(S,void 0,void 0,d.length+h.length))),s--,S&&i.appendMap(S,s)}else a.maybeStep(m.step);if(m.selection)return c=i?m.selection.map(i.slice(s)):m.selection,u=new ko(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:c}}addTransform(e,n,r,i){let s=[],a=this.eventCount,c=this.items,u=!i&&c.length?c.get(c.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),v=new ta(e.mapping.maps[h],m,n),w;(w=u&&u.merge(v))&&(v=w,h?s.pop():c=c.slice(0,c.length-1)),s.push(v),n&&(a++,n=void 0),i||(u=v)}let d=a-r.depth;return d>qre&&(c=Hre(c,d),a-=d),new ko(c.append(s),a)}remapping(e,n){let r=new Xp;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new ko(this.items.append(e.map(n=>new ta(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,a=e.steps.length,c=this.eventCount;this.items.forEach(v=>{v.selection&&c--},i);let u=n;this.items.forEach(v=>{let w=s.getMirror(--u);if(w==null)return;a=Math.min(a,w);let S=s.maps[w];if(v.step){let k=e.steps[w].invert(e.docs[w]),_=v.selection&&v.selection.map(s.slice(u+1,w));_&&c++,r.push(new ta(S,k,_))}else r.push(new ta(S))},i);let d=[];for(let v=n;v<a;v++)d.push(new ta(s.maps[v]));let h=this.items.slice(0,i).append(d).append(r),m=new ko(h,c);return m.emptyItemCount()>Fre&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((a,c)=>{if(c>=e)i.push(a),a.selection&&s++;else if(a.step){let u=a.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=a.selection&&a.selection.map(n.slice(r));h&&s++;let m=new ta(d.invert(),u,h),v,w=i.length-1;(v=i.length&&i[w].merge(m))?i[w]=v:i.push(m)}}else a.map&&r--},this.items.length,0),new ko(Qr.from(i.reverse()),s)}}ko.empty=new ko(Qr.empty,0);function Hre(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ta{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ta(n.getMap().invert(),n,this.selection)}}}class wc{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const qre=20;function $re(t,e,n,r){let i=n.getMeta(Wu),s;if(i)return i.historyState;n.getMeta(Gre)&&(t=new wc(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(Wu))return a.getMeta(Wu).redo?new wc(t.done.addTransform(n,void 0,r,By(e)),t.undone,IN(n.mapping.maps),t.prevTime,t.prevComposition):new wc(t.done,t.undone.addTransform(n,void 0,r,By(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),u=t.prevTime==0||!a&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Wre(n,t.prevRanges)),d=a?sx(t.prevRanges,n.mapping):IN(n.mapping.maps);return new wc(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,By(e)),ko.empty,d,n.time,c??t.prevComposition)}else return(s=n.getMeta("rebased"))?new wc(t.done.rebased(n,s),t.undone.rebased(n,s),sx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new wc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),sx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Wre(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function IN(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,a)=>e.push(s,a));return e}function sx(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function Kre(t,e,n){let r=By(e),i=Wu.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),c=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),u=new wc(n?c:s.remaining,n?s.remaining:c,null,0,-1);return s.transform.setSelection(a).setMeta(Wu,{redo:n,historyState:u})}let ox=!1,PN=null;function By(t){let e=t.plugins;if(PN!=e){ox=!1,PN=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){ox=!0;break}}return ox}const Wu=new On("history"),Gre=new On("closeHistory");function Yre(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new An({key:Wu,state:{init(){return new wc(ko.empty,ko.empty,null,0,-1)},apply(e,n,r){return $re(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?P3:r=="historyRedo"?L3:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function I3(t,e){return(n,r)=>{let i=Wu.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=Kre(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const P3=I3(!1,!0),L3=I3(!0,!0);Zn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new An({key:new On("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,c=0,u=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(c,u);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,u=s-r,d=c-u,h=c;return e.deleteRange(d,h),!(this.storage.characters({node:e.doc})>r)}})]}});var Qre=Zn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Nre(this.options)]}});Zn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new An({key:new On("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return jn.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;a+=1});let c=0;return t.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&a-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";s.push(ci.node(d,d+u.nodeSize,{class:this.options.className}))}),jn.create(t,s)}}})]}});var Xre=Zn.create({name:"gapCursor",addProseMirrorPlugins(){return[Lre()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=bn(pt(t,"allowGapCursor",n)))!=null?e:null}}}),Jre=Zn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new An({key:new On("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((a,c)=>{const u=r>=c&&r<=c+a.nodeSize,d=!a.isLeaf&&G0(a);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const m=ci.node(c,c+a.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:c,hasAnchor:u}):this.options.placeholder});i.push(m)}return this.options.includeChildren}),jn.create(t,i)}}})]}});Zn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new An({key:new On("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||u4(n.selection)||t.view.dragging?null:jn.create(n.doc,[ci.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function LN({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var Zre=Zn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new On(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new An({key:e,appendTransaction:(i,s,a)=>{const{doc:c,tr:u,schema:d}=a,h=e.getState(a),m=c.content.size,v=d.nodes[n];if(h)return u.insert(m,v.create())},state:{init:(i,s)=>{const a=s.tr.doc.lastChild;return!LN({node:a,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const a=i.doc.lastChild;return!LN({node:a,types:r})}}})]}}),eie=Zn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>P3(t,e),redo:()=>({state:t,dispatch:e})=>L3(t,e)}},addProseMirrorPlugins(){return[Yre(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),tie=Zn.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(Cne.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Ene.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(E3.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Mne.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Dne.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Ine.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Qre.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Xre.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Pne.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Lne.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(eie.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(zne.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Fne.configure(this.options.italic)),this.options.listItem!==!1&&i.push(S3.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(O3.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(hre.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(R3.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(kre.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Ore.configure(this.options.strike)),this.options.text!==!1&&i.push(Mre.configure(this.options.text)),this.options.underline!==!1&&i.push(Rre.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Zre.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Q_=tie,nie=Jre;function rie(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:a,$position:c}=t,u=r&&!i,d=ree(n),h=new RegExp(`\\s${d}$`),m=a?"^":"",v=i?"":d,w=u?new RegExp(`${m}${d}.*?(?=\\s${v}|$)`,"gm"):new RegExp(`${m}(?:^)?${d}[^\\s${v}]*`,"gm"),S=((e=c.nodeBefore)==null?void 0:e.isText)&&c.nodeBefore.text;if(!S)return null;const k=c.pos-S.length,_=Array.from(S.matchAll(w)).pop();if(!_||_.input===void 0||_.index===void 0)return null;const O=_.input.slice(Math.max(0,_.index-1),_.index),B=new RegExp(`^[${s?.join("")}\0]?$`).test(O);if(s!==null&&!B)return null;const W=k+_.index;let L=W+_[0].length;return u&&h.test(S.slice(L-1,L+1))&&(_[0]+=" ",L+=1),W<c.pos&&L>=c.pos?{range:{from:W,to:L},query:_[0].slice(n.length),text:_[0]}:null}var iie=new On("suggestion");function sie({pluginKey:t=iie,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:s=[" "],startOfLine:a=!1,decorationTag:c="span",decorationClass:u="suggestion",decorationContent:d="",decorationEmptyClass:h="is-empty",command:m=()=>null,items:v=()=>[],render:w=()=>({}),allow:S=()=>!0,findSuggestionMatch:k=rie}){let _;const O=w?.(),B=()=>{const U=e.state.selection.$anchor.pos,R=e.view.coordsAtPos(U),{top:P,right:V,bottom:H,left:G}=R;try{return new DOMRect(G,P,V-G,H-P)}catch{return null}},W=(U,R)=>R?()=>{const P=t.getState(e.state),V=P?.decorationId,H=U.dom.querySelector(`[data-decoration-id="${V}"]`);return H?.getBoundingClientRect()||null}:B;function L(U,R){var P;try{const H=t.getState(U.state),G=H?.decorationId?U.dom.querySelector(`[data-decoration-id="${H.decorationId}"]`):null,Q={editor:e,range:H?.range||{from:0,to:0},query:H?.query||null,text:H?.text||null,items:[],command:K=>m({editor:e,range:H?.range||{from:0,to:0},props:K}),decorationNode:G,clientRect:W(U,G)};(P=O?.onExit)==null||P.call(O,Q)}catch{}const V=U.state.tr.setMeta(R,{exit:!0});U.dispatch(V)}const q=new An({key:t,view(){return{update:async(U,R)=>{var P,V,H,G,Q,K,je;const Re=(P=this.key)==null?void 0:P.getState(R),oe=(V=this.key)==null?void 0:V.getState(U.state),Ee=Re.active&&oe.active&&Re.range.from!==oe.range.from,ve=!Re.active&&oe.active,Qe=Re.active&&!oe.active,Ze=!ve&&!Qe&&Re.query!==oe.query,J=ve||Ee&&Ze,Z=Ze||Ee,ye=Qe||Ee&&Ze;if(!J&&!Z&&!ye)return;const Te=ye&&!J?Re:oe,Oe=U.dom.querySelector(`[data-decoration-id="${Te.decorationId}"]`);_={editor:e,range:Te.range,query:Te.query,text:Te.text,items:[],command:Ue=>m({editor:e,range:Te.range,props:Ue}),decorationNode:Oe,clientRect:W(U,Oe)},J&&((H=O?.onBeforeStart)==null||H.call(O,_)),Z&&((G=O?.onBeforeUpdate)==null||G.call(O,_)),(Z||J)&&(_.items=await v({editor:e,query:Te.query})),ye&&((Q=O?.onExit)==null||Q.call(O,_)),Z&&((K=O?.onUpdate)==null||K.call(O,_)),J&&((je=O?.onStart)==null||je.call(O,_))},destroy:()=>{var U;_&&((U=O?.onExit)==null||U.call(O,_))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(U,R,P,V){const{isEditable:H}=e,{composing:G}=e.view,{selection:Q}=U,{empty:K,from:je}=Q,Re={...R},oe=U.getMeta(t);if(oe&&oe.exit)return Re.active=!1,Re.decorationId=null,Re.range={from:0,to:0},Re.query=null,Re.text=null,Re;if(Re.composing=G,H&&(K||e.view.composing)){(je<R.range.from||je>R.range.to)&&!G&&!R.composing&&(Re.active=!1);const Ee=k({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:a,$position:Q.$from}),ve=`id_${Math.floor(Math.random()*4294967295)}`;Ee&&S({editor:e,state:V,range:Ee.range,isActive:R.active})?(Re.active=!0,Re.decorationId=R.decorationId?R.decorationId:ve,Re.range=Ee.range,Re.query=Ee.query,Re.text=Ee.text):Re.active=!1}else Re.active=!1;return Re.active||(Re.decorationId=null,Re.range={from:0,to:0},Re.query=null,Re.text=null),Re}},props:{handleKeyDown(U,R){var P,V,H,G;const{active:Q,range:K}=q.getState(U.state);if(!Q)return!1;if(R.key==="Escape"||R.key==="Esc"){const Re=q.getState(U.state),oe=(P=_?.decorationNode)!=null?P:null,Ee=oe??(Re?.decorationId?U.dom.querySelector(`[data-decoration-id="${Re.decorationId}"]`):null);if(((V=O?.onKeyDown)==null?void 0:V.call(O,{view:U,event:R,range:Re.range}))||!1)return!0;const Qe={editor:e,range:Re.range,query:Re.query,text:Re.text,items:[],command:Ze=>m({editor:e,range:Re.range,props:Ze}),decorationNode:Ee,clientRect:Ee?()=>Ee.getBoundingClientRect()||null:null};return(H=O?.onExit)==null||H.call(O,Qe),L(U,t),!0}return((G=O?.onKeyDown)==null?void 0:G.call(O,{view:U,event:R,range:K}))||!1},decorations(U){const{active:R,range:P,decorationId:V,query:H}=q.getState(U);if(!R)return null;const G=!H?.length,Q=[u];return G&&Q.push(h),jn.create(U.doc,[ci.inline(P.from,P.to,{nodeName:c,class:Q.join(" "),"data-decoration-id":V,"data-decoration-content":d})])}}});return q}function oie({editor:t,overrideSuggestionOptions:e,extensionName:n,char:r="@"}){const i=new On;return{editor:t,char:r,pluginKey:i,command:({editor:s,range:a,props:c})=>{var u,d,h;const m=s.view.state.selection.$to.nodeAfter;(u=m?.text)!=null&&u.startsWith(" ")&&(a.to+=1),s.chain().focus().insertContentAt(a,[{type:n,attrs:{...c,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),(h=(d=s.view.dom.ownerDocument.defaultView)==null?void 0:d.getSelection())==null||h.collapseToEnd()},allow:({state:s,range:a})=>{const c=s.doc.resolve(a.from),u=s.schema.nodes[n];return!!c.parent.type.contentMatch.matchType(u)},...e}}function z3(t){return(t.options.suggestions.length?t.options.suggestions:[t.options.suggestion]).map(e=>oie({editor:t.editor,overrideSuggestionOptions:e,extensionName:t.name,char:e.char}))}function zN(t,e){const n=z3(t),r=n.find(i=>i.char===e);return r||(n.length?n[0]:null)}var aie=Pi.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:t,suggestion:e}){var n,r;return`${(n=e?.char)!=null?n:"@"}${(r=t.attrs.label)!=null?r:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:t,node:e,suggestion:n}){var r,i;return["span",Vn(this.HTMLAttributes,t.HTMLAttributes),`${(r=n?.char)!=null?r:"@"}${(i=e.attrs.label)!=null?i:e.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:t=>t.getAttribute("data-mention-suggestion-char"),renderHTML:t=>({"data-mention-suggestion-char":t.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:e}){const n=zN(this,t.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Vn({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:t,suggestion:n})];const r={...this.options};r.HTMLAttributes=Vn({"data-type":this.name},this.options.HTMLAttributes,e);const i=this.options.renderHTML({options:r,node:t,suggestion:n});return typeof i=="string"?["span",Vn({"data-type":this.name},this.options.HTMLAttributes,e),i]:i},...A4({nodeName:"mention",name:"@",selfClosing:!0,allowedAttributes:["id","label",{name:"mentionSuggestionChar",skipIfDefault:"@"}],parseAttributes:t=>{const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,a]=r,c=s??a;e[i==="char"?"mentionSuggestionChar":i]=c,r=n.exec(t)}return e},serializeAttributes:t=>Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e==="mentionSuggestionChar"?"char":e}="${n}"`).join(" ")}),renderText({node:t}){const e={options:this.options,node:t,suggestion:zN(this,t.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(e)):this.options.renderText(e)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let n=!1;const{selection:r}=e,{empty:i,anchor:s}=r;if(!i)return!1;let a=new ha,c=0;return e.doc.nodesBetween(s-1,s,(u,d)=>{if(u.type.name===this.name)return n=!0,a=u,c=d,!1}),n&&t.insertText(this.options.deleteTriggerWithBackspace?"":a.attrs.mentionSuggestionChar,c,c+a.nodeSize),n})}},addProseMirrorPlugins(){return z3(this).map(sie)}}),nb=aie;const j3=6048e5,lie=864e5,jN=Symbol.for("constructDateFrom");function mr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&jN in t?t[jN](e):t instanceof Date?new t.constructor(e):new Date(e)}function Tn(t,e){return mr(e||t,t)}function X_(t,e,n){const r=Tn(t,n?.in);return isNaN(e)?mr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function V3(t,e,n){const r=Tn(t,n?.in);if(isNaN(e))return mr(t,NaN);if(!e)return r;const i=r.getDate(),s=mr(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}let cie={};function Pm(){return cie}function Hd(t,e){const n=Pm(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Tn(t,e?.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function om(t,e){return Hd(t,{...e,weekStartsOn:1})}function B3(t,e){const n=Tn(t,e?.in),r=n.getFullYear(),i=mr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=om(i),a=mr(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const c=om(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function VN(t){const e=Tn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function fh(t,...e){const n=mr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function am(t,e){const n=Tn(t,e?.in);return n.setHours(0,0,0,0),n}function J_(t,e,n){const[r,i]=fh(n?.in,t,e),s=am(r),a=am(i),c=+s-VN(s),u=+a-VN(a);return Math.round((c-u)/lie)}function uie(t,e){const n=B3(t,e),r=mr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),om(r)}function fie(t,e,n){return X_(t,e*7,n)}function die(t,e,n){return V3(t,e*12,n)}function hie(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=mr.bind(null,i));const s=Tn(i,r);(!n||n<s||isNaN(+s))&&(n=s)}),mr(r,n||NaN)}function pie(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=mr.bind(null,i));const s=Tn(i,r);(!n||n>s||isNaN(+s))&&(n=s)}),mr(r,n||NaN)}function mie(t,e,n){const[r,i]=fh(n?.in,t,e);return+am(r)==+am(i)}function U3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gie(t){return!(!U3(t)&&typeof t!="number"||isNaN(+Tn(t)))}function F3(t,e,n){const[r,i]=fh(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function yie(t,e){const n=Tn(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Z_(t,e){const[n,r]=fh(t,e.start,e.end);return{start:n,end:r}}function vie(t,e){const{start:n,end:r}=Z_(e?.in,t);let i=+n>+r;const s=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0);let c=1;const u=[];for(;+a<=s;)u.push(mr(n,a)),a.setDate(a.getDate()+c),a.setHours(0,0,0,0);return i?u.reverse():u}function bie(t,e){const{start:n,end:r}=Z_(e?.in,t);let i=+n>+r;const s=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0),a.setDate(1);let c=1;const u=[];for(;+a<=s;)u.push(mr(n,a)),a.setMonth(a.getMonth()+c);return i?u.reverse():u}function wie(t,e){const n=Tn(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function xie(t,e){const n=Tn(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function H3(t,e){const n=Tn(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Eie(t,e){const{start:n,end:r}=Z_(e?.in,t);let i=+n>+r;const s=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0),a.setMonth(0,1);let c=1;const u=[];for(;+a<=s;)u.push(mr(n,a)),a.setFullYear(a.getFullYear()+c);return i?u.reverse():u}function q3(t,e){const n=Pm(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Tn(t,e?.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function Sie(t,e){return q3(t,{...e,weekStartsOn:1})}const _ie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tie=(t,e,n)=>{let r;const i=_ie[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ax(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const kie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Aie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Oie={date:ax({formats:kie,defaultWidth:"full"}),time:ax({formats:Cie,defaultWidth:"full"}),dateTime:ax({formats:Aie,defaultWidth:"full"})},Mie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rie=(t,e,n,r)=>Mie[t];function rp(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):a;i=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Nie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Die={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Iie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Pie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Vie={ordinalNumber:jie,era:rp({values:Nie,defaultWidth:"wide"}),quarter:rp({values:Die,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rp({values:Iie,defaultWidth:"wide"}),day:rp({values:Pie,defaultWidth:"wide"}),dayPeriod:rp({values:Lie,defaultWidth:"wide",formattingValues:zie,defaultFormattingWidth:"wide"})};function ip(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?Uie(c,m=>m.test(a)):Bie(c,m=>m.test(a));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function Bie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Uie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Fie(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const Hie=/^(\d+)(th|st|nd|rd)?/i,qie=/\d+/i,$ie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wie={any:[/^b/i,/^(a|c)/i]},Kie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Gie={any:[/1/i,/2/i,/3/i,/4/i]},Yie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Jie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ese={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tse={ordinalNumber:Fie({matchPattern:Hie,parsePattern:qie,valueCallback:t=>parseInt(t,10)}),era:ip({matchPatterns:$ie,defaultMatchWidth:"wide",parsePatterns:Wie,defaultParseWidth:"any"}),quarter:ip({matchPatterns:Kie,defaultMatchWidth:"wide",parsePatterns:Gie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ip({matchPatterns:Yie,defaultMatchWidth:"wide",parsePatterns:Qie,defaultParseWidth:"any"}),day:ip({matchPatterns:Xie,defaultMatchWidth:"wide",parsePatterns:Jie,defaultParseWidth:"any"}),dayPeriod:ip({matchPatterns:Zie,defaultMatchWidth:"any",parsePatterns:ese,defaultParseWidth:"any"})},fd={code:"en-US",formatDistance:Tie,formatLong:Oie,formatRelative:Rie,localize:Vie,match:tse,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nse(t,e){const n=Tn(t,e?.in);return J_(n,H3(n))+1}function eT(t,e){const n=Tn(t,e?.in),r=+om(n)-+uie(n);return Math.round(r/j3)+1}function $3(t,e){const n=Tn(t,e?.in),r=n.getFullYear(),i=Pm(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=mr(e?.in||t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=Hd(a,e),u=mr(e?.in||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const d=Hd(u,e);return+n>=+c?r+1:+n>=+d?r:r-1}function rse(t,e){const n=Pm(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=$3(t,e),s=mr(e?.in||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Hd(s,e)}function tT(t,e){const n=Tn(t,e?.in),r=+Hd(n,e)-+rse(n,e);return Math.round(r/j3)+1}function wn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const pc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return wn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):wn(n+1,2)},d(t,e){return wn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return wn(t.getHours()%12||12,e.length)},H(t,e){return wn(t.getHours(),e.length)},m(t,e){return wn(t.getMinutes(),e.length)},s(t,e){return wn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return wn(i,e.length)}},Zf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BN={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return pc.y(t,e)},Y:function(t,e,n,r){const i=$3(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return wn(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):wn(s,e.length)},R:function(t,e){const n=B3(t);return wn(n,e.length)},u:function(t,e){const n=t.getFullYear();return wn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return pc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=tT(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(t,e,n){const r=eT(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):pc.d(t,e)},D:function(t,e,n){const r=nse(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return wn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return wn(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Zf.noon:r===0?i=Zf.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Zf.evening:r>=12?i=Zf.afternoon:r>=4?i=Zf.morning:i=Zf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return pc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):pc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):pc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):pc.s(t,e)},S:function(t,e){return pc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return FN(r);case"XXXX":case"XX":return Mu(r);default:return Mu(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return FN(r);case"xxxx":case"xx":return Mu(r);default:return Mu(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+UN(r,":");default:return"GMT"+Mu(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+UN(r,":");default:return"GMT"+Mu(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return wn(r,e.length)},T:function(t,e,n){return wn(+t,e.length)}};function UN(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+wn(s,2)}function FN(t,e){return t%60===0?(t>0?"-":"+")+wn(Math.abs(t)/60,2):Mu(t,e)}function Mu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=wn(Math.trunc(r/60),2),s=wn(r%60,2);return n+i+e+s}const HN=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},W3=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},ise=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return HN(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",HN(r,e)).replace("{{time}}",W3(i,e))},sse={p:W3,P:ise},ose=/^D+$/,ase=/^Y+$/,lse=["D","DD","YY","YYYY"];function cse(t){return ose.test(t)}function use(t){return ase.test(t)}function fse(t,e,n){const r=dse(t,e,n);if(console.warn(r),lse.includes(t))throw new RangeError(r)}function dse(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mse=/^'([^]*?)'?$/,gse=/''/g,yse=/[a-zA-Z]/;function Mo(t,e,n){const r=Pm(),i=n?.locale??r.locale??fd,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=Tn(t,n?.in);if(!gie(c))throw new RangeError("Invalid time value");let u=e.match(pse).map(h=>{const m=h[0];if(m==="p"||m==="P"){const v=sse[m];return v(h,i.formatLong)}return h}).join("").match(hse).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const m=h[0];if(m==="'")return{isToken:!1,value:vse(h)};if(BN[m])return{isToken:!0,value:h};if(m.match(yse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return u.map(h=>{if(!h.isToken)return h.value;const m=h.value;(!n?.useAdditionalWeekYearTokens&&use(m)||!n?.useAdditionalDayOfYearTokens&&cse(m))&&fse(m,e,String(t));const v=BN[m[0]];return v(c,m,i.localize,d)}).join("")}function vse(t){const e=t.match(mse);return e?e[1].replace(gse,"'"):t}function bse(t,e){const n=Tn(t,e?.in),r=n.getFullYear(),i=n.getMonth(),s=mr(n,0);return s.setFullYear(r,i+1,0),s.setHours(0,0,0,0),s.getDate()}function wse(t,e){return Tn(t,e?.in).getMonth()}function xse(t,e){return Tn(t,e?.in).getFullYear()}function Ese(t,e){return+Tn(t)>+Tn(e)}function Sse(t,e){return+Tn(t)<+Tn(e)}function _se(t,e,n){const[r,i]=fh(n?.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Tse(t,e,n){const[r,i]=fh(n?.in,t,e);return r.getFullYear()===i.getFullYear()}function kse(t,e,n){return X_(t,-364,n)}function Cse(t,e,n){const r=Tn(t,n?.in),i=r.getFullYear(),s=r.getDate(),a=mr(t,0);a.setFullYear(i,e,15),a.setHours(0,0,0,0);const c=bse(a);return r.setMonth(e,Math.min(s,c)),r}function Ase(t,e,n){const r=Tn(t,n?.in);return isNaN(+r)?mr(t,NaN):(r.setFullYear(e),r)}function Ose(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const Mse={},pp={};function ju(t,e){try{const r=(Mse[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(e).split("GMT")[1];return r in pp?pp[r]:qN(r,r.split(":"))}catch{if(t in pp)return pp[t];const n=t?.match(Rse);return n?qN(t,n.slice(1)):NaN}}const Rse=/([+-]\d\d):?(\d\d)?/;function qN(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return pp[t]=n*60+r>0?n*60+r+i:n*60-r-i}class aa extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(ju(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),K3(this),zE(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new aa(...n,e):new aa(Date.now(),e)}withTimeZone(e){return new aa(+this,e)}getTimezoneOffset(){const e=-ju(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),zE(this),+this}[Symbol.for("constructDateFrom")](e){return new aa(+new Date(e),this.timeZone)}}const $N=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!$N.test(t))return;const e=t.replace($N,"$1UTC");aa.prototype[e]&&(t.startsWith("get")?aa.prototype[t]=function(){return this.internal[e]()}:(aa.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),Nse(this),+this},aa.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),zE(this),+this}))});function zE(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-ju(t.timeZone,t)*60))}function Nse(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),K3(t)}function K3(t){const e=ju(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),s=-new Date(+r).getTimezoneOffset(),a=i-s,c=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();a&&c&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+a);const u=i-n;u&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+u);const d=new Date(+t);d.setUTCSeconds(0);const h=i>0?d.getSeconds():(d.getSeconds()-60)%60,m=Math.round(-(ju(t.timeZone,t)*60))%60;(m||h)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+m),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+m+h));const v=ju(t.timeZone,t),w=v>0?Math.floor(v):Math.ceil(v),k=-new Date(+t).getTimezoneOffset()-w,_=w!==n,O=k-u;if(_&&O){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+O);const B=ju(t.timeZone,t),W=B>0?Math.floor(B):Math.ceil(B),L=w-W;L&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+L),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+L))}}class wi extends aa{static tz(e,...n){return n.length?new wi(...n,e):new wi(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${Ose(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new wi(+this,e)}[Symbol.for("constructDateFrom")](e){return new wi(+new Date(e),this.timeZone)}}const WN=5,Dse=4;function Ise(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),s=e.addDays(i,WN*7-1);return e.getMonth(t)===e.getMonth(s)?WN:Dse}function G3(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-6):e.addDays(n,-1*(r-1))}function Pse(t,e){const n=G3(t,e),r=Ise(t,e);return e.addDays(n,r*7-1)}const Y3={...fd,labels:{labelDayButton:(t,e,n,r)=>{let i;r&&typeof r.format=="function"?i=r.format.bind(r):i=(a,c)=>Mo(a,c,{locale:fd,...n});let s=i(t,"PPPP");return e.today&&(s=`Today, ${s}`),e.selected&&(s=`${s}, selected`),s},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:t=>`Week ${t}`,labelYearDropdown:"Choose the Year",labelGrid:(t,e,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(i,s)=>Mo(i,s,{locale:fd,...e}),r(t,"LLLL yyyy")},labelGridcell:(t,e,n,r)=>{let i;r&&typeof r.format=="function"?i=r.format.bind(r):i=(a,c)=>Mo(a,c,{locale:fd,...n});let s=i(t,"PPPP");return e?.today&&(s=`Today, ${s}`),s},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(t,e,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(i,s)=>Mo(i,s,{locale:fd,...e}),r(t,"cccc")}}};class Ns{constructor(e,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?wi.tz(this.options.timeZone):new this.Date,this.newDate=(r,i,s)=>this.overrides?.newDate?this.overrides.newDate(r,i,s):this.options.timeZone?new wi(r,i,s,this.options.timeZone):new Date(r,i,s),this.addDays=(r,i)=>this.overrides?.addDays?this.overrides.addDays(r,i):X_(r,i),this.addMonths=(r,i)=>this.overrides?.addMonths?this.overrides.addMonths(r,i):V3(r,i),this.addWeeks=(r,i)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,i):fie(r,i),this.addYears=(r,i)=>this.overrides?.addYears?this.overrides.addYears(r,i):die(r,i),this.differenceInCalendarDays=(r,i)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):J_(r,i),this.differenceInCalendarMonths=(r,i)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):F3(r,i),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):bie(r),this.eachYearOfInterval=r=>{const i=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):Eie(r),s=new Set(i.map(c=>this.getYear(c)));if(s.size===i.length)return i;const a=[];return s.forEach(c=>{a.push(new Date(c,0,1))}),a},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Pse(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):Sie(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):yie(r),this.endOfWeek=(r,i)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,i):q3(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):xie(r),this.format=(r,i,s)=>{const a=this.overrides?.format?this.overrides.format(r,i,this.options):Mo(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):eT(r),this.getMonth=(r,i)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):wse(r,this.options),this.getYear=(r,i)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):xse(r,this.options),this.getWeek=(r,i)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):tT(r,this.options),this.isAfter=(r,i)=>this.overrides?.isAfter?this.overrides.isAfter(r,i):Ese(r,i),this.isBefore=(r,i)=>this.overrides?.isBefore?this.overrides.isBefore(r,i):Sse(r,i),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):U3(r),this.isSameDay=(r,i)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,i):mie(r,i),this.isSameMonth=(r,i)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,i):_se(r,i),this.isSameYear=(r,i)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,i):Tse(r,i),this.max=r=>this.overrides?.max?this.overrides.max(r):hie(r),this.min=r=>this.overrides?.min?this.overrides.min(r):pie(r),this.setMonth=(r,i)=>this.overrides?.setMonth?this.overrides.setMonth(r,i):Cse(r,i),this.setYear=(r,i)=>this.overrides?.setYear?this.overrides.setYear(r,i):Ase(r,i),this.startOfBroadcastWeek=(r,i)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):G3(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):am(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):om(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):wie(r),this.startOfWeek=(r,i)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):Hd(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):H3(r),this.options={locale:Y3,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){const e=this.options.locale?.code;return e&&Ns.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,s=n?.code;if(s&&Ns.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const a=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,a)}}Ns.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Ta=new Ns;class Q3{constructor(e,n,r=Ta){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r,this.isoDate=r.format(e,"yyyy-MM-dd"),this.displayMonthId=r.format(n,"yyyy-MM"),this.dateMonthId=r.format(e,"yyyy-MM")}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class Lse{constructor(e,n){this.date=e,this.weeks=n}}class zse{constructor(e,n){this.days=n,this.weekNumber=e}}function jse(t){return Be.createElement("button",{...t})}function Vse(t){return Be.createElement("span",{...t})}function Bse(t){const{size:e=24,orientation:n="left",className:r}=t;return Be.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&Be.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&Be.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&Be.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&Be.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Use(t){const{day:e,modifiers:n,...r}=t;return Be.createElement("td",{...r})}function Fse(t){const{day:e,modifiers:n,...r}=t,i=Be.useRef(null);return Be.useEffect(()=>{n.focused&&i.current?.focus()},[n.focused]),Be.createElement("button",{ref:i,...r})}var ft;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(ft||(ft={}));var Qn;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(Qn||(Qn={}));var Ro;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Ro||(Ro={}));var As;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(As||(As={}));function Hse(t){const{options:e,className:n,components:r,classNames:i,...s}=t,a=[i[ft.Dropdown],n].join(" "),c=e?.find(({value:u})=>u===s.value);return Be.createElement("span",{"data-disabled":s.disabled,className:i[ft.DropdownRoot]},Be.createElement(r.Select,{className:a,...s},e?.map(({value:u,label:d,disabled:h})=>Be.createElement(r.Option,{key:u,value:u,disabled:h},d))),Be.createElement("span",{className:i[ft.CaptionLabel],"aria-hidden":!0},c?.label,Be.createElement(r.Chevron,{orientation:"down",size:18,className:i[ft.Chevron]})))}function qse(t){return Be.createElement("div",{...t})}function $se(t){return Be.createElement("div",{...t})}function Wse(t){const{calendarMonth:e,displayIndex:n,...r}=t;return Be.createElement("div",{...r},t.children)}function Kse(t){const{calendarMonth:e,displayIndex:n,...r}=t;return Be.createElement("div",{...r})}function Gse(t){return Be.createElement("table",{...t})}function Yse(t){return Be.createElement("div",{...t})}const X3=z.createContext(void 0);function Lm(){const t=z.useContext(X3);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function Qse(t){const{components:e}=Lm();return Be.createElement(e.Dropdown,{...t})}function Xse(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...s}=t,{components:a,classNames:c,labels:{labelPrevious:u,labelNext:d}}=Lm(),h=z.useCallback(v=>{i&&n?.(v)},[i,n]),m=z.useCallback(v=>{r&&e?.(v)},[r,e]);return Be.createElement("nav",{...s},Be.createElement(a.PreviousMonthButton,{type:"button",className:c[ft.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":u(r),onClick:m},Be.createElement(a.Chevron,{disabled:r?void 0:!0,className:c[ft.Chevron],orientation:"left"})),Be.createElement(a.NextMonthButton,{type:"button",className:c[ft.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":d(i),onClick:h},Be.createElement(a.Chevron,{disabled:i?void 0:!0,orientation:"right",className:c[ft.Chevron]})))}function Jse(t){const{components:e}=Lm();return Be.createElement(e.Button,{...t})}function Zse(t){return Be.createElement("option",{...t})}function eoe(t){const{components:e}=Lm();return Be.createElement(e.Button,{...t})}function toe(t){const{rootRef:e,...n}=t;return Be.createElement("div",{...n,ref:e})}function noe(t){return Be.createElement("select",{...t})}function roe(t){const{week:e,...n}=t;return Be.createElement("tr",{...n})}function ioe(t){return Be.createElement("th",{...t})}function soe(t){return Be.createElement("thead",{"aria-hidden":!0},Be.createElement("tr",{...t}))}function ooe(t){const{week:e,...n}=t;return Be.createElement("th",{...n})}function aoe(t){return Be.createElement("th",{...t})}function loe(t){return Be.createElement("tbody",{...t})}function coe(t){const{components:e}=Lm();return Be.createElement(e.Dropdown,{...t})}const uoe=Object.freeze(Object.defineProperty({__proto__:null,Button:jse,CaptionLabel:Vse,Chevron:Bse,Day:Use,DayButton:Fse,Dropdown:Hse,DropdownNav:qse,Footer:$se,Month:Wse,MonthCaption:Kse,MonthGrid:Gse,Months:Yse,MonthsDropdown:Qse,Nav:Xse,NextMonthButton:Jse,Option:Zse,PreviousMonthButton:eoe,Root:toe,Select:noe,Week:roe,WeekNumber:ooe,WeekNumberHeader:aoe,Weekday:ioe,Weekdays:soe,Weeks:loe,YearsDropdown:coe},Symbol.toStringTag,{value:"Module"}));function ul(t,e,n=!1,r=Ta){let{from:i,to:s}=t;const{differenceInCalendarDays:a,isSameDay:c}=r;return i&&s?(a(s,i)<0&&([i,s]=[s,i]),a(e,i)>=(n?1:0)&&a(s,e)>=(n?1:0)):!n&&s?c(s,e):!n&&i?c(i,e):!1}function nT(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function rb(t){return!!(t&&typeof t=="object"&&"from"in t)}function rT(t){return!!(t&&typeof t=="object"&&"after"in t)}function iT(t){return!!(t&&typeof t=="object"&&"before"in t)}function J3(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Z3(t,e){return Array.isArray(t)&&t.every(e.isDate)}function fl(t,e,n=Ta){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:s,isAfter:a}=n;return r.some(c=>{if(typeof c=="boolean")return c;if(n.isDate(c))return i(t,c);if(Z3(c,n))return c.some(u=>i(t,u));if(rb(c))return ul(c,t,!1,n);if(J3(c))return Array.isArray(c.dayOfWeek)?c.dayOfWeek.includes(t.getDay()):c.dayOfWeek===t.getDay();if(nT(c)){const u=s(c.before,t),d=s(c.after,t),h=u>0,m=d<0;return a(c.before,c.after)?m&&h:h||m}return rT(c)?s(t,c.after)>0:iT(c)?s(c.before,t)>0:typeof c=="function"?c(t):!1})}function foe(t,e,n,r,i){const{disabled:s,hidden:a,modifiers:c,showOutsideDays:u,broadcastCalendar:d,today:h=i.today()}=e,{isSameDay:m,isSameMonth:v,startOfMonth:w,isBefore:S,endOfMonth:k,isAfter:_}=i,O=n&&w(n),B=r&&k(r),W={[Qn.focused]:[],[Qn.outside]:[],[Qn.disabled]:[],[Qn.hidden]:[],[Qn.today]:[]},L={};for(const q of t){const{date:U,displayMonth:R}=q,P=!!(R&&!v(U,R)),V=!!(O&&S(U,O)),H=!!(B&&_(U,B)),G=!!(s&&fl(U,s,i)),Q=!!(a&&fl(U,a,i))||V||H||!d&&!u&&P||d&&u===!1&&P,K=m(U,h);P&&W.outside.push(q),G&&W.disabled.push(q),Q&&W.hidden.push(q),K&&W.today.push(q),c&&Object.keys(c).forEach(je=>{const Re=c?.[je];Re&&fl(U,Re,i)&&(L[je]?L[je].push(q):L[je]=[q])})}return q=>{const U={[Qn.focused]:!1,[Qn.disabled]:!1,[Qn.hidden]:!1,[Qn.outside]:!1,[Qn.today]:!1},R={};for(const P in W){const V=W[P];U[P]=V.some(H=>H===q)}for(const P in L)R[P]=L[P].some(V=>V===q);return{...U,...R}}}function doe(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[s])=>(n[s]?i.push(n[s]):e[Qn[s]]?i.push(e[Qn[s]]):e[Ro[s]]&&i.push(e[Ro[s]]),i),[e[ft.Day]])}function hoe(t){return{...uoe,...t}}function poe(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function moe(){const t={};for(const e in ft)t[ft[e]]=`rdp-${ft[e]}`;for(const e in Qn)t[Qn[e]]=`rdp-${Qn[e]}`;for(const e in Ro)t[Ro[e]]=`rdp-${Ro[e]}`;for(const e in As)t[As[e]]=`rdp-${As[e]}`;return t}function ej(t,e,n){return(n??new Ns(e)).formatMonthYear(t)}const goe=ej;function yoe(t,e,n){return(n??new Ns(e)).format(t,"d")}function voe(t,e=Ta){return e.format(t,"LLLL")}function boe(t,e,n){return(n??new Ns(e)).format(t,"cccccc")}function woe(t,e=Ta){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function xoe(){return""}function tj(t,e=Ta){return e.format(t,"yyyy")}const Eoe=tj,Soe=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:ej,formatDay:yoe,formatMonthCaption:goe,formatMonthDropdown:voe,formatWeekNumber:woe,formatWeekNumberHeader:xoe,formatWeekdayName:boe,formatYearCaption:Eoe,formatYearDropdown:tj},Symbol.toStringTag,{value:"Module"}));function _oe(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Soe,...t}}function sT(t,e,n,r){let i=(r??new Ns(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const Toe=sT;function oT(t,e,n){return(n??new Ns(e)).formatMonthYear(t)}const koe=oT;function nj(t,e,n,r){let i=(r??new Ns(n)).format(t,"PPPP");return e?.today&&(i=`Today, ${i}`),i}function rj(t){return"Choose the Month"}function ij(){return""}const Coe="Go to the Next Month";function sj(t,e){return Coe}function oj(t){return"Go to the Previous Month"}function aj(t,e,n){return(n??new Ns(e)).format(t,"cccc")}function lj(t,e){return`Week ${t}`}function cj(t){return"Week Number"}function uj(t){return"Choose the Year"}const Aoe=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:koe,labelDay:Toe,labelDayButton:sT,labelGrid:oT,labelGridcell:nj,labelMonthDropdown:rj,labelNav:ij,labelNext:sj,labelPrevious:oj,labelWeekNumber:lj,labelWeekNumberHeader:cj,labelWeekday:aj,labelYearDropdown:uj},Symbol.toStringTag,{value:"Module"})),_o=(t,e,n)=>e||(n?typeof n=="function"?n:(...r)=>n:t);function Ooe(t,e){const n=e.locale?.labels??{};return{...Aoe,...t??{},labelDayButton:_o(sT,t?.labelDayButton,n.labelDayButton),labelMonthDropdown:_o(rj,t?.labelMonthDropdown,n.labelMonthDropdown),labelNext:_o(sj,t?.labelNext,n.labelNext),labelPrevious:_o(oj,t?.labelPrevious,n.labelPrevious),labelWeekNumber:_o(lj,t?.labelWeekNumber,n.labelWeekNumber),labelYearDropdown:_o(uj,t?.labelYearDropdown,n.labelYearDropdown),labelGrid:_o(oT,t?.labelGrid,n.labelGrid),labelGridcell:_o(nj,t?.labelGridcell,n.labelGridcell),labelNav:_o(ij,t?.labelNav,n.labelNav),labelWeekNumberHeader:_o(cj,t?.labelWeekNumberHeader,n.labelWeekNumberHeader),labelWeekday:_o(aj,t?.labelWeekday,n.labelWeekday)}}function Moe(t,e,n,r,i){const{startOfMonth:s,startOfYear:a,endOfYear:c,eachMonthOfInterval:u,getMonth:d}=i;return u({start:a(t),end:c(t)}).map(v=>{const w=r.formatMonthDropdown(v,i),S=d(v),k=e&&v<s(e)||n&&v>s(n)||!1;return{value:S,label:w,disabled:k}})}function Roe(t,e={},n={}){let r={...e?.[ft.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n?.[i]}}),r}function Noe(t,e,n,r){const i=r??t.today(),s=n?t.startOfBroadcastWeek(i,t):e?t.startOfISOWeek(i):t.startOfWeek(i),a=[];for(let c=0;c<7;c++){const u=t.addDays(s,c);a.push(u)}return a}function Doe(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:s,endOfYear:a,eachYearOfInterval:c,getYear:u}=r,d=s(t),h=a(e),m=c({start:d,end:h});return i&&m.reverse(),m.map(v=>{const w=n.formatYearDropdown(v,r);return{value:u(v),label:w,disabled:!1}})}function Ioe(t,e={}){const{weekStartsOn:n,locale:r}=e,i=n??r?.options?.weekStartsOn??0,s=c=>{const u=typeof c=="number"||typeof c=="string"?new Date(c):c;return new wi(u.getFullYear(),u.getMonth(),u.getDate(),12,0,0,t)},a=c=>{const u=s(c);return new Date(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0)};return{today:()=>s(wi.tz(t)),newDate:(c,u,d)=>new wi(c,u,d,12,0,0,t),startOfDay:c=>s(c),startOfWeek:(c,u)=>{const d=s(c),h=u?.weekStartsOn??i,m=(d.getDay()-h+7)%7;return d.setDate(d.getDate()-m),d},startOfISOWeek:c=>{const u=s(c),d=(u.getDay()-1+7)%7;return u.setDate(u.getDate()-d),u},startOfMonth:c=>{const u=s(c);return u.setDate(1),u},startOfYear:c=>{const u=s(c);return u.setMonth(0,1),u},endOfWeek:(c,u)=>{const d=s(c),v=(((u?.weekStartsOn??i)+6)%7-d.getDay()+7)%7;return d.setDate(d.getDate()+v),d},endOfISOWeek:c=>{const u=s(c),d=(7-u.getDay())%7;return u.setDate(u.getDate()+d),u},endOfMonth:c=>{const u=s(c);return u.setMonth(u.getMonth()+1,0),u},endOfYear:c=>{const u=s(c);return u.setMonth(11,31),u},eachMonthOfInterval:c=>{const u=s(c.start),d=s(c.end),h=[],m=new wi(u.getFullYear(),u.getMonth(),1,12,0,0,t),v=d.getFullYear()*12+d.getMonth();for(;m.getFullYear()*12+m.getMonth()<=v;)h.push(new wi(m,t)),m.setMonth(m.getMonth()+1,1);return h},addDays:(c,u)=>{const d=s(c);return d.setDate(d.getDate()+u),d},addWeeks:(c,u)=>{const d=s(c);return d.setDate(d.getDate()+u*7),d},addMonths:(c,u)=>{const d=s(c);return d.setMonth(d.getMonth()+u),d},addYears:(c,u)=>{const d=s(c);return d.setFullYear(d.getFullYear()+u),d},eachYearOfInterval:c=>{const u=s(c.start),d=s(c.end),h=[],m=new wi(u.getFullYear(),0,1,12,0,0,t);for(;m.getFullYear()<=d.getFullYear();)h.push(new wi(m,t)),m.setFullYear(m.getFullYear()+1,0,1);return h},getWeek:(c,u)=>{const d=a(c);return tT(d,{weekStartsOn:u?.weekStartsOn??i,firstWeekContainsDate:u?.firstWeekContainsDate??r?.options?.firstWeekContainsDate??1})},getISOWeek:c=>{const u=a(c);return eT(u)},differenceInCalendarDays:(c,u)=>{const d=a(c),h=a(u);return J_(d,h)},differenceInCalendarMonths:(c,u)=>{const d=a(c),h=a(u);return F3(d,h)}}}const zm=t=>t instanceof HTMLElement?t:null,lx=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Poe=t=>zm(t.querySelector("[data-animated-month]")),cx=t=>zm(t.querySelector("[data-animated-caption]")),ux=t=>zm(t.querySelector("[data-animated-weeks]")),Loe=t=>zm(t.querySelector("[data-animated-nav]")),zoe=t=>zm(t.querySelector("[data-animated-weekdays]"));function joe(t,e,{classNames:n,months:r,focused:i,dateLib:s}){const a=z.useRef(null),c=z.useRef(r),u=z.useRef(!1);z.useLayoutEffect(()=>{const d=c.current;if(c.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||d.length===0||r.length!==d.length)return;const h=s.isSameMonth(r[0].date,d[0].date),m=s.isAfter(r[0].date,d[0].date),v=m?n[As.caption_after_enter]:n[As.caption_before_enter],w=m?n[As.weeks_after_enter]:n[As.weeks_before_enter],S=a.current,k=t.current.cloneNode(!0);if(k instanceof HTMLElement?(lx(k).forEach(W=>{if(!(W instanceof HTMLElement))return;const L=Poe(W);L&&W.contains(L)&&W.removeChild(L);const q=cx(W);q&&q.classList.remove(v);const U=ux(W);U&&U.classList.remove(w)}),a.current=k):a.current=null,u.current||h||i)return;const _=S instanceof HTMLElement?lx(S):[],O=lx(t.current);if(O?.every(B=>B instanceof HTMLElement)&&_&&_.every(B=>B instanceof HTMLElement)){u.current=!0,t.current.style.isolation="isolate";const B=Loe(t.current);B&&(B.style.zIndex="1"),O.forEach((W,L)=>{const q=_[L];if(!q)return;W.style.position="relative",W.style.overflow="hidden";const U=cx(W);U&&U.classList.add(v);const R=ux(W);R&&R.classList.add(w);const P=()=>{u.current=!1,t.current&&(t.current.style.isolation=""),B&&(B.style.zIndex=""),U&&U.classList.remove(v),R&&R.classList.remove(w),W.style.position="",W.style.overflow="",W.contains(q)&&W.removeChild(q)};q.style.pointerEvents="none",q.style.position="absolute",q.style.overflow="hidden",q.setAttribute("aria-hidden","true");const V=zoe(q);V&&(V.style.opacity="0");const H=cx(q);H&&(H.classList.add(m?n[As.caption_before_exit]:n[As.caption_after_exit]),H.addEventListener("animationend",P));const G=ux(q);G&&G.classList.add(m?n[As.weeks_before_exit]:n[As.weeks_after_exit]),W.insertBefore(q,W.firstChild)})}})}function Voe(t,e,n,r){const i=t[0],s=t[t.length-1],{ISOWeek:a,fixedWeeks:c,broadcastCalendar:u}=n??{},{addDays:d,differenceInCalendarDays:h,differenceInCalendarMonths:m,endOfBroadcastWeek:v,endOfISOWeek:w,endOfMonth:S,endOfWeek:k,isAfter:_,startOfBroadcastWeek:O,startOfISOWeek:B,startOfWeek:W}=r,L=u?O(i,r):a?B(i):W(i),q=u?v(s):a?w(S(s)):k(S(s)),U=e&&(u?v(e):a?w(e):k(e)),R=U&&_(q,U)?U:q,P=h(R,L),V=m(s,i)+1,H=[];for(let K=0;K<=P;K++){const je=d(L,K);H.push(je)}const Q=(u?35:42)*V;if(c&&H.length<Q){const K=Q-H.length;for(let je=0;je<K;je++){const Re=d(H[H.length-1],1);H.push(Re)}}return H}function Boe(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((s,a)=>s.concat(a.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function Uoe(t,e,n,r){const{numberOfMonths:i=1}=n,s=[];for(let a=0;a<i;a++){const c=r.addMonths(t,a);if(e&&c>e)break;s.push(c)}return s}function KN(t,e,n,r){const{month:i,defaultMonth:s,today:a=r.today(),numberOfMonths:c=1}=t;let u=i||s||a;const{differenceInCalendarMonths:d,addMonths:h,startOfMonth:m}=r;if(n&&d(n,u)<c-1){const v=-1*(c-1);u=h(n,v)}return e&&d(u,e)<0&&(u=e),m(u)}function Foe(t,e,n,r){const{addDays:i,endOfBroadcastWeek:s,endOfISOWeek:a,endOfMonth:c,endOfWeek:u,getISOWeek:d,getWeek:h,startOfBroadcastWeek:m,startOfISOWeek:v,startOfWeek:w}=r,S=t.reduce((k,_)=>{const O=n.broadcastCalendar?m(_,r):n.ISOWeek?v(_):w(_),B=n.broadcastCalendar?s(_):n.ISOWeek?a(c(_)):u(c(_)),W=e.filter(R=>R>=O&&R<=B),L=n.broadcastCalendar?35:42;if(n.fixedWeeks&&W.length<L){const R=e.filter(P=>{const V=L-W.length;return P>B&&P<=i(B,V)});W.push(...R)}const q=W.reduce((R,P)=>{const V=n.ISOWeek?d(P):h(P),H=R.find(Q=>Q.weekNumber===V),G=new Q3(P,_,r);return H?H.days.push(G):R.push(new zse(V,[G])),R},[]),U=new Lse(_,q);return k.push(U),k},[]);return n.reverseMonths?S.reverse():S}function Hoe(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:s,startOfMonth:a,endOfMonth:c,addYears:u,endOfYear:d,newDate:h,today:m}=e,{fromYear:v,toYear:w,fromMonth:S,toMonth:k}=t;!n&&S&&(n=S),!n&&v&&(n=e.newDate(v,0,1)),!r&&k&&(r=k),!r&&w&&(r=h(w,11,31));const _=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=a(n):v?n=h(v,0,1):!n&&_&&(n=i(u(t.today??m(),-100))),r?r=c(r):w?r=h(w,11,31):!r&&_&&(r=d(t.today??m())),[n&&s(n),r&&s(r)]}function qoe(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s=1}=n,{startOfMonth:a,addMonths:c,differenceInCalendarMonths:u}=r,d=i?s:1,h=a(t);if(!e)return c(h,d);if(!(u(e,t)<s))return c(h,d)}function $oe(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s}=n,{startOfMonth:a,addMonths:c,differenceInCalendarMonths:u}=r,d=i?s??1:1,h=a(t);if(!e)return c(h,-d);if(!(u(h,e)<=0))return c(h,-d)}function Woe(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function ib(t,e){const[n,r]=z.useState(t);return[e===void 0?n:e,r]}function Koe(t,e){const[n,r]=Hoe(t,e),{startOfMonth:i,endOfMonth:s}=e,a=KN(t,n,r,e),[c,u]=ib(a,t.month?a:void 0);z.useEffect(()=>{const L=KN(t,n,r,e);u(L)},[t.timeZone]);const{months:d,weeks:h,days:m,previousMonth:v,nextMonth:w}=z.useMemo(()=>{const L=Uoe(c,r,{numberOfMonths:t.numberOfMonths},e),q=Voe(L,t.endMonth?s(t.endMonth):void 0,{ISOWeek:t.ISOWeek,fixedWeeks:t.fixedWeeks,broadcastCalendar:t.broadcastCalendar},e),U=Foe(L,q,{broadcastCalendar:t.broadcastCalendar,fixedWeeks:t.fixedWeeks,ISOWeek:t.ISOWeek,reverseMonths:t.reverseMonths},e),R=Woe(U),P=Boe(U),V=$oe(c,n,t,e),H=qoe(c,r,t,e);return{months:U,weeks:R,days:P,previousMonth:V,nextMonth:H}},[e,c.getTime(),r?.getTime(),n?.getTime(),t.disableNavigation,t.broadcastCalendar,t.endMonth?.getTime(),t.fixedWeeks,t.ISOWeek,t.numberOfMonths,t.pagedNavigation,t.reverseMonths]),{disableNavigation:S,onMonthChange:k}=t,_=L=>h.some(q=>q.days.some(U=>U.isEqualTo(L))),O=L=>{if(S)return;let q=i(L);n&&q<i(n)&&(q=i(n)),r&&q>i(r)&&(q=i(r)),u(q),k?.(q)};return{months:d,weeks:h,days:m,navStart:n,navEnd:r,previousMonth:v,nextMonth:w,goToMonth:O,goToDay:L=>{_(L)||O(L.date)}}}var na;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(na||(na={}));function GN(t){return!t[Qn.disabled]&&!t[Qn.hidden]&&!t[Qn.outside]}function Goe(t,e,n,r){let i,s=-1;for(const a of t){const c=e(a);GN(c)&&(c[Qn.focused]&&s<na.FocusedModifier?(i=a,s=na.FocusedModifier):r?.isEqualTo(a)&&s<na.LastFocused?(i=a,s=na.LastFocused):n(a.date)&&s<na.Selected?(i=a,s=na.Selected):c[Qn.today]&&s<na.Today&&(i=a,s=na.Today))}return i||(i=t.find(a=>GN(e(a)))),i}function Yoe(t,e,n,r,i,s,a){const{ISOWeek:c,broadcastCalendar:u}=s,{addDays:d,addMonths:h,addWeeks:m,addYears:v,endOfBroadcastWeek:w,endOfISOWeek:S,endOfWeek:k,max:_,min:O,startOfBroadcastWeek:B,startOfISOWeek:W,startOfWeek:L}=a;let U={day:d,week:m,month:h,year:v,startOfWeek:R=>u?B(R,a):c?W(R):L(R),endOfWeek:R=>u?w(R):c?S(R):k(R)}[t](n,e==="after"?1:-1);return e==="before"&&r?U=_([r,U]):e==="after"&&i&&(U=O([i,U])),U}function fj(t,e,n,r,i,s,a,c=0){if(c>365)return;const u=Yoe(t,e,n.date,r,i,s,a),d=!!(s.disabled&&fl(u,s.disabled,a)),h=!!(s.hidden&&fl(u,s.hidden,a)),m=u,v=new Q3(u,m,a);return!d&&!h?v:fj(t,e,v,r,i,s,a,c+1)}function Qoe(t,e,n,r,i){const{autoFocus:s}=t,[a,c]=z.useState(),u=Goe(e.days,n,r||(()=>!1),a),[d,h]=z.useState(s?u:void 0);return{isFocusTarget:k=>!!u?.isEqualTo(k),setFocused:h,focused:d,blur:()=>{c(d),h(void 0)},moveFocus:(k,_)=>{if(!d)return;const O=fj(k,_,d,e.navStart,e.navEnd,t,i);O&&(t.disableNavigation&&!e.days.some(W=>W.isEqualTo(O))||(e.goToDay(O),h(O)))}}}function Xoe(t,e){const{selected:n,required:r,onSelect:i}=t,[s,a]=ib(n,i?n:void 0),c=i?n:s,{isSameDay:u}=e,d=w=>c?.some(S=>u(S,w))??!1,{min:h,max:m}=t;return{selected:c,select:(w,S,k)=>{let _=[...c??[]];if(d(w)){if(c?.length===h||r&&c?.length===1)return;_=c?.filter(O=>!u(O,w))}else c?.length===m?_=[w]:_=[..._,w];return i||a(_),i?.(_,w,S,k),_},isSelected:d}}function Joe(t,e,n=0,r=0,i=!1,s=Ta){const{from:a,to:c}=e||{},{isSameDay:u,isAfter:d,isBefore:h}=s;let m;if(!a&&!c)m={from:t,to:n>0?void 0:t};else if(a&&!c)u(a,t)?n===0?m={from:a,to:t}:i?m={from:a,to:void 0}:m=void 0:h(t,a)?m={from:t,to:a}:m={from:a,to:t};else if(a&&c)if(u(a,t)&&u(c,t))i?m={from:a,to:c}:m=void 0;else if(u(a,t))m={from:a,to:n>0?void 0:t};else if(u(c,t))m={from:t,to:n>0?void 0:t};else if(h(t,a))m={from:t,to:c};else if(d(t,a))m={from:a,to:t};else if(d(t,c))m={from:a,to:t};else throw new Error("Invalid range");if(m?.from&&m?.to){const v=s.differenceInCalendarDays(m.to,m.from);r>0&&v>r?m={from:t,to:void 0}:n>1&&v<n&&(m={from:t,to:void 0})}return m}function Zoe(t,e,n=Ta){const r=Array.isArray(e)?e:[e];let i=t.from;const s=n.differenceInCalendarDays(t.to,t.from),a=Math.min(s,6);for(let c=0;c<=a;c++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function YN(t,e,n=Ta){return ul(t,e.from,!1,n)||ul(t,e.to,!1,n)||ul(e,t.from,!1,n)||ul(e,t.to,!1,n)}function eae(t,e,n=Ta){const r=Array.isArray(e)?e:[e];if(r.filter(c=>typeof c!="function").some(c=>typeof c=="boolean"?c:n.isDate(c)?ul(t,c,!1,n):Z3(c,n)?c.some(u=>ul(t,u,!1,n)):rb(c)?c.from&&c.to?YN(t,{from:c.from,to:c.to},n):!1:J3(c)?Zoe(t,c.dayOfWeek,n):nT(c)?n.isAfter(c.before,c.after)?YN(t,{from:n.addDays(c.after,1),to:n.addDays(c.before,-1)},n):fl(t.from,c,n)||fl(t.to,c,n):rT(c)||iT(c)?fl(t.from,c,n)||fl(t.to,c,n):!1))return!0;const a=r.filter(c=>typeof c=="function");if(a.length){let c=t.from;const u=n.differenceInCalendarDays(t.to,t.from);for(let d=0;d<=u;d++){if(a.some(h=>h(c)))return!0;c=n.addDays(c,1)}}return!1}function tae(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:s,onSelect:a}=t,[c,u]=ib(i,a?i:void 0),d=a?i:c;return{selected:d,select:(v,w,S)=>{const{min:k,max:_}=t,O=v?Joe(v,d,k,_,s,e):void 0;return r&&n&&O?.from&&O.to&&eae({from:O.from,to:O.to},n,e)&&(O.from=v,O.to=void 0),a||u(O),a?.(O,v,w,S),O},isSelected:v=>d&&ul(d,v,!1,e)}}function nae(t,e){const{selected:n,required:r,onSelect:i}=t,[s,a]=ib(n,i?n:void 0),c=i?n:s,{isSameDay:u}=e;return{selected:c,select:(m,v,w)=>{let S=m;return!r&&c&&c&&u(m,c)&&(S=void 0),i||a(S),i?.(S,m,v,w),S},isSelected:m=>c?u(c,m):!1}}function rae(t,e){const n=nae(t,e),r=Xoe(t,e),i=tae(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function eo(t,e){return t instanceof wi&&t.timeZone===e?t:new wi(t,e)}function ed(t,e,n){return eo(t,e)}function QN(t,e,n){return typeof t=="boolean"||typeof t=="function"?t:t instanceof Date?ed(t,e):Array.isArray(t)?t.map(r=>r instanceof Date?ed(r,e):r):rb(t)?{...t,from:t.from?eo(t.from,e):t.from,to:t.to?eo(t.to,e):t.to}:nT(t)?{before:ed(t.before,e),after:ed(t.after,e)}:rT(t)?{after:ed(t.after,e)}:iT(t)?{before:ed(t.before,e)}:t}function fx(t,e,n){return t&&(Array.isArray(t)?t.map(r=>QN(r,e)):QN(t,e))}function iae(t){let e=t;const n=e.timeZone;if(n&&(e={...t,timeZone:n},e.today&&(e.today=eo(e.today,n)),e.month&&(e.month=eo(e.month,n)),e.defaultMonth&&(e.defaultMonth=eo(e.defaultMonth,n)),e.startMonth&&(e.startMonth=eo(e.startMonth,n)),e.endMonth&&(e.endMonth=eo(e.endMonth,n)),e.mode==="single"&&e.selected?e.selected=eo(e.selected,n):e.mode==="multiple"&&e.selected?e.selected=e.selected?.map(rt=>eo(rt,n)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?eo(e.selected.from,n):e.selected.from,to:e.selected.to?eo(e.selected.to,n):e.selected.to}),e.disabled!==void 0&&(e.disabled=fx(e.disabled,n)),e.hidden!==void 0&&(e.hidden=fx(e.hidden,n)),e.modifiers)){const rt={};Object.keys(e.modifiers).forEach(Ae=>{rt[Ae]=fx(e.modifiers?.[Ae],n)}),e.modifiers=rt}const{components:r,formatters:i,labels:s,dateLib:a,locale:c,classNames:u}=z.useMemo(()=>{const rt={...Y3,...e.locale},Ae=e.broadcastCalendar?1:e.weekStartsOn,st=e.noonSafe&&e.timeZone?Ioe(e.timeZone,{weekStartsOn:Ae,locale:rt}):void 0,ut=e.dateLib&&st?{...st,...e.dateLib}:e.dateLib??st,$t=new Ns({locale:rt,weekStartsOn:Ae,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},ut);return{dateLib:$t,components:hoe(e.components),formatters:_oe(e.formatters),labels:Ooe(e.labels,$t.options),locale:rt,classNames:{...moe(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.noonSafe,e.components,e.formatters,e.labels,e.classNames]);e.today||(e={...e,today:a.today()});const{captionLayout:d,mode:h,navLayout:m,numberOfMonths:v=1,onDayBlur:w,onDayClick:S,onDayFocus:k,onDayKeyDown:_,onDayMouseEnter:O,onDayMouseLeave:B,onNextClick:W,onPrevClick:L,showWeekNumber:q,styles:U}=e,{formatCaption:R,formatDay:P,formatMonthDropdown:V,formatWeekNumber:H,formatWeekNumberHeader:G,formatWeekdayName:Q,formatYearDropdown:K}=i,je=Koe(e,a),{days:Re,months:oe,navStart:Ee,navEnd:ve,previousMonth:Qe,nextMonth:Ze,goToMonth:J}=je,Z=foe(Re,e,Ee,ve,a),{isSelected:ye,select:Te,selected:Oe}=rae(e,a)??{},{blur:Ue,focused:$e,isFocusTarget:bt,moveFocus:ze,setFocused:tn}=Qoe(e,je,Z,ye??(()=>!1),a),{labelDayButton:Bn,labelGridcell:Tt,labelGrid:gr,labelMonthDropdown:Ir,labelNav:ar,labelPrevious:Xr,labelNext:Ti,labelWeekday:Li,labelWeekNumber:hn,labelWeekNumberHeader:Xt,labelYearDropdown:un}=s,zi=z.useMemo(()=>Noe(a,e.ISOWeek,e.broadcastCalendar,e.today),[a,e.ISOWeek,e.broadcastCalendar,e.today]),lr=h!==void 0||S!==void 0,xn=z.useCallback(()=>{Qe&&(J(Qe),L?.(Qe))},[Qe,J,L]),er=z.useCallback(()=>{Ze&&(J(Ze),W?.(Ze))},[J,Ze,W]),yr=z.useCallback((rt,Ae)=>st=>{st.preventDefault(),st.stopPropagation(),tn(rt),!Ae.disabled&&(Te?.(rt.date,Ae,st),S?.(rt.date,Ae,st))},[Te,S,tn]),vr=z.useCallback((rt,Ae)=>st=>{tn(rt),k?.(rt.date,Ae,st)},[k,tn]),Pr=z.useCallback((rt,Ae)=>st=>{Ue(),w?.(rt.date,Ae,st)},[Ue,w]),cs=z.useCallback((rt,Ae)=>st=>{const ut={ArrowLeft:[st.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[st.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[st.shiftKey?"year":"week","after"],ArrowUp:[st.shiftKey?"year":"week","before"],PageUp:[st.shiftKey?"year":"month","before"],PageDown:[st.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(ut[st.key]){st.preventDefault(),st.stopPropagation();const[$t,yt]=ut[st.key];ze($t,yt)}_?.(rt.date,Ae,st)},[ze,_,e.dir]),Is=z.useCallback((rt,Ae)=>st=>{O?.(rt.date,Ae,st)},[O]),us=z.useCallback((rt,Ae)=>st=>{B?.(rt.date,Ae,st)},[B]),fi=z.useCallback(rt=>Ae=>{const st=Number(Ae.target.value),ut=a.setMonth(a.startOfMonth(rt),st);J(ut)},[a,J]),br=z.useCallback(rt=>Ae=>{const st=Number(Ae.target.value),ut=a.setYear(a.startOfMonth(rt),st);J(ut)},[a,J]),{className:Se,style:Ye}=z.useMemo(()=>({className:[u[ft.Root],e.className].filter(Boolean).join(" "),style:{...U?.[ft.Root],...e.style}}),[u,e.className,e.style,U]),Ce=poe(e),Nt=z.useRef(null);joe(Nt,!!e.animate,{classNames:u,months:oe,focused:$e,dateLib:a});const wt={dayPickerProps:e,selected:Oe,select:Te,isSelected:ye,months:oe,nextMonth:Ze,previousMonth:Qe,goToMonth:J,getModifiers:Z,components:r,classNames:u,styles:U,labels:s,formatters:i};return Be.createElement(X3.Provider,{value:wt},Be.createElement(r.Root,{rootRef:e.animate?Nt:void 0,className:Se,style:Ye,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...Ce},Be.createElement(r.Months,{className:u[ft.Months],style:U?.[ft.Months]},!e.hideNavigation&&!m&&Be.createElement(r.Nav,{"data-animated-nav":e.animate?"true":void 0,className:u[ft.Nav],style:U?.[ft.Nav],"aria-label":ar(),onPreviousClick:xn,onNextClick:er,previousMonth:Qe,nextMonth:Ze}),oe.map((rt,Ae)=>Be.createElement(r.Month,{"data-animated-month":e.animate?"true":void 0,className:u[ft.Month],style:U?.[ft.Month],key:Ae,displayIndex:Ae,calendarMonth:rt},m==="around"&&!e.hideNavigation&&Ae===0&&Be.createElement(r.PreviousMonthButton,{type:"button",className:u[ft.PreviousMonthButton],tabIndex:Qe?void 0:-1,"aria-disabled":Qe?void 0:!0,"aria-label":Xr(Qe),onClick:xn,"data-animated-button":e.animate?"true":void 0},Be.createElement(r.Chevron,{disabled:Qe?void 0:!0,className:u[ft.Chevron],orientation:e.dir==="rtl"?"right":"left"})),Be.createElement(r.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:u[ft.MonthCaption],style:U?.[ft.MonthCaption],calendarMonth:rt,displayIndex:Ae},d?.startsWith("dropdown")?Be.createElement(r.DropdownNav,{className:u[ft.Dropdowns],style:U?.[ft.Dropdowns]},(()=>{const st=d==="dropdown"||d==="dropdown-months"?Be.createElement(r.MonthsDropdown,{key:"month",className:u[ft.MonthsDropdown],"aria-label":Ir(),classNames:u,components:r,disabled:!!e.disableNavigation,onChange:fi(rt.date),options:Moe(rt.date,Ee,ve,i,a),style:U?.[ft.Dropdown],value:a.getMonth(rt.date)}):Be.createElement("span",{key:"month"},V(rt.date,a)),ut=d==="dropdown"||d==="dropdown-years"?Be.createElement(r.YearsDropdown,{key:"year",className:u[ft.YearsDropdown],"aria-label":un(a.options),classNames:u,components:r,disabled:!!e.disableNavigation,onChange:br(rt.date),options:Doe(Ee,ve,i,a,!!e.reverseYears),style:U?.[ft.Dropdown],value:a.getYear(rt.date)}):Be.createElement("span",{key:"year"},K(rt.date,a));return a.getMonthYearOrder()==="year-first"?[ut,st]:[st,ut]})(),Be.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},R(rt.date,a.options,a))):Be.createElement(r.CaptionLabel,{className:u[ft.CaptionLabel],role:"status","aria-live":"polite"},R(rt.date,a.options,a))),m==="around"&&!e.hideNavigation&&Ae===v-1&&Be.createElement(r.NextMonthButton,{type:"button",className:u[ft.NextMonthButton],tabIndex:Ze?void 0:-1,"aria-disabled":Ze?void 0:!0,"aria-label":Ti(Ze),onClick:er,"data-animated-button":e.animate?"true":void 0},Be.createElement(r.Chevron,{disabled:Ze?void 0:!0,className:u[ft.Chevron],orientation:e.dir==="rtl"?"left":"right"})),Ae===v-1&&m==="after"&&!e.hideNavigation&&Be.createElement(r.Nav,{"data-animated-nav":e.animate?"true":void 0,className:u[ft.Nav],style:U?.[ft.Nav],"aria-label":ar(),onPreviousClick:xn,onNextClick:er,previousMonth:Qe,nextMonth:Ze}),Be.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":h==="multiple"||h==="range","aria-label":gr(rt.date,a.options,a)||void 0,className:u[ft.MonthGrid],style:U?.[ft.MonthGrid]},!e.hideWeekdays&&Be.createElement(r.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:u[ft.Weekdays],style:U?.[ft.Weekdays]},q&&Be.createElement(r.WeekNumberHeader,{"aria-label":Xt(a.options),className:u[ft.WeekNumberHeader],style:U?.[ft.WeekNumberHeader],scope:"col"},G()),zi.map(st=>Be.createElement(r.Weekday,{"aria-label":Li(st,a.options,a),className:u[ft.Weekday],key:String(st),style:U?.[ft.Weekday],scope:"col"},Q(st,a.options,a)))),Be.createElement(r.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:u[ft.Weeks],style:U?.[ft.Weeks]},rt.weeks.map(st=>Be.createElement(r.Week,{className:u[ft.Week],key:st.weekNumber,style:U?.[ft.Week],week:st},q&&Be.createElement(r.WeekNumber,{week:st,style:U?.[ft.WeekNumber],"aria-label":hn(st.weekNumber,{locale:c}),className:u[ft.WeekNumber],scope:"row",role:"rowheader"},H(st.weekNumber,a)),st.days.map(ut=>{const{date:$t}=ut,yt=Z(ut);if(yt[Qn.focused]=!yt.hidden&&!!$e?.isEqualTo(ut),yt[Ro.selected]=ye?.($t)||yt.selected,rb(Oe)){const{from:Nn,to:qn}=Oe;yt[Ro.range_start]=!!(Nn&&qn&&a.isSameDay($t,Nn)),yt[Ro.range_end]=!!(Nn&&qn&&a.isSameDay($t,qn)),yt[Ro.range_middle]=ul(Oe,$t,!0,a)}const tr=Roe(yt,U,e.modifiersStyles),ji=doe(yt,u,e.modifiersClassNames),Bo=!lr&&!yt.hidden?Tt($t,yt,a.options,a):void 0;return Be.createElement(r.Day,{key:`${ut.isoDate}_${ut.displayMonthId}`,day:ut,modifiers:yt,className:ji.join(" "),style:tr,role:"gridcell","aria-selected":yt.selected||void 0,"aria-label":Bo,"data-day":ut.isoDate,"data-month":ut.outside?ut.dateMonthId:void 0,"data-selected":yt.selected||void 0,"data-disabled":yt.disabled||void 0,"data-hidden":yt.hidden||void 0,"data-outside":ut.outside||void 0,"data-focused":yt.focused||void 0,"data-today":yt.today||void 0},!yt.hidden&&lr?Be.createElement(r.DayButton,{className:u[ft.DayButton],style:U?.[ft.DayButton],type:"button",day:ut,modifiers:yt,disabled:!yt.focused&&yt.disabled||void 0,"aria-disabled":yt.focused&&yt.disabled||void 0,tabIndex:bt(ut)?0:-1,"aria-label":Bn($t,yt,a.options,a),onClick:yr(ut,yt),onBlur:Pr(ut,yt),onFocus:vr(ut,yt),onKeyDown:cs(ut,yt),onMouseEnter:Is(ut,yt),onMouseLeave:us(ut,yt)},P($t,a.options,a)):!yt.hidden&&P(ut.date,a.options,a))})))))))),e.footer&&Be.createElement(r.Footer,{className:u[ft.Footer],style:U?.[ft.Footer],role:"status","aria-live":"polite"},e.footer)))}const sae=`
  .rdp { --rdp-cell-size: 32px; --rdp-accent-color: #6366f1; --rdp-background-color: #27272a; margin: 0; }
  .rdp-button:hover:not([disabled]):not(.rdp-day_selected) { background-color: #27272a; }
  .rdp-day_selected { background-color: #4f46e5; font-weight: bold; color: white; }
  .rdp-day_today { color: #818cf8; font-weight: bold; }
`;function jE({date:t,onSelect:e,className:n,buttonClassName:r,placeholder:i="Pick a date",direction:s="bottom"}){const[a,c]=z.useState(!1),u=z.useRef(null);Be.useEffect(()=>{const h=m=>{u.current&&!u.current.contains(m.target)&&c(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{e(h),c(!1)};return M.jsxs("div",{className:jt("relative",n),ref:u,children:[M.jsx("style",{children:sae}),M.jsxs("button",{onClick:()=>c(!a),className:jt("flex items-center gap-2 bg-zinc-950 border border-zinc-700 rounded-md px-3 py-1.5 text-xs hover:border-zinc-600 focus:outline-none focus:border-indigo-500 transition-colors text-zinc-300 w-full justify-start",!t&&"text-zinc-500",r),children:[M.jsx(QD,{size:14}),t?Mo(t,"MMM d, yyyy"):M.jsx("span",{children:i})]}),a&&M.jsx("div",{className:jt("absolute z-50 p-2 rounded-lg border border-zinc-800 bg-zinc-950 shadow-xl animate-in fade-in zoom-in-95 left-0",s==="top"?"bottom-full mb-2":"mt-1"),children:M.jsx(iae,{mode:"single",selected:t,onSelect:d,styles:{head_cell:{color:"#a1a1aa"},caption:{color:"#e4e4e7"},day:{color:"#e4e4e7"}},modifiersClassNames:{selected:"bg-indigo-600 text-white rounded-md",today:"text-indigo-400 font-bold"}})})]})}function oae({value:t,onChange:e,options:n,className:r}){const[i,s]=Be.useState(!1),a=Be.useRef(null);Be.useEffect(()=>{const u=d=>{a.current&&!a.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const c=n.find(u=>u.value===t)||n[0];return M.jsxs("div",{className:jt("relative",r),ref:a,children:[M.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 bg-white dark:bg-zinc-900 text-zinc-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700/50 rounded-lg px-3 py-1.5 text-xs font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 hover:border-gray-400 dark:hover:border-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",children:[M.jsx("span",{className:"text-zinc-500 dark:text-zinc-500 font-normal",children:"Impact:"}),M.jsx("span",{className:jt("capitalize",t==="high"?"text-indigo-600 dark:text-indigo-400":t==="medium"?"text-sky-600 dark:text-sky-400":"text-zinc-500 dark:text-zinc-400"),children:c.label}),M.jsx(B6,{size:12,className:jt("text-zinc-500 dark:text-zinc-500 transition-transform duration-200",i?"rotate-180":"")})]}),i&&M.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 rounded-lg border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900/95 backdrop-blur-xl p-1 shadow-2xl animate-in fade-in slide-in-from-bottom-2 zoom-in-95 duration-200 z-[100]",children:n.map(u=>M.jsxs("button",{type:"button",onClick:()=>{e(u.value),s(!1)},className:jt("flex w-full items-center justify-between px-2 py-1.5 text-xs text-left rounded-md transition-colors",u.value===t?"bg-gray-100 dark:bg-zinc-800 text-indigo-600 dark:text-indigo-400 font-medium":"text-zinc-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800/50 hover:text-zinc-900 dark:hover:text-zinc-200"),children:[M.jsx("span",{children:u.label}),u.value===t&&M.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-indigo-500"})]},u.value))})]})}const aae=[{id:"bug-slayer",name:"The Bug Slayer",description:"Structured format for capturing complex bug fixes.",icon:"Bug",content:{type:"doc",content:[{type:"heading",attrs:{level:3},content:[{type:"text",text:" The Bug Slayer"}]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Problem: "}]},{type:"placeholderNode",attrs:{label:"What was broken? Describe the bug or issue..."},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Root Cause: "}]},{type:"placeholderNode",attrs:{label:"Why was it broken? What caused the issue?"},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"The Fix: "}]},{type:"placeholderNode",attrs:{label:"How did you fix it? What solution did you implement?"},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Impact: "}]},{type:"placeholderNode",attrs:{label:"Why does this matter? What was the impact?"},content:[]}]}},{id:"feature-builder",name:"The Feature Builder",description:"Track progress and challenges on new features.",icon:"Hammer",content:{type:"doc",content:[{type:"heading",attrs:{level:3},content:[{type:"text",text:" The Feature Builder"}]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Goal: "}]},{type:"placeholderNode",attrs:{label:"What are we building? What is the objective?"},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Challenges: "}]},{type:"placeholderNode",attrs:{label:"What was hard? What obstacles did you face?"},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Outcome: "}]},{type:"placeholderNode",attrs:{label:"What is the result? What did you accomplish?"},content:[]}]}},{id:"knowledge-sponge",name:"The Knowledge Sponge",description:"Capture new concepts or learnings.",icon:"Brain",content:{type:"doc",content:[{type:"heading",attrs:{level:3},content:[{type:"text",text:" The Knowledge Sponge"}]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Concept: "}]},{type:"placeholderNode",attrs:{label:"What did you learn? What is the new concept?"},content:[]},{type:"paragraph",content:[{type:"text",marks:[{type:"bold"}],text:"Application: "}]},{type:"placeholderNode",attrs:{label:"How will you use it? Where can this be applied?"},content:[]}]}}];function lae({onSelect:t,onCancel:e}){const[n,r]=z.useState(""),[i,s]=z.useState(!1),{user:a}=pf(),c=a?a.uid:"guest";z.useEffect(()=>(s(!0),()=>s(!1)),[]);const u=v0(()=>sn.templates.where("userId").equals(c).toArray(),[c])||[],d={Bug:L6,Hammer:aU,Brain:I6};return i?Qd.createPortal(M.jsxs(Vr,{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200",children:[M.jsxs("div",{className:"w-full max-w-lg overflow-hidden rounded-card border border-zinc-800 bg-zinc-950 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[85vh] flex flex-col",children:[M.jsxs("div",{className:"flex items-center border-b border-zinc-800 px-3 shrink-0",children:[M.jsx(Mc,{className:"mr-2 h-4 w-4 text-amber-500"}),M.jsx(Vr.Input,{value:n,onValueChange:r,placeholder:"Choose a template...",className:"flex h-12 w-full bg-transparent py-3 text-sm outline-none placeholder:text-zinc-500 text-zinc-100"})]}),M.jsxs(Vr.List,{className:"overflow-y-auto p-2 scrollbar-hide flex-1",children:[M.jsx(Vr.Empty,{className:"py-6 text-center text-sm text-zinc-500",children:"No templates found."}),M.jsx(Vr.Group,{heading:"Standard Library",className:"px-2 py-1.5 text-xs font-medium text-zinc-500 mb-1",children:aae.map(h=>{const m=d[h.icon]||Mc;return M.jsxs(Vr.Item,{onSelect:()=>t(h.content),className:"relative flex cursor-default select-none items-center rounded-sm px-2 py-2.5 text-sm outline-none data-[selected=true]:bg-zinc-800 data-[selected=true]:text-zinc-50 text-zinc-300 group transition-colors",children:[M.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border border-zinc-800 bg-zinc-900 mr-3",children:M.jsx(m,{className:"h-4 w-4 text-zinc-400 group-data-[selected=true]:text-text-secondary"})}),M.jsxs("div",{className:"flex flex-col gap-0.5",children:[M.jsx("span",{className:"font-medium",children:h.name}),M.jsx("span",{className:"text-[10px] text-zinc-500",children:h.description})]})]},h.id)})}),u.length>0&&M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"my-2 h-px bg-zinc-800 mx-2"}),M.jsx(Vr.Group,{heading:"My Templates",className:"px-2 py-1.5 text-xs font-medium text-zinc-500 mb-1",children:u.map(h=>M.jsxs(Vr.Item,{onSelect:()=>t(h.content),className:"relative flex cursor-default select-none items-center rounded-sm px-2 py-2.5 text-sm outline-none data-[selected=true]:bg-zinc-800 data-[selected=true]:text-zinc-50 text-zinc-300 group transition-colors",children:[M.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border border-zinc-800 bg-zinc-900 mr-3",children:M.jsx(Mc,{className:"h-4 w-4 text-amber-500/70"})}),M.jsxs("div",{className:"flex flex-col gap-0.5",children:[M.jsx("span",{className:"font-medium",children:h.name}),M.jsx("span",{className:"text-[10px] text-zinc-500",children:"Custom Template"})]}),M.jsx("button",{onClick:m=>{m.stopPropagation(),confirm("Delete template?")&&sn.templates.delete(h.id)},className:"ml-auto opacity-0 group-hover:opacity-100 p-1 hover:text-red-400",children:M.jsx(d0,{size:12})})]},h.id))})]})]}),M.jsxs("div",{className:"border-t border-zinc-800 p-2 bg-zinc-900/50 flex justify-between items-center text-[10px] text-zinc-500 px-3",children:[M.jsxs("span",{children:["Use ",M.jsx("b",{children:""})," to navigate"]}),M.jsx("span",{className:"cursor-pointer hover:text-zinc-300",onClick:e,children:"Esc to cancel"})]})]}),M.jsx("div",{className:"fixed inset-0 -z-10",onClick:e})]}),document.body):null}const aT=Pi.create({name:"placeholderNode",group:"block",content:"inline*",defining:!0,addAttributes(){return{label:{default:"Fill in...",parseHTML:t=>t.getAttribute("data-placeholder-label"),renderHTML:t=>({"data-placeholder-label":t.label})}}},parseHTML(){return[{tag:"div[data-placeholder-node]"}]},renderHTML({node:t,HTMLAttributes:e}){return["div",Vn(e,{"data-placeholder-node":"","data-placeholder-label":t.attrs.label,class:"placeholder-node"}),0]},addProseMirrorPlugins(){return[new An({key:new On("placeholderNodePlugin"),props:{decorations:t=>{const e=[],{doc:n}=t;return n.descendants((r,i)=>{r.type.name==="placeholderNode"&&r.textContent.length===0&&e.push(ci.node(i,i+r.nodeSize,{class:"placeholder-node-empty"}))}),jn.create(n,e)},handleKeyDown:(t,e)=>{if(e.key==="Tab"){const{state:n,dispatch:r}=t,{selection:i}=n,{$from:s}=i;if(e.shiftKey){let a=null;if(n.doc.descendants((c,u)=>{c.type.name==="placeholderNode"&&u<s.pos&&(a=u)}),a!==null){e.preventDefault();const c=n.tr.setSelection(n.selection.constructor.near(n.doc.resolve(a+1)));return r(c),!0}}else{let a=null,c=!1;if(n.doc.descendants((u,d)=>{if(c)return!1;if(u.type.name==="placeholderNode"&&d>s.pos)return a=d,c=!0,!1}),a!==null){e.preventDefault();const u=n.tr.setSelection(n.selection.constructor.near(n.doc.resolve(a+1)));return r(u),!0}}}return!1}}})]}});var as="top",uo="bottom",fo="right",ls="left",lT="auto",jm=[as,uo,fo,ls],qd="start",lm="end",cae="clippingParents",dj="viewport",sp="popper",uae="reference",XN=jm.reduce(function(t,e){return t.concat([e+"-"+qd,e+"-"+lm])},[]),hj=[].concat(jm,[lT]).reduce(function(t,e){return t.concat([e,e+"-"+qd,e+"-"+lm])},[]),fae="beforeRead",dae="read",hae="afterRead",pae="beforeMain",mae="main",gae="afterMain",yae="beforeWrite",vae="write",bae="afterWrite",wae=[fae,dae,hae,pae,mae,gae,yae,vae,bae];function Sa(t){return t?(t.nodeName||"").toLowerCase():null}function Ds(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function lf(t){var e=Ds(t).Element;return t instanceof e||t instanceof Element}function lo(t){var e=Ds(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function cT(t){if(typeof ShadowRoot>"u")return!1;var e=Ds(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function xae(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!lo(s)||!Sa(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var c=i[a];c===!1?s.removeAttribute(a):s.setAttribute(a,c===!0?"":c)}))})}function Eae(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=a.reduce(function(u,d){return u[d]="",u},{});!lo(i)||!Sa(i)||(Object.assign(i.style,c),Object.keys(s).forEach(function(u){i.removeAttribute(u)}))})}}const pj={name:"applyStyles",enabled:!0,phase:"write",fn:xae,effect:Eae,requires:["computeStyles"]};function ga(t){return t.split("-")[0]}var Ku=Math.max,a0=Math.min,$d=Math.round;function VE(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function mj(){return!/^((?!chrome|android).)*safari/i.test(VE())}function Wd(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&lo(t)&&(i=t.offsetWidth>0&&$d(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&$d(r.height)/t.offsetHeight||1);var a=lf(t)?Ds(t):window,c=a.visualViewport,u=!mj()&&n,d=(r.left+(u&&c?c.offsetLeft:0))/i,h=(r.top+(u&&c?c.offsetTop:0))/s,m=r.width/i,v=r.height/s;return{width:m,height:v,top:h,right:d+m,bottom:h+v,left:d,x:d,y:h}}function uT(t){var e=Wd(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function gj(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&cT(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function El(t){return Ds(t).getComputedStyle(t)}function Sae(t){return["table","td","th"].indexOf(Sa(t))>=0}function iu(t){return((lf(t)?t.ownerDocument:t.document)||window.document).documentElement}function sb(t){return Sa(t)==="html"?t:t.assignedSlot||t.parentNode||(cT(t)?t.host:null)||iu(t)}function JN(t){return!lo(t)||El(t).position==="fixed"?null:t.offsetParent}function _ae(t){var e=/firefox/i.test(VE()),n=/Trident/i.test(VE());if(n&&lo(t)){var r=El(t);if(r.position==="fixed")return null}var i=sb(t);for(cT(i)&&(i=i.host);lo(i)&&["html","body"].indexOf(Sa(i))<0;){var s=El(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Vm(t){for(var e=Ds(t),n=JN(t);n&&Sae(n)&&El(n).position==="static";)n=JN(n);return n&&(Sa(n)==="html"||Sa(n)==="body"&&El(n).position==="static")?e:n||_ae(t)||e}function fT(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ip(t,e,n){return Ku(t,a0(e,n))}function Tae(t,e,n){var r=Ip(t,e,n);return r>n?n:r}function yj(){return{top:0,right:0,bottom:0,left:0}}function vj(t){return Object.assign({},yj(),t)}function bj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var kae=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,vj(typeof e!="number"?e:bj(e,jm))};function Cae(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,c=ga(n.placement),u=fT(c),d=[ls,fo].indexOf(c)>=0,h=d?"height":"width";if(!(!s||!a)){var m=kae(i.padding,n),v=uT(s),w=u==="y"?as:ls,S=u==="y"?uo:fo,k=n.rects.reference[h]+n.rects.reference[u]-a[u]-n.rects.popper[h],_=a[u]-n.rects.reference[u],O=Vm(s),B=O?u==="y"?O.clientHeight||0:O.clientWidth||0:0,W=k/2-_/2,L=m[w],q=B-v[h]-m[S],U=B/2-v[h]/2+W,R=Ip(L,U,q),P=u;n.modifiersData[r]=(e={},e[P]=R,e.centerOffset=R-U,e)}}function Aae(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||gj(e.elements.popper,i)&&(e.elements.arrow=i))}const Oae={name:"arrow",enabled:!0,phase:"main",fn:Cae,effect:Aae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Kd(t){return t.split("-")[1]}var Mae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rae(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:$d(n*i)/i||0,y:$d(r*i)/i||0}}function ZN(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,c=t.position,u=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,m=t.isFixed,v=a.x,w=v===void 0?0:v,S=a.y,k=S===void 0?0:S,_=typeof h=="function"?h({x:w,y:k}):{x:w,y:k};w=_.x,k=_.y;var O=a.hasOwnProperty("x"),B=a.hasOwnProperty("y"),W=ls,L=as,q=window;if(d){var U=Vm(n),R="clientHeight",P="clientWidth";if(U===Ds(n)&&(U=iu(n),El(U).position!=="static"&&c==="absolute"&&(R="scrollHeight",P="scrollWidth")),U=U,i===as||(i===ls||i===fo)&&s===lm){L=uo;var V=m&&U===q&&q.visualViewport?q.visualViewport.height:U[R];k-=V-r.height,k*=u?1:-1}if(i===ls||(i===as||i===uo)&&s===lm){W=fo;var H=m&&U===q&&q.visualViewport?q.visualViewport.width:U[P];w-=H-r.width,w*=u?1:-1}}var G=Object.assign({position:c},d&&Mae),Q=h===!0?Rae({x:w,y:k},Ds(n)):{x:w,y:k};if(w=Q.x,k=Q.y,u){var K;return Object.assign({},G,(K={},K[L]=B?"0":"",K[W]=O?"0":"",K.transform=(q.devicePixelRatio||1)<=1?"translate("+w+"px, "+k+"px)":"translate3d("+w+"px, "+k+"px, 0)",K))}return Object.assign({},G,(e={},e[L]=B?k+"px":"",e[W]=O?w+"px":"",e.transform="",e))}function Nae(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,c=n.roundOffsets,u=c===void 0?!0:c,d={placement:ga(e.placement),variation:Kd(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ZN(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ZN(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Dae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nae,data:{}};var vy={passive:!0};function Iae(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,c=a===void 0?!0:a,u=Ds(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(h){h.addEventListener("scroll",n.update,vy)}),c&&u.addEventListener("resize",n.update,vy),function(){s&&d.forEach(function(h){h.removeEventListener("scroll",n.update,vy)}),c&&u.removeEventListener("resize",n.update,vy)}}const Pae={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Iae,data:{}};var Lae={left:"right",right:"left",bottom:"top",top:"bottom"};function Uy(t){return t.replace(/left|right|bottom|top/g,function(e){return Lae[e]})}var zae={start:"end",end:"start"};function eD(t){return t.replace(/start|end/g,function(e){return zae[e]})}function dT(t){var e=Ds(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function hT(t){return Wd(iu(t)).left+dT(t).scrollLeft}function jae(t,e){var n=Ds(t),r=iu(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,c=0,u=0;if(i){s=i.width,a=i.height;var d=mj();(d||!d&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:c+hT(t),y:u}}function Vae(t){var e,n=iu(t),r=dT(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Ku(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Ku(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-r.scrollLeft+hT(t),u=-r.scrollTop;return El(i||n).direction==="rtl"&&(c+=Ku(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:c,y:u}}function pT(t){var e=El(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function wj(t){return["html","body","#document"].indexOf(Sa(t))>=0?t.ownerDocument.body:lo(t)&&pT(t)?t:wj(sb(t))}function Pp(t,e){var n;e===void 0&&(e=[]);var r=wj(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Ds(r),a=i?[s].concat(s.visualViewport||[],pT(r)?r:[]):r,c=e.concat(a);return i?c:c.concat(Pp(sb(a)))}function BE(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Bae(t,e){var n=Wd(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function tD(t,e,n){return e===dj?BE(jae(t,n)):lf(e)?Bae(e,n):BE(Vae(iu(t)))}function Uae(t){var e=Pp(sb(t)),n=["absolute","fixed"].indexOf(El(t).position)>=0,r=n&&lo(t)?Vm(t):t;return lf(r)?e.filter(function(i){return lf(i)&&gj(i,r)&&Sa(i)!=="body"}):[]}function Fae(t,e,n,r){var i=e==="clippingParents"?Uae(t):[].concat(e),s=[].concat(i,[n]),a=s[0],c=s.reduce(function(u,d){var h=tD(t,d,r);return u.top=Ku(h.top,u.top),u.right=a0(h.right,u.right),u.bottom=a0(h.bottom,u.bottom),u.left=Ku(h.left,u.left),u},tD(t,a,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function xj(t){var e=t.reference,n=t.element,r=t.placement,i=r?ga(r):null,s=r?Kd(r):null,a=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,u;switch(i){case as:u={x:a,y:e.y-n.height};break;case uo:u={x:a,y:e.y+e.height};break;case fo:u={x:e.x+e.width,y:c};break;case ls:u={x:e.x-n.width,y:c};break;default:u={x:e.x,y:e.y}}var d=i?fT(i):null;if(d!=null){var h=d==="y"?"height":"width";switch(s){case qd:u[d]=u[d]-(e[h]/2-n[h]/2);break;case lm:u[d]=u[d]+(e[h]/2-n[h]/2);break}}return u}function cm(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,c=n.boundary,u=c===void 0?cae:c,d=n.rootBoundary,h=d===void 0?dj:d,m=n.elementContext,v=m===void 0?sp:m,w=n.altBoundary,S=w===void 0?!1:w,k=n.padding,_=k===void 0?0:k,O=vj(typeof _!="number"?_:bj(_,jm)),B=v===sp?uae:sp,W=t.rects.popper,L=t.elements[S?B:v],q=Fae(lf(L)?L:L.contextElement||iu(t.elements.popper),u,h,a),U=Wd(t.elements.reference),R=xj({reference:U,element:W,placement:i}),P=BE(Object.assign({},W,R)),V=v===sp?P:U,H={top:q.top-V.top+O.top,bottom:V.bottom-q.bottom+O.bottom,left:q.left-V.left+O.left,right:V.right-q.right+O.right},G=t.modifiersData.offset;if(v===sp&&G){var Q=G[i];Object.keys(H).forEach(function(K){var je=[fo,uo].indexOf(K)>=0?1:-1,Re=[as,uo].indexOf(K)>=0?"y":"x";H[K]+=Q[Re]*je})}return H}function Hae(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,c=n.flipVariations,u=n.allowedAutoPlacements,d=u===void 0?hj:u,h=Kd(r),m=h?c?XN:XN.filter(function(S){return Kd(S)===h}):jm,v=m.filter(function(S){return d.indexOf(S)>=0});v.length===0&&(v=m);var w=v.reduce(function(S,k){return S[k]=cm(t,{placement:k,boundary:i,rootBoundary:s,padding:a})[ga(k)],S},{});return Object.keys(w).sort(function(S,k){return w[S]-w[k]})}function qae(t){if(ga(t)===lT)return[];var e=Uy(t);return[eD(t),e,eD(e)]}function $ae(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,c=a===void 0?!0:a,u=n.fallbackPlacements,d=n.padding,h=n.boundary,m=n.rootBoundary,v=n.altBoundary,w=n.flipVariations,S=w===void 0?!0:w,k=n.allowedAutoPlacements,_=e.options.placement,O=ga(_),B=O===_,W=u||(B||!S?[Uy(_)]:qae(_)),L=[_].concat(W).reduce(function(Te,Oe){return Te.concat(ga(Oe)===lT?Hae(e,{placement:Oe,boundary:h,rootBoundary:m,padding:d,flipVariations:S,allowedAutoPlacements:k}):Oe)},[]),q=e.rects.reference,U=e.rects.popper,R=new Map,P=!0,V=L[0],H=0;H<L.length;H++){var G=L[H],Q=ga(G),K=Kd(G)===qd,je=[as,uo].indexOf(Q)>=0,Re=je?"width":"height",oe=cm(e,{placement:G,boundary:h,rootBoundary:m,altBoundary:v,padding:d}),Ee=je?K?fo:ls:K?uo:as;q[Re]>U[Re]&&(Ee=Uy(Ee));var ve=Uy(Ee),Qe=[];if(s&&Qe.push(oe[Q]<=0),c&&Qe.push(oe[Ee]<=0,oe[ve]<=0),Qe.every(function(Te){return Te})){V=G,P=!1;break}R.set(G,Qe)}if(P)for(var Ze=S?3:1,J=function(Oe){var Ue=L.find(function($e){var bt=R.get($e);if(bt)return bt.slice(0,Oe).every(function(ze){return ze})});if(Ue)return V=Ue,"break"},Z=Ze;Z>0;Z--){var ye=J(Z);if(ye==="break")break}e.placement!==V&&(e.modifiersData[r]._skip=!0,e.placement=V,e.reset=!0)}}const Wae={name:"flip",enabled:!0,phase:"main",fn:$ae,requiresIfExists:["offset"],data:{_skip:!1}};function nD(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function rD(t){return[as,fo,uo,ls].some(function(e){return t[e]>=0})}function Kae(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=cm(e,{elementContext:"reference"}),c=cm(e,{altBoundary:!0}),u=nD(a,r),d=nD(c,i,s),h=rD(u),m=rD(d);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":m})}const Gae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Kae};function Yae(t,e,n){var r=ga(t),i=[ls,as].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],c=s[1];return a=a||0,c=(c||0)*i,[ls,fo].indexOf(r)>=0?{x:c,y:a}:{x:a,y:c}}function Qae(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,a=hj.reduce(function(h,m){return h[m]=Yae(m,e.rects,s),h},{}),c=a[e.placement],u=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}const Xae={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qae};function Jae(t){var e=t.state,n=t.name;e.modifiersData[n]=xj({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Zae={name:"popperOffsets",enabled:!0,phase:"read",fn:Jae,data:{}};function ele(t){return t==="x"?"y":"x"}function tle(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,c=a===void 0?!1:a,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.padding,v=n.tether,w=v===void 0?!0:v,S=n.tetherOffset,k=S===void 0?0:S,_=cm(e,{boundary:u,rootBoundary:d,padding:m,altBoundary:h}),O=ga(e.placement),B=Kd(e.placement),W=!B,L=fT(O),q=ele(L),U=e.modifiersData.popperOffsets,R=e.rects.reference,P=e.rects.popper,V=typeof k=="function"?k(Object.assign({},e.rects,{placement:e.placement})):k,H=typeof V=="number"?{mainAxis:V,altAxis:V}:Object.assign({mainAxis:0,altAxis:0},V),G=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Q={x:0,y:0};if(U){if(s){var K,je=L==="y"?as:ls,Re=L==="y"?uo:fo,oe=L==="y"?"height":"width",Ee=U[L],ve=Ee+_[je],Qe=Ee-_[Re],Ze=w?-P[oe]/2:0,J=B===qd?R[oe]:P[oe],Z=B===qd?-P[oe]:-R[oe],ye=e.elements.arrow,Te=w&&ye?uT(ye):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:yj(),Ue=Oe[je],$e=Oe[Re],bt=Ip(0,R[oe],Te[oe]),ze=W?R[oe]/2-Ze-bt-Ue-H.mainAxis:J-bt-Ue-H.mainAxis,tn=W?-R[oe]/2+Ze+bt+$e+H.mainAxis:Z+bt+$e+H.mainAxis,Bn=e.elements.arrow&&Vm(e.elements.arrow),Tt=Bn?L==="y"?Bn.clientTop||0:Bn.clientLeft||0:0,gr=(K=G?.[L])!=null?K:0,Ir=Ee+ze-gr-Tt,ar=Ee+tn-gr,Xr=Ip(w?a0(ve,Ir):ve,Ee,w?Ku(Qe,ar):Qe);U[L]=Xr,Q[L]=Xr-Ee}if(c){var Ti,Li=L==="x"?as:ls,hn=L==="x"?uo:fo,Xt=U[q],un=q==="y"?"height":"width",zi=Xt+_[Li],lr=Xt-_[hn],xn=[as,ls].indexOf(O)!==-1,er=(Ti=G?.[q])!=null?Ti:0,yr=xn?zi:Xt-R[un]-P[un]-er+H.altAxis,vr=xn?Xt+R[un]+P[un]-er-H.altAxis:lr,Pr=w&&xn?Tae(yr,Xt,vr):Ip(w?yr:zi,Xt,w?vr:lr);U[q]=Pr,Q[q]=Pr-Xt}e.modifiersData[r]=Q}}const nle={name:"preventOverflow",enabled:!0,phase:"main",fn:tle,requiresIfExists:["offset"]};function rle(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ile(t){return t===Ds(t)||!lo(t)?dT(t):rle(t)}function sle(t){var e=t.getBoundingClientRect(),n=$d(e.width)/t.offsetWidth||1,r=$d(e.height)/t.offsetHeight||1;return n!==1||r!==1}function ole(t,e,n){n===void 0&&(n=!1);var r=lo(e),i=lo(e)&&sle(e),s=iu(e),a=Wd(t,i,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Sa(e)!=="body"||pT(s))&&(c=ile(e)),lo(e)?(u=Wd(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=hT(s))),{x:a.left+c.scrollLeft-u.x,y:a.top+c.scrollTop-u.y,width:a.width,height:a.height}}function ale(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(c){if(!n.has(c)){var u=e.get(c);u&&i(u)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function lle(t){var e=ale(t);return wae.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function cle(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ule(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var iD={placement:"bottom",modifiers:[],strategy:"absolute"};function sD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function fle(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?iD:i;return function(c,u,d){d===void 0&&(d=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},iD,s),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},m=[],v=!1,w={state:h,setOptions:function(O){var B=typeof O=="function"?O(h.options):O;k(),h.options=Object.assign({},s,h.options,B),h.scrollParents={reference:lf(c)?Pp(c):c.contextElement?Pp(c.contextElement):[],popper:Pp(u)};var W=lle(ule([].concat(r,h.options.modifiers)));return h.orderedModifiers=W.filter(function(L){return L.enabled}),S(),w.update()},forceUpdate:function(){if(!v){var O=h.elements,B=O.reference,W=O.popper;if(sD(B,W)){h.rects={reference:ole(B,Vm(W),h.options.strategy==="fixed"),popper:uT(W)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(H){return h.modifiersData[H.name]=Object.assign({},H.data)});for(var L=0;L<h.orderedModifiers.length;L++){if(h.reset===!0){h.reset=!1,L=-1;continue}var q=h.orderedModifiers[L],U=q.fn,R=q.options,P=R===void 0?{}:R,V=q.name;typeof U=="function"&&(h=U({state:h,options:P,name:V,instance:w})||h)}}}},update:cle(function(){return new Promise(function(_){w.forceUpdate(),_(h)})}),destroy:function(){k(),v=!0}};if(!sD(c,u))return w;w.setOptions(d).then(function(_){!v&&d.onFirstUpdate&&d.onFirstUpdate(_)});function S(){h.orderedModifiers.forEach(function(_){var O=_.name,B=_.options,W=B===void 0?{}:B,L=_.effect;if(typeof L=="function"){var q=L({state:h,name:O,instance:w,options:W}),U=function(){};m.push(q||U)}})}function k(){m.forEach(function(_){return _()}),m=[]}return w}}var dle=[Pae,Zae,Dae,pj,Xae,Wae,nle,Oae,Gae],hle=fle({defaultModifiers:dle}),ple="tippy-box",Ej="tippy-content",mle="tippy-backdrop",Sj="tippy-arrow",_j="tippy-svg-arrow",Ru={passive:!0,capture:!0},Tj=function(){return document.body};function dx(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function mT(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function kj(t,e){return typeof t=="function"?t.apply(void 0,e):t}function oD(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function gle(t){return t.split(/\s+/).filter(Boolean)}function dd(t){return[].concat(t)}function aD(t,e){t.indexOf(e)===-1&&t.push(e)}function yle(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function vle(t){return t.split("-")[0]}function l0(t){return[].slice.call(t)}function lD(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Lp(){return document.createElement("div")}function ob(t){return["Element","Fragment"].some(function(e){return mT(t,e)})}function ble(t){return mT(t,"NodeList")}function wle(t){return mT(t,"MouseEvent")}function xle(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Ele(t){return ob(t)?[t]:ble(t)?l0(t):Array.isArray(t)?t:l0(document.querySelectorAll(t))}function hx(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function cD(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Sle(t){var e,n=dd(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _le(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,a=i.popperState,c=i.props,u=c.interactiveBorder,d=vle(a.placement),h=a.modifiersData.offset;if(!h)return!0;var m=d==="bottom"?h.top.y:0,v=d==="top"?h.bottom.y:0,w=d==="right"?h.left.x:0,S=d==="left"?h.right.x:0,k=s.top-r+m>u,_=r-s.bottom-v>u,O=s.left-n+w>u,B=n-s.right-S>u;return k||_||O||B})}function px(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function uD(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var ia={isTouch:!1},fD=0;function Tle(){ia.isTouch||(ia.isTouch=!0,window.performance&&document.addEventListener("mousemove",Cj))}function Cj(){var t=performance.now();t-fD<20&&(ia.isTouch=!1,document.removeEventListener("mousemove",Cj)),fD=t}function kle(){var t=document.activeElement;if(xle(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Cle(){document.addEventListener("touchstart",Tle,Ru),window.addEventListener("blur",kle)}var Ale=typeof window<"u"&&typeof document<"u",Ole=Ale?!!window.msCrypto:!1,Mle={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Rle={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},No=Object.assign({appendTo:Tj,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Mle,Rle),Nle=Object.keys(No),Dle=function(e){var n=Object.keys(e);n.forEach(function(r){No[r]=e[r]})};function Aj(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,a=i.defaultValue;if(s){var c;r[s]=t[s]!==void 0?t[s]:(c=No[s])!=null?c:a}return r},{});return Object.assign({},t,n)}function Ile(t,e){var n=e?Object.keys(Aj(Object.assign({},No,{plugins:e}))):Nle,r=n.reduce(function(i,s){var a=(t.getAttribute("data-tippy-"+s)||"").trim();if(!a)return i;if(s==="content")i[s]=a;else try{i[s]=JSON.parse(a)}catch{i[s]=a}return i},{});return r}function dD(t,e){var n=Object.assign({},e,{content:kj(e.content,[t])},e.ignoreAttributes?{}:Ile(t,e.plugins));return n.aria=Object.assign({},No.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Ple=function(){return"innerHTML"};function UE(t,e){t[Ple()]=e}function hD(t){var e=Lp();return t===!0?e.className=Sj:(e.className=_j,ob(t)?e.appendChild(t):UE(e,t)),e}function pD(t,e){ob(e.content)?(UE(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?UE(t,e.content):t.textContent=e.content)}function FE(t){var e=t.firstElementChild,n=l0(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Ej)}),arrow:n.find(function(r){return r.classList.contains(Sj)||r.classList.contains(_j)}),backdrop:n.find(function(r){return r.classList.contains(mle)})}}function Oj(t){var e=Lp(),n=Lp();n.className=ple,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Lp();r.className=Ej,r.setAttribute("data-state","hidden"),pD(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,a){var c=FE(e),u=c.box,d=c.content,h=c.arrow;a.theme?u.setAttribute("data-theme",a.theme):u.removeAttribute("data-theme"),typeof a.animation=="string"?u.setAttribute("data-animation",a.animation):u.removeAttribute("data-animation"),a.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?u.setAttribute("role",a.role):u.removeAttribute("role"),(s.content!==a.content||s.allowHTML!==a.allowHTML)&&pD(d,t.props),a.arrow?h?s.arrow!==a.arrow&&(u.removeChild(h),u.appendChild(hD(a.arrow))):u.appendChild(hD(a.arrow)):h&&u.removeChild(h)}return{popper:e,onUpdate:i}}Oj.$$tippy=!0;var Lle=1,by=[],mx=[];function zle(t,e){var n=dD(t,Object.assign({},No,Aj(lD(e)))),r,i,s,a=!1,c=!1,u=!1,d=!1,h,m,v,w=[],S=oD(Ir,n.interactiveDebounce),k,_=Lle++,O=null,B=yle(n.plugins),W={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},L={id:_,reference:t,popper:Lp(),popperInstance:O,props:n,state:W,plugins:B,clearDelayTimeouts:yr,setProps:vr,setContent:Pr,show:cs,hide:Is,hideWithInteractivity:us,enable:xn,disable:er,unmount:fi,destroy:br};if(!n.render)return L;var q=n.render(L),U=q.popper,R=q.onUpdate;U.setAttribute("data-tippy-root",""),U.id="tippy-"+L.id,L.popper=U,t._tippy=L,U._tippy=L;var P=B.map(function(Se){return Se.fn(L)}),V=t.hasAttribute("aria-expanded");return Bn(),Ze(),Ee(),ve("onCreate",[L]),n.showOnCreate&&zi(),U.addEventListener("mouseenter",function(){L.props.interactive&&L.state.isVisible&&L.clearDelayTimeouts()}),U.addEventListener("mouseleave",function(){L.props.interactive&&L.props.trigger.indexOf("mouseenter")>=0&&je().addEventListener("mousemove",S)}),L;function H(){var Se=L.props.touch;return Array.isArray(Se)?Se:[Se,0]}function G(){return H()[0]==="hold"}function Q(){var Se;return!!((Se=L.props.render)!=null&&Se.$$tippy)}function K(){return k||t}function je(){var Se=K().parentNode;return Se?Sle(Se):document}function Re(){return FE(U)}function oe(Se){return L.state.isMounted&&!L.state.isVisible||ia.isTouch||h&&h.type==="focus"?0:dx(L.props.delay,Se?0:1,No.delay)}function Ee(Se){Se===void 0&&(Se=!1),U.style.pointerEvents=L.props.interactive&&!Se?"":"none",U.style.zIndex=""+L.props.zIndex}function ve(Se,Ye,Ce){if(Ce===void 0&&(Ce=!0),P.forEach(function(wt){wt[Se]&&wt[Se].apply(wt,Ye)}),Ce){var Nt;(Nt=L.props)[Se].apply(Nt,Ye)}}function Qe(){var Se=L.props.aria;if(Se.content){var Ye="aria-"+Se.content,Ce=U.id,Nt=dd(L.props.triggerTarget||t);Nt.forEach(function(wt){var rt=wt.getAttribute(Ye);if(L.state.isVisible)wt.setAttribute(Ye,rt?rt+" "+Ce:Ce);else{var Ae=rt&&rt.replace(Ce,"").trim();Ae?wt.setAttribute(Ye,Ae):wt.removeAttribute(Ye)}})}}function Ze(){if(!(V||!L.props.aria.expanded)){var Se=dd(L.props.triggerTarget||t);Se.forEach(function(Ye){L.props.interactive?Ye.setAttribute("aria-expanded",L.state.isVisible&&Ye===K()?"true":"false"):Ye.removeAttribute("aria-expanded")})}}function J(){je().removeEventListener("mousemove",S),by=by.filter(function(Se){return Se!==S})}function Z(Se){if(!(ia.isTouch&&(u||Se.type==="mousedown"))){var Ye=Se.composedPath&&Se.composedPath()[0]||Se.target;if(!(L.props.interactive&&uD(U,Ye))){if(dd(L.props.triggerTarget||t).some(function(Ce){return uD(Ce,Ye)})){if(ia.isTouch||L.state.isVisible&&L.props.trigger.indexOf("click")>=0)return}else ve("onClickOutside",[L,Se]);L.props.hideOnClick===!0&&(L.clearDelayTimeouts(),L.hide(),c=!0,setTimeout(function(){c=!1}),L.state.isMounted||Ue())}}}function ye(){u=!0}function Te(){u=!1}function Oe(){var Se=je();Se.addEventListener("mousedown",Z,!0),Se.addEventListener("touchend",Z,Ru),Se.addEventListener("touchstart",Te,Ru),Se.addEventListener("touchmove",ye,Ru)}function Ue(){var Se=je();Se.removeEventListener("mousedown",Z,!0),Se.removeEventListener("touchend",Z,Ru),Se.removeEventListener("touchstart",Te,Ru),Se.removeEventListener("touchmove",ye,Ru)}function $e(Se,Ye){ze(Se,function(){!L.state.isVisible&&U.parentNode&&U.parentNode.contains(U)&&Ye()})}function bt(Se,Ye){ze(Se,Ye)}function ze(Se,Ye){var Ce=Re().box;function Nt(wt){wt.target===Ce&&(px(Ce,"remove",Nt),Ye())}if(Se===0)return Ye();px(Ce,"remove",m),px(Ce,"add",Nt),m=Nt}function tn(Se,Ye,Ce){Ce===void 0&&(Ce=!1);var Nt=dd(L.props.triggerTarget||t);Nt.forEach(function(wt){wt.addEventListener(Se,Ye,Ce),w.push({node:wt,eventType:Se,handler:Ye,options:Ce})})}function Bn(){G()&&(tn("touchstart",gr,{passive:!0}),tn("touchend",ar,{passive:!0})),gle(L.props.trigger).forEach(function(Se){if(Se!=="manual")switch(tn(Se,gr),Se){case"mouseenter":tn("mouseleave",ar);break;case"focus":tn(Ole?"focusout":"blur",Xr);break;case"focusin":tn("focusout",Xr);break}})}function Tt(){w.forEach(function(Se){var Ye=Se.node,Ce=Se.eventType,Nt=Se.handler,wt=Se.options;Ye.removeEventListener(Ce,Nt,wt)}),w=[]}function gr(Se){var Ye,Ce=!1;if(!(!L.state.isEnabled||Ti(Se)||c)){var Nt=((Ye=h)==null?void 0:Ye.type)==="focus";h=Se,k=Se.currentTarget,Ze(),!L.state.isVisible&&wle(Se)&&by.forEach(function(wt){return wt(Se)}),Se.type==="click"&&(L.props.trigger.indexOf("mouseenter")<0||a)&&L.props.hideOnClick!==!1&&L.state.isVisible?Ce=!0:zi(Se),Se.type==="click"&&(a=!Ce),Ce&&!Nt&&lr(Se)}}function Ir(Se){var Ye=Se.target,Ce=K().contains(Ye)||U.contains(Ye);if(!(Se.type==="mousemove"&&Ce)){var Nt=un().concat(U).map(function(wt){var rt,Ae=wt._tippy,st=(rt=Ae.popperInstance)==null?void 0:rt.state;return st?{popperRect:wt.getBoundingClientRect(),popperState:st,props:n}:null}).filter(Boolean);_le(Nt,Se)&&(J(),lr(Se))}}function ar(Se){var Ye=Ti(Se)||L.props.trigger.indexOf("click")>=0&&a;if(!Ye){if(L.props.interactive){L.hideWithInteractivity(Se);return}lr(Se)}}function Xr(Se){L.props.trigger.indexOf("focusin")<0&&Se.target!==K()||L.props.interactive&&Se.relatedTarget&&U.contains(Se.relatedTarget)||lr(Se)}function Ti(Se){return ia.isTouch?G()!==Se.type.indexOf("touch")>=0:!1}function Li(){hn();var Se=L.props,Ye=Se.popperOptions,Ce=Se.placement,Nt=Se.offset,wt=Se.getReferenceClientRect,rt=Se.moveTransition,Ae=Q()?FE(U).arrow:null,st=wt?{getBoundingClientRect:wt,contextElement:wt.contextElement||K()}:t,ut={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(tr){var ji=tr.state;if(Q()){var Bo=Re(),Nn=Bo.box;["placement","reference-hidden","escaped"].forEach(function(qn){qn==="placement"?Nn.setAttribute("data-placement",ji.placement):ji.attributes.popper["data-popper-"+qn]?Nn.setAttribute("data-"+qn,""):Nn.removeAttribute("data-"+qn)}),ji.attributes.popper={}}}},$t=[{name:"offset",options:{offset:Nt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!rt}},ut];Q()&&Ae&&$t.push({name:"arrow",options:{element:Ae,padding:3}}),$t.push.apply($t,Ye?.modifiers||[]),L.popperInstance=hle(st,U,Object.assign({},Ye,{placement:Ce,onFirstUpdate:v,modifiers:$t}))}function hn(){L.popperInstance&&(L.popperInstance.destroy(),L.popperInstance=null)}function Xt(){var Se=L.props.appendTo,Ye,Ce=K();L.props.interactive&&Se===Tj||Se==="parent"?Ye=Ce.parentNode:Ye=kj(Se,[Ce]),Ye.contains(U)||Ye.appendChild(U),L.state.isMounted=!0,Li()}function un(){return l0(U.querySelectorAll("[data-tippy-root]"))}function zi(Se){L.clearDelayTimeouts(),Se&&ve("onTrigger",[L,Se]),Oe();var Ye=oe(!0),Ce=H(),Nt=Ce[0],wt=Ce[1];ia.isTouch&&Nt==="hold"&&wt&&(Ye=wt),Ye?r=setTimeout(function(){L.show()},Ye):L.show()}function lr(Se){if(L.clearDelayTimeouts(),ve("onUntrigger",[L,Se]),!L.state.isVisible){Ue();return}if(!(L.props.trigger.indexOf("mouseenter")>=0&&L.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Se.type)>=0&&a)){var Ye=oe(!1);Ye?i=setTimeout(function(){L.state.isVisible&&L.hide()},Ye):s=requestAnimationFrame(function(){L.hide()})}}function xn(){L.state.isEnabled=!0}function er(){L.hide(),L.state.isEnabled=!1}function yr(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function vr(Se){if(!L.state.isDestroyed){ve("onBeforeUpdate",[L,Se]),Tt();var Ye=L.props,Ce=dD(t,Object.assign({},Ye,lD(Se),{ignoreAttributes:!0}));L.props=Ce,Bn(),Ye.interactiveDebounce!==Ce.interactiveDebounce&&(J(),S=oD(Ir,Ce.interactiveDebounce)),Ye.triggerTarget&&!Ce.triggerTarget?dd(Ye.triggerTarget).forEach(function(Nt){Nt.removeAttribute("aria-expanded")}):Ce.triggerTarget&&t.removeAttribute("aria-expanded"),Ze(),Ee(),R&&R(Ye,Ce),L.popperInstance&&(Li(),un().forEach(function(Nt){requestAnimationFrame(Nt._tippy.popperInstance.forceUpdate)})),ve("onAfterUpdate",[L,Se])}}function Pr(Se){L.setProps({content:Se})}function cs(){var Se=L.state.isVisible,Ye=L.state.isDestroyed,Ce=!L.state.isEnabled,Nt=ia.isTouch&&!L.props.touch,wt=dx(L.props.duration,0,No.duration);if(!(Se||Ye||Ce||Nt)&&!K().hasAttribute("disabled")&&(ve("onShow",[L],!1),L.props.onShow(L)!==!1)){if(L.state.isVisible=!0,Q()&&(U.style.visibility="visible"),Ee(),Oe(),L.state.isMounted||(U.style.transition="none"),Q()){var rt=Re(),Ae=rt.box,st=rt.content;hx([Ae,st],0)}v=function(){var $t;if(!(!L.state.isVisible||d)){if(d=!0,U.offsetHeight,U.style.transition=L.props.moveTransition,Q()&&L.props.animation){var yt=Re(),tr=yt.box,ji=yt.content;hx([tr,ji],wt),cD([tr,ji],"visible")}Qe(),Ze(),aD(mx,L),($t=L.popperInstance)==null||$t.forceUpdate(),ve("onMount",[L]),L.props.animation&&Q()&&bt(wt,function(){L.state.isShown=!0,ve("onShown",[L])})}},Xt()}}function Is(){var Se=!L.state.isVisible,Ye=L.state.isDestroyed,Ce=!L.state.isEnabled,Nt=dx(L.props.duration,1,No.duration);if(!(Se||Ye||Ce)&&(ve("onHide",[L],!1),L.props.onHide(L)!==!1)){if(L.state.isVisible=!1,L.state.isShown=!1,d=!1,a=!1,Q()&&(U.style.visibility="hidden"),J(),Ue(),Ee(!0),Q()){var wt=Re(),rt=wt.box,Ae=wt.content;L.props.animation&&(hx([rt,Ae],Nt),cD([rt,Ae],"hidden"))}Qe(),Ze(),L.props.animation?Q()&&$e(Nt,L.unmount):L.unmount()}}function us(Se){je().addEventListener("mousemove",S),aD(by,S),S(Se)}function fi(){L.state.isVisible&&L.hide(),L.state.isMounted&&(hn(),un().forEach(function(Se){Se._tippy.unmount()}),U.parentNode&&U.parentNode.removeChild(U),mx=mx.filter(function(Se){return Se!==L}),L.state.isMounted=!1,ve("onHidden",[L]))}function br(){L.state.isDestroyed||(L.clearDelayTimeouts(),L.unmount(),Tt(),delete t._tippy,L.state.isDestroyed=!0,ve("onDestroy",[L]))}}function dh(t,e){e===void 0&&(e={});var n=No.plugins.concat(e.plugins||[]);Cle();var r=Object.assign({},e,{plugins:n}),i=Ele(t),s=i.reduce(function(a,c){var u=c&&zle(c,r);return u&&a.push(u),a},[]);return ob(t)?s[0]:s}dh.defaultProps=No;dh.setDefaultProps=Dle;dh.currentInput=ia;Object.assign({},pj,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});dh.setDefaultProps({render:Oj});const Mj=z.forwardRef((t,e)=>{const[n,r]=z.useState(0),i=u=>{const d=t.items[u];d&&t.command({id:d})},s=()=>{r((n+t.items.length-1)%t.items.length)},a=()=>{r((n+1)%t.items.length)},c=()=>{i(n)};return z.useEffect(()=>r(0),[t.items]),z.useImperativeHandle(e,()=>({onKeyDown:({event:u})=>u.key==="ArrowUp"?(s(),!0):u.key==="ArrowDown"?(a(),!0):u.key==="Enter"?(c(),!0):!1})),M.jsx("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl overflow-hidden min-w-[12rem] p-1",children:t.items.length?t.items.map((u,d)=>M.jsxs("button",{className:jt("flex items-center w-full text-left px-2 py-1.5 text-sm rounded-md transition-colors",d===n?"bg-indigo-50 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-400 font-medium":"text-zinc-600 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800"),onClick:()=>i(d),children:[t.char||"#",u]},d)):M.jsx("div",{className:"px-2 py-1.5 text-sm text-zinc-500",children:"Create new tag..."})})}),jle={items:async({query:t})=>{const r=(await sn.tags.toArray()).map(i=>i.label).filter(i=>i.toLowerCase().startsWith(t.toLowerCase())).slice(0,5);return t&&!r.includes(t)&&r.push(t),r},render:()=>{let t,e;return{onStart:n=>{t=new L4(Mj,{props:{...n,char:"#"},editor:n.editor}),n.clientRect&&(e=dh("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(n){t.updateProps({...n,char:"#"}),n.clientRect&&e[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){return n.event.key==="Escape"?(e[0].hide(),!0):t.ref?.onKeyDown(n)},onExit(){e[0].destroy(),t.destroy()}}}},Vle=["Quality","FunctionalExpertise","Productivity","ServiceExcellence","Leadership","Innovation","Teamwork"],Ble={items:({query:t})=>Vle.filter(e=>e.toLowerCase().startsWith(t.toLowerCase())).slice(0,5),render:()=>{let t,e;return{onStart:n=>{t=new L4(Mj,{props:{...n,char:"@"},editor:n.editor}),n.clientRect&&(e=dh("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(n){t.updateProps({...n,char:"@"}),n.clientRect&&e[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){return n.event.key==="Escape"?(e[0].hide(),!0):t.ref?.onKeyDown(n)},onExit(){e[0].destroy(),t.destroy()}}}},mD=["What was the hardest bug you squashed today?","Who did you help today?","What new tech concept did you learn?","What's a small win you haven't celebrated yet?","Did you block anyone? Or were you blocked?","What code did you delete today?"],Ule=nb.extend({name:"performanceMention"});function Rj({onSave:t,className:e,initialContent:n}){const[r,i]=z.useState("medium"),[s,a]=z.useState(new Date().toISOString()),[c,u]=z.useState(null),[d,h]=z.useState(!1),m=z.useRef(null),{user:v}=pf(),w=v?v.uid:"guest",S=D4({extensions:[Q_,aT,nie.configure({placeholder:"What did you work on today? (Type / for commands, # for tags, @ for categories)"}),nb.configure({HTMLAttributes:{class:"mention-tag"},renderLabel:({node:L})=>`#${L.attrs.label??L.attrs.id}`,suggestion:{...jle,char:"#"}}),Ule.configure({HTMLAttributes:{class:"mention-category text-indigo-500 bg-indigo-500/10 border-indigo-500/20"},renderLabel:({node:L})=>`@${L.attrs.label??L.attrs.id}`,suggestion:{...Ble,char:"@"}}),vne.configure({element:document.querySelector(".bubble-menu")})],content:n||"",editorProps:{attributes:{class:"prose prose-sm prose-invert focus:outline-none max-w-none min-h-[60px]"},handleKeyDown:(L,q)=>(q.metaKey||q.ctrlKey)&&q.key==="Enter"?(O(),!0):!1},onUpdate:({editor:L})=>{const q=L.getText().trim().length>0,U=L.getJSON().content?.some(R=>R.type==="placeholderNode"||R.content&&R.content.some(P=>P.type==="placeholderNode"));_(!q&&!U)}}),[k,_]=z.useState(!0);z.useEffect(()=>{if(!S)return;const L=()=>{c&&u(null),m.current&&clearTimeout(m.current),S.isEmpty&&(m.current=setTimeout(()=>{const q=mD[Math.floor(Math.random()*mD.length)];u(q)},5e3))};return S.on("update",L),S.on("focus",L),S.on("blur",()=>{m.current&&clearTimeout(m.current),u(null)}),()=>{m.current&&clearTimeout(m.current),S.off("update",L),S.off("focus",L),S.off("blur")}},[S,c]);const O=()=>{if(!S||S.isEmpty)return;const L=S.getJSON(),q=S.getText();t(L,q,r,s),S.commands.clearContent(),i("medium"),a(new Date().toISOString()),u(null)},B=async()=>{const L=S.state.selection;if(L.empty)return;S.getHTML().slice(L.from,L.to);const q=S.state.selection.content(),R=S.schema.DOMSerializer.fromSchema(S.schema).serializeFragment(q.content),P=document.createElement("div");P.appendChild(R);const V=P.innerHTML,H=c("Name your template:","My Custom Template");H&&(await sn.templates.add({id:crypto.randomUUID(),userId:w,name:H,content:V,createdAt:new Date().toISOString()}),alert("Template saved!"))},W=L=>{S&&(typeof L=="object"&&L.type==="doc"?S.commands.setContent(L):S.commands.insertContent(L),h(!1),S.commands.focus(),setTimeout(()=>{const q=S.view.dom.querySelector(".placeholder-node");if(q){const U=S.view.posAtDOM(q,0);S.commands.setTextSelection(U+1)}},50))};return M.jsxs("div",{className:jt("relative group rounded-card border border-border-input dark:border-zinc-800 bg-[#e8efe8] dark:bg-zinc-900 p-3 transition-all duration-200 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:border-indigo-500/50 shadow-sm",e),children:[M.jsxs("div",{className:"min-h-[60px] relative",children:[S&&M.jsx(wne,{editor:S,children:M.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 bg-surface dark:bg-zinc-900 border border-gray-300 dark:border-zinc-700 text-zinc-900 dark:text-zinc-200 px-3 py-1.5 rounded-lg shadow-xl hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors text-xs font-medium",children:[M.jsx(Mc,{size:12,className:"text-amber-500"}),"Save as Template"]})}),M.jsx(R4,{editor:S}),c&&M.jsxs("button",{onClick:()=>{S.commands.setContent(`<h3>${c}</h3><p></p>`),S.commands.focus(),u(null)},className:"absolute top-10 left-0 right-0 mx-auto w-max animate-in fade-in slide-in-from-bottom-2 bg-action-primary/90 hover:bg-action-primary text-white px-4 py-2 rounded-full shadow-xl text-sm font-medium flex items-center gap-2 backdrop-blur cursor-pointer z-10 transition-all hover:scale-105",children:[M.jsx(Mc,{size:16}),c]})]}),M.jsxs("div",{className:"flex flex-wrap items-center justify-between mt-3 pt-3 border-t border-border-subtle dark:border-zinc-800 gap-3",children:[M.jsx("div",{className:"flex items-center gap-2",children:M.jsx(oae,{value:r,onChange:i,options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}]})}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(jE,{date:s?new Date(s):void 0,onSelect:L=>a(L?.toISOString()),placeholder:"Today",className:"w-auto",buttonClassName:"w-auto border-0 bg-transparent text-zinc-400 hover:text-zinc-200 pl-0",direction:"top"}),M.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1.5 bg-tag-bg dark:bg-zinc-800/50 hover:bg-gray-200 dark:hover:bg-zinc-800 text-text-secondary dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200 px-3 py-1.5 rounded-md text-xs font-medium transition-colors h-8",title:"Insert Template",children:[M.jsx(dU,{size:14}),M.jsx("span",{className:"hidden sm:inline",children:"Template"})]}),M.jsx("button",{onClick:O,disabled:!S||k,className:"bg-action-primary hover:bg-action-hover text-white px-4 py-1.5 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed h-8 shadow-sm shadow-button/20",children:"Log Work"})]})]}),d&&M.jsx(lae,{onSelect:W,onCancel:()=>h(!1)})]})}function Fle(){const[t,e]=z.useState(!1),n=wL(),r=(i,s,a,c)=>{n.mutate({json:i,text:s,impact:a,date:c}),e(!1)};return M.jsxs(M.Fragment,{children:[!t&&M.jsx("button",{onClick:()=>e(!0),className:"md:hidden fixed bottom-20 right-4 z-50 bg-action-primary hover:bg-action-primary text-white p-4 rounded-full shadow-lg shadow-button/30 transition-transform active:scale-95","aria-label":"Add New Log",children:M.jsx(tS,{size:24})}),t&&M.jsxs("div",{className:"fixed inset-0 z-[60] bg-zinc-950/95 backdrop-blur-sm flex items-end sm:items-center justify-center p-4",children:[M.jsx("div",{className:"absolute inset-0",onClick:()=>e(!1)}),M.jsxs("div",{className:"relative w-full max-w-lg bg-zinc-900 border border-zinc-800 rounded-2xl shadow-2xl p-4 animate-in slide-in-from-bottom-10 duration-200",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h3",{className:"text-lg font-semibold text-zinc-100",children:"New Log"}),M.jsx("button",{onClick:()=>e(!1),className:"p-2 text-zinc-500 hover:text-zinc-300 bg-zinc-800/50 rounded-full",children:M.jsx(h0,{size:20})})]}),M.jsx(Rj,{onSave:r,className:"border-0 bg-zinc-950 shadow-inner"})]})]})]})}function Hle(){const{isSidebarOpen:t}=Xd(),{user:e,signInWithGoogle:n,signOut:r}=pf(),i=Zc(),s=[{href:"/",label:"Dashboard",icon:tI},{href:"/timeline",label:"Timeline",icon:cU},{href:"/goals",label:"Goals",icon:nS},{href:"/knowledge",label:"Knowledge",icon:N6}];return M.jsxs("div",{className:"fixed inset-0 flex w-full bg-canvas dark:bg-zinc-950 text-text-primary dark:text-zinc-50 p-2 gap-2 overflow-hidden",children:[M.jsx(FH,{}),M.jsx(Fle,{}),M.jsxs("aside",{className:jt("hidden md:flex flex-col gap-2 h-full z-50 bg-transparent transition-all duration-300",t?"w-64":"w-16"),children:[M.jsxs("div",{className:"gradient-pastel-animated rounded-2xl border border-border-subtle dark:border-zinc-900 shadow-card p-4 h-16 flex items-center gap-3 shrink-0",children:[M.jsx("img",{src:"/logo.png",alt:"CareerFly Logo",className:"h-10 w-10 rounded-lg shadow-sm object-cover shrink-0 select-none"}),t&&M.jsx("span",{className:"text-2xl text-[#4f8af1] animate-in fade-in duration-300 transform -rotate-2 origin-left",style:{fontFamily:'"Permanent Marker", cursive'},children:"CareerFly"})]}),M.jsxs("nav",{className:"gradient-pastel-animated rounded-2xl border border-border-subtle dark:border-zinc-900 shadow-card flex-1 p-2 space-y-1 overflow-y-auto overflow-x-hidden",children:[s.map(a=>{const c=i.pathname===a.href;return M.jsxs(mp,{to:a.href,className:jt("flex items-center gap-3 px-3 py-2 rounded-xl transition-colors duration-200 group relative focus:outline-none focus:ring-0 select-none",c?"bg-gray-100 dark:bg-zinc-800 text-gray-900 dark:text-zinc-50 font-normal":"text-gray-500 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-zinc-300 font-normal active:bg-gray-100 dark:active:bg-zinc-800"),children:[M.jsx(a.icon,{size:20,className:jt("transition-colors",c?"text-gray-900 dark:text-zinc-50":"text-gray-500 dark:text-zinc-600 group-hover:text-gray-900 dark:group-hover:text-zinc-400")}),t&&M.jsx("span",{children:a.label})]},a.href)}),M.jsxs(mp,{to:"/settings",className:jt("flex items-center gap-3 px-3 py-2 rounded-xl transition-colors duration-200 group relative focus:outline-none focus:ring-0 select-none",i.pathname==="/settings"?"bg-gray-100 dark:bg-zinc-800 text-gray-900 dark:text-zinc-50 font-normal":"text-gray-500 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-zinc-300 font-normal active:bg-gray-100 dark:active:bg-zinc-800"),children:[M.jsx(EU,{size:20,className:jt("transition-colors",i.pathname==="/settings"?"text-gray-900 dark:text-zinc-50":"text-gray-500 dark:text-zinc-600 group-hover:text-gray-900 dark:group-hover:text-zinc-400")}),t&&M.jsx("span",{children:"Settings"})]})]}),M.jsx("div",{className:"gradient-pastel-animated rounded-2xl border border-border-subtle dark:border-zinc-900 shadow-card p-2 shrink-0",children:e?M.jsxs("div",{className:jt("flex items-center gap-2",t?"px-2 pb-1 pt-1":"justify-center"),children:[M.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-8 h-8 rounded-full border border-zinc-200 dark:border-zinc-700 shadow-sm object-cover"}),t&&M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"flex-1 min-w-0 flex flex-col items-start overflow-hidden",children:[M.jsx("span",{className:"text-sm font-medium truncate w-full text-zinc-900 dark:text-zinc-200",children:e.displayName}),M.jsx("span",{className:"text-[10px] text-zinc-500 truncate w-full",children:"Free Plan"})]}),M.jsx("button",{onClick:r,className:"p-1.5 rounded-md hover:bg-red-50 hover:text-red-500 text-zinc-400 transition-colors",title:"Sign Out",children:M.jsx(gU,{size:16})})]})]}):M.jsxs("button",{onClick:n,className:jt("w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-all duration-200 group","text-gray-500 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-zinc-300"),children:[M.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-current flex items-center justify-center text-[10px] font-bold",children:"G"}),t&&M.jsx("span",{children:"Sign In"})]})})]}),M.jsx("main",{className:"flex-1 rounded-2xl border border-border-subtle dark:border-zinc-900 bg-[#efefe8] dark:bg-zinc-950/50 shadow-sm overflow-hidden relative h-full notebook-grid",children:M.jsx("div",{className:"h-full overflow-y-auto scroll-smooth",children:M.jsx(oB,{})})}),M.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 h-16 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl border-t border-border-subtle dark:border-zinc-800/50 z-50 flex justify-around items-center px-4",children:s.map(a=>{const c=i.pathname===a.href;return M.jsxs(mp,{to:a.href,className:jt("flex flex-col items-center justify-center p-1 transition-colors",c?"text-text-secondary":"text-zinc-600"),children:[M.jsx(a.icon,{size:24}),M.jsx("span",{className:"text-[10px] mt-1 font-medium",children:a.label})]},a.href)})})]})}function HE(t){if(!t)return"";try{return lZ(t,[Q_,aT]).trim()}catch(e){return console.error("Error converting TipTap JSON to text:",e),qE(t)}}function qE(t){return t?typeof t=="string"?t:t.type==="text"?t.text||"":t.type==="placeholderNode"?t.content&&t.content.length>0?t.content.map(qE).join(""):`[${t.attrs?.label||"empty"}]`:t.content&&Array.isArray(t.content)?t.content.map(qE).join(" "):"":""}function qle({className:t}){const{logs:e}=lh(),[n,r]=z.useState(!1),[i,s]=z.useState(!1),a=()=>!e||e.length===0?"No logs available to generate summary.":`I am a software engineer. Below is my work log for the recent period. 
Please summarize this into 3 categories: 
1. Technical Deliverables 
2. Problems Solved 
3. Knowledge Gained

My Logs:
${e.map(d=>{const h=new Date(d.dateIso).toLocaleDateString(),m=d.content?.body?HE(d.content.body):"No content",v=d.tags?.join(", ")||"",w=d.metadata?.impact||"medium";return`[${h}] (Impact: ${w}) (Tags: ${v}): ${m}`}).join(`
`)}`,c=()=>{navigator.clipboard.writeText(a()),s(!0),setTimeout(()=>s(!1),2e3)};return n?M.jsxs("div",{className:`p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900 shadow-sm ${t}`,children:[M.jsxs("div",{className:"flex items-center justify-between mb-4",children:[M.jsxs("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 flex items-center gap-2",children:[M.jsx(Mc,{size:18,className:"text-text-primary dark:text-text-secondary"})," AI Prompt Ready"]}),M.jsx("button",{onClick:()=>r(!1),className:"text-xs text-zinc-500 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300",children:"Close"})]}),M.jsx("textarea",{className:"w-full h-64 bg-gray-50 dark:bg-zinc-950 border border-border-subtle dark:border-zinc-800 rounded-lg p-4 text-xs font-mono text-zinc-700 dark:text-zinc-300 focus:outline-none focus:border-action-primary/50 resize-none mb-4",readOnly:!0,value:a()}),M.jsxs("button",{onClick:c,className:"w-full py-2 bg-action-primary hover:bg-action-hover text-white rounded-md text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[i?M.jsx(XD,{size:16}):M.jsx(ZD,{size:16}),i?"Copied to Clipboard!":"Copy Prompt for ChatGPT/Claude"]})]}):M.jsxs("div",{onClick:()=>r(!0),className:`p-1 rounded-card border border-border-input dark:border-zinc-800 border-dashed flex flex-col items-center justify-center py-8 text-zinc-600 dark:text-zinc-500 bg-surface dark:bg-zinc-900/50 hover:bg-gray-50 dark:hover:bg-zinc-900/80 transition-colors cursor-pointer group ${t}`,children:[M.jsx("div",{className:"p-3 bg-tag-bg dark:bg-zinc-800 rounded-full mb-3 group-hover:bg-action-primary group-hover:text-white transition-colors",children:M.jsx(Mc,{size:20})}),M.jsx("span",{className:"text-sm font-medium",children:"Generate AI Performance Summary"}),M.jsx("span",{className:"text-xs mt-1 text-zinc-500 dark:text-zinc-600",children:"Uses local template engine (Privacy Safe)"})]})}function Nj({className:t}){const{tags:e,isLoading:n}=sY(),r=(s,a)=>{if(a===0)return"text-xs";const c=.75,u=1.5,d=Math.min(1,Math.max(0,s/a));return`${c+d*(u-c)}rem`},i=e?.length>0?Math.max(...e.map(s=>s.usageCount||0)):0;return n?M.jsx("div",{className:"p-4 text-xs text-zinc-500",children:"Loading skills..."}):M.jsxs("div",{className:jt("p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900",t),children:[M.jsxs("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 mb-1 flex items-center gap-2",children:[M.jsx(K6,{size:18,className:"text-text-primary dark:text-text-secondary"})," Learned Bank"]}),M.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mb-6",children:"Visualizing your growing skill set."}),!e||e.length===0?M.jsx("div",{className:"text-center py-8 text-zinc-400 dark:text-zinc-600 text-sm italic",children:"Use #hashtags in your logs to build your bank."}):M.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2 items-center justify-center",children:e.map(s=>M.jsxs("span",{className:"font-mono transition-all duration-300 hover:text-indigo-600 dark:hover:text-text-secondary cursor-default text-zinc-700 dark:text-zinc-300",style:{fontSize:r(s.usageCount,i),opacity:.6+s.usageCount/i*.4},children:["#",s.label]},s.id))})]})}const gD=[{id:"performance-review",label:"Standard Performance Review",description:"Grouped by Ticket/Project, suitable for Workday.",pattern:t=>` ${t.date}: ${t.plainText} ${t.ticketString?`(${t.ticketString})`:""}`},{id:"daily-standup",label:"Daily Standup / Asynch",description:"Simple bullet points of yesterday's work.",pattern:t=>`- ${t.plainText}`},{id:"markdown-changelog",label:"Markdown Changelog",description:"Formatted for GitHub/GitLab descriptions.",pattern:t=>`* **${t.date}**: ${t.plainText}`}];function $le({className:t}){const[e,n]=z.useState(!1),[r,i]=z.useState("performance-review"),[s,a]=z.useState(!1),{logs:c}=lh(),u=()=>{if(!c)return"";const m=gD.find(v=>v.id===r);if(!m)return"";if(r==="performance-review"){const v={};return c.forEach(w=>{let S="General / Misc";w.externalTickets&&w.externalTickets.length>0,w.tags&&w.tags.length>0&&(S=`#${w.tags[0]}`),v[S]||(v[S]=[]),v[S].push(w)}),Object.entries(v).map(([w,S])=>{const k=S.map(_=>{const O=Mo(new Date(_.dateIso),"MMM d"),B=_.content?.body?HE(_.content.body):"No content",W=B.match(/[A-Z]+-\d+/),L=W?W[0]:null;return m.pattern({date:O,plainText:B,ticketString:L})}).join(`
`);return`### ${w}
${k}`}).join(`

`)}return c.map(v=>{const w=Mo(new Date(v.dateIso),"yyyy-MM-dd"),S=v.content?.body?HE(v.content.body):"No content";return m.pattern({date:w,plainText:S})}).join(`
`)},d=Be.useMemo(()=>u(),[c,r]),h=()=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)};return M.jsxs("div",{className:jt("p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900 shadow-sm",t),children:[M.jsxs("div",{className:"flex items-center justify-between mb-4",children:[M.jsxs("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 flex items-center gap-2",children:[M.jsx(eI,{size:18,className:"text-text-primary dark:text-text-secondary"})," Export Review"]}),M.jsx("select",{value:r,onChange:m=>i(m.target.value),className:"bg-white dark:bg-zinc-950 border border-border-input dark:border-zinc-800 rounded px-2 py-1 text-xs text-zinc-900 dark:text-zinc-300 focus:outline-none",children:gD.map(m=>M.jsx("option",{value:m.id,children:m.label},m.id))})]}),M.jsxs("div",{className:"relative",children:[M.jsx("textarea",{readOnly:!0,value:d,className:"w-full h-40 bg-gray-50 dark:bg-zinc-950/50 border border-border-subtle dark:border-zinc-800 rounded-lg p-3 text-xs font-mono text-zinc-700 dark:text-zinc-400 resize-none focus:outline-none"}),M.jsx("button",{onClick:h,className:"absolute top-2 right-2 p-2 bg-tag-bg dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-md transition-colors",title:"Copy to Clipboard",children:s?M.jsx(XD,{size:14,className:"text-emerald-500 dark:text-emerald-400"}):M.jsx(ZD,{size:14})})]})]})}function Wle({className:t}){const{logs:e}=lh(),n=z.useMemo(()=>{if(!e)return{};const c={};return e.forEach(u=>{const d=Mo(new Date(u.dateIso),"yyyy-MM-dd");c[d]=(c[d]||0)+1}),c},[e]),r=new Date,i=kse(r),s=vie({start:i,end:r}),a=c=>c?c===1?"bg-blue-300 dark:bg-blue-900/60":c<=3?"bg-blue-500 dark:bg-blue-600":"bg-blue-700 dark:bg-blue-400":"bg-gray-200 dark:bg-zinc-800/50";return M.jsxs("div",{className:jt("p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900 overflow-hidden",t),children:[M.jsxs("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 mb-4 flex items-center gap-2",children:[M.jsx(A6,{size:18,className:"text-emerald-500 dark:text-emerald-400"})," Contribution Activity"]}),M.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 custom-scrollbar",children:Array.from({length:Math.ceil(s.length/7)}).map((c,u)=>M.jsx("div",{className:"flex flex-col gap-1 shrink-0",children:s.slice(u*7,u*7+7).map(d=>{const h=Mo(d,"yyyy-MM-dd"),m=n[h]||0;return M.jsx("div",{title:`${h}: ${m} logs`,className:jt("w-3 h-3 rounded-sm transition-colors hover:ring-1 hover:ring-zinc-400 dark:hover:ring-white/50",a(m))},h)})},u))}),M.jsxs("div",{className:"flex justify-end items-center gap-2 mt-2 text-xs text-zinc-400 dark:text-zinc-500",children:[M.jsx("span",{children:"Less"}),M.jsx("div",{className:"w-3 h-3 rounded-sm bg-gray-200 dark:bg-zinc-800/50"}),M.jsx("div",{className:"w-3 h-3 rounded-sm bg-blue-300 dark:bg-blue-900/60"}),M.jsx("div",{className:"w-3 h-3 rounded-sm bg-blue-500 dark:bg-blue-600"}),M.jsx("div",{className:"w-3 h-3 rounded-sm bg-blue-700 dark:bg-blue-400"}),M.jsx("span",{children:"More"})]})]})}function Kle(){const[t,e]=z.useState(!1),[n,r]=z.useState(!1),[i,s]=z.useState(0),{logs:a}=lh();z.useEffect(()=>{const u=()=>{const h=new Date;h.getDay(),h.getHours(),e(!0)};u();const d=setInterval(u,6e4);return()=>clearInterval(d)},[]);const c=a?.filter(u=>{const d=new Date(u.dateIso),h=new Date;return Sx(d)===Sx(h)&&d.getFullYear()===h.getFullYear()})||[];return!t&&!n?null:M.jsxs(M.Fragment,{children:[!n&&M.jsxs("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 md:bottom-8 md:right-8 z-50 animate-in fade-in slide-in-from-bottom-4 duration-1000 group",children:[M.jsx("div",{className:"absolute inset-0 bg-action-primary rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity animate-pulse"}),M.jsxs("div",{className:"relative bg-action-primary hover:bg-action-primary text-white px-5 py-3 rounded-full shadow-xl flex items-center gap-3 font-semibold transition-all hover:scale-105 active:scale-95",children:[M.jsx(qA,{size:20}),M.jsx("span",{children:"Wrap Up Week"})]})]}),n&&M.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[M.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),M.jsxs("div",{className:"relative w-full max-w-2xl bg-zinc-950 border border-zinc-800 rounded-2xl shadow-2xl overflow-hidden p-8 animate-in zoom-in-95 duration-300",children:[M.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-zinc-500 hover:text-zinc-300",children:M.jsx(h0,{size:20})}),i===0?M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{className:"text-center space-y-2",children:[M.jsx("div",{className:"w-16 h-16 bg-action-primary/10 rounded-full flex items-center justify-center mx-auto text-text-secondary mb-4",children:M.jsx(qA,{size:32})}),M.jsx("h2",{className:"text-2xl font-bold",children:"The Friday Ritual"}),M.jsx("p",{className:"text-zinc-400",children:"You crushed it this week. Let's review your wins."})]}),M.jsxs("div",{className:"bg-zinc-900/50 rounded-card p-6 border border-zinc-800 overflow-y-auto max-h-[40vh] custom-scrollbar",children:[M.jsxs("h3",{className:"text-sm font-semibold text-zinc-500 mb-4",children:["THIS WEEK'S HIGHLIGHTS (",c.length,")"]}),c.length===0?M.jsx("div",{className:"text-center py-8 text-zinc-500",children:"No logs found this week. Did you forget to write them down?"}):M.jsx("div",{className:"space-y-3",children:c.map(u=>M.jsxs("div",{className:"flex gap-3 items-start p-3 bg-zinc-900 rounded-lg border border-zinc-800/50",children:[M.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-action-primary shrink-0"}),M.jsxs("div",{className:"space-y-1",children:[M.jsx("div",{className:"text-sm text-zinc-300 line-clamp-2",children:u.content?.plainTextSnippet}),M.jsxs("div",{className:"text-xs text-zinc-500 flex gap-2",children:[M.jsx("span",{children:Mo(new Date(u.dateIso),"EEE")}),u.tags?.map(d=>M.jsxs("span",{className:"text-text-secondary/80",children:["#",d]},d))]})]})]},u.id))})]}),M.jsx("div",{className:"flex justify-end pt-4",children:M.jsxs("button",{onClick:()=>s(1),className:"bg-action-primary hover:bg-action-primary text-white px-6 py-3 rounded-card font-medium flex items-center gap-2 transition-all",children:["Complete Week ",M.jsx(M6,{size:18})]})})]}):M.jsxs("div",{className:"text-center space-y-6 py-8 animate-in zoom-in ml-4",children:[M.jsx("div",{className:"w-24 h-24 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto text-emerald-400 mb-6 animate-bounce",children:M.jsx(JD,{size:48})}),M.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent",children:"Week Complete!"}),M.jsx("p",{className:"text-zinc-400 max-w-md mx-auto",children:"Great job capturing your progress. Disconnect and enjoy your weekend. You earned it."}),M.jsx("button",{onClick:()=>{r(!1),setTimeout(()=>s(0),500)},className:"bg-zinc-800 hover:bg-zinc-700 text-white px-8 py-3 rounded-card font-medium transition-all",children:"Close & Relax"})]})]})]})]})}function Gle(){const{logs:t,isLoading:e}=lh(),{isManagerMode:n}=Xd(),r=z.useMemo(()=>t?n?t.filter(s=>!s.tags?.some(a=>a.toLowerCase()==="private"||a.toLowerCase()==="venting")):t:[],[t,n]);return{stats:z.useMemo(()=>{if(!r)return{topSkills:[],impact:{high:0,med:0,low:0},total:0};const s={},a={};let c=0,u=0,d=0;r.forEach(v=>{v.tags?.forEach(S=>{s[S]=(s[S]||0)+1}),v.metadata?.performanceCategories?.forEach(S=>{a[S]=(a[S]||0)+1});const w=v.metadata?.impact||"medium";w==="high"?c++:w==="medium"?u++:d++});const h=Object.entries(s).sort(([,v],[,w])=>w-v).slice(0,5),m=r.length||1;return{topSkills:h,performanceCategories:a,impact:{high:c/m,med:u/m,low:d/m},total:r.length}},[r]),isLoading:e,filteredLogs:r}}const Yle=nb.extend({name:"performanceMention"});function Dj({log:t,onDelete:e,isManagerMode:n=!1}){const{content:r,dateIso:i,metadata:s}=t,a=s?.impact==="high"||s?.isMajorWin,c=s?.isStarred||!1,u=rY(),d=D4({editable:!1,extensions:[Q_,aT,nb.configure({HTMLAttributes:{class:"mention-tag"},renderLabel:({node:h})=>`#${h.attrs.label??h.attrs.id}`}),Yle.configure({HTMLAttributes:{class:"mention-category"},renderLabel:({node:h})=>`@${h.attrs.label??h.attrs.id}`})],content:r.body,editorProps:{attributes:{class:jt("prose prose-sm prose-invert focus:outline-none max-w-none",n&&"prose-lg")}}});return z.useEffect(()=>{d&&r.body&&d.commands.setContent(r.body)},[r,d]),M.jsxs("div",{className:jt("group relative pl-8 pb-8 transition-colors",n&&"text-lg"),children:[M.jsx("div",{className:jt("absolute -left-[4.5px] top-[5px] h-2 w-2 rounded-full border-2 border-white dark:border-zinc-950 bg-zinc-400 dark:bg-zinc-600 group-hover:bg-action-primary group-hover:scale-125 transition-all duration-300",n&&a&&"bg-amber-500 dark:bg-amber-400 scale-150")}),M.jsxs("div",{className:jt("text-[10px] font-mono text-zinc-500 dark:text-zinc-500 mb-2 flex items-center justify-between h-4",n&&"text-xs"),children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{children:new Date(i).toLocaleString(void 0,{weekday:"short",hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})}),!n&&M.jsx("button",{onClick:()=>u.mutate(t.id),className:jt("transition-colors p-0.5 rounded-sm",c?"text-yellow-400 hover:text-yellow-500":"text-zinc-300 dark:text-zinc-700 hover:text-yellow-400 opacity-0 group-hover:opacity-100"),title:c?"Unstar":"Star this log",children:M.jsx(nI,{size:12,fill:c?"currentColor":"none"})})]}),!n&&M.jsx("button",{onClick:()=>e(t.id),className:"opacity-0 group-hover:opacity-100 text-zinc-500 dark:text-zinc-500 hover:text-red-500 dark:hover:text-red-400 transition-all p-1",children:M.jsx(d0,{size:12})})]}),M.jsx("div",{className:jt("p-4 rounded-lg border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900/50 shadow-sm",n&&a&&"border-2 border-amber-500/50 bg-amber-500/5 shadow-amber-500/10",n&&"p-6"),children:M.jsx(R4,{editor:d})})]})}function yD(){const{stats:t,isLoading:e,filteredLogs:n}=Gle();console.log("[Dashboard] Render. isLoading:",e,"Stats:",t);const{isManagerMode:r,toggleManagerMode:i}=Xd();return e?(console.log("[Dashboard] Still loading..."),M.jsx("div",{className:"p-8",children:"Loading stats..."})):M.jsxs("div",{className:jt("p-4 md:p-8 max-w-5xl mx-auto w-full pb-32 transition-colors duration-500",r?"bg-zinc-950":""),children:[M.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[M.jsxs("div",{children:[M.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:["Review & Growth",r&&M.jsx("span",{className:"text-xs font-mono bg-amber-500/20 text-amber-500 px-2 py-0.5 rounded border border-amber-500/50",children:"MANAGER MODE"})]}),M.jsx("p",{className:"text-text-secondary dark:text-zinc-400",children:"Track your impact metrics and career progress."})]}),M.jsxs("button",{onClick:i,className:jt("flex items-center gap-2 px-4 py-2 rounded-full border transition-all duration-300",r?"bg-amber-500/10 border-amber-500 text-amber-500 hover:bg-amber-500/20":"bg-gray-100 dark:bg-zinc-900 border-border-input dark:border-zinc-800 text-text-secondary dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200"),children:[r?M.jsx(nU,{size:16}):M.jsx(eU,{size:16}),r?"Exit Presentation View":"Presentation View"]})]}),r?M.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8",children:M.jsxs("div",{className:"p-6 rounded-card border border-amber-500/30 bg-zinc-900/50",children:[M.jsxs("h2",{className:"text-xl font-bold text-amber-500 mb-4 flex items-center gap-2",children:[M.jsx(Mc,{size:20}),"Key Achievements & Impact"]}),M.jsx("div",{className:"space-y-6",children:n&&n.length>0?n.map(s=>M.jsx(Dj,{log:s,onDelete:()=>{},isManagerMode:!0},s.id)):M.jsx("div",{className:"text-zinc-500 italic",children:"No public logs found for this period."})})]})}):M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[M.jsx("div",{className:"md:col-span-3",children:M.jsx(Wle,{})}),M.jsxs("div",{className:"md:col-span-2 p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900",children:[M.jsx("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 mb-1",children:"Impact Distribution"}),M.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mb-6",children:"Visualizing your contribution intensity."}),M.jsx("div",{className:"space-y-6",children:M.jsxs("div",{className:"relative pt-2",children:[M.jsxs("div",{className:"flex mb-2 items-center justify-between text-xs uppercase tracking-wider font-semibold text-text-secondary dark:text-zinc-400",children:[M.jsx("span",{children:"Impact Breakdown"}),M.jsxs("span",{className:"text-text-primary dark:text-zinc-50",children:[t.total," Logs Total"]})]}),M.jsxs("div",{className:"h-4 flex rounded-full overflow-hidden bg-gray-200 dark:bg-zinc-800",children:[M.jsx("div",{style:{width:`${t.impact.high*100}%`},className:"bg-violet-500 transition-all duration-1000",title:"High Impact"}),M.jsx("div",{style:{width:`${t.impact.med*100}%`},className:"bg-amber-500 transition-all duration-1000",title:"Medium Impact"}),M.jsx("div",{style:{width:`${t.impact.low*100}%`},className:"bg-blue-500 transition-all duration-1000",title:"Low Impact"})]}),M.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[M.jsxs("div",{className:"flex items-center gap-1.5",children:[M.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500"})," High"]}),M.jsxs("div",{className:"flex items-center gap-1.5",children:[M.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"})," Medium"]}),M.jsxs("div",{className:"flex items-center gap-1.5",children:[M.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})," Low"]})]})]})})]}),M.jsxs("div",{className:"p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900",children:[M.jsx("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 mb-4",children:"Performance Focus"}),t.performanceCategories&&Object.keys(t.performanceCategories).length>0?M.jsx("div",{className:"space-y-3",children:Object.entries(t.performanceCategories).sort(([,s],[,a])=>a-s).map(([s,a])=>M.jsxs("div",{className:"space-y-1",children:[M.jsxs("div",{className:"flex justify-between text-xs",children:[M.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:s}),M.jsx("span",{className:"text-zinc-500",children:a})]}),M.jsx("div",{className:"h-2 w-full bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:M.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${Math.min(a/t.total*100*2,100)}%`}})})]},s))}):M.jsx("div",{className:"text-sm text-zinc-500 italic",children:"No performance categories tagged yet. Use @Quality, @Innovation, etc."})]}),M.jsx("div",{className:"space-y-6",children:M.jsxs("div",{className:"p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900",children:[M.jsx("h3",{className:"text-lg font-medium text-text-primary dark:text-zinc-50 mb-4",children:"Top Skills"}),M.jsx("div",{className:"space-y-3",children:t.topSkills.length>0?t.topSkills.map(([s,a],c)=>M.jsxs("div",{className:"flex items-center justify-between group",children:[M.jsxs("span",{className:"text-sm text-zinc-700 dark:text-zinc-300 flex items-center gap-2",children:[M.jsxs("span",{className:"text-zinc-400 dark:text-zinc-600 font-mono text-xs",children:["0",c+1]}),s]}),M.jsx("span",{className:"text-xs font-mono text-text-primary dark:text-text-secondary bg-action-primary/10 px-2 py-0.5 rounded-full",children:a})]},s)):M.jsx("div",{className:"text-zinc-500 dark:text-zinc-500 text-sm italic",children:"No skills tagged yet."})})]})}),M.jsxs("div",{className:"md:col-span-3",children:[M.jsx(Nj,{className:"mb-6"}),M.jsx($le,{})]}),M.jsx(qle,{className:"md:col-span-3"})]}),!r&&M.jsx(Kle,{})]})}function Qle({isOpen:t,onClose:e,title:n,children:r,className:i}){return t?M.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:M.jsxs("div",{className:jt("relative w-full max-w-sm bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl p-6 animate-in zoom-in-95 duration-200",i),children:[M.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-zinc-500 hover:text-zinc-300 transition-colors",children:M.jsx(h0,{size:16})}),n&&M.jsx("h3",{className:"text-lg font-semibold text-zinc-100 mb-2 mr-6",children:n}),r]})}):null}function Xle({isOpen:t,onClose:e,onConfirm:n,title:r,description:i,confirmText:s="Confirm",cancelText:a="Cancel",variant:c="default"}){return M.jsxs(Qle,{isOpen:t,onClose:e,title:r,children:[i&&M.jsx("p",{className:"text-sm text-zinc-400 mb-6 leading-relaxed",children:i}),M.jsxs("div",{className:"flex justify-end gap-3",children:[M.jsx("button",{onClick:e,className:"px-4 py-2 text-xs font-medium text-zinc-300 hover:text-white bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors",children:a}),M.jsx("button",{onClick:()=>{n(),e()},className:jt("px-4 py-2 text-xs font-medium text-white rounded-lg transition-colors shadow-sm",c==="destructive"?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/20"),children:s})]})]})}function Jle(){const[t,e]=Be.useState(!1),[n,r]=Be.useState(!1),[i,s]=Be.useState(()=>{const R=new Date;return R.setHours(0,0,0,0),{start:R.toISOString(),end:R.toISOString()}}),a=i.start,c=i.end,u=R=>s(P=>({...P,start:R})),d=R=>s(P=>({...P,end:R})),{logs:h,isLoading:m}=lh({startDate:i.start?i.start:void 0,endDate:i.end?i.end:void 0}),v=wL(),w=(R,P,V,H)=>{v.mutate({json:R,text:P,impact:V,date:H})},S=nY(),[k,_]=Be.useState(null),O=R=>{_(R)},B=()=>{k&&(S.mutate(k),_(null))},W=z.useMemo(()=>{if(!h)return[];let R=h;return n&&(R=R.filter(P=>P.metadata?.isStarred)),R},[h,n]),L=z.useMemo(()=>W?[...W].reverse():[],[W]),q=z.useMemo(()=>{if(!L.length)return{};const R={};return L.forEach(P=>{if(!P.dateIso)return;const V=new Date(P.dateIso);if(isNaN(V.getTime()))return;const H=V.getFullYear(),Q=`Week ${Sx(V)}  ${H}`;R[Q]||(R[Q]=[]),R[Q].push(P)}),R},[L]),U=Be.useRef(null);return Be.useEffect(()=>{U.current&&!m&&U.current.scrollIntoView({behavior:"smooth"})},[W,m]),M.jsxs("div",{className:"relative h-full w-full bg-[#efefe8] dark:bg-zinc-950 overflow-hidden notebook-grid",children:[M.jsx("button",{onClick:()=>e(!t),className:jt("absolute top-6 right-6 z-40 p-2 bg-surface dark:bg-zinc-900/80 backdrop-blur-md border border-border-input dark:border-zinc-800 rounded-full text-text-secondary dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200 transition-colors shadow-lg",t&&"bg-tag-bg dark:bg-zinc-800 text-zinc-900 dark:text-zinc-200"),children:t?M.jsx(h0,{size:16}):M.jsx(sU,{size:16})}),M.jsxs("div",{className:jt("absolute top-16 right-4 md:top-4 md:right-16 z-30 flex-col gap-2 p-3 bg-surface dark:bg-zinc-900/90 backdrop-blur-md rounded-card border border-border-subtle dark:border-zinc-800/50 shadow-2xl w-64 transition-all hover:bg-gray-50 dark:hover:bg-zinc-900/60 group animate-in fade-in slide-in-from-top-2",t?"flex":"hidden"),children:[M.jsxs("div",{className:"flex items-center justify-between mb-1",children:[M.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wider group-hover:text-zinc-400 transition-colors",children:"Filters"}),M.jsxs("button",{onClick:()=>r(!n),className:jt("flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all border",n?"bg-amber-100 border-amber-200 text-amber-700 dark:bg-amber-500/20 dark:border-amber-500/30 dark:text-amber-400":"bg-white border-zinc-200 text-zinc-500 hover:text-amber-500 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"),children:[M.jsx(nI,{size:10,fill:n?"currentColor":"none"}),M.jsx("span",{children:"Starred Only"})]})]}),M.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.jsx("button",{onClick:()=>s({start:"",end:""}),className:jt("px-2 py-1.5 text-[10px] font-medium rounded-md border transition-all",!a&&!c?"bg-indigo-100 border-indigo-200 text-indigo-700 dark:bg-action-primary/20 dark:border-indigo-500/30 dark:text-indigo-300":"bg-white border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 dark:bg-zinc-800/50 dark:border-zinc-700/50 dark:text-zinc-400 dark:hover:border-zinc-600 dark:hover:text-zinc-300"),children:"All"}),M.jsx("button",{onClick:()=>{const R=new Date,P=new Date(R),V=P.getDay(),H=P.getDate()-V+(V===0?-6:1);P.setDate(H),P.setHours(0,0,0,0),s({start:P.toISOString(),end:R.toISOString()})},className:jt("px-2 py-1.5 text-[10px] font-medium rounded-md border transition-all",a&&c?"bg-indigo-100 border-indigo-200 text-indigo-700 dark:bg-action-primary/20 dark:border-indigo-500/30 dark:text-indigo-300":"bg-white border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 dark:bg-zinc-800/50 dark:border-zinc-700/50 dark:text-zinc-400 dark:hover:border-zinc-600 dark:hover:text-zinc-300"),children:"This Week"})]}),M.jsxs("div",{className:"space-y-1.5",children:[M.jsx(jE,{date:a?new Date(a):void 0,onSelect:R=>u(R?.toISOString()),placeholder:"Start",className:"w-full",buttonClassName:"w-full justify-between bg-white border-zinc-200 text-zinc-700 dark:bg-zinc-800/30 dark:border-zinc-700/50 dark:text-zinc-400 text-[10px] h-7 px-2"}),M.jsx(jE,{date:c?new Date(c):void 0,onSelect:R=>d(R?.toISOString()),placeholder:"End",className:"w-full",buttonClassName:"w-full justify-between bg-white border-zinc-200 text-zinc-700 dark:bg-zinc-800/30 dark:border-zinc-700/50 dark:text-zinc-400 text-[10px] h-7 px-2"})]})]}),M.jsxs("main",{className:"h-full flex flex-col min-w-0 bg-[#efefe8] dark:bg-zinc-950 relative notebook-grid",children:[M.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-4 py-8 md:px-8 space-y-8 flex flex-col scroll-smooth",children:[m?M.jsx("div",{className:"m-auto text-zinc-500",children:"Loading history..."}):!h||h.length===0?M.jsxs("div",{className:"m-auto text-center opacity-50",children:[M.jsx($6,{size:48,className:"mx-auto mb-4 text-zinc-600"}),M.jsx("h3",{className:"text-lg font-medium text-zinc-400",children:"No logs yet"}),M.jsx("p",{className:"text-sm text-zinc-600",children:"Start the conversation below!"})]}):Object.entries(q).map(([R,P])=>M.jsxs("div",{className:"max-w-6xl mx-auto w-full flex flex-col md:flex-row justify-center gap-4 md:gap-8 relative",children:[M.jsxs("div",{className:"hidden md:block w-24 shrink-0 text-right sticky top-4 self-start pt-2 z-10",children:[M.jsx("h3",{className:"text-[10px] font-mono font-bold text-zinc-500 uppercase tracking-widest leading-none",children:R.split("  ")[0]}),M.jsx("span",{className:"text-[10px] text-zinc-700 font-mono",children:R.split("  ")[1]})]}),M.jsxs("div",{className:"w-full max-w-2xl space-y-6 relative pb-8",children:[M.jsxs("div",{className:"md:hidden mb-4 flex items-center gap-4",children:[M.jsx("h3",{className:"text-xs font-mono font-bold text-zinc-500 uppercase tracking-widest",children:R}),M.jsx("div",{className:"h-px flex-1 bg-zinc-900"})]}),P.map(V=>M.jsx(Dj,{log:V,onDelete:O},V.id))]}),M.jsx("div",{className:"hidden md:block w-24 shrink-0"})]},R)),M.jsx("div",{ref:U,className:"h-4"})]}),M.jsx("div",{className:"hidden md:block p-4 md:p-6 border-t-2 border-dashed border-zinc-400/60 dark:border-zinc-700/60 bg-[#efefe8] dark:bg-zinc-950/80 backdrop-blur-md z-20 notebook-grid",children:M.jsx("div",{className:"max-w-2xl mx-auto",children:M.jsx(Rj,{onSave:w})})})]}),M.jsx(Xle,{isOpen:!!k,onClose:()=>_(null),onConfirm:B,title:"Delete Log",description:"Are you sure you want to delete this log entry? This action cannot be undone.",confirmText:"Delete",variant:"destructive"})]})}function Zle(){const{goals:t,isLoading:e,addGoal:n,toggleGoalStatus:r,deleteGoal:i}=iY(),[s,a]=z.useState(!1),[c,u]=z.useState({title:"",description:"",targetDate:""}),d=h=>{h.preventDefault(),c.title.trim()&&(n.mutate(c),u({title:"",description:"",targetDate:""}),a(!1))};return M.jsxs("div",{className:"p-4 md:p-8 max-w-4xl mx-auto w-full pb-32",children:[M.jsxs("div",{className:"mb-8 flex justify-between items-end",children:[M.jsxs("div",{children:[M.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Career Goals"}),M.jsx("p",{className:"text-text-secondary dark:text-zinc-400",children:"Set targets and track your growth journey."})]}),M.jsxs("button",{onClick:()=>a(!s),className:"bg-action-primary hover:bg-action-hover text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[M.jsx(tS,{size:16})," New Goal"]})]}),s&&M.jsx("div",{className:"mb-8 p-6 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900 animate-in fade-in slide-in-from-top-4",children:M.jsxs("form",{onSubmit:d,className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-xs font-medium text-zinc-500 dark:text-zinc-500 mb-1",children:"Goal Title"}),M.jsx("input",{type:"text",value:c.title,onChange:h=>u({...c,title:h.target.value}),placeholder:"e.g. Become a Senior Engineer",className:"w-full bg-white dark:bg-zinc-950 border border-border-input dark:border-zinc-800 rounded-lg p-2 text-sm text-text-primary dark:text-zinc-50 focus:outline-none focus:border-action-primary",autoFocus:!0})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-xs font-medium text-zinc-500 dark:text-zinc-500 mb-1",children:"Description (Optional)"}),M.jsx("input",{type:"text",value:c.description,onChange:h=>u({...c,description:h.target.value}),placeholder:"Success criteria...",className:"w-full bg-white dark:bg-zinc-950 border border-border-input dark:border-zinc-800 rounded-lg p-2 text-sm text-text-primary dark:text-zinc-50 focus:outline-none focus:border-action-primary"})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-xs font-medium text-zinc-500 dark:text-zinc-500 mb-1",children:"Target Date (Optional)"}),M.jsx("input",{type:"date",value:c.targetDate,onChange:h=>u({...c,targetDate:h.target.value}),className:"w-full bg-white dark:bg-zinc-950 border border-border-input dark:border-zinc-800 rounded-lg p-2 text-sm text-text-primary dark:text-zinc-50 focus:outline-none focus:border-action-primary"})]})]}),M.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[M.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-3 py-1.5 text-xs text-text-secondary dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white",children:"Cancel"}),M.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-action-primary hover:bg-action-hover text-white rounded-md text-xs font-medium",children:"Save Goal"})]})]})}),M.jsx("div",{className:"space-y-4",children:e?M.jsx("div",{children:"Loading goals..."}):!t||t.length===0?M.jsxs("div",{className:"text-center py-20 opacity-50",children:[M.jsx(nS,{size:48,className:"mx-auto mb-4 text-zinc-600"}),M.jsx("h3",{className:"text-lg font-medium text-zinc-400",children:"No active goals"}),M.jsx("p",{className:"text-sm text-zinc-600",children:"Start by setting a career objective above!"})]}):t.map(h=>M.jsxs("div",{className:jt("group flex items-start gap-4 p-5 rounded-card border transition-all",h.status==="completed"?"bg-hover-bg dark:bg-zinc-900/50 border-border-subtle dark:border-zinc-800/50 opacity-60":"bg-surface dark:bg-zinc-900 border-border-subtle dark:border-zinc-800 hover:border-gray-300 dark:hover:border-zinc-700"),children:[M.jsx("button",{onClick:()=>r.mutate({id:h.id,status:h.status==="active"?"completed":"active"}),className:jt("mt-1 transition-colors",h.status==="completed"?"text-emerald-500":"text-zinc-600 hover:text-zinc-400"),children:h.status==="completed"?M.jsx(JD,{size:20}):M.jsx(H6,{size:20})}),M.jsxs("div",{className:"flex-1",children:[M.jsx("h3",{className:jt("text-lg font-medium",h.status==="completed"&&"line-through text-zinc-500"),children:h.title}),h.description&&M.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:h.description}),M.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-zinc-500 font-mono",children:[h.targetDate&&M.jsxs("span",{className:"flex items-center gap-1",children:[M.jsx(QD,{size:12})," Target: ",h.targetDate]}),M.jsxs("span",{children:["Created: ",new Date(h.createdAt).toLocaleDateString()]})]})]}),M.jsx("button",{onClick:()=>confirm("Delete this goal?")&&i.mutate(h.id),className:"opacity-0 group-hover:opacity-100 p-2 text-zinc-600 hover:text-red-400 transition-all",children:M.jsx(d0,{size:16})})]},h.id))})]})}function ece(){return M.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4 space-y-6 animate-in fade-in duration-500",children:[M.jsxs("div",{children:[M.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:"Knowledge Bank"}),M.jsx("p",{className:"text-text-secondary dark:text-zinc-400 text-sm",children:"Your accumulated skills and learnings over time."})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[M.jsx("div",{className:"bg-transparent border-0 rounded-card p-1 md:col-span-2",children:M.jsx(Nj,{})}),M.jsx("div",{className:"border border-dashed border-border-input dark:border-zinc-800 rounded-card p-8 text-center text-zinc-400 dark:text-zinc-500 text-sm",children:"Bookmarks feature coming soon..."}),M.jsx("div",{className:"border border-dashed border-border-input dark:border-zinc-800 rounded-card p-8 text-center text-zinc-400 dark:text-zinc-500 text-sm",children:"Learning Resources feature coming soon..."})]})]})}class Ij{constructor(e){this.userId=e,this.unsubscribe=null}start(){if(!this.userId)return;this.pullRemoteChanges();const e=GG(DG(pv,"users",this.userId,"logs"));this.unsubscribe=ZG(e,n=>{n.docChanges().forEach(r=>{if(r.type==="added"||r.type==="modified"){const i=r.doc.data();this.mergeToLocal(i)}})})}stop(){this.unsubscribe&&this.unsubscribe()}async pushLog(e){if(!(!this.userId||!e.id))try{const n=IG(pv,"users",this.userId,"logs",e.id);await JG(n,{...e,updatedAt:Rn.now()},{merge:!0}),await sn.logs.update(e.id,{"syncState.isSynced":!0}),console.log(`Pushed log ${e.id} to cloud`)}catch(n){console.error("Sync Push Error",n)}}async pullRemoteChanges(){}async mergeToLocal(e){await sn.logs.get(e.id)?await sn.logs.put({...e,syncState:{isSynced:!0}}):await sn.logs.add({...e,syncState:{isSynced:!0}})}retrySync(){this.stop(),this.start()}}const Pj=new Ij,$E=Object.freeze(Object.defineProperty({__proto__:null,SyncEngine:Ij,syncEngine:Pj},Symbol.toStringTag,{value:"Module"}));function tce(){const{user:t,syncStatus:e,isDarkMode:n,toggleDarkMode:r}=Xd(),i=async()=>{const a=await sn.logs.toArray(),c=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=`careerfly-export-${new Date().toISOString().split("T")[0]}.json`,d.click()},s=async()=>{confirm("Are you sure? This will delete ALL local data. (Cloud data remains if synced)")&&(await sn.delete(),window.location.reload())};return M.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-8 animate-in fade-in duration-500",children:[M.jsxs("div",{children:[M.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:"Settings"}),M.jsx("p",{className:"text-text-secondary dark:text-zinc-400 text-sm",children:"Manage your preferences and data."})]}),M.jsxs("section",{className:"space-y-4",children:[M.jsx("h2",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-500 uppercase tracking-wider",children:"Appearance"}),M.jsxs("div",{className:"p-4 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900/50 flex items-center justify-between gap-4",children:[M.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[M.jsx("div",{className:"p-2 bg-tag-bg dark:bg-zinc-800 rounded-lg text-text-secondary dark:text-zinc-400",children:n?M.jsx(vU,{size:18}):M.jsx(kU,{size:18})}),M.jsxs("div",{children:[M.jsx("p",{className:"text-zinc-900 dark:text-zinc-200 text-sm font-medium",children:n?"Dark Mode":"Light Mode"}),M.jsx("p",{className:"text-zinc-500 dark:text-zinc-500 text-xs",children:"Manage theme preference"})]})]}),M.jsx("button",{onClick:r,className:`w-10 h-6 rounded-full relative cursor-pointer transition-all flex-shrink-0 ${n?"bg-zinc-200":"bg-zinc-700"}`,children:M.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full transition-transform ${n?"right-1 bg-zinc-900":"left-1 bg-white"}`})})]})]}),M.jsxs("section",{className:"space-y-4",children:[M.jsx("h2",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-500 uppercase tracking-wider",children:"Data & Sync"}),M.jsxs("div",{className:"p-4 rounded-card border border-border-subtle dark:border-zinc-800 bg-surface dark:bg-zinc-900/50 space-y-4",children:[M.jsxs("div",{className:"flex items-center justify-between border-b border-border-subtle dark:border-zinc-800 pb-4",children:[M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("div",{className:"p-2 bg-amber-100 dark:bg-zinc-800 rounded-lg text-amber-600 dark:text-amber-500",children:M.jsx(Q6,{size:18})}),M.jsxs("div",{children:[M.jsx("p",{className:"text-zinc-900 dark:text-zinc-200 text-sm font-medium",children:"Sync Status"}),M.jsx("p",{className:"text-zinc-500 dark:text-zinc-500 text-xs text-nowrap",children:t?`Logged in as ${t.email} (${e})`:"Guest Mode (Local Only)"})]})]}),t&&e==="error"&&M.jsx("button",{onClick:()=>Pj.retrySync(),className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Retry"})]}),M.jsxs("button",{onClick:i,className:"flex w-full items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-zinc-800/50 rounded-lg transition-colors text-left group",children:[M.jsx("div",{className:"p-2 bg-tag-bg dark:bg-zinc-800 rounded-lg text-text-secondary dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-200 group-hover:bg-gray-200 dark:group-hover:bg-zinc-700",children:M.jsx(J6,{size:18})}),M.jsxs("div",{children:[M.jsx("p",{className:"text-zinc-900 dark:text-zinc-200 text-sm font-medium",children:"Export Data"}),M.jsx("p",{className:"text-zinc-500 dark:text-zinc-500 text-xs",children:"Download all logs as JSON"})]})]}),M.jsxs("button",{onClick:s,className:"flex w-full items-center gap-3 p-2 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg transition-colors text-left group",children:[M.jsx("div",{className:"p-2 bg-red-100 dark:bg-zinc-800 rounded-lg text-red-500 dark:text-red-400 group-hover:bg-red-200 dark:group-hover:bg-red-900/20",children:M.jsx(d0,{size:18})}),M.jsxs("div",{children:[M.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm font-medium",children:"Delete All Data"}),M.jsx("p",{className:"text-zinc-500 dark:text-zinc-500 text-xs",children:"Irreversible local wipe"})]})]})]})]}),M.jsx("div",{className:"text-center pt-8",children:M.jsx("p",{className:"text-xs text-zinc-600",children:"CareerFly v2.5"})})]})}const nce=new g6;function rce(){const{isDarkMode:t}=Xd();return z.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),M.jsx(y6,{client:nce,children:M.jsx(NB,{children:M.jsx("div",{className:"min-h-screen w-full bg-canvas dark:bg-zinc-950 text-text-primary dark:text-zinc-50 font-sans selection:bg-action-primary/10 relative",children:M.jsx(lB,{children:M.jsxs(mc,{element:M.jsx(Hle,{}),children:[M.jsx(mc,{path:"/",element:M.jsx(yD,{})}),M.jsx(mc,{path:"/timeline",element:M.jsx(Jle,{})}),M.jsx(mc,{path:"/dashboard",element:M.jsx(yD,{})}),M.jsx(mc,{path:"/goals",element:M.jsx(Zle,{})}),M.jsx(mc,{path:"/knowledge",element:M.jsx(ece,{})}),M.jsx(mc,{path:"/settings",element:M.jsx(tce,{})})]})})})})})}l5.createRoot(document.getElementById("root")).render(M.jsx(z.StrictMode,{children:M.jsx(rce,{})}));
